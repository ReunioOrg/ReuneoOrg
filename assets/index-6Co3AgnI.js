(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&f(w)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function f(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sd={exports:{}},ba={},od={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function Qx(){if(q0)return Ot;q0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.iterator;function R(W){return W===null||typeof W!="object"?null:(W=I&&W[I]||W["@@iterator"],typeof W=="function"?W:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(W,Y,ye){this.props=W,this.context=Y,this.refs=B,this.updater=ye||M}j.prototype.isReactComponent={},j.prototype.setState=function(W,Y){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Y,"setState")},j.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function V(){}V.prototype=j.prototype;function U(W,Y,ye){this.props=W,this.context=Y,this.refs=B,this.updater=ye||M}var F=U.prototype=new V;F.constructor=U,L(F,j.prototype),F.isPureReactComponent=!0;var Q=Array.isArray,ne=Object.prototype.hasOwnProperty,te={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ce(W,Y,ye){var we,Ce={},ae=null,Ne=null;if(Y!=null)for(we in Y.ref!==void 0&&(Ne=Y.ref),Y.key!==void 0&&(ae=""+Y.key),Y)ne.call(Y,we)&&!q.hasOwnProperty(we)&&(Ce[we]=Y[we]);var Ee=arguments.length-2;if(Ee===1)Ce.children=ye;else if(1<Ee){for(var ze=Array(Ee),De=0;De<Ee;De++)ze[De]=arguments[De+2];Ce.children=ze}if(W&&W.defaultProps)for(we in Ee=W.defaultProps,Ee)Ce[we]===void 0&&(Ce[we]=Ee[we]);return{$$typeof:r,type:W,key:ae,ref:Ne,props:Ce,_owner:te.current}}function K(W,Y){return{$$typeof:r,type:W.type,key:Y,ref:W.ref,props:W.props,_owner:W._owner}}function Te(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function Be(W){var Y={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ye){return Y[ye]})}var Ie=/\/+/g;function Le(W,Y){return typeof W=="object"&&W!==null&&W.key!=null?Be(""+W.key):Y.toString(36)}function be(W,Y,ye,we,Ce){var ae=typeof W;(ae==="undefined"||ae==="boolean")&&(W=null);var Ne=!1;if(W===null)Ne=!0;else switch(ae){case"string":case"number":Ne=!0;break;case"object":switch(W.$$typeof){case r:case o:Ne=!0}}if(Ne)return Ne=W,Ce=Ce(Ne),W=we===""?"."+Le(Ne,0):we,Q(Ce)?(ye="",W!=null&&(ye=W.replace(Ie,"$&/")+"/"),be(Ce,Y,ye,"",function(De){return De})):Ce!=null&&(Te(Ce)&&(Ce=K(Ce,ye+(!Ce.key||Ne&&Ne.key===Ce.key?"":(""+Ce.key).replace(Ie,"$&/")+"/")+W)),Y.push(Ce)),1;if(Ne=0,we=we===""?".":we+":",Q(W))for(var Ee=0;Ee<W.length;Ee++){ae=W[Ee];var ze=we+Le(ae,Ee);Ne+=be(ae,Y,ye,ze,Ce)}else if(ze=R(W),typeof ze=="function")for(W=ze.call(W),Ee=0;!(ae=W.next()).done;)ae=ae.value,ze=we+Le(ae,Ee++),Ne+=be(ae,Y,ye,ze,Ce);else if(ae==="object")throw Y=String(W),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ne}function J(W,Y,ye){if(W==null)return W;var we=[],Ce=0;return be(W,we,"","",function(ae){return Y.call(ye,ae,Ce++)}),we}function Fe(W){if(W._status===-1){var Y=W._result;Y=Y(),Y.then(function(ye){(W._status===0||W._status===-1)&&(W._status=1,W._result=ye)},function(ye){(W._status===0||W._status===-1)&&(W._status=2,W._result=ye)}),W._status===-1&&(W._status=0,W._result=Y)}if(W._status===1)return W._result.default;throw W._result}var pe={current:null},me={transition:null},Ve={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:me,ReactCurrentOwner:te};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Ot.Children={map:J,forEach:function(W,Y,ye){J(W,function(){Y.apply(this,arguments)},ye)},count:function(W){var Y=0;return J(W,function(){Y++}),Y},toArray:function(W){return J(W,function(Y){return Y})||[]},only:function(W){if(!Te(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Ot.Component=j,Ot.Fragment=a,Ot.Profiler=p,Ot.PureComponent=U,Ot.StrictMode=f,Ot.Suspense=v,Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ve,Ot.act=ue,Ot.cloneElement=function(W,Y,ye){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var we=L({},W.props),Ce=W.key,ae=W.ref,Ne=W._owner;if(Y!=null){if(Y.ref!==void 0&&(ae=Y.ref,Ne=te.current),Y.key!==void 0&&(Ce=""+Y.key),W.type&&W.type.defaultProps)var Ee=W.type.defaultProps;for(ze in Y)ne.call(Y,ze)&&!q.hasOwnProperty(ze)&&(we[ze]=Y[ze]===void 0&&Ee!==void 0?Ee[ze]:Y[ze])}var ze=arguments.length-2;if(ze===1)we.children=ye;else if(1<ze){Ee=Array(ze);for(var De=0;De<ze;De++)Ee[De]=arguments[De+2];we.children=Ee}return{$$typeof:r,type:W.type,key:Ce,ref:ae,props:we,_owner:Ne}},Ot.createContext=function(W){return W={$$typeof:w,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:x,_context:W},W.Consumer=W},Ot.createElement=ce,Ot.createFactory=function(W){var Y=ce.bind(null,W);return Y.type=W,Y},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(W){return{$$typeof:S,render:W}},Ot.isValidElement=Te,Ot.lazy=function(W){return{$$typeof:A,_payload:{_status:-1,_result:W},_init:Fe}},Ot.memo=function(W,Y){return{$$typeof:E,type:W,compare:Y===void 0?null:Y}},Ot.startTransition=function(W){var Y=me.transition;me.transition={};try{W()}finally{me.transition=Y}},Ot.unstable_act=ue,Ot.useCallback=function(W,Y){return pe.current.useCallback(W,Y)},Ot.useContext=function(W){return pe.current.useContext(W)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(W){return pe.current.useDeferredValue(W)},Ot.useEffect=function(W,Y){return pe.current.useEffect(W,Y)},Ot.useId=function(){return pe.current.useId()},Ot.useImperativeHandle=function(W,Y,ye){return pe.current.useImperativeHandle(W,Y,ye)},Ot.useInsertionEffect=function(W,Y){return pe.current.useInsertionEffect(W,Y)},Ot.useLayoutEffect=function(W,Y){return pe.current.useLayoutEffect(W,Y)},Ot.useMemo=function(W,Y){return pe.current.useMemo(W,Y)},Ot.useReducer=function(W,Y,ye){return pe.current.useReducer(W,Y,ye)},Ot.useRef=function(W){return pe.current.useRef(W)},Ot.useState=function(W){return pe.current.useState(W)},Ot.useSyncExternalStore=function(W,Y,ye){return pe.current.useSyncExternalStore(W,Y,ye)},Ot.useTransition=function(){return pe.current.useTransition()},Ot.version="18.3.1",Ot}var Q0;function ff(){return Q0||(Q0=1,od.exports=Qx()),od.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function Jx(){if(J0)return ba;J0=1;var r=ff(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function w(S,v,E){var A,I={},R=null,M=null;E!==void 0&&(R=""+E),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(M=v.ref);for(A in v)f.call(v,A)&&!x.hasOwnProperty(A)&&(I[A]=v[A]);if(S&&S.defaultProps)for(A in v=S.defaultProps,v)I[A]===void 0&&(I[A]=v[A]);return{$$typeof:o,type:S,key:R,ref:M,props:I,_owner:p.current}}return ba.Fragment=a,ba.jsx=w,ba.jsxs=w,ba}var e1;function e2(){return e1||(e1=1,sd.exports=Jx()),sd.exports}var y=e2(),N=ff();const nn=Yp(N);var ec={},ad={exports:{}},Ar={},ld={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function t2(){return t1||(t1=1,function(r){function o(me,Ve){var ue=me.length;me.push(Ve);e:for(;0<ue;){var W=ue-1>>>1,Y=me[W];if(0<p(Y,Ve))me[W]=Ve,me[ue]=Y,ue=W;else break e}}function a(me){return me.length===0?null:me[0]}function f(me){if(me.length===0)return null;var Ve=me[0],ue=me.pop();if(ue!==Ve){me[0]=ue;e:for(var W=0,Y=me.length,ye=Y>>>1;W<ye;){var we=2*(W+1)-1,Ce=me[we],ae=we+1,Ne=me[ae];if(0>p(Ce,ue))ae<Y&&0>p(Ne,Ce)?(me[W]=Ne,me[ae]=ue,W=ae):(me[W]=Ce,me[we]=ue,W=we);else if(ae<Y&&0>p(Ne,ue))me[W]=Ne,me[ae]=ue,W=ae;else break e}}return Ve}function p(me,Ve){var ue=me.sortIndex-Ve.sortIndex;return ue!==0?ue:me.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var w=Date,S=w.now();r.unstable_now=function(){return w.now()-S}}var v=[],E=[],A=1,I=null,R=3,M=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(me){for(var Ve=a(E);Ve!==null;){if(Ve.callback===null)f(E);else if(Ve.startTime<=me)f(E),Ve.sortIndex=Ve.expirationTime,o(v,Ve);else break;Ve=a(E)}}function Q(me){if(B=!1,F(me),!L)if(a(v)!==null)L=!0,Fe(ne);else{var Ve=a(E);Ve!==null&&pe(Q,Ve.startTime-me)}}function ne(me,Ve){L=!1,B&&(B=!1,V(ce),ce=-1),M=!0;var ue=R;try{for(F(Ve),I=a(v);I!==null&&(!(I.expirationTime>Ve)||me&&!Be());){var W=I.callback;if(typeof W=="function"){I.callback=null,R=I.priorityLevel;var Y=W(I.expirationTime<=Ve);Ve=r.unstable_now(),typeof Y=="function"?I.callback=Y:I===a(v)&&f(v),F(Ve)}else f(v);I=a(v)}if(I!==null)var ye=!0;else{var we=a(E);we!==null&&pe(Q,we.startTime-Ve),ye=!1}return ye}finally{I=null,R=ue,M=!1}}var te=!1,q=null,ce=-1,K=5,Te=-1;function Be(){return!(r.unstable_now()-Te<K)}function Ie(){if(q!==null){var me=r.unstable_now();Te=me;var Ve=!0;try{Ve=q(!0,me)}finally{Ve?Le():(te=!1,q=null)}}else te=!1}var Le;if(typeof U=="function")Le=function(){U(Ie)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,J=be.port2;be.port1.onmessage=Ie,Le=function(){J.postMessage(null)}}else Le=function(){j(Ie,0)};function Fe(me){q=me,te||(te=!0,Le())}function pe(me,Ve){ce=j(function(){me(r.unstable_now())},Ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(me){me.callback=null},r.unstable_continueExecution=function(){L||M||(L=!0,Fe(ne))},r.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<me?Math.floor(1e3/me):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(v)},r.unstable_next=function(me){switch(R){case 1:case 2:case 3:var Ve=3;break;default:Ve=R}var ue=R;R=Ve;try{return me()}finally{R=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(me,Ve){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var ue=R;R=me;try{return Ve()}finally{R=ue}},r.unstable_scheduleCallback=function(me,Ve,ue){var W=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?W+ue:W):ue=W,me){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ue+Y,me={id:A++,callback:Ve,priorityLevel:me,startTime:ue,expirationTime:Y,sortIndex:-1},ue>W?(me.sortIndex=ue,o(E,me),a(v)===null&&me===a(E)&&(B?(V(ce),ce=-1):B=!0,pe(Q,ue-W))):(me.sortIndex=Y,o(v,me),L||M||(L=!0,Fe(ne))),me},r.unstable_shouldYield=Be,r.unstable_wrapCallback=function(me){var Ve=R;return function(){var ue=R;R=Ve;try{return me.apply(this,arguments)}finally{R=ue}}}}(cd)),cd}var n1;function n2(){return n1||(n1=1,ld.exports=t2()),ld.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function r2(){if(r1)return Ar;r1=1;var r=ff(),o=n2();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function x(t,s){w(t,s),w(t+"Capture",s)}function w(t,s){for(p[t]=s,t=0;t<s.length;t++)f.add(s[t])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},I={};function R(t){return v.call(I,t)?!0:v.call(A,t)?!1:E.test(t)?I[t]=!0:(A[t]=!0,!1)}function M(t,s,d,m){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,d,m){if(s===null||typeof s>"u"||M(t,s,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,d,m,b,T,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=T,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function U(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(V,U);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(V,U);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(V,U);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function F(t,s,d,m){var b=j.hasOwnProperty(s)?j[s]:null;(b!==null?b.type!==0:m||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,d,b,m)&&(d=null),m||b===null?R(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):b.mustUseProperty?t[b.propertyName]=d===null?b.type===3?!1:"":d:(s=b.attributeName,m=b.attributeNamespace,d===null?t.removeAttribute(s):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,m?t.setAttributeNS(m,s,d):t.setAttribute(s,d))))}var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),te=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),Be=Symbol.for("react.context"),Ie=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),me=Symbol.iterator;function Ve(t){return t===null||typeof t!="object"?null:(t=me&&t[me]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,W;function Y(t){if(W===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);W=s&&s[1]||""}return`
`+W+t}var ye=!1;function we(t,s){if(!t||ye)return"";ye=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(he){var m=he}Reflect.construct(t,[],s)}else{try{s.call()}catch(he){m=he}t.call(s.prototype)}else{try{throw Error()}catch(he){m=he}t()}}catch(he){if(he&&m&&typeof he.stack=="string"){for(var b=he.stack.split(`
`),T=m.stack.split(`
`),O=b.length-1,G=T.length-1;1<=O&&0<=G&&b[O]!==T[G];)G--;for(;1<=O&&0<=G;O--,G--)if(b[O]!==T[G]){if(O!==1||G!==1)do if(O--,G--,0>G||b[O]!==T[G]){var $=`
`+b[O].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=O&&0<=G);break}}}finally{ye=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?Y(t):""}function Ce(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=we(t.type,!1),t;case 11:return t=we(t.type.render,!1),t;case 1:return t=we(t.type,!0),t;default:return""}}function ae(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case te:return"Portal";case K:return"Profiler";case ce:return"StrictMode";case Le:return"Suspense";case be:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Be:return(t.displayName||"Context")+".Consumer";case Te:return(t._context.displayName||"Context")+".Provider";case Ie:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return s=t.displayName||null,s!==null?s:ae(t.type)||"Memo";case Fe:s=t._payload,t=t._init;try{return ae(t(s))}catch{}}return null}function Ne(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ee(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ze(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function De(t){var s=ze(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),m=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,T=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return b.call(this)},set:function(O){m=""+O,T.call(this,O)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function qe(t){t._valueTracker||(t._valueTracker=De(t))}function oe(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),m="";return t&&(m=ze(t)?t.checked?"true":"false":t.value),t=m,t!==d?(s.setValue(t),!0):!1}function xe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function He(t,s){var d=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function pt(t,s){var d=s.defaultValue==null?"":s.defaultValue,m=s.checked!=null?s.checked:s.defaultChecked;d=Ee(s.value!=null?s.value:d),t._wrapperState={initialChecked:m,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Mt(t,s){s=s.checked,s!=null&&F(t,"checked",s,!1)}function mt(t,s){Mt(t,s);var d=Ee(s.value),m=s.type;if(d!=null)m==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?et(t,s.type,d):s.hasOwnProperty("defaultValue")&&et(t,s.type,Ee(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Je(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var m=s.type;if(!(m!=="submit"&&m!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function et(t,s,d){(s!=="number"||xe(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var Rt=Array.isArray;function Pe(t,s,d,m){if(t=t.options,s){s={};for(var b=0;b<d.length;b++)s["$"+d[b]]=!0;for(d=0;d<t.length;d++)b=s.hasOwnProperty("$"+t[d].value),t[d].selected!==b&&(t[d].selected=b),b&&m&&(t[d].defaultSelected=!0)}else{for(d=""+Ee(d),s=null,b=0;b<t.length;b++){if(t[b].value===d){t[b].selected=!0,m&&(t[b].defaultSelected=!0);return}s!==null||t[b].disabled||(s=t[b])}s!==null&&(s.selected=!0)}}function mn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jt(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(Rt(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:Ee(d)}}function We(t,s){var d=Ee(s.value),m=Ee(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),m!=null&&(t.defaultValue=""+m)}function xt(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function At(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?At(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tt,Ht=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,m,b){MSApp.execUnsafeLocalFunction(function(){return t(s,d,m,b)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(tt=tt||document.createElement("div"),tt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=tt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Nt(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var $e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys($e).forEach(function(t){lt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),$e[s]=$e[t]})});function Re(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||$e.hasOwnProperty(t)&&$e[t]?(""+s).trim():s+"px"}function ge(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=Re(d,s[d],m);d==="float"&&(d="cssFloat"),m?t.setProperty(d,b):t[d]=b}}var it=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(t,s){if(s){if(it[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function yt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function En(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ln=null,ot=null,rn=null;function Ss(t){if(t=la(t)){if(typeof ln!="function")throw Error(a(280));var s=t.stateNode;s&&(s=pl(s),ln(t.stateNode,t.type,s))}}function Wi(t){ot?rn?rn.push(t):rn=[t]:ot=t}function nr(){if(ot){var t=ot,s=rn;if(rn=ot=null,Ss(t),s)for(t=0;t<s.length;t++)Ss(s[t])}}function Hi(t,s){return t(s)}function cn(){}var Lr=!1;function ai(t,s,d){if(Lr)return t(s,d);Lr=!0;try{return Hi(t,s,d)}finally{Lr=!1,(ot!==null||rn!==null)&&(cn(),nr())}}function Nn(t,s){var d=t.stateNode;if(d===null)return null;var m=pl(d);if(m===null)return null;d=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var Gi=!1;if(S)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{Gi=!1}function li(t,s,d,m,b,T,O,G,$){var he=Array.prototype.slice.call(arguments,3);try{s.apply(d,he)}catch(_e){this.onError(_e)}}var gn=!1,hr=null,kn=!1,Ge=null,ci={onError:function(t){gn=!0,hr=t}};function Xi(t,s,d,m,b,T,O,G,$){gn=!1,hr=null,li.apply(ci,arguments)}function Vn(t,s,d,m,b,T,O,G,$){if(Xi.apply(this,arguments),gn){if(gn){var he=hr;gn=!1,hr=null}else throw Error(a(198));kn||(kn=!0,Ge=he)}}function rr(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function Zr(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function bi(t){if(rr(t)!==t)throw Error(a(188))}function ir(t){var s=t.alternate;if(!s){if(s=rr(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,m=s;;){var b=d.return;if(b===null)break;var T=b.alternate;if(T===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===d)return bi(b),t;if(T===m)return bi(b),s;T=T.sibling}throw Error(a(188))}if(d.return!==m.return)d=b,m=T;else{for(var O=!1,G=b.child;G;){if(G===d){O=!0,d=b,m=T;break}if(G===m){O=!0,m=b,d=T;break}G=G.sibling}if(!O){for(G=T.child;G;){if(G===d){O=!0,d=T,m=b;break}if(G===m){O=!0,m=T,d=b;break}G=G.sibling}if(!O)throw Error(a(189))}}if(d.alternate!==m)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function Xe(t){return t=ir(t),t!==null?bt(t):null}function bt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=bt(t);if(s!==null)return s;t=t.sibling}return null}var ct=o.unstable_scheduleCallback,_t=o.unstable_cancelCallback,Ue=o.unstable_shouldYield,Yn=o.unstable_requestPaint,zt=o.unstable_now,As=o.unstable_getCurrentPriorityLevel,ve=o.unstable_ImmediatePriority,wr=o.unstable_UserBlockingPriority,jt=o.unstable_NormalPriority,Si=o.unstable_LowPriority,Yi=o.unstable_IdlePriority,Pt=null,Tt=null;function Dt(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Pt,t,void 0,(t.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:bn,Wo=Math.log,Ho=Math.LN2;function bn(t){return t>>>=0,t===0?32:31-(Wo(t)/Ho|0)|0}var Ir=64,no=4194304;function Zt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nr(t,s){var d=t.pendingLanes;if(d===0)return 0;var m=0,b=t.suspendedLanes,T=t.pingedLanes,O=d&268435455;if(O!==0){var G=O&~b;G!==0?m=Zt(G):(T&=O,T!==0&&(m=Zt(T)))}else O=d&~b,O!==0?m=Zt(O):T!==0&&(m=Zt(T));if(m===0)return 0;if(s!==0&&s!==m&&!(s&b)&&(b=m&-m,T=s&-s,b>=T||b===16&&(T&4194240)!==0))return s;if(m&4&&(m|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=m;0<s;)d=31-pr(s),b=1<<d,m|=t[d],s&=~b;return m}function Fc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(t,s){for(var d=t.suspendedLanes,m=t.pingedLanes,b=t.expirationTimes,T=t.pendingLanes;0<T;){var O=31-pr(T),G=1<<O,$=b[O];$===-1?(!(G&d)||G&m)&&(b[O]=Fc(G,s)):$<=s&&(t.expiredLanes|=G),T&=~G}}function Gt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pn(){var t=Ir;return Ir<<=1,!(Ir&4194240)&&(Ir=64),t}function ie(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function z(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-pr(s),t[s]=d}function st(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<d;){var b=31-pr(d),T=1<<b;s[b]=0,m[b]=-1,t[b]=-1,d&=~T}}function xn(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var m=31-pr(d),b=1<<m;b&s|t[m]&s&&(t[m]|=s),d&=~b}}var It=0;function Qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ro,sr,at,Kt,Go,Xo=!1,Zi=[],_r=null,Br=null,ui=null,sn=new Map,Kr=new Map,$n=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(t,s){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":sn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(s.pointerId)}}function vt(t,s,d,m,b,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[b]},s!==null&&(s=la(s),s!==null&&sr(s)),t):(t.eventSystemFlags|=m,s=t.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),t)}function On(t,s,d,m,b){switch(s){case"focusin":return _r=vt(_r,t,s,d,m,b),!0;case"dragenter":return Br=vt(Br,t,s,d,m,b),!0;case"mouseover":return ui=vt(ui,t,s,d,m,b),!0;case"pointerover":var T=b.pointerId;return sn.set(T,vt(sn.get(T)||null,t,s,d,m,b)),!0;case"gotpointercapture":return T=b.pointerId,Kr.set(T,vt(Kr.get(T)||null,t,s,d,m,b)),!0}return!1}function el(t){var s=Ds(t.target);if(s!==null){var d=rr(s);if(d!==null){if(s=d.tag,s===13){if(s=Zr(d),s!==null){t.blockedOn=s,Go(t.priority,function(){at(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ki(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=io(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var m=new d.constructor(d.type,d);Xt=m,d.target.dispatchEvent(m),Xt=null}else return s=la(d),s!==null&&sr(s),t.blockedOn=d,!1;s.shift()}return!0}function Yo(t,s,d){Ki(t)&&d.delete(s)}function Ai(){Xo=!1,_r!==null&&Ki(_r)&&(_r=null),Br!==null&&Ki(Br)&&(Br=null),ui!==null&&Ki(ui)&&(ui=null),sn.forEach(Yo),Kr.forEach(Yo)}function Ts(t,s){t.blockedOn===s&&(t.blockedOn=null,Xo||(Xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ai)))}function qr(t){function s(b){return Ts(b,t)}if(0<Zi.length){Ts(Zi[0],t);for(var d=1;d<Zi.length;d++){var m=Zi[d];m.blockedOn===t&&(m.blockedOn=null)}}for(_r!==null&&Ts(_r,t),Br!==null&&Ts(Br,t),ui!==null&&Ts(ui,t),sn.forEach(s),Kr.forEach(s),d=0;d<$n.length;d++)m=$n[d],m.blockedOn===t&&(m.blockedOn=null);for(;0<$n.length&&(d=$n[0],d.blockedOn===null);)el(d),d.blockedOn===null&&$n.shift()}var jr=Q.ReactCurrentBatchConfig,di=!0;function tl(t,s,d,m){var b=It,T=jr.transition;jr.transition=null;try{It=1,Ti(t,s,d,m)}finally{It=b,jr.transition=T}}function Is(t,s,d,m){var b=It,T=jr.transition;jr.transition=null;try{It=4,Ti(t,s,d,m)}finally{It=b,jr.transition=T}}function Ti(t,s,d,m){if(di){var b=io(t,s,d,m);if(b===null)Zc(t,s,m,Mn,d),Ja(t,m);else if(On(b,t,s,d,m))m.stopPropagation();else if(Ja(t,m),s&4&&-1<ht.indexOf(t)){for(;b!==null;){var T=la(b);if(T!==null&&ro(T),T=io(t,s,d,m),T===null&&Zc(t,s,m,Mn,d),T===b)break;b=T}b!==null&&m.stopPropagation()}else Zc(t,s,m,null,d)}}var Mn=null;function io(t,s,d,m){if(Mn=null,t=En(m),t=Ds(t),t!==null)if(s=rr(t),s===null)t=null;else if(d=s.tag,d===13){if(t=Zr(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Mn=t,null}function $o(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(As()){case ve:return 1;case wr:return 4;case jt:case Si:return 16;case Yi:return 536870912;default:return 16}default:return 16}}var Qr=null,Zo=null,so=null;function nl(){if(so)return so;var t,s=Zo,d=s.length,m,b="value"in Qr?Qr.value:Qr.textContent,T=b.length;for(t=0;t<d&&s[t]===b[t];t++);var O=d-t;for(m=1;m<=O&&s[d-m]===b[T-m];m++);return so=b.slice(t,1<m?1-m:void 0)}function Ft(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function _s(){return!1}function yn(t){function s(d,m,b,T,O){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var G in t)t.hasOwnProperty(G)&&(d=t[G],this[G]=d?d(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ns:_s,this.isPropagationStopped=_s,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fe=yn(qi),St=ue({},qi,{view:0,detail:0}),Dn=yn(St),Qi,oo,Rs,ao=ue({},St,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(Qi=t.screenX-Rs.screenX,oo=t.screenY-Rs.screenY):oo=Qi=0,Rs=t),Qi)},movementY:function(t){return"movementY"in t?t.movementY:oo}}),rl=yn(ao),Ko=ue({},ao,{dataTransfer:0}),Sn=yn(Ko),qo=ue({},St,{relatedTarget:0}),qt=yn(qo),lo=ue({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ii=yn(lo),Yt=ue({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ut=yn(Yt),Vc=ue({},qi,{data:0}),$t=yn(Vc),Ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=zc[t])?!!s[t]:!1}function ks(){return Fr}var il=ue({},St,{key:function(t){if(t.key){var s=Ni[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ft(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ji[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(t){return t.type==="keypress"?Ft(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ft(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qo=yn(il),sl=ue({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=yn(sl),Uc=ue({},St,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),es=yn(Uc),ea=ue({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wc=yn(ea),Ps=ue({},ao,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hc=yn(Ps),fi=[9,13,27,32],ts=S&&"CompositionEvent"in window,zn=null;S&&"documentMode"in document&&(zn=document.documentMode);var ol=S&&"TextEvent"in window&&!zn,Rr=S&&(!ts||zn&&8<zn&&11>=zn),al=" ",co=!1;function ll(t,s){switch(t){case"keyup":return fi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zn=!1;function Gc(t,s){switch(t){case"compositionend":return ta(s);case"keypress":return s.which!==32?null:(co=!0,al);case"textInput":return t=s.data,t===al&&co?null:t;default:return null}}function na(t,s){if(Zn)return t==="compositionend"||!ts&&ll(t,s)?(t=nl(),so=Zo=Qr=null,Zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Rr&&s.locale!=="ko"?null:s.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Os[t.type]:s==="textarea"}function Ms(t,s,d,m){Wi(m),s=dl(s,"onChange"),0<s.length&&(d=new fe("onChange","change",null,d,m),t.push({event:d,listeners:s}))}var k=null,e=null;function n(t){hh(t,0)}function i(t){var s=ho(t);if(oe(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(S){var u;if(S){var h="oninput"in document;if(!h){var g=document.createElement("div");g.setAttribute("oninput","return;"),h=typeof g.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function C(){k&&(k.detachEvent("onpropertychange",_),e=k=null)}function _(t){if(t.propertyName==="value"&&i(e)){var s=[];Ms(s,e,t,En(t)),ai(n,s)}}function P(t,s,d){t==="focusin"?(C(),k=s,e=d,k.attachEvent("onpropertychange",_)):t==="focusout"&&C()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function H(t,s){if(t==="click")return i(s)}function X(t,s){if(t==="input"||t==="change")return i(s)}function Z(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var re=typeof Object.is=="function"?Object.is:Z;function de(t,s){if(re(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),m=Object.keys(s);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!v.call(s,b)||!re(t[b],s[b]))return!1}return!0}function Oe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Me(t,s){var d=Oe(t);t=0;for(var m;d;){if(d.nodeType===3){if(m=t+d.textContent.length,t<=s&&m>=s)return{node:d,offset:s-t};t=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Oe(d)}}function Ae(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ae(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function kt(){for(var t=window,s=xe();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=xe(t.document)}return s}function Ct(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function or(t){var s=kt(),d=t.focusedElem,m=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ae(d.ownerDocument.documentElement,d)){if(m!==null&&Ct(d)){if(s=m.start,t=m.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var b=d.textContent.length,T=Math.min(m.start,b);m=m.end===void 0?T:Math.min(m.end,b),!t.extend&&T>m&&(b=m,m=T,T=b),b=Me(d,T);var O=Me(d,m);b&&O&&(t.rangeCount!==1||t.anchorNode!==b.node||t.anchorOffset!==b.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),t.removeAllRanges(),T>m?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kr=S&&"documentMode"in document&&11>=document.documentMode,An=null,Wt=null,un=null,Kn=!1;function _i(t,s,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Kn||An==null||An!==xe(m)||(m=An,"selectionStart"in m&&Ct(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),un&&de(un,m)||(un=m,m=dl(Wt,"onSelect"),0<m.length&&(s=new fe("onSelect","select",null,s,d),t.push({event:s,listeners:m}),s.target=An)))}function Jr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var ns={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionend:Jr("Transition","TransitionEnd")},ra={},sh={};S&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function cl(t){if(ra[t])return ra[t];if(!ns[t])return t;var s=ns[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in sh)return ra[t]=s[d];return t}var oh=cl("animationend"),ah=cl("animationiteration"),lh=cl("animationstart"),ch=cl("transitionend"),uh=new Map,dh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,s){uh.set(t,s),x(s,[t])}for(var Xc=0;Xc<dh.length;Xc++){var Yc=dh[Xc],ax=Yc.toLowerCase(),lx=Yc[0].toUpperCase()+Yc.slice(1);rs(ax,"on"+lx)}rs(oh,"onAnimationEnd"),rs(ah,"onAnimationIteration"),rs(lh,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(ch,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function fh(t,s,d){var m=t.type||"unknown-event";t.currentTarget=d,Vn(m,s,void 0,t),t.currentTarget=null}function hh(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var m=t[d],b=m.event;m=m.listeners;e:{var T=void 0;if(s)for(var O=m.length-1;0<=O;O--){var G=m[O],$=G.instance,he=G.currentTarget;if(G=G.listener,$!==T&&b.isPropagationStopped())break e;fh(b,G,he),T=$}else for(O=0;O<m.length;O++){if(G=m[O],$=G.instance,he=G.currentTarget,G=G.listener,$!==T&&b.isPropagationStopped())break e;fh(b,G,he),T=$}}}if(kn)throw t=Ge,kn=!1,Ge=null,t}function en(t,s){var d=s[tu];d===void 0&&(d=s[tu]=new Set);var m=t+"__bubble";d.has(m)||(ph(s,t,2,!1),d.add(m))}function $c(t,s,d){var m=0;s&&(m|=4),ph(d,t,m,s)}var ul="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[ul]){t[ul]=!0,f.forEach(function(d){d!=="selectionchange"&&(cx.has(d)||$c(d,!1,t),$c(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ul]||(s[ul]=!0,$c("selectionchange",!1,s))}}function ph(t,s,d,m){switch($o(s)){case 1:var b=tl;break;case 4:b=Is;break;default:b=Ti}d=b.bind(null,s,d,t),b=void 0,!Gi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),m?b!==void 0?t.addEventListener(s,d,{capture:!0,passive:b}):t.addEventListener(s,d,!0):b!==void 0?t.addEventListener(s,d,{passive:b}):t.addEventListener(s,d,!1)}function Zc(t,s,d,m,b){var T=m;if(!(s&1)&&!(s&2)&&m!==null)e:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var G=m.stateNode.containerInfo;if(G===b||G.nodeType===8&&G.parentNode===b)break;if(O===4)for(O=m.return;O!==null;){var $=O.tag;if(($===3||$===4)&&($=O.stateNode.containerInfo,$===b||$.nodeType===8&&$.parentNode===b))return;O=O.return}for(;G!==null;){if(O=Ds(G),O===null)return;if($=O.tag,$===5||$===6){m=T=O;continue e}G=G.parentNode}}m=m.return}ai(function(){var he=T,_e=En(d),ke=[];e:{var Se=uh.get(t);if(Se!==void 0){var Ye=fe,Qe=t;switch(t){case"keypress":if(Ft(d)===0)break e;case"keydown":case"keyup":Ye=Qo;break;case"focusin":Qe="focus",Ye=qt;break;case"focusout":Qe="blur",Ye=qt;break;case"beforeblur":case"afterblur":Ye=qt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=es;break;case oh:case ah:case lh:Ye=Ii;break;case ch:Ye=Wc;break;case"scroll":Ye=Dn;break;case"wheel":Ye=Hc;break;case"copy":case"cut":case"paste":Ye=ut;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=Jo}var nt=(s&4)!==0,Tn=!nt&&t==="scroll",se=nt?Se!==null?Se+"Capture":null:Se;nt=[];for(var ee=he,le;ee!==null;){le=ee;var je=le.stateNode;if(le.tag===5&&je!==null&&(le=je,se!==null&&(je=Nn(ee,se),je!=null&&nt.push(oa(ee,je,le)))),Tn)break;ee=ee.return}0<nt.length&&(Se=new Ye(Se,Qe,null,d,_e),ke.push({event:Se,listeners:nt}))}}if(!(s&7)){e:{if(Se=t==="mouseover"||t==="pointerover",Ye=t==="mouseout"||t==="pointerout",Se&&d!==Xt&&(Qe=d.relatedTarget||d.fromElement)&&(Ds(Qe)||Qe[Ri]))break e;if((Ye||Se)&&(Se=_e.window===_e?_e:(Se=_e.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ye?(Qe=d.relatedTarget||d.toElement,Ye=he,Qe=Qe?Ds(Qe):null,Qe!==null&&(Tn=rr(Qe),Qe!==Tn||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(Ye=null,Qe=he),Ye!==Qe)){if(nt=rl,je="onMouseLeave",se="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(nt=Jo,je="onPointerLeave",se="onPointerEnter",ee="pointer"),Tn=Ye==null?Se:ho(Ye),le=Qe==null?Se:ho(Qe),Se=new nt(je,ee+"leave",Ye,d,_e),Se.target=Tn,Se.relatedTarget=le,je=null,Ds(_e)===he&&(nt=new nt(se,ee+"enter",Qe,d,_e),nt.target=le,nt.relatedTarget=Tn,je=nt),Tn=je,Ye&&Qe)t:{for(nt=Ye,se=Qe,ee=0,le=nt;le;le=uo(le))ee++;for(le=0,je=se;je;je=uo(je))le++;for(;0<ee-le;)nt=uo(nt),ee--;for(;0<le-ee;)se=uo(se),le--;for(;ee--;){if(nt===se||se!==null&&nt===se.alternate)break t;nt=uo(nt),se=uo(se)}nt=null}else nt=null;Ye!==null&&mh(ke,Se,Ye,nt,!1),Qe!==null&&Tn!==null&&mh(ke,Tn,Qe,nt,!0)}}e:{if(Se=he?ho(he):window,Ye=Se.nodeName&&Se.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Se.type==="file")var rt=l;else if(Bt(Se))if(c)rt=X;else{rt=D;var dt=P}else(Ye=Se.nodeName)&&Ye.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(rt=H);if(rt&&(rt=rt(t,he))){Ms(ke,rt,d,_e);break e}dt&&dt(t,Se,he),t==="focusout"&&(dt=Se._wrapperState)&&dt.controlled&&Se.type==="number"&&et(Se,"number",Se.value)}switch(dt=he?ho(he):window,t){case"focusin":(Bt(dt)||dt.contentEditable==="true")&&(An=dt,Wt=he,un=null);break;case"focusout":un=Wt=An=null;break;case"mousedown":Kn=!0;break;case"contextmenu":case"mouseup":case"dragend":Kn=!1,_i(ke,d,_e);break;case"selectionchange":if(kr)break;case"keydown":case"keyup":_i(ke,d,_e)}var ft;if(ts)e:{switch(t){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Zn?ll(t,d)&&(wt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(wt="onCompositionStart");wt&&(Rr&&d.locale!=="ko"&&(Zn||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Zn&&(ft=nl()):(Qr=_e,Zo="value"in Qr?Qr.value:Qr.textContent,Zn=!0)),dt=dl(he,wt),0<dt.length&&(wt=new $t(wt,t,null,d,_e),ke.push({event:wt,listeners:dt}),ft?wt.data=ft:(ft=ta(d),ft!==null&&(wt.data=ft)))),(ft=ol?Gc(t,d):na(t,d))&&(he=dl(he,"onBeforeInput"),0<he.length&&(_e=new $t("onBeforeInput","beforeinput",null,d,_e),ke.push({event:_e,listeners:he}),_e.data=ft))}hh(ke,s)})}function oa(t,s,d){return{instance:t,listener:s,currentTarget:d}}function dl(t,s){for(var d=s+"Capture",m=[];t!==null;){var b=t,T=b.stateNode;b.tag===5&&T!==null&&(b=T,T=Nn(t,d),T!=null&&m.unshift(oa(t,T,b)),T=Nn(t,s),T!=null&&m.push(oa(t,T,b))),t=t.return}return m}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mh(t,s,d,m,b){for(var T=s._reactName,O=[];d!==null&&d!==m;){var G=d,$=G.alternate,he=G.stateNode;if($!==null&&$===m)break;G.tag===5&&he!==null&&(G=he,b?($=Nn(d,T),$!=null&&O.unshift(oa(d,$,G))):b||($=Nn(d,T),$!=null&&O.push(oa(d,$,G)))),d=d.return}O.length!==0&&t.push({event:s,listeners:O})}var ux=/\r\n?/g,dx=/\u0000|\uFFFD/g;function gh(t){return(typeof t=="string"?t:""+t).replace(ux,`
`).replace(dx,"")}function fl(t,s,d){if(s=gh(s),gh(t)!==s&&d)throw Error(a(425))}function hl(){}var Kc=null,qc=null;function Qc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,xh=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof xh<"u"?function(t){return xh.resolve(null).then(t).catch(px)}:Jc;function px(t){setTimeout(function(){throw t})}function eu(t,s){var d=s,m=0;do{var b=d.nextSibling;if(t.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(m===0){t.removeChild(b),qr(s);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=b}while(d);qr(s)}function is(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function yh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),hi="__reactFiber$"+fo,aa="__reactProps$"+fo,Ri="__reactContainer$"+fo,tu="__reactEvents$"+fo,mx="__reactListeners$"+fo,gx="__reactHandles$"+fo;function Ds(t){var s=t[hi];if(s)return s;for(var d=t.parentNode;d;){if(s=d[Ri]||d[hi]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=yh(t);t!==null;){if(d=t[hi])return d;t=yh(t)}return s}t=d,d=t.parentNode}return null}function la(t){return t=t[hi]||t[Ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function pl(t){return t[aa]||null}var nu=[],po=-1;function ss(t){return{current:t}}function tn(t){0>po||(t.current=nu[po],nu[po]=null,po--)}function Qt(t,s){po++,nu[po]=t.current,t.current=s}var os={},ar=ss(os),vr=ss(!1),Ls=os;function mo(t,s){var d=t.type.contextTypes;if(!d)return os;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===s)return m.__reactInternalMemoizedMaskedChildContext;var b={},T;for(T in d)b[T]=s[T];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=b),b}function Cr(t){return t=t.childContextTypes,t!=null}function ml(){tn(vr),tn(ar)}function wh(t,s,d){if(ar.current!==os)throw Error(a(168));Qt(ar,s),Qt(vr,d)}function vh(t,s,d){var m=t.stateNode;if(s=s.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var b in m)if(!(b in s))throw Error(a(108,Ne(t)||"Unknown",b));return ue({},d,m)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,Ls=ar.current,Qt(ar,t),Qt(vr,vr.current),!0}function Ch(t,s,d){var m=t.stateNode;if(!m)throw Error(a(169));d?(t=vh(t,s,Ls),m.__reactInternalMemoizedMergedChildContext=t,tn(vr),tn(ar),Qt(ar,t)):tn(vr),Qt(vr,d)}var ki=null,xl=!1,ru=!1;function Eh(t){ki===null?ki=[t]:ki.push(t)}function xx(t){xl=!0,Eh(t)}function as(){if(!ru&&ki!==null){ru=!0;var t=0,s=It;try{var d=ki;for(It=1;t<d.length;t++){var m=d[t];do m=m(!0);while(m!==null)}ki=null,xl=!1}catch(b){throw ki!==null&&(ki=ki.slice(t+1)),ct(ve,as),b}finally{It=s,ru=!1}}return null}var go=[],xo=0,yl=null,wl=0,Vr=[],zr=0,Bs=null,Pi=1,Oi="";function js(t,s){go[xo++]=wl,go[xo++]=yl,yl=t,wl=s}function bh(t,s,d){Vr[zr++]=Pi,Vr[zr++]=Oi,Vr[zr++]=Bs,Bs=t;var m=Pi;t=Oi;var b=32-pr(m)-1;m&=~(1<<b),d+=1;var T=32-pr(s)+b;if(30<T){var O=b-b%5;T=(m&(1<<O)-1).toString(32),m>>=O,b-=O,Pi=1<<32-pr(s)+b|d<<b|m,Oi=T+t}else Pi=1<<T|d<<b|m,Oi=t}function iu(t){t.return!==null&&(js(t,1),bh(t,1,0))}function su(t){for(;t===yl;)yl=go[--xo],go[xo]=null,wl=go[--xo],go[xo]=null;for(;t===Bs;)Bs=Vr[--zr],Vr[zr]=null,Oi=Vr[--zr],Vr[zr]=null,Pi=Vr[--zr],Vr[zr]=null}var Pr=null,Or=null,on=!1,ei=null;function Sh(t,s){var d=Gr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function Ah(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Pr=t,Or=is(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Pr=t,Or=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=Bs!==null?{id:Pi,overflow:Oi}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Gr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,Pr=t,Or=null,!0):!1;default:return!1}}function ou(t){return(t.mode&1)!==0&&(t.flags&128)===0}function au(t){if(on){var s=Or;if(s){var d=s;if(!Ah(t,s)){if(ou(t))throw Error(a(418));s=is(d.nextSibling);var m=Pr;s&&Ah(t,s)?Sh(m,d):(t.flags=t.flags&-4097|2,on=!1,Pr=t)}}else{if(ou(t))throw Error(a(418));t.flags=t.flags&-4097|2,on=!1,Pr=t}}}function Th(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function vl(t){if(t!==Pr)return!1;if(!on)return Th(t),on=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Qc(t.type,t.memoizedProps)),s&&(s=Or)){if(ou(t))throw Ih(),Error(a(418));for(;s;)Sh(t,s),s=is(s.nextSibling)}if(Th(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){Or=is(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}Or=null}}else Or=Pr?is(t.stateNode.nextSibling):null;return!0}function Ih(){for(var t=Or;t;)t=is(t.nextSibling)}function yo(){Or=Pr=null,on=!1}function lu(t){ei===null?ei=[t]:ei.push(t)}var yx=Q.ReactCurrentBatchConfig;function ca(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var m=d.stateNode}if(!m)throw Error(a(147,t));var b=m,T=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===T?s.ref:(s=function(O){var G=b.refs;O===null?delete G[T]:G[T]=O},s._stringRef=T,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function Cl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Nh(t){var s=t._init;return s(t._payload)}function _h(t){function s(se,ee){if(t){var le=se.deletions;le===null?(se.deletions=[ee],se.flags|=16):le.push(ee)}}function d(se,ee){if(!t)return null;for(;ee!==null;)s(se,ee),ee=ee.sibling;return null}function m(se,ee){for(se=new Map;ee!==null;)ee.key!==null?se.set(ee.key,ee):se.set(ee.index,ee),ee=ee.sibling;return se}function b(se,ee){return se=ms(se,ee),se.index=0,se.sibling=null,se}function T(se,ee,le){return se.index=le,t?(le=se.alternate,le!==null?(le=le.index,le<ee?(se.flags|=2,ee):le):(se.flags|=2,ee)):(se.flags|=1048576,ee)}function O(se){return t&&se.alternate===null&&(se.flags|=2),se}function G(se,ee,le,je){return ee===null||ee.tag!==6?(ee=Ju(le,se.mode,je),ee.return=se,ee):(ee=b(ee,le),ee.return=se,ee)}function $(se,ee,le,je){var rt=le.type;return rt===q?_e(se,ee,le.props.children,je,le.key):ee!==null&&(ee.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fe&&Nh(rt)===ee.type)?(je=b(ee,le.props),je.ref=ca(se,ee,le),je.return=se,je):(je=Gl(le.type,le.key,le.props,null,se.mode,je),je.ref=ca(se,ee,le),je.return=se,je)}function he(se,ee,le,je){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=ed(le,se.mode,je),ee.return=se,ee):(ee=b(ee,le.children||[]),ee.return=se,ee)}function _e(se,ee,le,je,rt){return ee===null||ee.tag!==7?(ee=Xs(le,se.mode,je,rt),ee.return=se,ee):(ee=b(ee,le),ee.return=se,ee)}function ke(se,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Ju(""+ee,se.mode,le),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ne:return le=Gl(ee.type,ee.key,ee.props,null,se.mode,le),le.ref=ca(se,null,ee),le.return=se,le;case te:return ee=ed(ee,se.mode,le),ee.return=se,ee;case Fe:var je=ee._init;return ke(se,je(ee._payload),le)}if(Rt(ee)||Ve(ee))return ee=Xs(ee,se.mode,le,null),ee.return=se,ee;Cl(se,ee)}return null}function Se(se,ee,le,je){var rt=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return rt!==null?null:G(se,ee,""+le,je);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case ne:return le.key===rt?$(se,ee,le,je):null;case te:return le.key===rt?he(se,ee,le,je):null;case Fe:return rt=le._init,Se(se,ee,rt(le._payload),je)}if(Rt(le)||Ve(le))return rt!==null?null:_e(se,ee,le,je,null);Cl(se,le)}return null}function Ye(se,ee,le,je,rt){if(typeof je=="string"&&je!==""||typeof je=="number")return se=se.get(le)||null,G(ee,se,""+je,rt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case ne:return se=se.get(je.key===null?le:je.key)||null,$(ee,se,je,rt);case te:return se=se.get(je.key===null?le:je.key)||null,he(ee,se,je,rt);case Fe:var dt=je._init;return Ye(se,ee,le,dt(je._payload),rt)}if(Rt(je)||Ve(je))return se=se.get(le)||null,_e(ee,se,je,rt,null);Cl(ee,je)}return null}function Qe(se,ee,le,je){for(var rt=null,dt=null,ft=ee,wt=ee=0,Hn=null;ft!==null&&wt<le.length;wt++){ft.index>wt?(Hn=ft,ft=null):Hn=ft.sibling;var Ut=Se(se,ft,le[wt],je);if(Ut===null){ft===null&&(ft=Hn);break}t&&ft&&Ut.alternate===null&&s(se,ft),ee=T(Ut,ee,wt),dt===null?rt=Ut:dt.sibling=Ut,dt=Ut,ft=Hn}if(wt===le.length)return d(se,ft),on&&js(se,wt),rt;if(ft===null){for(;wt<le.length;wt++)ft=ke(se,le[wt],je),ft!==null&&(ee=T(ft,ee,wt),dt===null?rt=ft:dt.sibling=ft,dt=ft);return on&&js(se,wt),rt}for(ft=m(se,ft);wt<le.length;wt++)Hn=Ye(ft,se,wt,le[wt],je),Hn!==null&&(t&&Hn.alternate!==null&&ft.delete(Hn.key===null?wt:Hn.key),ee=T(Hn,ee,wt),dt===null?rt=Hn:dt.sibling=Hn,dt=Hn);return t&&ft.forEach(function(gs){return s(se,gs)}),on&&js(se,wt),rt}function nt(se,ee,le,je){var rt=Ve(le);if(typeof rt!="function")throw Error(a(150));if(le=rt.call(le),le==null)throw Error(a(151));for(var dt=rt=null,ft=ee,wt=ee=0,Hn=null,Ut=le.next();ft!==null&&!Ut.done;wt++,Ut=le.next()){ft.index>wt?(Hn=ft,ft=null):Hn=ft.sibling;var gs=Se(se,ft,Ut.value,je);if(gs===null){ft===null&&(ft=Hn);break}t&&ft&&gs.alternate===null&&s(se,ft),ee=T(gs,ee,wt),dt===null?rt=gs:dt.sibling=gs,dt=gs,ft=Hn}if(Ut.done)return d(se,ft),on&&js(se,wt),rt;if(ft===null){for(;!Ut.done;wt++,Ut=le.next())Ut=ke(se,Ut.value,je),Ut!==null&&(ee=T(Ut,ee,wt),dt===null?rt=Ut:dt.sibling=Ut,dt=Ut);return on&&js(se,wt),rt}for(ft=m(se,ft);!Ut.done;wt++,Ut=le.next())Ut=Ye(ft,se,wt,Ut.value,je),Ut!==null&&(t&&Ut.alternate!==null&&ft.delete(Ut.key===null?wt:Ut.key),ee=T(Ut,ee,wt),dt===null?rt=Ut:dt.sibling=Ut,dt=Ut);return t&&ft.forEach(function(qx){return s(se,qx)}),on&&js(se,wt),rt}function Tn(se,ee,le,je){if(typeof le=="object"&&le!==null&&le.type===q&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case ne:e:{for(var rt=le.key,dt=ee;dt!==null;){if(dt.key===rt){if(rt=le.type,rt===q){if(dt.tag===7){d(se,dt.sibling),ee=b(dt,le.props.children),ee.return=se,se=ee;break e}}else if(dt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fe&&Nh(rt)===dt.type){d(se,dt.sibling),ee=b(dt,le.props),ee.ref=ca(se,dt,le),ee.return=se,se=ee;break e}d(se,dt);break}else s(se,dt);dt=dt.sibling}le.type===q?(ee=Xs(le.props.children,se.mode,je,le.key),ee.return=se,se=ee):(je=Gl(le.type,le.key,le.props,null,se.mode,je),je.ref=ca(se,ee,le),je.return=se,se=je)}return O(se);case te:e:{for(dt=le.key;ee!==null;){if(ee.key===dt)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){d(se,ee.sibling),ee=b(ee,le.children||[]),ee.return=se,se=ee;break e}else{d(se,ee);break}else s(se,ee);ee=ee.sibling}ee=ed(le,se.mode,je),ee.return=se,se=ee}return O(se);case Fe:return dt=le._init,Tn(se,ee,dt(le._payload),je)}if(Rt(le))return Qe(se,ee,le,je);if(Ve(le))return nt(se,ee,le,je);Cl(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ee!==null&&ee.tag===6?(d(se,ee.sibling),ee=b(ee,le),ee.return=se,se=ee):(d(se,ee),ee=Ju(le,se.mode,je),ee.return=se,se=ee),O(se)):d(se,ee)}return Tn}var wo=_h(!0),Rh=_h(!1),El=ss(null),bl=null,vo=null,cu=null;function uu(){cu=vo=bl=null}function du(t){var s=El.current;tn(El),t._currentValue=s}function fu(t,s,d){for(;t!==null;){var m=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),t===d)break;t=t.return}}function Co(t,s){bl=t,cu=vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Er=!0),t.firstContext=null)}function Ur(t){var s=t._currentValue;if(cu!==t)if(t={context:t,memoizedValue:s,next:null},vo===null){if(bl===null)throw Error(a(308));vo=t,bl.dependencies={lanes:0,firstContext:t}}else vo=vo.next=t;return s}var Fs=null;function hu(t){Fs===null?Fs=[t]:Fs.push(t)}function kh(t,s,d,m){var b=s.interleaved;return b===null?(d.next=d,hu(s)):(d.next=b.next,b.next=d),s.interleaved=d,Mi(t,m)}function Mi(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var ls=!1;function pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ph(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function cs(t,s,d){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,Vt&2){var b=m.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),m.pending=s,Mi(t,d)}return b=m.interleaved,b===null?(s.next=s,hu(m)):(s.next=b.next,b.next=s),m.interleaved=s,Mi(t,d)}function Sl(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var m=s.lanes;m&=t.pendingLanes,d|=m,s.lanes=d,xn(t,d)}}function Oh(t,s){var d=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?b=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?b=T=s:T=T.next=s}else b=T=s;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:m.shared,effects:m.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Al(t,s,d,m){var b=t.updateQueue;ls=!1;var T=b.firstBaseUpdate,O=b.lastBaseUpdate,G=b.shared.pending;if(G!==null){b.shared.pending=null;var $=G,he=$.next;$.next=null,O===null?T=he:O.next=he,O=$;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,G=_e.lastBaseUpdate,G!==O&&(G===null?_e.firstBaseUpdate=he:G.next=he,_e.lastBaseUpdate=$))}if(T!==null){var ke=b.baseState;O=0,_e=he=$=null,G=T;do{var Se=G.lane,Ye=G.eventTime;if((m&Se)===Se){_e!==null&&(_e=_e.next={eventTime:Ye,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Qe=t,nt=G;switch(Se=s,Ye=d,nt.tag){case 1:if(Qe=nt.payload,typeof Qe=="function"){ke=Qe.call(Ye,ke,Se);break e}ke=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=nt.payload,Se=typeof Qe=="function"?Qe.call(Ye,ke,Se):Qe,Se==null)break e;ke=ue({},ke,Se);break e;case 2:ls=!0}}G.callback!==null&&G.lane!==0&&(t.flags|=64,Se=b.effects,Se===null?b.effects=[G]:Se.push(G))}else Ye={eventTime:Ye,lane:Se,tag:G.tag,payload:G.payload,callback:G.callback,next:null},_e===null?(he=_e=Ye,$=ke):_e=_e.next=Ye,O|=Se;if(G=G.next,G===null){if(G=b.shared.pending,G===null)break;Se=G,G=Se.next,Se.next=null,b.lastBaseUpdate=Se,b.shared.pending=null}}while(!0);if(_e===null&&($=ke),b.baseState=$,b.firstBaseUpdate=he,b.lastBaseUpdate=_e,s=b.shared.interleaved,s!==null){b=s;do O|=b.lane,b=b.next;while(b!==s)}else T===null&&(b.shared.lanes=0);Us|=O,t.lanes=O,t.memoizedState=ke}}function Mh(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var m=t[s],b=m.callback;if(b!==null){if(m.callback=null,m=d,typeof b!="function")throw Error(a(191,b));b.call(m)}}}var ua={},pi=ss(ua),da=ss(ua),fa=ss(ua);function Vs(t){if(t===ua)throw Error(a(174));return t}function mu(t,s){switch(Qt(fa,s),Qt(da,t),Qt(pi,ua),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Et(s,t)}tn(pi),Qt(pi,s)}function Eo(){tn(pi),tn(da),tn(fa)}function Dh(t){Vs(fa.current);var s=Vs(pi.current),d=Et(s,t.type);s!==d&&(Qt(da,t),Qt(pi,d))}function gu(t){da.current===t&&(tn(pi),tn(da))}var dn=ss(0);function Tl(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xu=[];function yu(){for(var t=0;t<xu.length;t++)xu[t]._workInProgressVersionPrimary=null;xu.length=0}var Il=Q.ReactCurrentDispatcher,wu=Q.ReactCurrentBatchConfig,zs=0,fn=null,Ln=null,Un=null,Nl=!1,ha=!1,pa=0,wx=0;function lr(){throw Error(a(321))}function vu(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!re(t[d],s[d]))return!1;return!0}function Cu(t,s,d,m,b,T){if(zs=T,fn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?bx:Sx,t=d(m,b),ha){T=0;do{if(ha=!1,pa=0,25<=T)throw Error(a(301));T+=1,Un=Ln=null,s.updateQueue=null,Il.current=Ax,t=d(m,b)}while(ha)}if(Il.current=kl,s=Ln!==null&&Ln.next!==null,zs=0,Un=Ln=fn=null,Nl=!1,s)throw Error(a(300));return t}function Eu(){var t=pa!==0;return pa=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?fn.memoizedState=Un=t:Un=Un.next=t,Un}function Wr(){if(Ln===null){var t=fn.alternate;t=t!==null?t.memoizedState:null}else t=Ln.next;var s=Un===null?fn.memoizedState:Un.next;if(s!==null)Un=s,Ln=t;else{if(t===null)throw Error(a(310));Ln=t,t={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Un===null?fn.memoizedState=Un=t:Un=Un.next=t}return Un}function ma(t,s){return typeof s=="function"?s(t):s}function bu(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var m=Ln,b=m.baseQueue,T=d.pending;if(T!==null){if(b!==null){var O=b.next;b.next=T.next,T.next=O}m.baseQueue=b=T,d.pending=null}if(b!==null){T=b.next,m=m.baseState;var G=O=null,$=null,he=T;do{var _e=he.lane;if((zs&_e)===_e)$!==null&&($=$.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),m=he.hasEagerState?he.eagerState:t(m,he.action);else{var ke={lane:_e,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};$===null?(G=$=ke,O=m):$=$.next=ke,fn.lanes|=_e,Us|=_e}he=he.next}while(he!==null&&he!==T);$===null?O=m:$.next=G,re(m,s.memoizedState)||(Er=!0),s.memoizedState=m,s.baseState=O,s.baseQueue=$,d.lastRenderedState=m}if(t=d.interleaved,t!==null){b=t;do T=b.lane,fn.lanes|=T,Us|=T,b=b.next;while(b!==t)}else b===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Su(t){var s=Wr(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var m=d.dispatch,b=d.pending,T=s.memoizedState;if(b!==null){d.pending=null;var O=b=b.next;do T=t(T,O.action),O=O.next;while(O!==b);re(T,s.memoizedState)||(Er=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),d.lastRenderedState=T}return[T,m]}function Lh(){}function Bh(t,s){var d=fn,m=Wr(),b=s(),T=!re(m.memoizedState,b);if(T&&(m.memoizedState=b,Er=!0),m=m.queue,Au(Vh.bind(null,d,m,t),[t]),m.getSnapshot!==s||T||Un!==null&&Un.memoizedState.tag&1){if(d.flags|=2048,ga(9,Fh.bind(null,d,m,b,s),void 0,null),Wn===null)throw Error(a(349));zs&30||jh(d,s,b)}return b}function jh(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=fn.updateQueue,s===null?(s={lastEffect:null,stores:null},fn.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function Fh(t,s,d,m){s.value=d,s.getSnapshot=m,zh(s)&&Uh(t)}function Vh(t,s,d){return d(function(){zh(s)&&Uh(t)})}function zh(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!re(t,d)}catch{return!0}}function Uh(t){var s=Mi(t,1);s!==null&&ii(s,t,1,-1)}function Wh(t){var s=mi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},s.queue=t,t=t.dispatch=Ex.bind(null,fn,t),[s.memoizedState,t]}function ga(t,s,d,m){return t={tag:t,create:s,destroy:d,deps:m,next:null},s=fn.updateQueue,s===null?(s={lastEffect:null,stores:null},fn.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(m=d.next,d.next=t,t.next=m,s.lastEffect=t)),t}function Hh(){return Wr().memoizedState}function _l(t,s,d,m){var b=mi();fn.flags|=t,b.memoizedState=ga(1|s,d,void 0,m===void 0?null:m)}function Rl(t,s,d,m){var b=Wr();m=m===void 0?null:m;var T=void 0;if(Ln!==null){var O=Ln.memoizedState;if(T=O.destroy,m!==null&&vu(m,O.deps)){b.memoizedState=ga(s,d,T,m);return}}fn.flags|=t,b.memoizedState=ga(1|s,d,T,m)}function Gh(t,s){return _l(8390656,8,t,s)}function Au(t,s){return Rl(2048,8,t,s)}function Xh(t,s){return Rl(4,2,t,s)}function Yh(t,s){return Rl(4,4,t,s)}function $h(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Zh(t,s,d){return d=d!=null?d.concat([t]):null,Rl(4,4,$h.bind(null,s,t),d)}function Tu(){}function Kh(t,s){var d=Wr();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&vu(s,m[1])?m[0]:(d.memoizedState=[t,s],t)}function qh(t,s){var d=Wr();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&vu(s,m[1])?m[0]:(t=t(),d.memoizedState=[t,s],t)}function Qh(t,s,d){return zs&21?(re(d,s)||(d=Pn(),fn.lanes|=d,Us|=d,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=d)}function vx(t,s){var d=It;It=d!==0&&4>d?d:4,t(!0);var m=wu.transition;wu.transition={};try{t(!1),s()}finally{It=d,wu.transition=m}}function Jh(){return Wr().memoizedState}function Cx(t,s,d){var m=hs(t);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},e0(t))t0(s,d);else if(d=kh(t,s,d,m),d!==null){var b=gr();ii(d,t,m,b),n0(d,s,m)}}function Ex(t,s,d){var m=hs(t),b={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(e0(t))t0(s,b);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,G=T(O,d);if(b.hasEagerState=!0,b.eagerState=G,re(G,O)){var $=s.interleaved;$===null?(b.next=b,hu(s)):(b.next=$.next,$.next=b),s.interleaved=b;return}}catch{}finally{}d=kh(t,s,b,m),d!==null&&(b=gr(),ii(d,t,m,b),n0(d,s,m))}}function e0(t){var s=t.alternate;return t===fn||s!==null&&s===fn}function t0(t,s){ha=Nl=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function n0(t,s,d){if(d&4194240){var m=s.lanes;m&=t.pendingLanes,d|=m,s.lanes=d,xn(t,d)}}var kl={readContext:Ur,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},bx={readContext:Ur,useCallback:function(t,s){return mi().memoizedState=[t,s===void 0?null:s],t},useContext:Ur,useEffect:Gh,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,_l(4194308,4,$h.bind(null,s,t),d)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var d=mi();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var m=mi();return s=d!==void 0?d(s):s,m.memoizedState=m.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},m.queue=t,t=t.dispatch=Cx.bind(null,fn,t),[m.memoizedState,t]},useRef:function(t){var s=mi();return t={current:t},s.memoizedState=t},useState:Wh,useDebugValue:Tu,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=Wh(!1),s=t[0];return t=vx.bind(null,t[1]),mi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var m=fn,b=mi();if(on){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),Wn===null)throw Error(a(349));zs&30||jh(m,s,d)}b.memoizedState=d;var T={value:d,getSnapshot:s};return b.queue=T,Gh(Vh.bind(null,m,T,t),[t]),m.flags|=2048,ga(9,Fh.bind(null,m,T,d,s),void 0,null),d},useId:function(){var t=mi(),s=Wn.identifierPrefix;if(on){var d=Oi,m=Pi;d=(m&~(1<<32-pr(m)-1)).toString(32)+d,s=":"+s+"R"+d,d=pa++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=wx++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Sx={readContext:Ur,useCallback:Kh,useContext:Ur,useEffect:Au,useImperativeHandle:Zh,useInsertionEffect:Xh,useLayoutEffect:Yh,useMemo:qh,useReducer:bu,useRef:Hh,useState:function(){return bu(ma)},useDebugValue:Tu,useDeferredValue:function(t){var s=Wr();return Qh(s,Ln.memoizedState,t)},useTransition:function(){var t=bu(ma)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Lh,useSyncExternalStore:Bh,useId:Jh,unstable_isNewReconciler:!1},Ax={readContext:Ur,useCallback:Kh,useContext:Ur,useEffect:Au,useImperativeHandle:Zh,useInsertionEffect:Xh,useLayoutEffect:Yh,useMemo:qh,useReducer:Su,useRef:Hh,useState:function(){return Su(ma)},useDebugValue:Tu,useDeferredValue:function(t){var s=Wr();return Ln===null?s.memoizedState=t:Qh(s,Ln.memoizedState,t)},useTransition:function(){var t=Su(ma)[0],s=Wr().memoizedState;return[t,s]},useMutableSource:Lh,useSyncExternalStore:Bh,useId:Jh,unstable_isNewReconciler:!1};function ti(t,s){if(t&&t.defaultProps){s=ue({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Iu(t,s,d,m){s=t.memoizedState,d=d(m,s),d=d==null?s:ue({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Pl={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var m=gr(),b=hs(t),T=Di(m,b);T.payload=s,d!=null&&(T.callback=d),s=cs(t,T,b),s!==null&&(ii(s,t,b,m),Sl(s,t,b))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var m=gr(),b=hs(t),T=Di(m,b);T.tag=1,T.payload=s,d!=null&&(T.callback=d),s=cs(t,T,b),s!==null&&(ii(s,t,b,m),Sl(s,t,b))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=gr(),m=hs(t),b=Di(d,m);b.tag=2,s!=null&&(b.callback=s),s=cs(t,b,m),s!==null&&(ii(s,t,m,d),Sl(s,t,m))}};function r0(t,s,d,m,b,T,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,T,O):s.prototype&&s.prototype.isPureReactComponent?!de(d,m)||!de(b,T):!0}function i0(t,s,d){var m=!1,b=os,T=s.contextType;return typeof T=="object"&&T!==null?T=Ur(T):(b=Cr(s)?Ls:ar.current,m=s.contextTypes,T=(m=m!=null)?mo(t,b):os),s=new s(d,T),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pl,t.stateNode=s,s._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=b,t.__reactInternalMemoizedMaskedChildContext=T),s}function s0(t,s,d,m){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,m),s.state!==t&&Pl.enqueueReplaceState(s,s.state,null)}function Nu(t,s,d,m){var b=t.stateNode;b.props=d,b.state=t.memoizedState,b.refs={},pu(t);var T=s.contextType;typeof T=="object"&&T!==null?b.context=Ur(T):(T=Cr(s)?Ls:ar.current,b.context=mo(t,T)),b.state=t.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Iu(t,s,T,d),b.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(s=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),s!==b.state&&Pl.enqueueReplaceState(b,b.state,null),Al(t,d,b,m),b.state=t.memoizedState),typeof b.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,s){try{var d="",m=s;do d+=Ce(m),m=m.return;while(m);var b=d}catch(T){b=`
Error generating stack: `+T.message+`
`+T.stack}return{value:t,source:s,stack:b,digest:null}}function _u(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function Ru(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var Tx=typeof WeakMap=="function"?WeakMap:Map;function o0(t,s,d){d=Di(-1,d),d.tag=3,d.payload={element:null};var m=s.value;return d.callback=function(){Fl||(Fl=!0,Gu=m),Ru(t,s)},d}function a0(t,s,d){d=Di(-1,d),d.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var b=s.value;d.payload=function(){return m(b)},d.callback=function(){Ru(t,s)}}var T=t.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Ru(t,s),typeof m!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),d}function l0(t,s,d){var m=t.pingCache;if(m===null){m=t.pingCache=new Tx;var b=new Set;m.set(s,b)}else b=m.get(s),b===void 0&&(b=new Set,m.set(s,b));b.has(d)||(b.add(d),t=Vx.bind(null,t,s,d),s.then(t,t))}function c0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function u0(t,s,d,m,b){return t.mode&1?(t.flags|=65536,t.lanes=b,t):(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Di(-1,1),s.tag=2,cs(d,s,1))),d.lanes|=1),t)}var Ix=Q.ReactCurrentOwner,Er=!1;function mr(t,s,d,m){s.child=t===null?Rh(s,null,d,m):wo(s,t.child,d,m)}function d0(t,s,d,m,b){d=d.render;var T=s.ref;return Co(s,b),m=Cu(t,s,d,m,T,b),d=Eu(),t!==null&&!Er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Li(t,s,b)):(on&&d&&iu(s),s.flags|=1,mr(t,s,m,b),s.child)}function f0(t,s,d,m,b){if(t===null){var T=d.type;return typeof T=="function"&&!Qu(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=T,h0(t,s,T,m,b)):(t=Gl(d.type,null,m,s,s.mode,b),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!(t.lanes&b)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:de,d(O,m)&&t.ref===s.ref)return Li(t,s,b)}return s.flags|=1,t=ms(T,m),t.ref=s.ref,t.return=s,s.child=t}function h0(t,s,d,m,b){if(t!==null){var T=t.memoizedProps;if(de(T,m)&&t.ref===s.ref)if(Er=!1,s.pendingProps=m=T,(t.lanes&b)!==0)t.flags&131072&&(Er=!0);else return s.lanes=t.lanes,Li(t,s,b)}return ku(t,s,d,m,b)}function p0(t,s,d){var m=s.pendingProps,b=m.children,T=t!==null?t.memoizedState:null;if(m.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Ao,Mr),Mr|=d;else{if(!(d&1073741824))return t=T!==null?T.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Qt(Ao,Mr),Mr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,Qt(Ao,Mr),Mr|=m}else T!==null?(m=T.baseLanes|d,s.memoizedState=null):m=d,Qt(Ao,Mr),Mr|=m;return mr(t,s,b,d),s.child}function m0(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function ku(t,s,d,m,b){var T=Cr(d)?Ls:ar.current;return T=mo(s,T),Co(s,b),d=Cu(t,s,d,m,T,b),m=Eu(),t!==null&&!Er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,Li(t,s,b)):(on&&m&&iu(s),s.flags|=1,mr(t,s,d,b),s.child)}function g0(t,s,d,m,b){if(Cr(d)){var T=!0;gl(s)}else T=!1;if(Co(s,b),s.stateNode===null)Ml(t,s),i0(s,d,m),Nu(s,d,m,b),m=!0;else if(t===null){var O=s.stateNode,G=s.memoizedProps;O.props=G;var $=O.context,he=d.contextType;typeof he=="object"&&he!==null?he=Ur(he):(he=Cr(d)?Ls:ar.current,he=mo(s,he));var _e=d.getDerivedStateFromProps,ke=typeof _e=="function"||typeof O.getSnapshotBeforeUpdate=="function";ke||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==m||$!==he)&&s0(s,O,m,he),ls=!1;var Se=s.memoizedState;O.state=Se,Al(s,m,O,b),$=s.memoizedState,G!==m||Se!==$||vr.current||ls?(typeof _e=="function"&&(Iu(s,d,_e,m),$=s.memoizedState),(G=ls||r0(s,d,G,m,Se,$,he))?(ke||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=$),O.props=m,O.state=$,O.context=he,m=G):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{O=s.stateNode,Ph(t,s),G=s.memoizedProps,he=s.type===s.elementType?G:ti(s.type,G),O.props=he,ke=s.pendingProps,Se=O.context,$=d.contextType,typeof $=="object"&&$!==null?$=Ur($):($=Cr(d)?Ls:ar.current,$=mo(s,$));var Ye=d.getDerivedStateFromProps;(_e=typeof Ye=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==ke||Se!==$)&&s0(s,O,m,$),ls=!1,Se=s.memoizedState,O.state=Se,Al(s,m,O,b);var Qe=s.memoizedState;G!==ke||Se!==Qe||vr.current||ls?(typeof Ye=="function"&&(Iu(s,d,Ye,m),Qe=s.memoizedState),(he=ls||r0(s,d,he,m,Se,Qe,$)||!1)?(_e||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(m,Qe,$),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(m,Qe,$)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&Se===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&Se===t.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=Qe),O.props=m,O.state=Qe,O.context=$,m=he):(typeof O.componentDidUpdate!="function"||G===t.memoizedProps&&Se===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&Se===t.memoizedState||(s.flags|=1024),m=!1)}return Pu(t,s,d,m,T,b)}function Pu(t,s,d,m,b,T){m0(t,s);var O=(s.flags&128)!==0;if(!m&&!O)return b&&Ch(s,d,!1),Li(t,s,T);m=s.stateNode,Ix.current=s;var G=O&&typeof d.getDerivedStateFromError!="function"?null:m.render();return s.flags|=1,t!==null&&O?(s.child=wo(s,t.child,null,T),s.child=wo(s,null,G,T)):mr(t,s,G,T),s.memoizedState=m.state,b&&Ch(s,d,!0),s.child}function x0(t){var s=t.stateNode;s.pendingContext?wh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&wh(t,s.context,!1),mu(t,s.containerInfo)}function y0(t,s,d,m,b){return yo(),lu(b),s.flags|=256,mr(t,s,d,m),s.child}var Ou={dehydrated:null,treeContext:null,retryLane:0};function Mu(t){return{baseLanes:t,cachePool:null,transitions:null}}function w0(t,s,d){var m=s.pendingProps,b=dn.current,T=!1,O=(s.flags&128)!==0,G;if((G=O)||(G=t!==null&&t.memoizedState===null?!1:(b&2)!==0),G?(T=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(b|=1),Qt(dn,b&1),t===null)return au(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(O=m.children,t=m.fallback,T?(m=s.mode,T=s.child,O={mode:"hidden",children:O},!(m&1)&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Xl(O,m,0,null),t=Xs(t,m,d,null),T.return=s,t.return=s,T.sibling=t,s.child=T,s.child.memoizedState=Mu(d),s.memoizedState=Ou,t):Du(s,O));if(b=t.memoizedState,b!==null&&(G=b.dehydrated,G!==null))return Nx(t,s,O,m,G,b,d);if(T){T=m.fallback,O=s.mode,b=t.child,G=b.sibling;var $={mode:"hidden",children:m.children};return!(O&1)&&s.child!==b?(m=s.child,m.childLanes=0,m.pendingProps=$,s.deletions=null):(m=ms(b,$),m.subtreeFlags=b.subtreeFlags&14680064),G!==null?T=ms(G,T):(T=Xs(T,O,d,null),T.flags|=2),T.return=s,m.return=s,m.sibling=T,s.child=m,m=T,T=s.child,O=t.child.memoizedState,O=O===null?Mu(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=t.childLanes&~d,s.memoizedState=Ou,m}return T=t.child,t=T.sibling,m=ms(T,{mode:"visible",children:m.children}),!(s.mode&1)&&(m.lanes=d),m.return=s,m.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=m,s.memoizedState=null,m}function Du(t,s){return s=Xl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ol(t,s,d,m){return m!==null&&lu(m),wo(s,t.child,null,d),t=Du(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Nx(t,s,d,m,b,T,O){if(d)return s.flags&256?(s.flags&=-257,m=_u(Error(a(422))),Ol(t,s,O,m)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(T=m.fallback,b=s.mode,m=Xl({mode:"visible",children:m.children},b,0,null),T=Xs(T,b,O,null),T.flags|=2,m.return=s,T.return=s,m.sibling=T,s.child=m,s.mode&1&&wo(s,t.child,null,O),s.child.memoizedState=Mu(O),s.memoizedState=Ou,T);if(!(s.mode&1))return Ol(t,s,O,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var G=m.dgst;return m=G,T=Error(a(419)),m=_u(T,m,void 0),Ol(t,s,O,m)}if(G=(O&t.childLanes)!==0,Er||G){if(m=Wn,m!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(m.suspendedLanes|O)?0:b,b!==0&&b!==T.retryLane&&(T.retryLane=b,Mi(t,b),ii(m,t,b,-1))}return qu(),m=_u(Error(a(421))),Ol(t,s,O,m)}return b.data==="$?"?(s.flags|=128,s.child=t.child,s=zx.bind(null,t),b._reactRetry=s,null):(t=T.treeContext,Or=is(b.nextSibling),Pr=s,on=!0,ei=null,t!==null&&(Vr[zr++]=Pi,Vr[zr++]=Oi,Vr[zr++]=Bs,Pi=t.id,Oi=t.overflow,Bs=s),s=Du(s,m.children),s.flags|=4096,s)}function v0(t,s,d){t.lanes|=s;var m=t.alternate;m!==null&&(m.lanes|=s),fu(t.return,s,d)}function Lu(t,s,d,m,b){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b)}function C0(t,s,d){var m=s.pendingProps,b=m.revealOrder,T=m.tail;if(mr(t,s,m.children,d),m=dn.current,m&2)m=m&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v0(t,d,s);else if(t.tag===19)v0(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(Qt(dn,m),!(s.mode&1))s.memoizedState=null;else switch(b){case"forwards":for(d=s.child,b=null;d!==null;)t=d.alternate,t!==null&&Tl(t)===null&&(b=d),d=d.sibling;d=b,d===null?(b=s.child,s.child=null):(b=d.sibling,d.sibling=null),Lu(s,!1,b,d,T);break;case"backwards":for(d=null,b=s.child,s.child=null;b!==null;){if(t=b.alternate,t!==null&&Tl(t)===null){s.child=b;break}t=b.sibling,b.sibling=d,d=b,b=t}Lu(s,!0,d,null,T);break;case"together":Lu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ml(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Li(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),Us|=s.lanes,!(d&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=ms(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=ms(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function _x(t,s,d){switch(s.tag){case 3:x0(s),yo();break;case 5:Dh(s);break;case 1:Cr(s.type)&&gl(s);break;case 4:mu(s,s.stateNode.containerInfo);break;case 10:var m=s.type._context,b=s.memoizedProps.value;Qt(El,m._currentValue),m._currentValue=b;break;case 13:if(m=s.memoizedState,m!==null)return m.dehydrated!==null?(Qt(dn,dn.current&1),s.flags|=128,null):d&s.child.childLanes?w0(t,s,d):(Qt(dn,dn.current&1),t=Li(t,s,d),t!==null?t.sibling:null);Qt(dn,dn.current&1);break;case 19:if(m=(d&s.childLanes)!==0,t.flags&128){if(m)return C0(t,s,d);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Qt(dn,dn.current),m)break;return null;case 22:case 23:return s.lanes=0,p0(t,s,d)}return Li(t,s,d)}var E0,Bu,b0,S0;E0=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Bu=function(){},b0=function(t,s,d,m){var b=t.memoizedProps;if(b!==m){t=s.stateNode,Vs(pi.current);var T=null;switch(d){case"input":b=He(t,b),m=He(t,m),T=[];break;case"select":b=ue({},b,{value:void 0}),m=ue({},m,{value:void 0}),T=[];break;case"textarea":b=mn(t,b),m=mn(t,m),T=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=hl)}Ze(d,m);var O;d=null;for(he in b)if(!m.hasOwnProperty(he)&&b.hasOwnProperty(he)&&b[he]!=null)if(he==="style"){var G=b[he];for(O in G)G.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(p.hasOwnProperty(he)?T||(T=[]):(T=T||[]).push(he,null));for(he in m){var $=m[he];if(G=b!=null?b[he]:void 0,m.hasOwnProperty(he)&&$!==G&&($!=null||G!=null))if(he==="style")if(G){for(O in G)!G.hasOwnProperty(O)||$&&$.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in $)$.hasOwnProperty(O)&&G[O]!==$[O]&&(d||(d={}),d[O]=$[O])}else d||(T||(T=[]),T.push(he,d)),d=$;else he==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,G=G?G.__html:void 0,$!=null&&G!==$&&(T=T||[]).push(he,$)):he==="children"?typeof $!="string"&&typeof $!="number"||(T=T||[]).push(he,""+$):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(p.hasOwnProperty(he)?($!=null&&he==="onScroll"&&en("scroll",t),T||G===$||(T=[])):(T=T||[]).push(he,$))}d&&(T=T||[]).push("style",d);var he=T;(s.updateQueue=he)&&(s.flags|=4)}},S0=function(t,s,d,m){d!==m&&(s.flags|=4)};function xa(t,s){if(!on)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function cr(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,m=0;if(s)for(var b=t.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=m,t.childLanes=d,s}function Rx(t,s,d){var m=s.pendingProps;switch(su(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(s),null;case 1:return Cr(s.type)&&ml(),cr(s),null;case 3:return m=s.stateNode,Eo(),tn(vr),tn(ar),yu(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ei!==null&&($u(ei),ei=null))),Bu(t,s),cr(s),null;case 5:gu(s);var b=Vs(fa.current);if(d=s.type,t!==null&&s.stateNode!=null)b0(t,s,d,m,b),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!m){if(s.stateNode===null)throw Error(a(166));return cr(s),null}if(t=Vs(pi.current),vl(s)){m=s.stateNode,d=s.type;var T=s.memoizedProps;switch(m[hi]=s,m[aa]=T,t=(s.mode&1)!==0,d){case"dialog":en("cancel",m),en("close",m);break;case"iframe":case"object":case"embed":en("load",m);break;case"video":case"audio":for(b=0;b<ia.length;b++)en(ia[b],m);break;case"source":en("error",m);break;case"img":case"image":case"link":en("error",m),en("load",m);break;case"details":en("toggle",m);break;case"input":pt(m,T),en("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},en("invalid",m);break;case"textarea":Jt(m,T),en("invalid",m)}Ze(d,T),b=null;for(var O in T)if(T.hasOwnProperty(O)){var G=T[O];O==="children"?typeof G=="string"?m.textContent!==G&&(T.suppressHydrationWarning!==!0&&fl(m.textContent,G,t),b=["children",G]):typeof G=="number"&&m.textContent!==""+G&&(T.suppressHydrationWarning!==!0&&fl(m.textContent,G,t),b=["children",""+G]):p.hasOwnProperty(O)&&G!=null&&O==="onScroll"&&en("scroll",m)}switch(d){case"input":qe(m),Je(m,T,!0);break;case"textarea":qe(m),xt(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=hl)}m=b,s.updateQueue=m,m!==null&&(s.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=At(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=O.createElement(d,{is:m.is}):(t=O.createElement(d),d==="select"&&(O=t,m.multiple?O.multiple=!0:m.size&&(O.size=m.size))):t=O.createElementNS(t,d),t[hi]=s,t[aa]=m,E0(t,s,!1,!1),s.stateNode=t;e:{switch(O=yt(d,m),d){case"dialog":en("cancel",t),en("close",t),b=m;break;case"iframe":case"object":case"embed":en("load",t),b=m;break;case"video":case"audio":for(b=0;b<ia.length;b++)en(ia[b],t);b=m;break;case"source":en("error",t),b=m;break;case"img":case"image":case"link":en("error",t),en("load",t),b=m;break;case"details":en("toggle",t),b=m;break;case"input":pt(t,m),b=He(t,m),en("invalid",t);break;case"option":b=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},b=ue({},m,{value:void 0}),en("invalid",t);break;case"textarea":Jt(t,m),b=mn(t,m),en("invalid",t);break;default:b=m}Ze(d,b),G=b;for(T in G)if(G.hasOwnProperty(T)){var $=G[T];T==="style"?ge(t,$):T==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&Ht(t,$)):T==="children"?typeof $=="string"?(d!=="textarea"||$!=="")&&Nt(t,$):typeof $=="number"&&Nt(t,""+$):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(p.hasOwnProperty(T)?$!=null&&T==="onScroll"&&en("scroll",t):$!=null&&F(t,T,$,O))}switch(d){case"input":qe(t),Je(t,m,!1);break;case"textarea":qe(t),xt(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Ee(m.value));break;case"select":t.multiple=!!m.multiple,T=m.value,T!=null?Pe(t,!!m.multiple,T,!1):m.defaultValue!=null&&Pe(t,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(t.onclick=hl)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return cr(s),null;case 6:if(t&&s.stateNode!=null)S0(t,s,t.memoizedProps,m);else{if(typeof m!="string"&&s.stateNode===null)throw Error(a(166));if(d=Vs(fa.current),Vs(pi.current),vl(s)){if(m=s.stateNode,d=s.memoizedProps,m[hi]=s,(T=m.nodeValue!==d)&&(t=Pr,t!==null))switch(t.tag){case 3:fl(m.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(m.nodeValue,d,(t.mode&1)!==0)}T&&(s.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[hi]=s,s.stateNode=m}return cr(s),null;case 13:if(tn(dn),m=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(on&&Or!==null&&s.mode&1&&!(s.flags&128))Ih(),yo(),s.flags|=98560,T=!1;else if(T=vl(s),m!==null&&m.dehydrated!==null){if(t===null){if(!T)throw Error(a(318));if(T=s.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[hi]=s}else yo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;cr(s),T=!1}else ei!==null&&($u(ei),ei=null),T=!0;if(!T)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(s.child.flags|=8192,s.mode&1&&(t===null||dn.current&1?Bn===0&&(Bn=3):qu())),s.updateQueue!==null&&(s.flags|=4),cr(s),null);case 4:return Eo(),Bu(t,s),t===null&&sa(s.stateNode.containerInfo),cr(s),null;case 10:return du(s.type._context),cr(s),null;case 17:return Cr(s.type)&&ml(),cr(s),null;case 19:if(tn(dn),T=s.memoizedState,T===null)return cr(s),null;if(m=(s.flags&128)!==0,O=T.rendering,O===null)if(m)xa(T,!1);else{if(Bn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(O=Tl(t),O!==null){for(s.flags|=128,xa(T,!1),m=O.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),s.subtreeFlags=0,m=d,d=s.child;d!==null;)T=d,t=m,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=t,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,t=O.dependencies,T.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Qt(dn,dn.current&1|2),s.child}t=t.sibling}T.tail!==null&&zt()>To&&(s.flags|=128,m=!0,xa(T,!1),s.lanes=4194304)}else{if(!m)if(t=Tl(O),t!==null){if(s.flags|=128,m=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),xa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!on)return cr(s),null}else 2*zt()-T.renderingStartTime>To&&d!==1073741824&&(s.flags|=128,m=!0,xa(T,!1),s.lanes=4194304);T.isBackwards?(O.sibling=s.child,s.child=O):(d=T.last,d!==null?d.sibling=O:s.child=O,T.last=O)}return T.tail!==null?(s=T.tail,T.rendering=s,T.tail=s.sibling,T.renderingStartTime=zt(),s.sibling=null,d=dn.current,Qt(dn,m?d&1|2:d&1),s):(cr(s),null);case 22:case 23:return Ku(),m=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(s.flags|=8192),m&&s.mode&1?Mr&1073741824&&(cr(s),s.subtreeFlags&6&&(s.flags|=8192)):cr(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function kx(t,s){switch(su(s),s.tag){case 1:return Cr(s.type)&&ml(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Eo(),tn(vr),tn(ar),yu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return gu(s),null;case 13:if(tn(dn),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));yo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return tn(dn),null;case 4:return Eo(),null;case 10:return du(s.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var Dl=!1,ur=!1,Px=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function So(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){wn(t,s,m)}else d.current=null}function ju(t,s,d){try{d()}catch(m){wn(t,s,m)}}var A0=!1;function Ox(t,s){if(Kc=di,t=kt(),Ct(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,G=-1,$=-1,he=0,_e=0,ke=t,Se=null;t:for(;;){for(var Ye;ke!==d||b!==0&&ke.nodeType!==3||(G=O+b),ke!==T||m!==0&&ke.nodeType!==3||($=O+m),ke.nodeType===3&&(O+=ke.nodeValue.length),(Ye=ke.firstChild)!==null;)Se=ke,ke=Ye;for(;;){if(ke===t)break t;if(Se===d&&++he===b&&(G=O),Se===T&&++_e===m&&($=O),(Ye=ke.nextSibling)!==null)break;ke=Se,Se=ke.parentNode}ke=Ye}d=G===-1||$===-1?null:{start:G,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(qc={focusedElem:t,selectionRange:d},di=!1,Ke=s;Ke!==null;)if(s=Ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ke=t;else for(;Ke!==null;){s=Ke;try{var Qe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var nt=Qe.memoizedProps,Tn=Qe.memoizedState,se=s.stateNode,ee=se.getSnapshotBeforeUpdate(s.elementType===s.type?nt:ti(s.type,nt),Tn);se.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var le=s.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(je){wn(s,s.return,je)}if(t=s.sibling,t!==null){t.return=s.return,Ke=t;break}Ke=s.return}return Qe=A0,A0=!1,Qe}function ya(t,s,d){var m=s.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&t)===t){var T=b.destroy;b.destroy=void 0,T!==void 0&&ju(s,d,T)}b=b.next}while(b!==m)}}function Ll(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var m=d.create;d.destroy=m()}d=d.next}while(d!==s)}}function Fu(t){var s=t.ref;if(s!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof s=="function"?s(t):s.current=t}}function T0(t){var s=t.alternate;s!==null&&(t.alternate=null,T0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[hi],delete s[aa],delete s[tu],delete s[mx],delete s[gx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I0(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vu(t,s,d){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=hl));else if(m!==4&&(t=t.child,t!==null))for(Vu(t,s,d),t=t.sibling;t!==null;)Vu(t,s,d),t=t.sibling}function zu(t,s,d){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(zu(t,s,d),t=t.sibling;t!==null;)zu(t,s,d),t=t.sibling}var qn=null,ni=!1;function us(t,s,d){for(d=d.child;d!==null;)_0(t,s,d),d=d.sibling}function _0(t,s,d){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Pt,d)}catch{}switch(d.tag){case 5:ur||So(d,s);case 6:var m=qn,b=ni;qn=null,us(t,s,d),qn=m,ni=b,qn!==null&&(ni?(t=qn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):qn.removeChild(d.stateNode));break;case 18:qn!==null&&(ni?(t=qn,d=d.stateNode,t.nodeType===8?eu(t.parentNode,d):t.nodeType===1&&eu(t,d),qr(t)):eu(qn,d.stateNode));break;case 4:m=qn,b=ni,qn=d.stateNode.containerInfo,ni=!0,us(t,s,d),qn=m,ni=b;break;case 0:case 11:case 14:case 15:if(!ur&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var T=b,O=T.destroy;T=T.tag,O!==void 0&&(T&2||T&4)&&ju(d,s,O),b=b.next}while(b!==m)}us(t,s,d);break;case 1:if(!ur&&(So(d,s),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(G){wn(d,s,G)}us(t,s,d);break;case 21:us(t,s,d);break;case 22:d.mode&1?(ur=(m=ur)||d.memoizedState!==null,us(t,s,d),ur=m):us(t,s,d);break;default:us(t,s,d)}}function R0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new Px),s.forEach(function(m){var b=Ux.bind(null,t,m);d.has(m)||(d.add(m),m.then(b,b))})}}function ri(t,s){var d=s.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m];try{var T=t,O=s,G=O;e:for(;G!==null;){switch(G.tag){case 5:qn=G.stateNode,ni=!1;break e;case 3:qn=G.stateNode.containerInfo,ni=!0;break e;case 4:qn=G.stateNode.containerInfo,ni=!0;break e}G=G.return}if(qn===null)throw Error(a(160));_0(T,O,b),qn=null,ni=!1;var $=b.alternate;$!==null&&($.return=null),b.return=null}catch(he){wn(b,s,he)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)k0(s,t),s=s.sibling}function k0(t,s){var d=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ri(s,t),gi(t),m&4){try{ya(3,t,t.return),Ll(3,t)}catch(nt){wn(t,t.return,nt)}try{ya(5,t,t.return)}catch(nt){wn(t,t.return,nt)}}break;case 1:ri(s,t),gi(t),m&512&&d!==null&&So(d,d.return);break;case 5:if(ri(s,t),gi(t),m&512&&d!==null&&So(d,d.return),t.flags&32){var b=t.stateNode;try{Nt(b,"")}catch(nt){wn(t,t.return,nt)}}if(m&4&&(b=t.stateNode,b!=null)){var T=t.memoizedProps,O=d!==null?d.memoizedProps:T,G=t.type,$=t.updateQueue;if(t.updateQueue=null,$!==null)try{G==="input"&&T.type==="radio"&&T.name!=null&&Mt(b,T),yt(G,O);var he=yt(G,T);for(O=0;O<$.length;O+=2){var _e=$[O],ke=$[O+1];_e==="style"?ge(b,ke):_e==="dangerouslySetInnerHTML"?Ht(b,ke):_e==="children"?Nt(b,ke):F(b,_e,ke,he)}switch(G){case"input":mt(b,T);break;case"textarea":We(b,T);break;case"select":var Se=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!T.multiple;var Ye=T.value;Ye!=null?Pe(b,!!T.multiple,Ye,!1):Se!==!!T.multiple&&(T.defaultValue!=null?Pe(b,!!T.multiple,T.defaultValue,!0):Pe(b,!!T.multiple,T.multiple?[]:"",!1))}b[aa]=T}catch(nt){wn(t,t.return,nt)}}break;case 6:if(ri(s,t),gi(t),m&4){if(t.stateNode===null)throw Error(a(162));b=t.stateNode,T=t.memoizedProps;try{b.nodeValue=T}catch(nt){wn(t,t.return,nt)}}break;case 3:if(ri(s,t),gi(t),m&4&&d!==null&&d.memoizedState.isDehydrated)try{qr(s.containerInfo)}catch(nt){wn(t,t.return,nt)}break;case 4:ri(s,t),gi(t);break;case 13:ri(s,t),gi(t),b=t.child,b.flags&8192&&(T=b.memoizedState!==null,b.stateNode.isHidden=T,!T||b.alternate!==null&&b.alternate.memoizedState!==null||(Hu=zt())),m&4&&R0(t);break;case 22:if(_e=d!==null&&d.memoizedState!==null,t.mode&1?(ur=(he=ur)||_e,ri(s,t),ur=he):ri(s,t),gi(t),m&8192){if(he=t.memoizedState!==null,(t.stateNode.isHidden=he)&&!_e&&t.mode&1)for(Ke=t,_e=t.child;_e!==null;){for(ke=Ke=_e;Ke!==null;){switch(Se=Ke,Ye=Se.child,Se.tag){case 0:case 11:case 14:case 15:ya(4,Se,Se.return);break;case 1:So(Se,Se.return);var Qe=Se.stateNode;if(typeof Qe.componentWillUnmount=="function"){m=Se,d=Se.return;try{s=m,Qe.props=s.memoizedProps,Qe.state=s.memoizedState,Qe.componentWillUnmount()}catch(nt){wn(m,d,nt)}}break;case 5:So(Se,Se.return);break;case 22:if(Se.memoizedState!==null){M0(ke);continue}}Ye!==null?(Ye.return=Se,Ke=Ye):M0(ke)}_e=_e.sibling}e:for(_e=null,ke=t;;){if(ke.tag===5){if(_e===null){_e=ke;try{b=ke.stateNode,he?(T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(G=ke.stateNode,$=ke.memoizedProps.style,O=$!=null&&$.hasOwnProperty("display")?$.display:null,G.style.display=Re("display",O))}catch(nt){wn(t,t.return,nt)}}}else if(ke.tag===6){if(_e===null)try{ke.stateNode.nodeValue=he?"":ke.memoizedProps}catch(nt){wn(t,t.return,nt)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===t)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===t)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===t)break e;_e===ke&&(_e=null),ke=ke.return}_e===ke&&(_e=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:ri(s,t),gi(t),m&4&&R0(t);break;case 21:break;default:ri(s,t),gi(t)}}function gi(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(I0(d)){var m=d;break e}d=d.return}throw Error(a(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(Nt(b,""),m.flags&=-33);var T=N0(t);zu(t,T,b);break;case 3:case 4:var O=m.stateNode.containerInfo,G=N0(t);Vu(t,G,O);break;default:throw Error(a(161))}}catch($){wn(t,t.return,$)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Mx(t,s,d){Ke=t,P0(t)}function P0(t,s,d){for(var m=(t.mode&1)!==0;Ke!==null;){var b=Ke,T=b.child;if(b.tag===22&&m){var O=b.memoizedState!==null||Dl;if(!O){var G=b.alternate,$=G!==null&&G.memoizedState!==null||ur;G=Dl;var he=ur;if(Dl=O,(ur=$)&&!he)for(Ke=b;Ke!==null;)O=Ke,$=O.child,O.tag===22&&O.memoizedState!==null?D0(b):$!==null?($.return=O,Ke=$):D0(b);for(;T!==null;)Ke=T,P0(T),T=T.sibling;Ke=b,Dl=G,ur=he}O0(t)}else b.subtreeFlags&8772&&T!==null?(T.return=b,Ke=T):O0(t)}}function O0(t){for(;Ke!==null;){var s=Ke;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ur||Ll(5,s);break;case 1:var m=s.stateNode;if(s.flags&4&&!ur)if(d===null)m.componentDidMount();else{var b=s.elementType===s.type?d.memoizedProps:ti(s.type,d.memoizedProps);m.componentDidUpdate(b,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=s.updateQueue;T!==null&&Mh(s,T,m);break;case 3:var O=s.updateQueue;if(O!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}Mh(s,O,d)}break;case 5:var G=s.stateNode;if(d===null&&s.flags&4){d=G;var $=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&d.focus();break;case"img":$.src&&(d.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var he=s.alternate;if(he!==null){var _e=he.memoizedState;if(_e!==null){var ke=_e.dehydrated;ke!==null&&qr(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ur||s.flags&512&&Fu(s)}catch(Se){wn(s,s.return,Se)}}if(s===t){Ke=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function M0(t){for(;Ke!==null;){var s=Ke;if(s===t){Ke=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ke=d;break}Ke=s.return}}function D0(t){for(;Ke!==null;){var s=Ke;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Ll(4,s)}catch($){wn(s,d,$)}break;case 1:var m=s.stateNode;if(typeof m.componentDidMount=="function"){var b=s.return;try{m.componentDidMount()}catch($){wn(s,b,$)}}var T=s.return;try{Fu(s)}catch($){wn(s,T,$)}break;case 5:var O=s.return;try{Fu(s)}catch($){wn(s,O,$)}}}catch($){wn(s,s.return,$)}if(s===t){Ke=null;break}var G=s.sibling;if(G!==null){G.return=s.return,Ke=G;break}Ke=s.return}}var Dx=Math.ceil,Bl=Q.ReactCurrentDispatcher,Uu=Q.ReactCurrentOwner,Hr=Q.ReactCurrentBatchConfig,Vt=0,Wn=null,_n=null,Qn=0,Mr=0,Ao=ss(0),Bn=0,wa=null,Us=0,jl=0,Wu=0,va=null,br=null,Hu=0,To=1/0,Bi=null,Fl=!1,Gu=null,ds=null,Vl=!1,fs=null,zl=0,Ca=0,Xu=null,Ul=-1,Wl=0;function gr(){return Vt&6?zt():Ul!==-1?Ul:Ul=zt()}function hs(t){return t.mode&1?Vt&2&&Qn!==0?Qn&-Qn:yx.transition!==null?(Wl===0&&(Wl=Pn()),Wl):(t=It,t!==0||(t=window.event,t=t===void 0?16:$o(t.type)),t):1}function ii(t,s,d,m){if(50<Ca)throw Ca=0,Xu=null,Error(a(185));z(t,d,m),(!(Vt&2)||t!==Wn)&&(t===Wn&&(!(Vt&2)&&(jl|=d),Bn===4&&ps(t,Qn)),Sr(t,m),d===1&&Vt===0&&!(s.mode&1)&&(To=zt()+500,xl&&as()))}function Sr(t,s){var d=t.callbackNode;$i(t,s);var m=Nr(t,t===Wn?Qn:0);if(m===0)d!==null&&_t(d),t.callbackNode=null,t.callbackPriority=0;else if(s=m&-m,t.callbackPriority!==s){if(d!=null&&_t(d),s===1)t.tag===0?xx(B0.bind(null,t)):Eh(B0.bind(null,t)),hx(function(){!(Vt&6)&&as()}),d=null;else{switch(Qa(m)){case 1:d=ve;break;case 4:d=wr;break;case 16:d=jt;break;case 536870912:d=Yi;break;default:d=jt}d=G0(d,L0.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function L0(t,s){if(Ul=-1,Wl=0,Vt&6)throw Error(a(327));var d=t.callbackNode;if(Io()&&t.callbackNode!==d)return null;var m=Nr(t,t===Wn?Qn:0);if(m===0)return null;if(m&30||m&t.expiredLanes||s)s=Hl(t,m);else{s=m;var b=Vt;Vt|=2;var T=F0();(Wn!==t||Qn!==s)&&(Bi=null,To=zt()+500,Hs(t,s));do try{jx();break}catch(G){j0(t,G)}while(!0);uu(),Bl.current=T,Vt=b,_n!==null?s=0:(Wn=null,Qn=0,s=Bn)}if(s!==0){if(s===2&&(b=Gt(t),b!==0&&(m=b,s=Yu(t,b))),s===1)throw d=wa,Hs(t,0),ps(t,m),Sr(t,zt()),d;if(s===6)ps(t,m);else{if(b=t.current.alternate,!(m&30)&&!Lx(b)&&(s=Hl(t,m),s===2&&(T=Gt(t),T!==0&&(m=T,s=Yu(t,T))),s===1))throw d=wa,Hs(t,0),ps(t,m),Sr(t,zt()),d;switch(t.finishedWork=b,t.finishedLanes=m,s){case 0:case 1:throw Error(a(345));case 2:Gs(t,br,Bi);break;case 3:if(ps(t,m),(m&130023424)===m&&(s=Hu+500-zt(),10<s)){if(Nr(t,0)!==0)break;if(b=t.suspendedLanes,(b&m)!==m){gr(),t.pingedLanes|=t.suspendedLanes&b;break}t.timeoutHandle=Jc(Gs.bind(null,t,br,Bi),s);break}Gs(t,br,Bi);break;case 4:if(ps(t,m),(m&4194240)===m)break;for(s=t.eventTimes,b=-1;0<m;){var O=31-pr(m);T=1<<O,O=s[O],O>b&&(b=O),m&=~T}if(m=b,m=zt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Dx(m/1960))-m,10<m){t.timeoutHandle=Jc(Gs.bind(null,t,br,Bi),m);break}Gs(t,br,Bi);break;case 5:Gs(t,br,Bi);break;default:throw Error(a(329))}}}return Sr(t,zt()),t.callbackNode===d?L0.bind(null,t):null}function Yu(t,s){var d=va;return t.current.memoizedState.isDehydrated&&(Hs(t,s).flags|=256),t=Hl(t,s),t!==2&&(s=br,br=d,s!==null&&$u(s)),t}function $u(t){br===null?br=t:br.push.apply(br,t)}function Lx(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var b=d[m],T=b.getSnapshot;b=b.value;try{if(!re(T(),b))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(t,s){for(s&=~Wu,s&=~jl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-pr(s),m=1<<d;t[d]=-1,s&=~m}}function B0(t){if(Vt&6)throw Error(a(327));Io();var s=Nr(t,0);if(!(s&1))return Sr(t,zt()),null;var d=Hl(t,s);if(t.tag!==0&&d===2){var m=Gt(t);m!==0&&(s=m,d=Yu(t,m))}if(d===1)throw d=wa,Hs(t,0),ps(t,s),Sr(t,zt()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Gs(t,br,Bi),Sr(t,zt()),null}function Zu(t,s){var d=Vt;Vt|=1;try{return t(s)}finally{Vt=d,Vt===0&&(To=zt()+500,xl&&as())}}function Ws(t){fs!==null&&fs.tag===0&&!(Vt&6)&&Io();var s=Vt;Vt|=1;var d=Hr.transition,m=It;try{if(Hr.transition=null,It=1,t)return t()}finally{It=m,Hr.transition=d,Vt=s,!(Vt&6)&&as()}}function Ku(){Mr=Ao.current,tn(Ao)}function Hs(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,fx(d)),_n!==null)for(d=_n.return;d!==null;){var m=d;switch(su(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&ml();break;case 3:Eo(),tn(vr),tn(ar),yu();break;case 5:gu(m);break;case 4:Eo();break;case 13:tn(dn);break;case 19:tn(dn);break;case 10:du(m.type._context);break;case 22:case 23:Ku()}d=d.return}if(Wn=t,_n=t=ms(t.current,null),Qn=Mr=s,Bn=0,wa=null,Wu=jl=Us=0,br=va=null,Fs!==null){for(s=0;s<Fs.length;s++)if(d=Fs[s],m=d.interleaved,m!==null){d.interleaved=null;var b=m.next,T=d.pending;if(T!==null){var O=T.next;T.next=b,m.next=O}d.pending=m}Fs=null}return t}function j0(t,s){do{var d=_n;try{if(uu(),Il.current=kl,Nl){for(var m=fn.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Nl=!1}if(zs=0,Un=Ln=fn=null,ha=!1,pa=0,Uu.current=null,d===null||d.return===null){Bn=1,wa=s,_n=null;break}e:{var T=t,O=d.return,G=d,$=s;if(s=Qn,G.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var he=$,_e=G,ke=_e.tag;if(!(_e.mode&1)&&(ke===0||ke===11||ke===15)){var Se=_e.alternate;Se?(_e.updateQueue=Se.updateQueue,_e.memoizedState=Se.memoizedState,_e.lanes=Se.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Ye=c0(O);if(Ye!==null){Ye.flags&=-257,u0(Ye,O,G,T,s),Ye.mode&1&&l0(T,he,s),s=Ye,$=he;var Qe=s.updateQueue;if(Qe===null){var nt=new Set;nt.add($),s.updateQueue=nt}else Qe.add($);break e}else{if(!(s&1)){l0(T,he,s),qu();break e}$=Error(a(426))}}else if(on&&G.mode&1){var Tn=c0(O);if(Tn!==null){!(Tn.flags&65536)&&(Tn.flags|=256),u0(Tn,O,G,T,s),lu(bo($,G));break e}}T=$=bo($,G),Bn!==4&&(Bn=2),va===null?va=[T]:va.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,s&=-s,T.lanes|=s;var se=o0(T,$,s);Oh(T,se);break e;case 1:G=$;var ee=T.type,le=T.stateNode;if(!(T.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(ds===null||!ds.has(le)))){T.flags|=65536,s&=-s,T.lanes|=s;var je=a0(T,G,s);Oh(T,je);break e}}T=T.return}while(T!==null)}z0(d)}catch(rt){s=rt,_n===d&&d!==null&&(_n=d=d.return);continue}break}while(!0)}function F0(){var t=Bl.current;return Bl.current=kl,t===null?kl:t}function qu(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Wn===null||!(Us&268435455)&&!(jl&268435455)||ps(Wn,Qn)}function Hl(t,s){var d=Vt;Vt|=2;var m=F0();(Wn!==t||Qn!==s)&&(Bi=null,Hs(t,s));do try{Bx();break}catch(b){j0(t,b)}while(!0);if(uu(),Vt=d,Bl.current=m,_n!==null)throw Error(a(261));return Wn=null,Qn=0,Bn}function Bx(){for(;_n!==null;)V0(_n)}function jx(){for(;_n!==null&&!Ue();)V0(_n)}function V0(t){var s=H0(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,s===null?z0(t):_n=s,Uu.current=null}function z0(t){var s=t;do{var d=s.alternate;if(t=s.return,s.flags&32768){if(d=kx(d,s),d!==null){d.flags&=32767,_n=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bn=6,_n=null;return}}else if(d=Rx(d,s,Mr),d!==null){_n=d;return}if(s=s.sibling,s!==null){_n=s;return}_n=s=t}while(s!==null);Bn===0&&(Bn=5)}function Gs(t,s,d){var m=It,b=Hr.transition;try{Hr.transition=null,It=1,Fx(t,s,d,m)}finally{Hr.transition=b,It=m}return null}function Fx(t,s,d,m){do Io();while(fs!==null);if(Vt&6)throw Error(a(327));d=t.finishedWork;var b=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var T=d.lanes|d.childLanes;if(st(t,T),t===Wn&&(_n=Wn=null,Qn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Vl||(Vl=!0,G0(jt,function(){return Io(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Hr.transition,Hr.transition=null;var O=It;It=1;var G=Vt;Vt|=4,Uu.current=null,Ox(t,d),k0(d,t),or(qc),di=!!Kc,qc=Kc=null,t.current=d,Mx(d),Yn(),Vt=G,It=O,Hr.transition=T}else t.current=d;if(Vl&&(Vl=!1,fs=t,zl=b),T=t.pendingLanes,T===0&&(ds=null),Dt(d.stateNode),Sr(t,zt()),s!==null)for(m=t.onRecoverableError,d=0;d<s.length;d++)b=s[d],m(b.value,{componentStack:b.stack,digest:b.digest});if(Fl)throw Fl=!1,t=Gu,Gu=null,t;return zl&1&&t.tag!==0&&Io(),T=t.pendingLanes,T&1?t===Xu?Ca++:(Ca=0,Xu=t):Ca=0,as(),null}function Io(){if(fs!==null){var t=Qa(zl),s=Hr.transition,d=It;try{if(Hr.transition=null,It=16>t?16:t,fs===null)var m=!1;else{if(t=fs,fs=null,zl=0,Vt&6)throw Error(a(331));var b=Vt;for(Vt|=4,Ke=t.current;Ke!==null;){var T=Ke,O=T.child;if(Ke.flags&16){var G=T.deletions;if(G!==null){for(var $=0;$<G.length;$++){var he=G[$];for(Ke=he;Ke!==null;){var _e=Ke;switch(_e.tag){case 0:case 11:case 15:ya(8,_e,T)}var ke=_e.child;if(ke!==null)ke.return=_e,Ke=ke;else for(;Ke!==null;){_e=Ke;var Se=_e.sibling,Ye=_e.return;if(T0(_e),_e===he){Ke=null;break}if(Se!==null){Se.return=Ye,Ke=Se;break}Ke=Ye}}}var Qe=T.alternate;if(Qe!==null){var nt=Qe.child;if(nt!==null){Qe.child=null;do{var Tn=nt.sibling;nt.sibling=null,nt=Tn}while(nt!==null)}}Ke=T}}if(T.subtreeFlags&2064&&O!==null)O.return=T,Ke=O;else e:for(;Ke!==null;){if(T=Ke,T.flags&2048)switch(T.tag){case 0:case 11:case 15:ya(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Ke=se;break e}Ke=T.return}}var ee=t.current;for(Ke=ee;Ke!==null;){O=Ke;var le=O.child;if(O.subtreeFlags&2064&&le!==null)le.return=O,Ke=le;else e:for(O=ee;Ke!==null;){if(G=Ke,G.flags&2048)try{switch(G.tag){case 0:case 11:case 15:Ll(9,G)}}catch(rt){wn(G,G.return,rt)}if(G===O){Ke=null;break e}var je=G.sibling;if(je!==null){je.return=G.return,Ke=je;break e}Ke=G.return}}if(Vt=b,as(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Pt,t)}catch{}m=!0}return m}finally{It=d,Hr.transition=s}}return!1}function U0(t,s,d){s=bo(d,s),s=o0(t,s,1),t=cs(t,s,1),s=gr(),t!==null&&(z(t,1,s),Sr(t,s))}function wn(t,s,d){if(t.tag===3)U0(t,t,d);else for(;s!==null;){if(s.tag===3){U0(s,t,d);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ds===null||!ds.has(m))){t=bo(d,t),t=a0(s,t,1),s=cs(s,t,1),t=gr(),s!==null&&(z(s,1,t),Sr(s,t));break}}s=s.return}}function Vx(t,s,d){var m=t.pingCache;m!==null&&m.delete(s),s=gr(),t.pingedLanes|=t.suspendedLanes&d,Wn===t&&(Qn&d)===d&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>zt()-Hu?Hs(t,0):Wu|=d),Sr(t,s)}function W0(t,s){s===0&&(t.mode&1?(s=no,no<<=1,!(no&130023424)&&(no=4194304)):s=1);var d=gr();t=Mi(t,s),t!==null&&(z(t,s,d),Sr(t,d))}function zx(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),W0(t,d)}function Ux(t,s){var d=0;switch(t.tag){case 13:var m=t.stateNode,b=t.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(a(314))}m!==null&&m.delete(s),W0(t,d)}var H0;H0=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||vr.current)Er=!0;else{if(!(t.lanes&d)&&!(s.flags&128))return Er=!1,_x(t,s,d);Er=!!(t.flags&131072)}else Er=!1,on&&s.flags&1048576&&bh(s,wl,s.index);switch(s.lanes=0,s.tag){case 2:var m=s.type;Ml(t,s),t=s.pendingProps;var b=mo(s,ar.current);Co(s,d),b=Cu(null,s,m,t,b,d);var T=Eu();return s.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Cr(m)?(T=!0,gl(s)):T=!1,s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,pu(s),b.updater=Pl,s.stateNode=b,b._reactInternals=s,Nu(s,m,t,d),s=Pu(null,s,m,!0,T,d)):(s.tag=0,on&&T&&iu(s),mr(null,s,b,d),s=s.child),s;case 16:m=s.elementType;e:{switch(Ml(t,s),t=s.pendingProps,b=m._init,m=b(m._payload),s.type=m,b=s.tag=Hx(m),t=ti(m,t),b){case 0:s=ku(null,s,m,t,d);break e;case 1:s=g0(null,s,m,t,d);break e;case 11:s=d0(null,s,m,t,d);break e;case 14:s=f0(null,s,m,ti(m.type,t),d);break e}throw Error(a(306,m,""))}return s;case 0:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),ku(t,s,m,b,d);case 1:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),g0(t,s,m,b,d);case 3:e:{if(x0(s),t===null)throw Error(a(387));m=s.pendingProps,T=s.memoizedState,b=T.element,Ph(t,s),Al(s,m,null,d);var O=s.memoizedState;if(m=O.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){b=bo(Error(a(423)),s),s=y0(t,s,m,d,b);break e}else if(m!==b){b=bo(Error(a(424)),s),s=y0(t,s,m,d,b);break e}else for(Or=is(s.stateNode.containerInfo.firstChild),Pr=s,on=!0,ei=null,d=Rh(s,null,m,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(yo(),m===b){s=Li(t,s,d);break e}mr(t,s,m,d)}s=s.child}return s;case 5:return Dh(s),t===null&&au(s),m=s.type,b=s.pendingProps,T=t!==null?t.memoizedProps:null,O=b.children,Qc(m,b)?O=null:T!==null&&Qc(m,T)&&(s.flags|=32),m0(t,s),mr(t,s,O,d),s.child;case 6:return t===null&&au(s),null;case 13:return w0(t,s,d);case 4:return mu(s,s.stateNode.containerInfo),m=s.pendingProps,t===null?s.child=wo(s,null,m,d):mr(t,s,m,d),s.child;case 11:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),d0(t,s,m,b,d);case 7:return mr(t,s,s.pendingProps,d),s.child;case 8:return mr(t,s,s.pendingProps.children,d),s.child;case 12:return mr(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(m=s.type._context,b=s.pendingProps,T=s.memoizedProps,O=b.value,Qt(El,m._currentValue),m._currentValue=O,T!==null)if(re(T.value,O)){if(T.children===b.children&&!vr.current){s=Li(t,s,d);break e}}else for(T=s.child,T!==null&&(T.return=s);T!==null;){var G=T.dependencies;if(G!==null){O=T.child;for(var $=G.firstContext;$!==null;){if($.context===m){if(T.tag===1){$=Di(-1,d&-d),$.tag=2;var he=T.updateQueue;if(he!==null){he=he.shared;var _e=he.pending;_e===null?$.next=$:($.next=_e.next,_e.next=$),he.pending=$}}T.lanes|=d,$=T.alternate,$!==null&&($.lanes|=d),fu(T.return,d,s),G.lanes|=d;break}$=$.next}}else if(T.tag===10)O=T.type===s.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(a(341));O.lanes|=d,G=O.alternate,G!==null&&(G.lanes|=d),fu(O,d,s),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===s){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}mr(t,s,b.children,d),s=s.child}return s;case 9:return b=s.type,m=s.pendingProps.children,Co(s,d),b=Ur(b),m=m(b),s.flags|=1,mr(t,s,m,d),s.child;case 14:return m=s.type,b=ti(m,s.pendingProps),b=ti(m.type,b),f0(t,s,m,b,d);case 15:return h0(t,s,s.type,s.pendingProps,d);case 17:return m=s.type,b=s.pendingProps,b=s.elementType===m?b:ti(m,b),Ml(t,s),s.tag=1,Cr(m)?(t=!0,gl(s)):t=!1,Co(s,d),i0(s,m,b),Nu(s,m,b,d),Pu(null,s,m,!0,t,d);case 19:return C0(t,s,d);case 22:return p0(t,s,d)}throw Error(a(156,s.tag))};function G0(t,s){return ct(t,s)}function Wx(t,s,d,m){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,s,d,m){return new Wx(t,s,d,m)}function Qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hx(t){if(typeof t=="function")return Qu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ie)return 11;if(t===J)return 14}return 2}function ms(t,s){var d=t.alternate;return d===null?(d=Gr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Gl(t,s,d,m,b,T){var O=2;if(m=t,typeof t=="function")Qu(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case q:return Xs(d.children,b,T,s);case ce:O=8,b|=8;break;case K:return t=Gr(12,d,s,b|2),t.elementType=K,t.lanes=T,t;case Le:return t=Gr(13,d,s,b),t.elementType=Le,t.lanes=T,t;case be:return t=Gr(19,d,s,b),t.elementType=be,t.lanes=T,t;case pe:return Xl(d,b,T,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Te:O=10;break e;case Be:O=9;break e;case Ie:O=11;break e;case J:O=14;break e;case Fe:O=16,m=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Gr(O,d,s,b),s.elementType=t,s.type=m,s.lanes=T,s}function Xs(t,s,d,m){return t=Gr(7,t,m,s),t.lanes=d,t}function Xl(t,s,d,m){return t=Gr(22,t,m,s),t.elementType=pe,t.lanes=d,t.stateNode={isHidden:!1},t}function Ju(t,s,d){return t=Gr(6,t,null,s),t.lanes=d,t}function ed(t,s,d){return s=Gr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Gx(t,s,d,m,b){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ie(0),this.expirationTimes=ie(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function td(t,s,d,m,b,T,O,G,$){return t=new Gx(t,s,d,G,$),s===1?(s=1,T===!0&&(s|=8)):s=0,T=Gr(3,null,null,s),t.current=T,T.stateNode=t,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},pu(T),t}function Xx(t,s,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:m==null?null:""+m,children:t,containerInfo:s,implementation:d}}function X0(t){if(!t)return os;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Cr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(Cr(d))return vh(t,d,s)}return s}function Y0(t,s,d,m,b,T,O,G,$){return t=td(d,m,!0,t,b,T,O,G,$),t.context=X0(null),d=t.current,m=gr(),b=hs(d),T=Di(m,b),T.callback=s??null,cs(d,T,b),t.current.lanes=b,z(t,b,m),Sr(t,m),t}function Yl(t,s,d,m){var b=s.current,T=gr(),O=hs(b);return d=X0(d),s.context===null?s.context=d:s.pendingContext=d,s=Di(T,O),s.payload={element:t},m=m===void 0?null:m,m!==null&&(s.callback=m),t=cs(b,s,O),t!==null&&(ii(t,b,O,T),Sl(t,b,O)),O}function $l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function nd(t,s){$0(t,s),(t=t.alternate)&&$0(t,s)}function Yx(){return null}var Z0=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}Zl.prototype.render=rd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Yl(t,s,null,null)},Zl.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ws(function(){Yl(null,t,null,null)}),s[Ri]=null}};function Zl(t){this._internalRoot=t}Zl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Kt();t={blockedOn:null,target:t,priority:s};for(var d=0;d<$n.length&&s!==0&&s<$n[d].priority;d++);$n.splice(d,0,t),d===0&&el(t)}};function id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function $x(t,s,d,m,b){if(b){if(typeof m=="function"){var T=m;m=function(){var he=$l(O);T.call(he)}}var O=Y0(s,m,t,0,null,!1,!1,"",K0);return t._reactRootContainer=O,t[Ri]=O.current,sa(t.nodeType===8?t.parentNode:t),Ws(),O}for(;b=t.lastChild;)t.removeChild(b);if(typeof m=="function"){var G=m;m=function(){var he=$l($);G.call(he)}}var $=td(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=$,t[Ri]=$.current,sa(t.nodeType===8?t.parentNode:t),Ws(function(){Yl(s,$,d,m)}),$}function ql(t,s,d,m,b){var T=d._reactRootContainer;if(T){var O=T;if(typeof b=="function"){var G=b;b=function(){var $=$l(O);G.call($)}}Yl(s,O,t,b)}else O=$x(d,s,t,b,m);return $l(O)}ro=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=Zt(s.pendingLanes);d!==0&&(xn(s,d|1),Sr(s,zt()),!(Vt&6)&&(To=zt()+500,as()))}break;case 13:Ws(function(){var m=Mi(t,1);if(m!==null){var b=gr();ii(m,t,1,b)}}),nd(t,1)}},sr=function(t){if(t.tag===13){var s=Mi(t,134217728);if(s!==null){var d=gr();ii(s,t,134217728,d)}nd(t,134217728)}},at=function(t){if(t.tag===13){var s=hs(t),d=Mi(t,s);if(d!==null){var m=gr();ii(d,t,s,m)}nd(t,s)}},Kt=function(){return It},Go=function(t,s){var d=It;try{return It=t,s()}finally{It=d}},ln=function(t,s,d){switch(s){case"input":if(mt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var m=d[s];if(m!==t&&m.form===t.form){var b=pl(m);if(!b)throw Error(a(90));oe(m),mt(m,b)}}}break;case"textarea":We(t,d);break;case"select":s=d.value,s!=null&&Pe(t,!!d.multiple,s,!1)}},Hi=Zu,cn=Ws;var Zx={usingClientEntryPoint:!1,Events:[la,ho,pl,Wi,nr,Zu]},Ea={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xe(t),t===null?null:t.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||Yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Pt=Ql.inject(Kx),Tt=Ql}catch{}}return Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx,Ar.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(s))throw Error(a(200));return Xx(t,s,null,d)},Ar.createRoot=function(t,s){if(!id(t))throw Error(a(299));var d=!1,m="",b=Z0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=td(t,1,!1,null,null,d,!1,m,b),t[Ri]=s.current,sa(t.nodeType===8?t.parentNode:t),new rd(s)},Ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Xe(s),t=t===null?null:t.stateNode,t},Ar.flushSync=function(t){return Ws(t)},Ar.hydrate=function(t,s,d){if(!Kl(s))throw Error(a(200));return ql(null,t,s,!0,d)},Ar.hydrateRoot=function(t,s,d){if(!id(t))throw Error(a(405));var m=d!=null&&d.hydratedSources||null,b=!1,T="",O=Z0;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),s=Y0(s,null,t,1,d??null,b,!1,T,O),t[Ri]=s.current,sa(t),m)for(t=0;t<m.length;t++)d=m[t],b=d._getVersion,b=b(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,b]:s.mutableSourceEagerHydrationData.push(d,b);return new Zl(s)},Ar.render=function(t,s,d){if(!Kl(s))throw Error(a(200));return ql(null,t,s,!1,d)},Ar.unmountComponentAtNode=function(t){if(!Kl(t))throw Error(a(40));return t._reactRootContainer?(Ws(function(){ql(null,null,t,!1,function(){t._reactRootContainer=null,t[Ri]=null})}),!0):!1},Ar.unstable_batchedUpdates=Zu,Ar.unstable_renderSubtreeIntoContainer=function(t,s,d,m){if(!Kl(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return ql(t,s,d,!1,m)},Ar.version="18.3.1-next-f1338f8080-20240426",Ar}var i1;function i2(){if(i1)return ad.exports;i1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),ad.exports=r2(),ad.exports}var s1;function s2(){if(s1)return ec;s1=1;var r=i2();return ec.createRoot=r.createRoot,ec.hydrateRoot=r.hydrateRoot,ec}var o2=s2();const Xn=N.createContext(null),a2=({children:r})=>{const[o,a]=N.useState(null),[f,p]=N.useState(null),[x,w]=N.useState(null),[S,v]=N.useState(null),[E,A]=N.useState(!1),[I,R]=N.useState(null),M=async()=>{try{const U=await fetch(window.server_url+"/auth/session",{method:"GET",credentials:"include"});if(U.ok){const F=await U.json();if(F.authenticated){console.log("SESSION AUTH SUCCESS:",F),A(!0),a(F.user.username),p(F.user.profile||null),R(F.user.permissions||null);return}}}catch(U){console.log("Session auth check failed (this is ok if using JWT):",U)}const V=localStorage.getItem("access_token");if(V)try{const U=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${V}`},credentials:"include"});if(U.ok){A(!0);const F=await U.json();console.log("JWT AUTH SUCCESS:",F),a(F.username),p(F.profile),R(F.permissions),console.log("PERMISSIONS:",F.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),w(null),v(null),A(!1)}catch(U){console.log("JWT auth error:",U)}};N.useEffect(()=>{M()},[]);const L=V=>{a(V.username),w(V.access_token),v(V.refresh_token),R(V.permissions),console.log("PRE SAVE USERNAME:",V.username),localStorage.setItem("user",V.username),localStorage.setItem("access_token",V.access_token),localStorage.setItem("refresh_token",V.refresh_token)},B=async(V,U)=>{const F=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:V,password:U})});if(F.ok){const Q=await F.json();console.log("SIGNED UP, userData:",Q)}},j=async()=>{try{await fetch(window.server_url+"/auth/logout",{method:"POST",credentials:"include"})}catch(V){console.log("Logout request failed (session may already be cleared):",V)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a(null),p(null),w(null),v(null),A(!1),R(null)};return y.jsx(Xn.Provider,{value:{user:o,login:L,signup:B,logout:j,userProfile:f,checkAuth:M,permissions:I},children:r})};var Dd=function(r,o){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(a[p]=f[p])},Dd(r,o)};function l2(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Dd(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var er=function(){return er=Object.assign||function(o){for(var a,f=1,p=arguments.length;f<p;f++){a=arguments[f];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},er.apply(this,arguments)};var ud,o1;function c2(){if(o1)return ud;o1=1;var r=!1,o,a,f,p,x,w,S,v,E,A,I,R,M,L,B;function j(){if(!r){r=!0;var U=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(U),Q=/(Mac OS X)|(Windows)|(Linux)/.exec(U);if(R=/\b(iPhone|iP[ao]d)/.exec(U),M=/\b(iP[ao]d)/.exec(U),A=/Android/i.exec(U),L=/FBAN\/\w+;/i.exec(U),B=/Mobile/i.exec(U),I=!!/Win64/.exec(U),F){o=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var ne=/(?:Trident\/(\d+.\d+))/.exec(U);w=ne?parseFloat(ne[1])+4:o,a=F[2]?parseFloat(F[2]):NaN,f=F[3]?parseFloat(F[3]):NaN,p=F[4]?parseFloat(F[4]):NaN,p?(F=/(?:Chrome\/(\d+\.\d+))/.exec(U),x=F&&F[1]?parseFloat(F[1]):NaN):x=NaN}else o=a=f=x=p=NaN;if(Q){if(Q[1]){var te=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(U);S=te?parseFloat(te[1].replace("_",".")):!0}else S=!1;v=!!Q[2],E=!!Q[3]}else S=v=E=!1}}var V={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||w>o},ie64:function(){return V.ie()&&I},firefox:function(){return j()||a},opera:function(){return j()||f},webkit:function(){return j()||p},safari:function(){return V.webkit()},chrome:function(){return j()||x},windows:function(){return j()||v},osx:function(){return j()||S},linux:function(){return j()||E},iphone:function(){return j()||R},mobile:function(){return j()||R||M||A||B},nativeApp:function(){return j()||L},android:function(){return j()||A},ipad:function(){return j()||M}};return ud=V,ud}var dd,a1;function u2(){if(a1)return dd;a1=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return dd=o,dd}var fd,l1;function d2(){if(l1)return fd;l1=1;var r=u2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(f,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+f,w=x in document;if(!w){var S=document.createElement("div");S.setAttribute(x,"return;"),w=typeof S[x]=="function"}return!w&&o&&f==="wheel"&&(w=document.implementation.hasFeature("Events.wheel","3.0")),w}return fd=a,fd}var hd,c1;function f2(){if(c1)return hd;c1=1;var r=c2(),o=d2(),a=10,f=40,p=800;function x(w){var S=0,v=0,E=0,A=0;return"detail"in w&&(v=w.detail),"wheelDelta"in w&&(v=-w.wheelDelta/120),"wheelDeltaY"in w&&(v=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(S=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(S=v,v=0),E=S*a,A=v*a,"deltaY"in w&&(A=w.deltaY),"deltaX"in w&&(E=w.deltaX),(E||A)&&w.deltaMode&&(w.deltaMode==1?(E*=f,A*=f):(E*=p,A*=p)),E&&!S&&(S=E<1?-1:1),A&&!v&&(v=A<1?-1:1),{spinX:S,spinY:v,pixelX:E,pixelY:A}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},hd=x,hd}var pd,u1;function h2(){return u1||(u1=1,pd=f2()),pd}var p2=h2();const m2=Yp(p2);function g2(r,o,a,f,p,x){x===void 0&&(x=0);var w=Do(r,o,x),S=w.width,v=w.height,E=Math.min(S,a),A=Math.min(v,f);return E>A*p?{width:A*p,height:A}:{width:E,height:E/p}}function x2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Sa(r,o,a,f,p){p===void 0&&(p=0);var x=Do(o.width,o.height,p),w=x.width,S=x.height;return{x:d1(r.x,w,a.width,f),y:d1(r.y,S,a.height,f)}}function d1(r,o,a,f){var p=o*f/2-a/2;return _c(r,-p,p)}function f1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function h1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function y2(r,o,a,f,p,x,w){x===void 0&&(x=0),w===void 0&&(w=!0);var S=w?w2:v2,v=Do(o.width,o.height,x),E=Do(o.naturalWidth,o.naturalHeight,x),A={x:S(100,((v.width-a.width/p)/2-r.x/p)/v.width*100),y:S(100,((v.height-a.height/p)/2-r.y/p)/v.height*100),width:S(100,a.width/v.width*100/p),height:S(100,a.height/v.height*100/p)},I=Math.round(S(E.width,A.width*E.width/100)),R=Math.round(S(E.height,A.height*E.height/100)),M=E.width>=E.height*f,L=M?{width:Math.round(R*f),height:R}:{width:I,height:Math.round(I/f)},B=er(er({},L),{x:Math.round(S(E.width-L.width,A.x*E.width/100)),y:Math.round(S(E.height-L.height,A.y*E.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:B}}function w2(r,o){return Math.min(r,Math.max(0,o))}function v2(r,o){return o}function C2(r,o,a,f,p,x){var w=Do(o.width,o.height,a),S=_c(f.width/w.width*(100/r.width),p,x),v={x:S*w.width/2-f.width/2-w.width*S*(r.x/100),y:S*w.height/2-f.height/2-w.height*S*(r.y/100)};return{crop:v,zoom:S}}function E2(r,o,a){var f=x2(o);return a.height>a.width?a.height/(r.height*f):a.width/(r.width*f)}function b2(r,o,a,f,p,x){a===void 0&&(a=0);var w=Do(o.naturalWidth,o.naturalHeight,a),S=_c(E2(r,o,f),p,x),v=f.height>f.width?f.height/r.height:f.width/r.width,E={x:((w.width-r.width)/2-r.x)*v,y:((w.height-r.height)/2-r.y)*v};return{crop:E,zoom:S}}function p1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function S2(r){return r*Math.PI/180}function Do(r,o,a){var f=S2(a);return{width:Math.abs(Math.cos(f)*r)+Math.abs(Math.sin(f)*o),height:Math.abs(Math.sin(f)*r)+Math.abs(Math.cos(f)*o)}}function _c(r,o,a){return Math.min(Math.max(r,o),a)}function tc(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var A2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,T2=1,I2=3,N2=1,hf=function(r){l2(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=N.createRef(),a.videoRef=N.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var f=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(f){f=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(f){return f.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var f=a.computeSizes();f&&(a.emitCropData(),a.setInitialCrop(f)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(f){if(a.props.initialCroppedAreaPercentages){var p=C2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=p.crop,w=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}else if(a.props.initialCroppedAreaPixels){var S=b2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,f,a.props.minZoom,a.props.maxZoom),x=S.crop,w=S.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(w)}},a.computeSizes=function(){var f,p,x,w,S,v,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,I=((f=a.imageRef.current)===null||f===void 0?void 0:f.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((w=a.videoRef.current)===null||w===void 0?void 0:w.videoHeight)||0,M=E.offsetWidth<I||E.offsetHeight<R,L=I/R,B=void 0;if(M)switch(a.state.mediaObjectFit){default:case"contain":B=A>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=er(er({},B),{naturalWidth:I,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:g2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((S=a.state.cropSize)===null||S===void 0?void 0:S.height)!==j.height||((v=a.state.cropSize)===null||v===void 0?void 0:v.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var f=a.containerRef.getBoundingClientRect();a.containerPosition={x:f.left,y:f.top}}},a.onMouseDown=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(f)))},a.onMouseMove=function(f){return a.onDrag(o.getMousePoint(f))},a.onScroll=function(f){a.currentDoc&&(f.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(f){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(f))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),f.touches.length===2?a.onPinchStart(f):f.touches.length===1&&a.onDragStart(o.getTouchPoint(f.touches[0]))))},a.onTouchMove=function(f){f.preventDefault(),f.touches.length===2?a.onPinchMove(f):f.touches.length===1&&a.onDrag(o.getTouchPoint(f.touches[0]))},a.onGestureStart=function(f){a.currentDoc&&(f.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(f){if(f.preventDefault(),!a.isTouching){var p=o.getMousePoint(f),x=a.gestureZoomStart-1+f.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var w=a.gestureRotationStart+f.rotation;a.props.onRotationChange(w)}}},a.onGestureEnd=function(f){a.cleanEvents()},a.onDragStart=function(f){var p,x,w=f.x,S=f.y;a.dragStartPosition={x:w,y:S},a.dragStartCrop=er({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(f){var p=f.x,x=f.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var w=p-a.dragStartPosition.x,S=x-a.dragStartPosition.y,v={x:a.dragStartCrop.x+w,y:a.dragStartCrop.y+S},E=a.props.restrictPosition?Sa(v,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):v;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var f,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(f=a.props).onInteractionEnd)===null||p===void 0||p.call(f)},a.onWheel=function(f){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(f))){f.preventDefault();var p=o.getMousePoint(f),x=m2(f).pixelY,w=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(w,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var S,v;return(v=(S=a.props).onInteractionStart)===null||v===void 0?void 0:v.call(S)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var S,v;return(v=(S=a.props).onInteractionEnd)===null||v===void 0?void 0:v.call(S)})},250)}},a.getPointOnContainer=function(f,p){var x=f.x,w=f.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(w-p.y)}},a.getPointOnMedia=function(f){var p=f.x,x=f.y,w=a.props,S=w.crop,v=w.zoom;return{x:(p+S.x)/v,y:(x+S.y)/v}},a.setNewZoom=function(f,p,x){var w=x===void 0?{}:x,S=w.shouldUpdatePosition,v=S===void 0?!0:S;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=_c(f,a.props.minZoom,a.props.maxZoom);if(v){var A=a.getPointOnContainer(p,a.containerPosition),I=a.getPointOnMedia(A),R={x:I.x*E-A.x,y:I.y*E-A.y},M=a.props.restrictPosition?Sa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(M)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var f=a.props.restrictPosition?Sa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return y2(f,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var f=a.getCropData();if(f){var p=f.croppedAreaPercentages,x=f.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var f=a.props.restrictPosition?Sa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(f),a.emitCropData()}},a.onKeyDown=function(f){var p=a.props,x=p.crop,w=p.onCropChange,S=p.keyboardStep,v=p.zoom,E=p.rotation,A=S;if(a.state.cropSize){f.shiftKey&&(A*=.2);var I=er({},x);switch(f.key){case"ArrowUp":I.y-=A,f.preventDefault();break;case"ArrowDown":I.y+=A,f.preventDefault();break;case"ArrowLeft":I.x-=A,f.preventDefault();break;case"ArrowRight":I.x+=A,f.preventDefault();break;default:return}a.props.restrictPosition&&(I=Sa(I,a.mediaSize,a.state.cropSize,v,E)),w(I)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=A2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,f;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((f=this.styleRef.parentNode)===null||f===void 0||f.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var f,p,x,w,S,v,E,A,I;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((f=a.cropSize)===null||f===void 0?void 0:f.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((w=this.props.cropSize)===null||w===void 0?void 0:w.width)?this.computeSizes():(((S=a.crop)===null||S===void 0?void 0:S.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((I=this.videoRef.current)===null||I===void 0||I.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,f=a.cropSize,p=a.aspect;return f?f.width/f.height:p},o.prototype.getObjectFit=function(){var a,f,p,x;if(this.props.objectFit==="cover"){var w=this.imageRef.current||this.videoRef.current;if(w&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var S=this.containerRect.width/this.containerRect.height,v=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((f=this.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=v/E;return A<S?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var f=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=f1(f,p),this.lastPinchRotation=h1(f,p),this.onDragStart(p1(f,p))},o.prototype.onPinchMove=function(a){var f=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),w=p1(p,x);this.onDrag(w),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var S=f1(p,x),v=f.props.zoom*(S/f.lastPinchDistance);f.setNewZoom(v,w,{shouldUpdatePosition:!1}),f.lastPinchDistance=S;var E=h1(p,x),A=f.props.rotation+(E-f.lastPinchRotation);f.props.onRotationChange&&f.props.onRotationChange(A),f.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,f,p=this.props,x=p.image,w=p.video,S=p.mediaProps,v=p.transform,E=p.crop,A=E.x,I=E.y,R=p.rotation,M=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,V=j.containerStyle,U=j.cropAreaStyle,F=j.mediaStyle,Q=p.classes,ne=Q.containerClassName,te=Q.cropAreaClassName,q=Q.mediaClassName,ce=(f=this.state.mediaObjectFit)!==null&&f!==void 0?f:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Te){return a.containerRef=Te},"data-testid":"container",style:V,className:tc("reactEasyCrop_Container",ne)},x?N.createElement("img",er({alt:"",className:tc("reactEasyCrop_Image",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},S,{src:x,ref:this.imageRef,style:er(er({},F),{transform:v||"translate(".concat(A,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),onLoad:this.onMediaLoad})):w&&N.createElement("video",er({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:tc("reactEasyCrop_Video",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",q)},S,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:er(er({},F),{transform:v||"translate(".concat(A,"px, ").concat(I,"px) rotate(").concat(R,"deg) scale(").concat(M,")")}),controls:!1}),(Array.isArray(w)?w:[{src:w}]).map(function(K){return N.createElement("source",er({key:K.src},K))})),this.state.cropSize&&N.createElement("div",{style:er(er({},U),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:tc("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",te)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:I2,minZoom:T2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:N2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(N.Component),Aa={},m1;function _2(){return m1||(m1=1,Aa.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Aa.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Aa.loadImage=function(r,o){return new Promise(function(a,f){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),f(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Aa}_2();async function pf(r,o){return console.log("Image source being cropped:",r),new Promise((a,f)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),w=x.getContext("2d");x.width=o.width,x.height=o.height,w.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const S=x.toDataURL("image/jpeg");a(S)}catch{f(new Error("Error converting canvas to base64"))}},p.onerror=x=>f(new Error(`Image load error: ${x.message}`)),p.src=r})}const R2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:f,userProfile:p,checkAuth:x}=N.useContext(Xn),[w,S]=N.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[v,E]=N.useState({x:0,y:0}),[A,I]=N.useState(1),[R,M]=N.useState(null),[L,B]=N.useState(!1),[j,V]=N.useState(!1),U=ne=>{const te=ne.target.files[0];if(te){const q=new FileReader;q.onload=ce=>{S(K=>({...K,image:te,imagePreview:ce.target.result})),B(!0)},q.readAsDataURL(te)}},F=(ne,te)=>{console.log("Cropped Area Pixels:",te),M(te)};async function Q(ne){ne.preventDefault();let te;if(w.croppedImage)te=w.croppedImage.split(",")[1];else if(w.image instanceof File){const K=await w.image.arrayBuffer();te=btoa(new Uint8Array(K).reduce((Te,Be)=>Te+String.fromCharCode(Be),""))}else if(p!=null&&p.image_data)te=p.image_data;else{console.error("No valid image provided");return}const q={name:w.name,image_data:te};console.log("Image data (first 100 chars):",te.substring(0,100));const ce=localStorage.getItem("access_token");try{const K=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"},body:JSON.stringify(q)});if(!K.ok)throw new Error("Failed to update profile");const Te=await K.json();await x(),console.log("Profile updated successfully:",Te),o()}catch(K){console.error("Error updating profile:",K)}}return y.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:y.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[y.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:""}),y.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),y.jsxs("form",{onSubmit:Q,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[y.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),y.jsx("input",{type:"text",value:w.name,onChange:ne=>S({...w,name:ne.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&y.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:y.jsx("img",{src:w.croppedImage?w.croppedImage:w.imagePreview?w.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),y.jsxs("div",{style:{textAlign:"center"},children:[y.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:U,style:{display:"none"}}),y.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&y.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[y.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:y.jsx(hf,{image:w.imagePreview,crop:v,zoom:A,aspect:1,onCropComplete:F,onCropChange:E,onZoomChange:I})}),y.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[y.jsx("button",{type:"button",onClick:()=>{B(!1),w.croppedImage||S(ne=>({...ne,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),y.jsx("button",{type:"button",onClick:async()=>{try{const ne=await pf(w.imagePreview,R);S(te=>({...te,croppedImage:ne,imagePreview:ne})),B(!1),V(!0),setTimeout(()=>V(!1),1e4)}catch(ne){console.error("Error cropping image:",ne)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),y.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var Ta={},g1;function k2(){if(g1)return Ta;g1=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.parse=w,Ta.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function w(R,M){const L=new x,B=R.length;if(B<2)return L;const j=(M==null?void 0:M.decode)||A;let V=0;do{const U=R.indexOf("=",V);if(U===-1)break;const F=R.indexOf(";",V),Q=F===-1?B:F;if(U>Q){V=R.lastIndexOf(";",U-1)+1;continue}const ne=S(R,V,U),te=v(R,U,ne),q=R.slice(ne,te);if(L[q]===void 0){let ce=S(R,U+1,Q),K=v(R,Q,ce);const Te=j(R.slice(ce,K));L[q]=Te}V=Q+1}while(V<B);return L}function S(R,M,L){do{const B=R.charCodeAt(M);if(B!==32&&B!==9)return M}while(++M<L);return L}function v(R,M,L){for(;M>L;){const B=R.charCodeAt(--M);if(B!==32&&B!==9)return M+1}return L}function E(R,M,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(M);if(!o.test(j))throw new TypeError(`argument val is invalid: ${M}`);let V=R+"="+j;if(!L)return V;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);V+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);V+="; Domain="+L.domain}if(L.path){if(!f.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);V+="; Path="+L.path}if(L.expires){if(!I(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);V+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(V+="; HttpOnly"),L.secure&&(V+="; Secure"),L.partitioned&&(V+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return V}function A(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return p.call(R)==="[object Date]"}return Ta}k2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var x1="popstate";function P2(r={}){function o(f,p){let{pathname:x,search:w,hash:S}=f.location;return Ld("",{pathname:x,search:w,hash:S},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){return typeof p=="string"?p:Ba(p)}return M2(o,a,null,r)}function pn(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function vi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function O2(){return Math.random().toString(36).substring(2,10)}function y1(r,o){return{usr:r.state,key:r.key,idx:o}}function Ld(r,o,a=null,f){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?jo(o):o,state:a,key:o&&o.key||f||O2()}}function Ba({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function jo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let f=r.indexOf("?");f>=0&&(o.search=r.substring(f),r=r.substring(0,f)),r&&(o.pathname=r)}return o}function M2(r,o,a,f={}){let{window:p=document.defaultView,v5Compat:x=!1}=f,w=p.history,S="POP",v=null,E=A();E==null&&(E=0,w.replaceState({...w.state,idx:E},""));function A(){return(w.state||{idx:null}).idx}function I(){S="POP";let j=A(),V=j==null?null:j-E;E=j,v&&v({action:S,location:B.location,delta:V})}function R(j,V){S="PUSH";let U=Ld(B.location,j,V);E=A()+1;let F=y1(U,E),Q=B.createHref(U);try{w.pushState(F,"",Q)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;p.location.assign(Q)}x&&v&&v({action:S,location:B.location,delta:1})}function M(j,V){S="REPLACE";let U=Ld(B.location,j,V);E=A();let F=y1(U,E),Q=B.createHref(U);w.replaceState(F,"",Q),x&&v&&v({action:S,location:B.location,delta:0})}function L(j){let V=p.location.origin!=="null"?p.location.origin:p.location.href,U=typeof j=="string"?j:Ba(j);return U=U.replace(/ $/,"%20"),pn(V,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,V)}let B={get action(){return S},get location(){return r(p,w)},listen(j){if(v)throw new Error("A history only accepts one active listener");return p.addEventListener(x1,I),v=j,()=>{p.removeEventListener(x1,I),v=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let V=L(j);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:R,replace:M,go(j){return w.go(j)}};return B}function $p(r,o,a="/"){return D2(r,o,a,!1)}function D2(r,o,a,f){let p=typeof o=="string"?jo(o):o,x=ws(p.pathname||"/",a);if(x==null)return null;let w=Zp(r);L2(w);let S=null;for(let v=0;S==null&&v<w.length;++v){let E=Y2(x);S=G2(w[v],E,f)}return S}function Zp(r,o=[],a=[],f=""){let p=(x,w,S)=>{let v={relativePath:S===void 0?x.path||"":S,caseSensitive:x.caseSensitive===!0,childrenIndex:w,route:x};v.relativePath.startsWith("/")&&(pn(v.relativePath.startsWith(f),`Absolute route path "${v.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(f.length));let E=Fi([f,v.relativePath]),A=a.concat(v);x.children&&x.children.length>0&&(pn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Zp(x.children,o,A,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:W2(E,x.index),routesMeta:A})};return r.forEach((x,w)=>{var S;if(x.path===""||!((S=x.path)!=null&&S.includes("?")))p(x,w);else for(let v of Kp(x.path))p(x,w,v)}),o}function Kp(r){let o=r.split("/");if(o.length===0)return[];let[a,...f]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(f.length===0)return p?[x,""]:[x];let w=Kp(f.join("/")),S=[];return S.push(...w.map(v=>v===""?x:[x,v].join("/"))),p&&S.push(...w),S.map(v=>r.startsWith("/")&&v===""?"/":v)}function L2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:H2(o.routesMeta.map(f=>f.childrenIndex),a.routesMeta.map(f=>f.childrenIndex)))}var B2=/^:[\w-]+$/,j2=3,F2=2,V2=1,z2=10,U2=-2,w1=r=>r==="*";function W2(r,o){let a=r.split("/"),f=a.length;return a.some(w1)&&(f+=U2),o&&(f+=F2),a.filter(p=>!w1(p)).reduce((p,x)=>p+(B2.test(x)?j2:x===""?V2:z2),f)}function H2(r,o){return r.length===o.length&&r.slice(0,-1).every((f,p)=>f===o[p])?r[r.length-1]-o[o.length-1]:0}function G2(r,o,a=!1){let{routesMeta:f}=r,p={},x="/",w=[];for(let S=0;S<f.length;++S){let v=f[S],E=S===f.length-1,A=x==="/"?o:o.slice(x.length)||"/",I=yc({path:v.relativePath,caseSensitive:v.caseSensitive,end:E},A),R=v.route;if(!I&&E&&a&&!f[f.length-1].route.index&&(I=yc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!I)return null;Object.assign(p,I.params),w.push({params:p,pathname:Fi([x,I.pathname]),pathnameBase:q2(Fi([x,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(x=Fi([x,I.pathnameBase]))}return w}function yc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,f]=X2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],w=x.replace(/(.)\/+$/,"$1"),S=p.slice(1);return{params:f.reduce((E,{paramName:A,isOptional:I},R)=>{if(A==="*"){let L=S[R]||"";w=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const M=S[R];return I&&!M?E[A]=void 0:E[A]=(M||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:w,pattern:r}}function X2(r,o=!1,a=!0){vi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let f=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,S,v)=>(f.push({paramName:S,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(f.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),f]}function Y2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return vi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ws(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,f=r.charAt(a);return f&&f!=="/"?null:r.slice(a)||"/"}function $2(r,o="/"){let{pathname:a,search:f="",hash:p=""}=typeof r=="string"?jo(r):r;return{pathname:a?a.startsWith("/")?a:Z2(a,o):o,search:Q2(f),hash:J2(p)}}function Z2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function md(r,o,a,f){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function qp(r){let o=K2(r);return o.map((a,f)=>f===o.length-1?a.pathname:a.pathnameBase)}function Qp(r,o,a,f=!1){let p;typeof r=="string"?p=jo(r):(p={...r},pn(!p.pathname||!p.pathname.includes("?"),md("?","pathname","search",p)),pn(!p.pathname||!p.pathname.includes("#"),md("#","pathname","hash",p)),pn(!p.search||!p.search.includes("#"),md("#","search","hash",p)));let x=r===""||p.pathname==="",w=x?"/":p.pathname,S;if(w==null)S=a;else{let I=o.length-1;if(!f&&w.startsWith("..")){let R=w.split("/");for(;R[0]==="..";)R.shift(),I-=1;p.pathname=R.join("/")}S=I>=0?o[I]:"/"}let v=$2(p,S),E=w&&w!=="/"&&w.endsWith("/"),A=(x||w===".")&&a.endsWith("/");return!v.pathname.endsWith("/")&&(E||A)&&(v.pathname+="/"),v}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),q2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Q2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,J2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ey(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Jp=["POST","PUT","PATCH","DELETE"];new Set(Jp);var ty=["GET",...Jp];new Set(ty);var Fo=N.createContext(null);Fo.displayName="DataRouter";var Rc=N.createContext(null);Rc.displayName="DataRouterState";var em=N.createContext({isTransitioning:!1});em.displayName="ViewTransition";var ny=N.createContext(new Map);ny.displayName="Fetchers";var ry=N.createContext(null);ry.displayName="Await";var Ci=N.createContext(null);Ci.displayName="Navigation";var Ha=N.createContext(null);Ha.displayName="Location";var Ei=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var mf=N.createContext(null);mf.displayName="RouteError";function iy(r,{relative:o}={}){pn(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:f}=N.useContext(Ci),{hash:p,pathname:x,search:w}=Xa(r,{relative:o}),S=x;return a!=="/"&&(S=x==="/"?a:Fi([a,x])),f.createHref({pathname:S,search:w,hash:p})}function Ga(){return N.useContext(Ha)!=null}function Dr(){return pn(Ga(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ha).location}var tm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nm(r){N.useContext(Ci).static||N.useLayoutEffect(r)}function Fn(){let{isDataRoute:r}=N.useContext(Ei);return r?yy():sy()}function sy(){pn(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let r=N.useContext(Fo),{basename:o,navigator:a}=N.useContext(Ci),{matches:f}=N.useContext(Ei),{pathname:p}=Dr(),x=JSON.stringify(qp(f)),w=N.useRef(!1);return nm(()=>{w.current=!0}),N.useCallback((v,E={})=>{if(vi(w.current,tm),!w.current)return;if(typeof v=="number"){a.go(v);return}let A=Qp(v,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(A.pathname=A.pathname==="/"?o:Fi([o,A.pathname])),(E.replace?a.replace:a.push)(A,E.state,E)},[o,a,x,p,r])}N.createContext(null);function oy(){let{matches:r}=N.useContext(Ei),o=r[r.length-1];return o?o.params:{}}function Xa(r,{relative:o}={}){let{matches:a}=N.useContext(Ei),{pathname:f}=Dr(),p=JSON.stringify(qp(a));return N.useMemo(()=>Qp(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function ay(r,o){return rm(r,o)}function rm(r,o,a,f){var V;pn(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=N.useContext(Ci),{matches:x}=N.useContext(Ei),w=x[x.length-1],S=w?w.params:{},v=w?w.pathname:"/",E=w?w.pathnameBase:"/",A=w&&w.route;{let U=A&&A.path||"";im(v,!A||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let I=Dr(),R;if(o){let U=typeof o=="string"?jo(o):o;pn(E==="/"||((V=U.pathname)==null?void 0:V.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${U.pathname}" was given in the \`location\` prop.`),R=U}else R=I;let M=R.pathname||"/",L=M;if(E!=="/"){let U=E.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(U.length).join("/")}let B=$p(r,{pathname:L});vi(A||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),vi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=fy(B&&B.map(U=>Object.assign({},U,{params:Object.assign({},S,U.params),pathname:Fi([E,p.encodeLocation?p.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?E:Fi([E,p.encodeLocation?p.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),x,a,f);return o&&j?N.createElement(Ha.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function ly(){let r=xy(),o=ey(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,f="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:f},x={padding:"2px 4px",backgroundColor:f},w=null;return console.error("Error handled by React Router default ErrorBoundary:",r),w=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:x},"ErrorBoundary")," or"," ",N.createElement("code",{style:x},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},o),a?N.createElement("pre",{style:p},a):null,w)}var cy=N.createElement(ly,null),uy=class extends N.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?N.createElement(Ei.Provider,{value:this.props.routeContext},N.createElement(mf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dy({routeContext:r,match:o,children:a}){let f=N.useContext(Fo);return f&&f.static&&f.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=o.route.id),N.createElement(Ei.Provider,{value:r},a)}function fy(r,o=[],a=null,f=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let v=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);pn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,v+1))}let w=!1,S=-1;if(a)for(let v=0;v<p.length;v++){let E=p[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(S=v),E.route.id){let{loaderData:A,errors:I}=a,R=E.route.loader&&!A.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||R){w=!0,S>=0?p=p.slice(0,S+1):p=[p[0]];break}}}return p.reduceRight((v,E,A)=>{let I,R=!1,M=null,L=null;a&&(I=x&&E.route.id?x[E.route.id]:void 0,M=E.route.errorElement||cy,w&&(S<0&&A===0?(im("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):S===A&&(R=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,A+1)),j=()=>{let V;return I?V=M:R?V=L:E.route.Component?V=N.createElement(E.route.Component,null):E.route.element?V=E.route.element:V=v,N.createElement(dy,{match:E,routeContext:{outlet:v,matches:B,isDataRoute:a!=null},children:V})};return a&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?N.createElement(uy,{location:a.location,revalidation:a.revalidation,component:M,error:I,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function gf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hy(r){let o=N.useContext(Fo);return pn(o,gf(r)),o}function py(r){let o=N.useContext(Rc);return pn(o,gf(r)),o}function my(r){let o=N.useContext(Ei);return pn(o,gf(r)),o}function xf(r){let o=my(r),a=o.matches[o.matches.length-1];return pn(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function gy(){return xf("useRouteId")}function xy(){var f;let r=N.useContext(mf),o=py("useRouteError"),a=xf("useRouteError");return r!==void 0?r:(f=o.errors)==null?void 0:f[a]}function yy(){let{router:r}=hy("useNavigate"),o=xf("useNavigate"),a=N.useRef(!1);return nm(()=>{a.current=!0}),N.useCallback(async(p,x={})=>{vi(a.current,tm),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var v1={};function im(r,o,a){!o&&!v1[r]&&(v1[r]=!0,vi(!1,a))}N.memo(wy);function wy({routes:r,future:o,state:a}){return rm(r,void 0,a,o)}function Jn(r){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vy({basename:r="/",children:o=null,location:a,navigationType:f="POP",navigator:p,static:x=!1}){pn(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=r.replace(/^\/*/,"/"),S=N.useMemo(()=>({basename:w,navigator:p,static:x,future:{}}),[w,p,x]);typeof a=="string"&&(a=jo(a));let{pathname:v="/",search:E="",hash:A="",state:I=null,key:R="default"}=a,M=N.useMemo(()=>{let L=ws(v,w);return L==null?null:{location:{pathname:L,search:E,hash:A,state:I,key:R},navigationType:f}},[w,v,E,A,I,R,f]);return vi(M!=null,`<Router basename="${w}"> is not able to match the URL "${v}${E}${A}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:N.createElement(Ci.Provider,{value:S},N.createElement(Ha.Provider,{children:o,value:M}))}function Cy({children:r,location:o}){return ay(Bd(r),o)}function Bd(r,o=[]){let a=[];return N.Children.forEach(r,(f,p)=>{if(!N.isValidElement(f))return;let x=[...o,p];if(f.type===N.Fragment){a.push.apply(a,Bd(f.props.children,x));return}pn(f.type===Jn,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!f.props.index||!f.props.children,"An index route cannot have child routes.");let w={id:f.props.id||x.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(w.children=Bd(f.props.children,x)),a.push(w)}),a}var uc="get",dc="application/x-www-form-urlencoded";function kc(r){return r!=null&&typeof r.tagName=="string"}function Ey(r){return kc(r)&&r.tagName.toLowerCase()==="button"}function by(r){return kc(r)&&r.tagName.toLowerCase()==="form"}function Sy(r){return kc(r)&&r.tagName.toLowerCase()==="input"}function Ay(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ty(r,o){return r.button===0&&(!o||o==="_self")&&!Ay(r)}var nc=null;function Iy(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var Ny=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gd(r){return r!=null&&!Ny.has(r)?(vi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dc}"`),null):r}function _y(r,o){let a,f,p,x,w;if(by(r)){let S=r.getAttribute("action");f=S?ws(S,o):null,a=r.getAttribute("method")||uc,p=gd(r.getAttribute("enctype"))||dc,x=new FormData(r)}else if(Ey(r)||Sy(r)&&(r.type==="submit"||r.type==="image")){let S=r.form;if(S==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=r.getAttribute("formaction")||S.getAttribute("action");if(f=v?ws(v,o):null,a=r.getAttribute("formmethod")||S.getAttribute("method")||uc,p=gd(r.getAttribute("formenctype"))||gd(S.getAttribute("enctype"))||dc,x=new FormData(S,r),!Iy()){let{name:E,type:A,value:I}=r;if(A==="image"){let R=E?`${E}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else E&&x.append(E,I)}}else{if(kc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=uc,f=null,p=dc,w=r}return x&&p==="text/plain"&&(w=x,x=void 0),{action:f,method:a.toLowerCase(),encType:p,formData:x,body:w}}function yf(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function Ry(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ky(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Py(r,o,a){let f=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let w=await Ry(x,a);return w.links?w.links():[]}return[]}));return Ly(f.flat(1).filter(ky).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function C1(r,o,a,f,p,x){let w=(v,E)=>a[E]?v.route.id!==a[E].route.id:!0,S=(v,E)=>{var A;return a[E].pathname!==v.pathname||((A=a[E].route.path)==null?void 0:A.endsWith("*"))&&a[E].params["*"]!==v.params["*"]};return x==="assets"?o.filter((v,E)=>w(v,E)||S(v,E)):x==="data"?o.filter((v,E)=>{var I;let A=f.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(w(v,E)||S(v,E))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((I=a[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Oy(r,o){return My(r.map(a=>{let f=o.routes[a.route.id];if(!f)return[];let p=[f.module];return f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function My(r){return[...new Set(r)]}function Dy(r){let o={},a=Object.keys(r).sort();for(let f of a)o[f]=r[f];return o}function Ly(r,o){let a=new Set;return new Set(o),r.reduce((f,p)=>{let x=JSON.stringify(Dy(p));return a.has(x)||(a.add(x),f.push({key:x,link:p})),f},[])}function By(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function jy(){let r=N.useContext(Fo);return yf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Fy(){let r=N.useContext(Rc);return yf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var wf=N.createContext(void 0);wf.displayName="FrameworkContext";function sm(){let r=N.useContext(wf);return yf(r,"You must render this element inside a <HydratedRouter> element"),r}function Vy(r,o){let a=N.useContext(wf),[f,p]=N.useState(!1),[x,w]=N.useState(!1),{onFocus:S,onBlur:v,onMouseEnter:E,onMouseLeave:A,onTouchStart:I}=o,R=N.useRef(null);N.useEffect(()=>{if(r==="render"&&w(!0),r==="viewport"){let B=V=>{V.forEach(U=>{w(U.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),N.useEffect(()=>{if(f){let B=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(B)}}},[f]);let M=()=>{p(!0)},L=()=>{p(!1),w(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ia(S,M),onBlur:Ia(v,L),onMouseEnter:Ia(E,M),onMouseLeave:Ia(A,L),onTouchStart:Ia(I,M)}]:[!1,R,{}]}function Ia(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function zy({page:r,...o}){let{router:a}=jy(),f=N.useMemo(()=>$p(a.routes,r,a.basename),[a.routes,r,a.basename]);return f?N.createElement(Wy,{page:r,matches:f,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Uy(r){let{manifest:o,routeModules:a}=sm(),[f,p]=N.useState([]);return N.useEffect(()=>{let x=!1;return Py(r,o,a).then(w=>{x||p(w)}),()=>{x=!0}},[r,o,a]),f}function Wy({page:r,matches:o,...a}){let f=Dr(),{manifest:p,routeModules:x}=sm(),{loaderData:w,matches:S}=Fy(),v=N.useMemo(()=>C1(r,o,S,p,f,"data"),[r,o,S,p,f]),E=N.useMemo(()=>C1(r,o,S,p,f,"assets"),[r,o,S,p,f]),A=N.useMemo(()=>{if(r===f.pathname+f.search+f.hash)return[];let M=new Set,L=!1;if(o.forEach(j=>{var U;let V=p.routes[j.route.id];!V||!V.hasLoader||(!v.some(F=>F.route.id===j.route.id)&&j.route.id in w&&((U=x[j.route.id])!=null&&U.shouldRevalidate)||V.hasClientLoader?L=!0:M.add(j.route.id))}),M.size===0)return[];let B=By(r);return L&&M.size>0&&B.searchParams.set("_routes",o.filter(j=>M.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[w,f,p,v,o,r,x]),I=N.useMemo(()=>Oy(E,p),[E,p]),R=Uy(E);return N.createElement(N.Fragment,null,A.map(M=>N.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...a})),I.map(M=>N.createElement("link",{key:M,rel:"modulepreload",href:M,...a})),R.map(({key:M,link:L})=>N.createElement("link",{key:M,...L})))}function Hy(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var om=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{om&&(window.__reactRouterVersion="7.0.2")}catch{}function Gy({basename:r,children:o,window:a}){let f=N.useRef();f.current==null&&(f.current=P2({window:a,v5Compat:!0}));let p=f.current,[x,w]=N.useState({action:p.action,location:p.location}),S=N.useCallback(v=>{N.startTransition(()=>w(v))},[w]);return N.useLayoutEffect(()=>p.listen(S),[p,S]),N.createElement(vy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var am=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lm=N.forwardRef(function({onClick:o,discover:a="render",prefetch:f="none",relative:p,reloadDocument:x,replace:w,state:S,target:v,to:E,preventScrollReset:A,viewTransition:I,...R},M){let{basename:L}=N.useContext(Ci),B=typeof E=="string"&&am.test(E),j,V=!1;if(typeof E=="string"&&B&&(j=E,om))try{let K=new URL(window.location.href),Te=E.startsWith("//")?new URL(K.protocol+E):new URL(E),Be=ws(Te.pathname,L);Te.origin===K.origin&&Be!=null?E=Be+Te.search+Te.hash:V=!0}catch{vi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=iy(E,{relative:p}),[F,Q,ne]=Vy(f,R),te=Zy(E,{replace:w,state:S,target:v,preventScrollReset:A,relative:p,viewTransition:I});function q(K){o&&o(K),K.defaultPrevented||te(K)}let ce=N.createElement("a",{...R,...ne,href:j||U,onClick:V||x?o:q,ref:Hy(M,Q),target:v,"data-discover":!B&&a==="render"?"true":void 0});return F&&!B?N.createElement(N.Fragment,null,ce,N.createElement(zy,{page:U})):ce});lm.displayName="Link";var Xy=N.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:f="",end:p=!1,style:x,to:w,viewTransition:S,children:v,...E},A){let I=Xa(w,{relative:E.relative}),R=Dr(),M=N.useContext(Rc),{navigator:L,basename:B}=N.useContext(Ci),j=M!=null&&ew(I)&&S===!0,V=L.encodeLocation?L.encodeLocation(I).pathname:I.pathname,U=R.pathname,F=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;a||(U=U.toLowerCase(),F=F?F.toLowerCase():null,V=V.toLowerCase()),F&&B&&(F=ws(F,B)||F);const Q=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ne=U===V||!p&&U.startsWith(V)&&U.charAt(Q)==="/",te=F!=null&&(F===V||!p&&F.startsWith(V)&&F.charAt(V.length)==="/"),q={isActive:ne,isPending:te,isTransitioning:j},ce=ne?o:void 0,K;typeof f=="function"?K=f(q):K=[f,ne?"active":null,te?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Te=typeof x=="function"?x(q):x;return N.createElement(lm,{...E,"aria-current":ce,className:K,ref:A,style:Te,to:w,viewTransition:S},typeof v=="function"?v(q):v)});Xy.displayName="NavLink";var Yy=N.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:f,replace:p,state:x,method:w=uc,action:S,onSubmit:v,relative:E,preventScrollReset:A,viewTransition:I,...R},M)=>{let L=Qy(),B=Jy(S,{relative:E}),j=w.toLowerCase()==="get"?"get":"post",V=typeof S=="string"&&am.test(S),U=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let Q=F.nativeEvent.submitter,ne=(Q==null?void 0:Q.getAttribute("formmethod"))||w;L(Q||F.currentTarget,{fetcherKey:o,method:ne,navigate:a,replace:p,state:x,relative:E,preventScrollReset:A,viewTransition:I})};return N.createElement("form",{ref:M,method:j,action:B,onSubmit:f?v:U,...R,"data-discover":!V&&r==="render"?"true":void 0})});Yy.displayName="Form";function $y(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cm(r){let o=N.useContext(Fo);return pn(o,$y(r)),o}function Zy(r,{target:o,replace:a,state:f,preventScrollReset:p,relative:x,viewTransition:w}={}){let S=Fn(),v=Dr(),E=Xa(r,{relative:x});return N.useCallback(A=>{if(Ty(A,o)){A.preventDefault();let I=a!==void 0?a:Ba(v)===Ba(E);S(r,{replace:I,state:f,preventScrollReset:p,relative:x,viewTransition:w})}},[v,S,E,a,f,o,r,p,x,w])}var Ky=0,qy=()=>`__${String(++Ky)}__`;function Qy(){let{router:r}=cm("useSubmit"),{basename:o}=N.useContext(Ci),a=gy();return N.useCallback(async(f,p={})=>{let{action:x,method:w,encType:S,formData:v,body:E}=_y(f,o);if(p.navigate===!1){let A=p.fetcherKey||qy();await r.fetch(A,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||w,formEncType:p.encType||S,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:v,body:E,formMethod:p.method||w,formEncType:p.encType||S,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Jy(r,{relative:o}={}){let{basename:a}=N.useContext(Ci),f=N.useContext(Ei);pn(f,"useFormAction must be used inside a RouteContext");let[p]=f.matches.slice(-1),x={...Xa(r||".",{relative:o})},w=Dr();if(r==null){x.search=w.search;let S=new URLSearchParams(x.search),v=S.getAll("index");if(v.some(A=>A==="")){S.delete("index"),v.filter(I=>I).forEach(I=>S.append("index",I));let A=S.toString();x.search=A?`?${A}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:Fi([a,x.pathname])),Ba(x)}function ew(r,o={}){let a=N.useContext(em);pn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=cm("useViewTransitionState"),p=Xa(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ws(a.currentLocation.pathname,f)||a.currentLocation.pathname,w=ws(a.nextLocation.pathname,f)||a.nextLocation.pathname;return yc(p.pathname,w)!=null||yc(p.pathname,x)!=null}new TextEncoder;function vf(){const r="./assets",o="/sounds/new_elevator_combined.mp3";Fn();const a=N.useRef(new Audio(r+o)),[f,p]=N.useState(!1),[x,w]=N.useState(!1),[S,v]=N.useState(null),[E,A]=N.useState(!1),[I,R]=N.useState(!1);N.useEffect(()=>{const U=a.current,F=()=>{U.pause(),U.currentTime=0,w(!1),j()};return U.addEventListener("ended",F),()=>U.removeEventListener("ended",F)},[I]);function M(){v(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),w(!0),A(!0),B()}).catch(U=>{console.error("Error loading audio:",U),v("Failed to load audio. Please check the file path and format."),A(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(U=>{console.error("Error playing audio:",U),v("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function V(U){a.current.currentTime=U,console.log(a.current.duration)}return{audioRef:a,error:S,playSound:B,loadSound:M,seekTo:V,cancelSound:j,checkSound:L,soundEnabled:E,setSoundEnabled:A,isPlaying:x}}var jn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(jn||(jn={}));jn.QR_CODE,jn.AZTEC,jn.CODABAR,jn.CODE_39,jn.CODE_93,jn.CODE_128,jn.DATA_MATRIX,jn.MAXICODE,jn.ITF,jn.EAN_13,jn.EAN_8,jn.PDF_417,jn.RSS_14,jn.RSS_EXPANDED,jn.UPC_A,jn.UPC_E,jn.UPC_EAN_EXTENSION;var E1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(E1||(E1={}));var wc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wc||(wc={}));var tw=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[wc.SCAN_TYPE_CAMERA,wc.SCAN_TYPE_FILE],r}(),b1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(b1||(b1={}));var _a={exports:{}},nw=_a.exports,S1;function rw(){return S1||(S1=1,function(r,o){(function(a,f){f(o)})(nw,function(a){function f(k){return k==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var n in e)e.hasOwnProperty(n)&&(k[n]=e[n])};function x(k,e){p(k,e);function n(){this.constructor=k}k.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function w(k,e){var n=Object.setPrototypeOf;n?n(k,e):k.__proto__=e}function S(k,e){e===void 0&&(e=k.constructor);var n=Error.captureStackTrace;n&&n(k,e)}var v=function(k){x(e,k);function e(n){var i=this.constructor,l=k.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),w(l,i.prototype),S(l),l}return e}(Error);class E extends v{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class A extends E{}A.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends E{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class V extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}V.kind="ArrayIndexOutOfBoundsException";class U{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){U.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new I("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new V(n);if(i>e)throw new V(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=U.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class F{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=Q.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=Q.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+F.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+F.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new I;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,C=(2<<(u<l?31:n&31))-(1<<h);c[u]|=C}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new I;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const g=h>l?0:e&31,_=(2<<(h<c?31:n&31))-(1<<g)&4294967295;if((u[h]&_)!==(i?_:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new I("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const g=e[h];u|=g<<32-c,e[h-1]=u,u=g>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Q))return!1;const n=e;return this.size===n.size&&U.equals(this.bits,n.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new Q(this.size,this.bits.slice())}}var ne;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ne||(ne={}));var te=ne;class q extends E{static getFormatInstance(){return new q}}q.kind="FormatException";var ce;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ce||(ce={}));class K{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,K.VALUE_IDENTIFIER_TO_ECI.set(e,this),K.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const g=c[u];K.VALUES_TO_ECI.set(g,this)}for(const u of l)K.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new q("incorect value");const n=K.VALUES_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}static getCharacterSetECIByName(e){const n=K.NAME_TO_ECI.get(e);if(n===void 0)throw new q("incorect value");return n}equals(e){if(!(e instanceof K))return!1;const n=e;return this.getName()===n.getName()}}K.VALUE_IDENTIFIER_TO_ECI=new Map,K.VALUES_TO_ECI=new Map,K.NAME_TO_ECI=new Map,K.Cp437=new K(ce.Cp437,Int32Array.from([0,2]),"Cp437"),K.ISO8859_1=new K(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),K.ISO8859_2=new K(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),K.ISO8859_3=new K(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),K.ISO8859_4=new K(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),K.ISO8859_5=new K(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),K.ISO8859_6=new K(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),K.ISO8859_7=new K(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),K.ISO8859_8=new K(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),K.ISO8859_9=new K(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),K.ISO8859_10=new K(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),K.ISO8859_11=new K(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),K.ISO8859_13=new K(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),K.ISO8859_14=new K(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),K.ISO8859_15=new K(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),K.ISO8859_16=new K(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),K.SJIS=new K(ce.SJIS,20,"SJIS","Shift_JIS"),K.Cp1250=new K(ce.Cp1250,21,"Cp1250","windows-1250"),K.Cp1251=new K(ce.Cp1251,22,"Cp1251","windows-1251"),K.Cp1252=new K(ce.Cp1252,23,"Cp1252","windows-1252"),K.Cp1256=new K(ce.Cp1256,24,"Cp1256","windows-1256"),K.UnicodeBigUnmarked=new K(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),K.UTF8=new K(ce.UTF8,26,"UTF8","UTF-8"),K.ASCII=new K(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),K.Big5=new K(ce.Big5,28,"Big5"),K.GB18030=new K(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),K.EUC_KR=new K(ce.EUC_KR,30,"EUC_KR","EUC-KR");class Te extends E{}Te.kind="UnsupportedOperationException";class Be{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Be.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof K?e:K.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Be.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(K.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Te(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(K.UTF8)||e.equals(K.ISO8859_1)||e.equals(K.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Ie{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Be.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(te.CHARACTER_SET)!==void 0)return n.get(te.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,g=0,C=0,_=0,P=0,D=0,H=0,X=0,Z=0,re=0,de=0;const Oe=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Me=0;Me<i&&(l||c||u);Me++){const Ae=e[Me]&255;u&&(h>0?Ae&128?h--:u=!1:Ae&128&&(Ae&64?(h++,Ae&32?(h++,Ae&16?(h++,Ae&8?u=!1:_++):C++):g++):u=!1)),l&&(Ae>127&&Ae<160?l=!1:Ae>159&&(Ae<192||Ae===215||Ae===247)&&de++),c&&(P>0?Ae<64||Ae===127||Ae>252?c=!1:P--:Ae===128||Ae===160||Ae>239?c=!1:Ae>160&&Ae<224?(D++,X=0,H++,H>Z&&(Z=H)):Ae>127?(P++,H=0,X++,X>re&&(re=X)):(H=0,X=0))}return u&&h>0&&(u=!1),c&&P>0&&(c=!1),u&&(Oe||g+C+_>0)?Ie.UTF8:c&&(Ie.ASSUME_SHIFT_JIS||Z>=3||re>=3)?Ie.SHIFT_JIS:l&&c?Z===2&&D===2||de*10>=i?Ie.SHIFT_JIS:Ie.ISO88591:l?Ie.ISO88591:c?Ie.SHIFT_JIS:u?Ie.UTF8:Ie.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,g,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,H;switch(P){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(u);break;case"p":H=parseFloat(n[i]).toPrecision(u);break;case"e":H=parseFloat(n[i]).toExponential(u);break;case"x":H=parseInt(n[i]).toString(D||16);break;case"d":H=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(D);let X=parseInt(g),Z=g&&g[0]+""=="0"?"0":" ";for(;H.length<X;)H=h!==void 0?H+Z:Z+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Be.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Ie.SHIFT_JIS=K.SJIS.getName(),Ie.GB2312="GB2312",Ie.ISO88591=K.ISO8859_1.getName(),Ie.EUC_JP="EUC_JP",Ie.UTF8=K.UTF8.getName(),Ie.PLATFORM_DEFAULT_ENCODING=Ie.UTF8,Ie.ASSUME_SHIFT_JIS=!1;class Le{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ie.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class be{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new I("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new be(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new I("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,g=0,C=0;for(;C<e.length;)if(e.charAt(C)===`
`||e.charAt(C)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");u=c,g++}C++}else if(e.substring(C,C+n.length)===n)C+=n.length,l[c]=!0,c++;else if(e.substring(C,C+i.length)===i)C+=i.length,l[c]=!1,c++;else throw new I("illegal character encountered: "+e.substring(C));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new I("row lengths do not match");g++}const _=new be(h,g);for(let P=0;P<c;P++)l[P]&&_.set(Math.floor(P%h),Math.floor(P/h));return _}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new I("input matrix dimensions do not match");const n=new Q(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,g=e.getRow(c,n).getBitArray();for(let C=0;C<i;C++)l[h+C]^=g[C]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new I("Left and top must be nonnegative");if(l<1||i<1)throw new I("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let C=n;C<u;C++){const _=C*h;for(let P=e;P<c;P++)g[_+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new Q(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new Q(e),l=new Q(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,g=-1;for(let C=0;C<n;C++)for(let _=0;_<i;_++){const P=l[C*i+_];if(P!==0){if(C<u&&(u=C),C>g&&(g=C),_*32<c){let D=0;for(;!(P<<31-D&4294967295);)D++;_*32+D<c&&(c=_*32+D)}if(_*32+31>h){let D=31;for(;!(P>>>D);)D--;_*32+D>h&&(h=_*32+D)}}}return h<c||g<u?null:Int32Array.from([c,u,h-c+1,g-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof be))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&U.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+U.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Le;for(let c=0,u=this.height;c<u;c++){for(let h=0,g=this.width;h<g;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new be(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends E{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class Fe extends L{constructor(e){super(e),this.luminances=Fe.EMPTY,this.buckets=new Int32Array(Fe.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new Q(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let g=0;g<l;g++)u[(c[g]&255)>>Fe.LUMINANCE_SHIFT]++;const h=Fe.estimateBlackPoint(u);if(l<3)for(let g=0;g<l;g++)(c[g]&255)<h&&n.set(g);else{let g=c[0]&255,C=c[1]&255;for(let _=1;_<l-1;_++){const P=c[_+1]&255;(C*4-g-P)/2<h&&n.set(_),g=C,C=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new be(n,i);this.initArrays(n);const c=this.buckets;for(let g=1;g<5;g++){const C=Math.floor(i*g/5),_=e.getRow(C,this.luminances),P=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<P;D++){const H=_[D]&255;c[H>>Fe.LUMINANCE_SHIFT]++}}const u=Fe.estimateBlackPoint(c),h=e.getMatrix();for(let g=0;g<i;g++){const C=g*n;for(let _=0;_<n;_++)(h[C+_]&255)<u&&l.set(_,g)}return l}createBinarizer(e){return new Fe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<Fe.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let _=0;_<n;_++)e[_]>c&&(l=_,c=e[_]),e[_]>i&&(i=e[_]);let u=0,h=0;for(let _=0;_<n;_++){const P=_-l,D=e[_]*P*P;D>h&&(u=_,h=D)}if(l>u){const _=l;l=u,u=_}if(u-l<=n/16)throw new J;let g=u-1,C=-1;for(let _=u-1;_>l;_--){const P=_-l,D=P*P*(u-_)*(i-e[_]);D>C&&(g=_,C=D)}return g<<Fe.LUMINANCE_SHIFT}}Fe.LUMINANCE_BITS=5,Fe.LUMINANCE_SHIFT=8-Fe.LUMINANCE_BITS,Fe.LUMINANCE_BUCKETS=1<<Fe.LUMINANCE_BITS,Fe.EMPTY=Uint8ClampedArray.from([0]);class pe extends Fe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=pe.MINIMUM_DIMENSION&&i>=pe.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>pe.BLOCK_SIZE_POWER;n&pe.BLOCK_SIZE_MASK&&c++;let u=i>>pe.BLOCK_SIZE_POWER;i&pe.BLOCK_SIZE_MASK&&u++;const h=pe.calculateBlackPoints(l,c,u,n,i),g=new be(n,i);pe.calculateThresholdForBlock(l,c,u,n,i,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new pe(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const g=c-pe.BLOCK_SIZE,C=l-pe.BLOCK_SIZE;for(let _=0;_<i;_++){let P=_<<pe.BLOCK_SIZE_POWER;P>g&&(P=g);const D=pe.cap(_,2,i-3);for(let H=0;H<n;H++){let X=H<<pe.BLOCK_SIZE_POWER;X>C&&(X=C);const Z=pe.cap(H,2,n-3);let re=0;for(let Oe=-2;Oe<=2;Oe++){const Me=u[D+Oe];re+=Me[Z-2]+Me[Z-1]+Me[Z]+Me[Z+1]+Me[Z+2]}const de=re/25;pe.thresholdBlock(e,X,P,de,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,g=i*c+n;h<pe.BLOCK_SIZE;h++,g+=c)for(let C=0;C<pe.BLOCK_SIZE;C++)(e[g+C]&255)<=l&&u.set(n+C,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-pe.BLOCK_SIZE,h=l-pe.BLOCK_SIZE,g=new Array(i);for(let C=0;C<i;C++){g[C]=new Int32Array(n);let _=C<<pe.BLOCK_SIZE_POWER;_>u&&(_=u);for(let P=0;P<n;P++){let D=P<<pe.BLOCK_SIZE_POWER;D>h&&(D=h);let H=0,X=255,Z=0;for(let de=0,Oe=_*l+D;de<pe.BLOCK_SIZE;de++,Oe+=l){for(let Me=0;Me<pe.BLOCK_SIZE;Me++){const Ae=e[Oe+Me]&255;H+=Ae,Ae<X&&(X=Ae),Ae>Z&&(Z=Ae)}if(Z-X>pe.MIN_DYNAMIC_RANGE)for(de++,Oe+=l;de<pe.BLOCK_SIZE;de++,Oe+=l)for(let Me=0;Me<pe.BLOCK_SIZE;Me++)H+=e[Oe+Me]&255}let re=H>>pe.BLOCK_SIZE_POWER*2;if(Z-X<=pe.MIN_DYNAMIC_RANGE&&(re=X/2,C>0&&P>0)){const de=(g[C-1][P]+2*g[C][P-1]+g[C-1][P-1])/4;X<de&&(re=de)}g[C][P]=re}}return g}}pe.BLOCK_SIZE_POWER=3,pe.BLOCK_SIZE=1<<pe.BLOCK_SIZE_POWER,pe.BLOCK_SIZE_MASK=pe.BLOCK_SIZE-1,pe.MINIMUM_DIMENSION=pe.BLOCK_SIZE*5,pe.MIN_DYNAMIC_RANGE=24;class me{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new Te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Te("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Le;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class Ve extends me{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new Ve(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ve(this.delegate.rotateCounterClockwise45())}}class ue extends me{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ue.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let g;if(e[c+3]===0)g=255;else{const _=e[c],P=e[c+1],D=e[c+2];g=306*_+601*P+117*D+512>>10}l[u]=g}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*ue.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),g=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=g,i.translate(h/2,g/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=ue.makeBufferFromCanvasImageData(n),this}invert(){return new Ve(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class W{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Y=(globalThis||Jl||self||window||void 0)&&(globalThis||Jl||self||window||void 0).__awaiter||function(k,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(_){try{C(i.next(_))}catch(P){u(P)}}function g(_){try{C(i.throw(_))}catch(P){u(P)}}function C(_){_.done?c(_.value):l(_.value).then(h,g)}C((i=i.apply(k,e||[])).next())})};class ye{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Y(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,g={deviceId:c,label:u,kind:l,groupId:h};n.push(g)}return n})}getVideoInputDevices(){return Y(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new W(n.deviceId,n.label))})}findDeviceById(e){return Y(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return Y(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return Y(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return Y(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return Y(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return Y(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return Y(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return Y(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return Y(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return Y(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Y(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new A(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Y(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return Y(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const g=n&&h instanceof J,_=(h instanceof M||h instanceof q)&&i;if(g||_)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof M||l instanceof q,u=l instanceof J;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new ue(n),l=new pe(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class we{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ce;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ce||(Ce={}));var ae=Ce,Ne;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ne||(Ne={}));var Ee=Ne;class ze{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class De{exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class qe{constructor(e,n){if(n.length===0)throw new I;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const g=n[u];i=De.addOrSubtract(i,g)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=De.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=De.addOrSubtract(n[u-c],i[u]);return new qe(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let g=0;g<i;g++){const C=n[g];for(let _=0;_<c;_++)u[g+_]=De.addOrSubtract(u[g+_],h.multiply(C,l[_]))}return new qe(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new qe(i,l)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new qe(u,c)}divide(e){if(!this.field.equals(e.field))throw new I("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new I("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),g=n.multiply(l.getCoefficient(l.getDegree()),u),C=e.multiplyByMonomial(h,g),_=n.buildMonomial(h,g);i=i.addOrSubtract(_),l=l.addOrSubtract(C)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class oe extends E{}oe.kind="ArithmeticException";class xe extends De{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new qe(this,Int32Array.from([0])),this.one=new qe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new qe(this,i)}inverse(e){if(e===0)throw new oe;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}xe.AZTEC_DATA_12=new xe(4201,4096,1),xe.AZTEC_DATA_10=new xe(1033,1024,1),xe.AZTEC_DATA_6=new xe(67,64,1),xe.AZTEC_PARAM=new xe(19,16,1),xe.QR_CODE_FIELD_256=new xe(285,256,0),xe.DATA_MATRIX_FIELD_256=new xe(301,256,1),xe.AZTEC_DATA_8=xe.DATA_MATRIX_FIELD_256,xe.MAXICODE_FIELD_64=xe.AZTEC_DATA_6;class He extends E{}He.kind="ReedSolomonException";class pt extends E{}pt.kind="IllegalStateException";class Mt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new qe(i,e),c=new Int32Array(n);let u=!0;for(let H=0;H<n;H++){const X=l.evaluateAt(i.exp(H+i.getGeneratorBase()));c[c.length-1-H]=X,X!==0&&(u=!1)}if(u)return;const h=new qe(i,c),g=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),C=g[0],_=g[1],P=this.findErrorLocations(C),D=this.findErrorMagnitudes(_,P);for(let H=0;H<P.length;H++){const X=e.length-1-i.log(P[H]);if(X<0)throw new He("Bad error location");e[X]=xe.addOrSubtract(e[X],D[H])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const H=e;e=n,n=H}const l=this.field;let c=e,u=n,h=l.getZero(),g=l.getOne();for(;u.getDegree()>=(i/2|0);){let H=c,X=h;if(c=u,h=g,c.isZero())throw new He("r_{i-1} was zero");u=H;let Z=l.getZero();const re=c.getCoefficient(c.getDegree()),de=l.inverse(re);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Oe=u.getDegree()-c.getDegree(),Me=l.multiply(u.getCoefficient(u.getDegree()),de);Z=Z.addOrSubtract(l.buildMonomial(Oe,Me)),u=u.addOrSubtract(c.multiplyByMonomial(Oe,Me))}if(g=Z.multiply(h).addOrSubtract(X),u.getDegree()>=c.getDegree())throw new pt("Division algorithm failed to reduce polynomial?")}const C=g.getCoefficient(0);if(C===0)throw new He("sigmaTilde(0) was zero");const _=l.inverse(C),P=g.multiplyScalar(_),D=u.multiplyScalar(_);return[P,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new He("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let g=1;for(let C=0;C<i;C++)if(u!==C){const _=c.multiply(n[C],h),P=_&1?_&-2:_|1;g=c.multiply(g,P)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(g)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var mt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(mt||(mt={}));class Je{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=Je.convertBoolArrayToByteArray(l),u=Je.getEncodedData(l),h=new ze(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=mt.UPPER,l=mt.UPPER,c="",u=0;for(;u<n;)if(l===mt.BINARY){if(n-u<5)break;let h=Je.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=Je.readCode(e,u,11)+31,u+=11}for(let g=0;g<h;g++){if(n-u<8){u=n;break}const C=Je.readCode(e,u,8);c+=Ie.castAsNonUtf8Char(C),u+=8}l=i}else{let h=l===mt.DIGIT?4:5;if(n-u<h)break;let g=Je.readCode(e,u,h);u+=h;let C=Je.getCharacter(l,g);C.startsWith("CTRL_")?(i=l,l=Je.getTable(C.charAt(5)),C.charAt(6)==="L"&&(i=l)):(c+=C,l=i)}return c}static getTable(e){switch(e){case"L":return mt.LOWER;case"P":return mt.PUNCT;case"M":return mt.MIXED;case"D":return mt.DIGIT;case"B":return mt.BINARY;case"U":default:return mt.UPPER}}static getCharacter(e,n){switch(e){case mt.UPPER:return Je.UPPER_TABLE[n];case mt.LOWER:return Je.LOWER_TABLE[n];case mt.MIXED:return Je.MIXED_TABLE[n];case mt.PUNCT:return Je.PUNCT_TABLE[n];case mt.DIGIT:return Je.DIGIT_TABLE[n];default:throw new pt("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=xe.AZTEC_DATA_10):(i=12,n=xe.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new q;let u=e.length%i,h=new Int32Array(c);for(let D=0;D<c;D++,u+=i)h[D]=Je.readCode(e,u,i);try{new Mt(n).decode(h,c-l)}catch(D){throw new q(D)}let g=(1<<i)-1,C=0;for(let D=0;D<l;D++){let H=h[D];if(H===0||H===g)throw new q;(H===1||H===g-1)&&C++}let _=new Array(l*i-C),P=0;for(let D=0;D<l;D++){let H=h[D];if(H===1||H===g-1)_.fill(H>1,P,P+i-1),P+=i-1;else for(let X=i-1;X>=0;--X)_[P++]=(H&1<<X)!==0}return _}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*F.truncDivision(F.truncDivision(l,2)-1,15),g=l/2,C=F.truncDivision(h,2);for(let _=0;_<g;_++){let P=_+F.truncDivision(_,15);c[g-_-1]=C-P-1,c[g+_]=C+P+1}}for(let h=0,g=0;h<i;h++){let C=(i-h)*4+(n?9:12),_=h*2,P=l-1-_;for(let D=0;D<C;D++){let H=D*2;for(let X=0;X<2;X++)u[g+H+X]=e.get(c[_+X],c[_+D]),u[g+2*C+H+X]=e.get(c[_+D],c[P-X]),u[g+4*C+H+X]=e.get(c[P-X],c[P-D]),u[g+6*C+H+X]=e.get(c[P-D],c[_+X])}g+=C*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?Je.readCode(e,n,8):Je.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=Je.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class Rt{static floatToIntBits(e){return e}}Rt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Pe){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Rt.floatToIntBits(this.x)+Rt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const g=c;c=h,h=g}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return et.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class mn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Jt extends mn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class We{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=We.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,g=!1,C=!1,_=!1,P=!1;const D=this.width,H=this.height;for(;u;){u=!1;let X=!0;for(;(X||!g)&&n<D;)X=this.containsBlackPoint(i,l,n,!1),X?(n++,u=!0,g=!0):g||n++;if(n>=D){c=!0;break}let Z=!0;for(;(Z||!C)&&l<H;)Z=this.containsBlackPoint(e,n,l,!0),Z?(l++,u=!0,C=!0):C||l++;if(l>=H){c=!0;break}let re=!0;for(;(re||!_)&&e>=0;)re=this.containsBlackPoint(i,l,e,!1),re?(e--,u=!0,_=!0):_||e--;if(e<0){c=!0;break}let de=!0;for(;(de||!P)&&i>=0;)de=this.containsBlackPoint(e,n,i,!0),de?(i--,u=!0,P=!0):P||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const X=n-e;let Z=null;for(let Me=1;Z===null&&Me<X;Me++)Z=this.getBlackPointOnSegment(e,l-Me,e+Me,l);if(Z==null)throw new J;let re=null;for(let Me=1;re===null&&Me<X;Me++)re=this.getBlackPointOnSegment(e,i+Me,e+Me,i);if(re==null)throw new J;let de=null;for(let Me=1;de===null&&Me<X;Me++)de=this.getBlackPointOnSegment(n,i+Me,n-Me,i);if(de==null)throw new J;let Oe=null;for(let Me=1;Oe===null&&Me<X;Me++)Oe=this.getBlackPointOnSegment(n,l-Me,n-Me,l);if(Oe==null)throw new J;return this.centerEdges(Oe,Z,de,re)}else throw new J}getBlackPointOnSegment(e,n,i,l){const c=et.round(et.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,g=this.image;for(let C=0;C<c;C++){const _=et.round(e+C*u),P=et.round(n+C*h);if(g.get(_,P))return new Pe(_,P)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),g=n.getY(),C=i.getX(),_=i.getY(),P=l.getX(),D=l.getY(),H=We.CORR;return c<this.width/2?[new Pe(P-H,D+H),new Pe(h+H,g+H),new Pe(C-H,_-H),new Pe(c+H,u-H)]:[new Pe(P+H,D+H),new Pe(h+H,g-H),new Pe(C-H,_+H),new Pe(c-H,u-H)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}We.INIT_SIZE=10,We.CORR=1;class xt{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),g=Math.floor(n[u+1]);if(h<-1||h>i||g<-1||g>l)throw new J;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),g===-1?(n[u+1]=0,c=!0):g===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),g=Math.floor(n[u+1]);if(h<-1||h>i||g<-1||g>l)throw new J;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),g===-1?(n[u+1]=0,c=!0):g===l&&(n[u+1]=l-1,c=!0)}}}class At{constructor(e,n,i,l,c,u,h,g,C){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=g,this.a33=C}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,g,C,_,P,D,H,X,Z,re){const de=At.quadrilateralToSquare(e,n,i,l,c,u,h,g);return At.squareToQuadrilateral(C,_,P,D,H,X,Z,re).times(de)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,g=this.a23,C=this.a31,_=this.a32,P=this.a33;for(let D=0;D<n;D+=2){const H=e[D],X=e[D+1],Z=c*H+g*X+P;e[D]=(i*H+u*X+C)/Z,e[D+1]=(l*H+h*X+_)/Z}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,g=this.a23,C=this.a31,_=this.a32,P=this.a33,D=e.length;for(let H=0;H<D;H++){const X=e[H],Z=n[H],re=c*X+g*Z+P;e[H]=(i*X+u*Z+C)/re,n[H]=(l*X+h*Z+_)/re}}static squareToQuadrilateral(e,n,i,l,c,u,h,g){const C=e-i+c-h,_=n-l+u-g;if(C===0&&_===0)return new At(i-e,c-i,e,l-n,u-l,n,0,0,1);{const P=i-c,D=h-c,H=l-u,X=g-u,Z=P*X-D*H,re=(C*X-D*_)/Z,de=(P*_-C*H)/Z;return new At(i-e+re*i,h-e+de*h,e,l-n+re*l,g-n+de*g,n,re,de,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,g){return At.squareToQuadrilateral(e,n,i,l,c,u,h,g).buildAdjoint()}buildAdjoint(){return new At(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new At(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Et extends xt{sampleGrid(e,n,i,l,c,u,h,g,C,_,P,D,H,X,Z,re,de,Oe,Me){const Ae=At.quadrilateralToQuadrilateral(l,c,u,h,g,C,_,P,D,H,X,Z,re,de,Oe,Me);return this.sampleGridWithTransform(e,n,i,Ae)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new J;const c=new be(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const g=u.length,C=h+.5;for(let _=0;_<g;_+=2)u[_]=_/2+.5,u[_+1]=C;l.transformPoints(u),xt.checkAndNudgePoints(e,u);try{for(let _=0;_<g;_+=2)e.get(Math.floor(u[_]),Math.floor(u[_+1]))&&c.set(_/2,h)}catch{throw new J}}return c}}class tt{static setGridSampler(e){tt.gridSampler=e}static getInstance(){return tt.gridSampler}}tt.gridSampler=new Et;class Ht{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Nt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new Jt(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new J;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(F.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new J}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let g=i-1;g>=0;--g)u[g]=e&15,e>>=4;try{new Mt(xe.AZTEC_PARAM).decode(u,c)}catch{throw new J}let h=0;for(let g=0;g<l;g++)h=(h<<4)+u[g];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,u,1,-1),D=this.getFirstDifferent(i,u,1,1),H=this.getFirstDifferent(l,u,-1,1),X=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(X,P)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(P,D,H,X))break}n=P,i=D,l=H,c=X,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let h=new Pe(n.getX()+.5,n.getY()-.5),g=new Pe(i.getX()+.5,i.getY()+.5),C=new Pe(l.getX()-.5,l.getY()+.5),_=new Pe(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,g,C,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new We(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let g=this.image.getWidth()/2,C=this.image.getHeight()/2;e=this.getFirstDifferent(new Ht(g+7,C-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ht(g+7,C+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ht(g-7,C+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ht(g-7,C-7),!1,-1,-1).toResultPoint()}let c=et.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=et.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new We(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new Ht(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Ht(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ht(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Ht(c-7,u-7),!1,-1,-1).toResultPoint()}return c=et.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=et.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new Ht(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=tt.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,C=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,g,g,C,g,C,C,g,C,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),g=e.getY(),C=u*(n.getX()-e.getX())/c,_=u*(n.getY()-e.getY())/c;for(let P=0;P<i;P++)this.image.get(et.round(h+P*C),et.round(g+P*_))&&(l|=1<<i-P-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new Ht(e.getX()-c,e.getY()+c),n=new Ht(n.getX()-c,n.getY()-c),i=new Ht(i.getX()+c,i.getY()-c),l=new Ht(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),g=e.getY(),C=this.image.get(e.getX(),e.getY()),_=Math.ceil(i);for(let D=0;D<_;D++)h+=l,g+=c,this.image.get(et.round(h),et.round(g))!==C&&u++;let P=u/i;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new Ht(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,g=(e[0].getY()+e[2].getY())/2,C=new Pe(h+l*c,g+l*u),_=new Pe(h-l*c,g-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,g=(e[1].getY()+e[3].getY())/2;let P=new Pe(h+l*c,g+l*u),D=new Pe(h-l*c,g-l*u);return[C,P,_,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=et.round(e.getX()),i=et.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return et.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return et.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class $e{decode(e,n=null){let i=null,l=new Nt(e.getBlackMatrix()),c=null,u=null;try{let _=l.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new Je().decode(_)}catch(_){i=_}if(u==null)try{let _=l.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(n,c),u=new Je().decode(_)}catch(_){throw i??_}let h=new we(u.getText(),u.getRawBytes(),u.getNumBits(),c,ae.AZTEC,B.currentTimeMillis()),g=u.getByteSegments();g!=null&&h.putMetadata(Ee.BYTE_SEGMENTS,g);let C=u.getECLevel();return C!=null&&h.putMetadata(Ee.ERROR_CORRECTION_LEVEL,C),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(te.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class lt extends ye{constructor(e=500){super(new $e,e)}}class Re{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(te.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let g=270;h!==null&&h.get(Ee.ORIENTATION)===!0&&(g=g+h.get(Ee.ORIENTATION)%360),u.putMetadata(Ee.ORIENTATION,g);const C=u.getResultPoints();if(C!==null){const _=c.getHeight();for(let P=0;P<C.length;P++)C[P]=new Pe(_-C[P].getY()-1,C[P].getX())}return u}else throw new J}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new Q(i);const u=n&&n.get(te.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let g;u?g=l:g=15;const C=Math.trunc(l/2);for(let _=0;_<g;_++){const P=Math.trunc((_+1)/2),D=(_&1)===0,H=C+h*(D?P:-P);if(H<0||H>=l)break;try{c=e.getBlackRow(H,c)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(c.reverse(),n&&n.get(te.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;n.forEach((re,de)=>Z.set(de,re)),Z.delete(te.NEED_RESULT_POINT_CALLBACK),n=Z}try{const Z=this.decodeRow(H,c,n);if(X===1){Z.putMetadata(Ee.ORIENTATION,180);const re=Z.getResultPoints();re!==null&&(re[0]=new Pe(i-re[0].getX()-1,re[0].getY()),re[1]=new Pe(i-re[1].getX()-1,re[1].getY()))}return Z}catch{}}}throw new J}static recordPattern(e,n,i){const l=i.length;for(let C=0;C<l;C++)i[C]=0;const c=e.getSize();if(n>=c)throw new J;let u=!e.get(n),h=0,g=n;for(;g<c;){if(e.get(g)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}g++}if(!(h===l||h===l-1&&g===c))throw new J}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new J;Re.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let g=0;for(let C=0;C<l;C++){const _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return Number.POSITIVE_INFINITY;g+=D}return g/c}}class ge extends Re{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const g=6;for(let C=i;C<n;C++)if(e.get(C)!==h)c[l]++;else{if(l===g-1){let _=ge.MAX_AVG_VARIANCE,P=-1;for(let D=ge.CODE_START_A;D<=ge.CODE_START_C;D++){const H=Re.patternMatchVariance(c,ge.CODE_PATTERNS[D],ge.MAX_INDIVIDUAL_VARIANCE);H<_&&(_=H,P=D)}if(P>=0&&e.isRange(Math.max(0,u-(C-u)/2),u,!1))return Int32Array.from([u,C,P]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new J}static decodeCode(e,n,i){Re.recordPattern(e,i,n);let l=ge.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<ge.CODE_PATTERNS.length;u++){const h=ge.CODE_PATTERNS[u],g=this.patternMatchVariance(n,h,ge.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,c=u)}if(c>=0)return c;throw new J}decodeRow(e,n,i){const l=i&&i.get(te.ASSUME_GS1)===!0,c=ge.findStartPattern(n),u=c[2];let h=0;const g=new Uint8Array(20);g[h++]=u;let C;switch(u){case ge.CODE_START_A:C=ge.CODE_CODE_A;break;case ge.CODE_START_B:C=ge.CODE_CODE_B;break;case ge.CODE_START_C:C=ge.CODE_CODE_C;break;default:throw new q}let _=!1,P=!1,D="",H=c[0],X=c[1];const Z=Int32Array.from([0,0,0,0,0,0]);let re=0,de=0,Oe=u,Me=0,Ae=!0,kt=!1,Ct=!1;for(;!_;){const Jr=P;switch(P=!1,re=de,de=ge.decodeCode(n,Z,X),g[h++]=de,de!==ge.CODE_STOP&&(Ae=!0),de!==ge.CODE_STOP&&(Me++,Oe+=Me*de),H=X,X+=Z.reduce((ns,ra)=>ns+ra,0),de){case ge.CODE_START_A:case ge.CODE_START_B:case ge.CODE_START_C:throw new q}switch(C){case ge.CODE_CODE_A:if(de<64)Ct===kt?D+=String.fromCharCode(32+de):D+=String.fromCharCode(32+de+128),Ct=!1;else if(de<96)Ct===kt?D+=String.fromCharCode(de-64):D+=String.fromCharCode(de+64),Ct=!1;else switch(de!==ge.CODE_STOP&&(Ae=!1),de){case ge.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_A:!kt&&Ct?(kt=!0,Ct=!1):kt&&Ct?(kt=!1,Ct=!1):Ct=!0;break;case ge.CODE_SHIFT:P=!0,C=ge.CODE_CODE_B;break;case ge.CODE_CODE_B:C=ge.CODE_CODE_B;break;case ge.CODE_CODE_C:C=ge.CODE_CODE_C;break;case ge.CODE_STOP:_=!0;break}break;case ge.CODE_CODE_B:if(de<96)Ct===kt?D+=String.fromCharCode(32+de):D+=String.fromCharCode(32+de+128),Ct=!1;else switch(de!==ge.CODE_STOP&&(Ae=!1),de){case ge.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_B:!kt&&Ct?(kt=!0,Ct=!1):kt&&Ct?(kt=!1,Ct=!1):Ct=!0;break;case ge.CODE_SHIFT:P=!0,C=ge.CODE_CODE_A;break;case ge.CODE_CODE_A:C=ge.CODE_CODE_A;break;case ge.CODE_CODE_C:C=ge.CODE_CODE_C;break;case ge.CODE_STOP:_=!0;break}break;case ge.CODE_CODE_C:if(de<100)de<10&&(D+="0"),D+=de;else switch(de!==ge.CODE_STOP&&(Ae=!1),de){case ge.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case ge.CODE_CODE_A:C=ge.CODE_CODE_A;break;case ge.CODE_CODE_B:C=ge.CODE_CODE_B;break;case ge.CODE_STOP:_=!0;break}break}Jr&&(C=C===ge.CODE_CODE_A?ge.CODE_CODE_B:ge.CODE_CODE_A)}const or=X-H;if(X=n.getNextUnset(X),!n.isRange(X,Math.min(n.getSize(),X+(X-H)/2),!1))throw new J;if(Oe-=Me*re,Oe%103!==re)throw new M;const kr=D.length;if(kr===0)throw new J;kr>0&&Ae&&(C===ge.CODE_CODE_C?D=D.substring(0,kr-2):D=D.substring(0,kr-1));const An=(c[1]+c[0])/2,Wt=H+or/2,un=g.length,Kn=new Uint8Array(un);for(let Jr=0;Jr<un;Jr++)Kn[Jr]=g[Jr];const _i=[new Pe(An,e),new Pe(Wt,e)];return new we(D,Kn,0,_i,ae.CODE_128,new Date().getTime())}}ge.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ge.MAX_AVG_VARIANCE=.25,ge.MAX_INDIVIDUAL_VARIANCE=.7,ge.CODE_SHIFT=98,ge.CODE_CODE_C=99,ge.CODE_CODE_B=100,ge.CODE_CODE_A=101,ge.CODE_FNC_1=102,ge.CODE_FNC_2=97,ge.CODE_FNC_3=96,ge.CODE_FNC_4_A=101,ge.CODE_FNC_4_B=100,ge.CODE_START_A=103,ge.CODE_START_B=104,ge.CODE_START_C=105,ge.CODE_STOP=106;class it extends Re{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=it.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),g,C;do{it.recordPattern(n,u,l);let Z=it.toNarrowWidePattern(l);if(Z<0)throw new J;g=it.patternToChar(Z),this.decodeRowResult+=g,C=u;for(let re of l)u+=re;u=n.getNextSet(u)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let Z of l)_+=Z;let P=u-C-_;if(u!==h&&P*2<_)throw new J;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,re=0;for(let de=0;de<Z;de++)re+=it.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(de));if(this.decodeRowResult.charAt(Z)!==it.ALPHABET_STRING.charAt(re%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new J;let D;this.extendedMode?D=it.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let H=(c[1]+c[0])/2,X=C+_/2;return new we(D,null,0,[new Pe(H,e),new Pe(X,e)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,g=n.length;for(let C=l;C<i;C++)if(e.get(C)!==h)n[c]++;else{if(c===g-1){if(this.toNarrowWidePattern(n)===it.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((C-u)/2)),u,!1))return[u,C];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new J}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let g of e)g<c&&g>i&&(c=g);i=c,l=0;let u=0,h=0;for(let g=0;g<n;g++){let C=e[g];C>i&&(h|=1<<n-1-g,l++,u+=C)}if(l===3){for(let g=0;g<n&&l>0;g++){let C=e[g];if(C>i&&(l--,C*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<it.CHARACTER_ENCODINGS.length;n++)if(it.CHARACTER_ENCODINGS[n]===e)return it.ALPHABET_STRING.charAt(n);if(e===it.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new q;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new q;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new q;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new q;break}i+=h,l++}else i+=c}return i}}it.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",it.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],it.ASTERISK_ENCODING=148;class Ze extends Re{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Le;Ze.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),g=null;i!=null&&(g=i.get(te.ALLOWED_LENGTHS)),g==null&&(g=Ze.DEFAULT_ALLOWED_LENGTHS);let C=h.length,_=!1,P=0;for(let X of g){if(C===X){_=!0;break}X>P&&(P=X)}if(!_&&C>P&&(_=!0),!_)throw new q;const D=[new Pe(l[1],e),new Pe(c[0],e)];return new we(h,null,0,D,ae.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){Re.recordPattern(e,n,c);for(let C=0;C<5;C++){let _=2*C;u[C]=c[_],h[C]=c[_+1]}let g=Ze.decodeDigit(u);l.append(g.toString()),g=this.decodeDigit(h),l.append(g.toString()),c.forEach(function(C){n+=C})}}decodeStart(e){let n=Ze.skipWhiteSpace(e),i=Ze.findGuardPattern(e,n,Ze.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new J}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new J;return i}decodeEnd(e){e.reverse();try{let n=Ze.skipWhiteSpace(e),i;try{i=Ze.findGuardPattern(e,n,Ze.END_PATTERN_REVERSED[0])}catch(c){c instanceof J&&(i=Ze.findGuardPattern(e,n,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,g=0,C=n;c.fill(0);for(let _=n;_<u;_++)if(e.get(_)!==h)c[g]++;else{if(g===l-1){if(Re.patternMatchVariance(c,i,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[C,_];C+=c[0]+c[1],B.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,h=!h}throw new J}static decodeDigit(e){let n=Ze.MAX_AVG_VARIANCE,i=-1,l=Ze.PATTERNS.length;for(let c=0;c<l;c++){let u=Ze.PATTERNS[c],h=Re.patternMatchVariance(e,u,Ze.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new J}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class yt extends Re{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=yt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return yt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return yt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return yt.findGuardPattern(e,n,!1,yt.START_END_PATTERN,new Int32Array(yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,g=n,C=l.length,_=i;for(let P=n;P<u;P++)if(e.get(P)!==_)c[h]++;else{if(h===C-1){if(Re.patternMatchVariance(c,l,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return Int32Array.from([g,P]);g+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let H=0;H<h-1;H++)c[H]=D[H];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,_=!_}throw new J}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let g=0;g<h;g++){let C=l[g],_=Re.patternMatchVariance(n,C,yt.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,u=g)}if(u>=0)return u;throw new J}}yt.MAX_AVG_VARIANCE=.48,yt.MAX_INDIVIDUAL_VARIANCE=.7,yt.START_END_PATTERN=Int32Array.from([1,1,1]),yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Xt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=Xt.parseExtensionString(u),g=[new Pe((i[0]+i[1])/2,e),new Pe(c,e)],C=new we(u,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<5&&u<c;C++){let _=yt.decodeDigit(e,l,u,yt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<4-C),C!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new J;let g=this.determineCheckDigit(h);if(Xt.extensionChecksum(i.toString())!==g)throw new J;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new J}static parseExtensionString(e){if(e.length!==5)return null;let n=Xt.parseExtension5String(e);return n==null?null:new Map([[Ee.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class En{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=En.parseExtensionString(u),g=[new Pe((i[0]+i[1])/2,e),new Pe(c,e)],C=new we(u,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&C.putAllMetadata(h),C}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let g=0;g<2&&u<c;g++){let C=yt.decodeDigit(e,l,u,yt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let _ of l)u+=_;C>=10&&(h|=1<<1-g),g!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new J;if(parseInt(i.toString())%4!==h)throw new J;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[Ee.ISSUE_NUMBER,parseInt(e)]])}}class ln{static decodeRow(e,n,i){let l=yt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Xt().decodeRow(e,n,l)}catch{return new En().decodeRow(e,n,l)}}}ln.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends yt{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=ot.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];ot.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=ot.findStartGuardPattern(n),c=i==null?null:i.get(te.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Ae=new Pe((l[0]+l[1])/2,e);c.foundPossibleResultPoint(Ae)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,g=u.resultString;if(c!=null){const Ae=new Pe(h,e);c.foundPossibleResultPoint(Ae)}let C=this.decodeEnd(n,h);if(c!=null){const Ae=new Pe((C[0]+C[1])/2,e);c.foundPossibleResultPoint(Ae)}let _=C[1],P=_+(_-C[0]);if(P>=n.getSize()||!n.isRange(_,P,!1))throw new J;let D=g.toString();if(D.length<8)throw new q;if(!ot.checkChecksum(D))throw new M;let H=(l[1]+l[0])/2,X=(C[1]+C[0])/2,Z=this.getBarcodeFormat(),re=[new Pe(H,e),new Pe(X,e)],de=new we(D,null,0,re,Z,new Date().getTime()),Oe=0;try{let Ae=ln.decodeRow(e,n,C[1]);de.putMetadata(Ee.UPC_EAN_EXTENSION,Ae.getText()),de.putAllMetadata(Ae.getResultMetadata()),de.addResultPoints(Ae.getResultPoints()),Oe=Ae.getText().length}catch{}let Me=i==null?null:i.get(te.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ae=!1;for(let kt in Me)if(Oe.toString()===kt){Ae=!0;break}if(!Ae)throw new J}return de}decodeEnd(e,n){return ot.findGuardPattern(e,n,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ot.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return ot.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new q;i+=c}return(1e3-i)%10}}class rn extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let C=0;C<6&&u<c;C++){let _=ot.decodeDigit(e,l,u,ot.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}i=rn.determineFirstDigit(i,h),u=ot.findGuardPattern(e,u,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&u<c;C++){let _=ot.decodeDigit(e,l,u,ot.L_PATTERNS);i+=String.fromCharCode(48+_);for(let P of l)u+=P}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new J}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ss extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let g=0;g<4&&u<c;g++){let C=ot.decodeDigit(e,l,u,ot.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}u=ot.findGuardPattern(e,u,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&u<c;g++){let C=ot.decodeDigit(e,l,u,ot.L_PATTERNS);i+=String.fromCharCode(48+C);for(let _ of l)u+=_}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return ae.EAN_8}}class Wi extends ot{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return ae.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new we(n.substring(1),null,null,e.getResultPoints(),ae.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new J}reset(){this.ean13Reader.reset()}}class nr extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(C=>C);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let C=0;C<6&&u<c;C++){const _=nr.decodeDigit(e,l,u,nr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);for(let P of l)u+=P;_>=10&&(h|=1<<5-C)}let g=nr.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:g}}decodeEnd(e,n){return nr.findGuardPatternWithoutCounters(e,n,!0,nr.MIDDLE_END_PATTERN)}checkChecksum(e){return ot.checkChecksum(nr.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw J.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Le;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}nr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Hi extends Re{constructor(e){super();let n=e==null?null:e.get(te.POSSIBLE_FORMATS),i=[];f(n)?(i.push(new rn),i.push(new Wi),i.push(new Ss),i.push(new nr)):(n.indexOf(ae.EAN_13)>-1&&i.push(new rn),n.indexOf(ae.UPC_A)>-1&&i.push(new Wi),n.indexOf(ae.EAN_8)>-1&&i.push(new Ss),n.indexOf(ae.UPC_E)>-1&&i.push(new nr)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===ae.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(te.POSSIBLE_FORMATS),g=h==null||h.includes(ae.UPC_A);if(u&&g){const C=c.getRawBytes(),_=new we(c.getText().substring(1),C,C?C.length:null,c.getResultPoints(),ae.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new J}reset(){for(let e of this.readers)e.reset()}}class cn extends Re{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Re.patternMatchVariance(e,n[i],cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return i;throw new J}static count(e){return et.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=cn.MIN_FINDER_PATTERN_RATIO&&l<=cn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}cn.MAX_AVG_VARIANCE=.2,cn.MAX_INDIVIDUAL_VARIANCE=.45,cn.MIN_FINDER_PATTERN_RATIO=9.5/12,cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Lr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Lr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ai{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Pe(i,c)),this.resultPoints.push(new Pe(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof ai))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class Nn{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let g of e)l+=g;let c=0,u=0,h=e.length;for(let g=0;g<h-1;g++){let C;for(C=1,u|=1<<g;C<e[g];C++,u&=~(1<<g)){let _=Nn.combins(l-C-1,h-g-2);if(i&&u===0&&l-C-(h-g-1)>=h-g-1&&(_-=Nn.combins(l-C-(h-g),h-g-2)),h-g-1>1){let P=0;for(let D=l-C-(h-g-2);D>n;D--)P+=Nn.combins(l-C-D-1,h-g-3);_-=P*(h-1-g)}else l-C>n&&_--;c+=_}l-=C}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class Gi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new Q(i),c=0,h=e[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&l.set(c),c++;for(let g=1;g<e.length;++g){let C=e[g],_=C.getLeftChar().getValue();for(let P=11;P>=0;--P)_&1<<P&&l.set(c),c++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let D=11;D>=0;--D)P&1<<D&&l.set(c),c++}}return l}}class fr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class li{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class gn extends li{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===gn.FNC1}}gn.FNC1="$";class hr extends li{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class kn extends li{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new q;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===kn.FNC1}isSecondDigitFNC1(){return this.secondDigit===kn.FNC1}isAnyFNC1(){return this.firstDigit===kn.FNC1||this.secondDigit===kn.FNC1}}kn.FNC1=10;class Ge{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new J;let n=e.substring(0,2);for(let c of Ge.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(2,c[2],e):Ge.processFixedAI(2,c[1],e);if(e.length<3)throw new J;let i=e.substring(0,3);for(let c of Ge.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(3,c[2],e):Ge.processFixedAI(3,c[1],e);for(let c of Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,c[2],e):Ge.processFixedAI(4,c[1],e);if(e.length<4)throw new J;let l=e.substring(0,4);for(let c of Ge.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===Ge.VARIABLE_LENGTH?Ge.processVariableAI(4,c[2],e):Ge.processFixedAI(4,c[1],e);throw new J}static processFixedAI(e,n,i){if(i.length<e)throw new J;let l=i.substring(0,e);if(i.length<e+n)throw new J;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,g=Ge.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),g="("+l+")"+u,C=Ge.parseFieldsInGeneralPurpose(h);return C==null?g:g+C}}Ge.VARIABLE_LENGTH=[],Ge.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ge.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ge.VARIABLE_LENGTH,20],["22",Ge.VARIABLE_LENGTH,29],["30",Ge.VARIABLE_LENGTH,8],["37",Ge.VARIABLE_LENGTH,8],["90",Ge.VARIABLE_LENGTH,30],["91",Ge.VARIABLE_LENGTH,30],["92",Ge.VARIABLE_LENGTH,30],["93",Ge.VARIABLE_LENGTH,30],["94",Ge.VARIABLE_LENGTH,30],["95",Ge.VARIABLE_LENGTH,30],["96",Ge.VARIABLE_LENGTH,30],["97",Ge.VARIABLE_LENGTH,3],["98",Ge.VARIABLE_LENGTH,30],["99",Ge.VARIABLE_LENGTH,30]],Ge.THREE_DIGIT_DATA_LENGTH=[["240",Ge.VARIABLE_LENGTH,30],["241",Ge.VARIABLE_LENGTH,30],["242",Ge.VARIABLE_LENGTH,6],["250",Ge.VARIABLE_LENGTH,30],["251",Ge.VARIABLE_LENGTH,30],["253",Ge.VARIABLE_LENGTH,17],["254",Ge.VARIABLE_LENGTH,20],["400",Ge.VARIABLE_LENGTH,30],["401",Ge.VARIABLE_LENGTH,30],["402",17],["403",Ge.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ge.VARIABLE_LENGTH,20],["421",Ge.VARIABLE_LENGTH,15],["422",3],["423",Ge.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ge.VARIABLE_LENGTH,15],["391",Ge.VARIABLE_LENGTH,18],["392",Ge.VARIABLE_LENGTH,15],["393",Ge.VARIABLE_LENGTH,18],["703",Ge.VARIABLE_LENGTH,30]],Ge.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ge.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ge.VARIABLE_LENGTH,20],["8003",Ge.VARIABLE_LENGTH,30],["8004",Ge.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ge.VARIABLE_LENGTH,30],["8008",Ge.VARIABLE_LENGTH,12],["8018",18],["8020",Ge.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ge.VARIABLE_LENGTH,70],["8200",Ge.VARIABLE_LENGTH,70]];class ci{constructor(e){this.buffer=new Le,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=Ge.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new kn(this.information.getSize(),kn.FNC1,kn.FNC1):new kn(this.information.getSize(),c-1,kn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new kn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ci.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new hr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new hr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new hr(this.current.getPosition(),this.buffer.toString()):n=new hr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new fr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new hr(this.current.getPosition(),this.buffer.toString());return new fr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new fr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new hr(this.current.getPosition(),this.buffer.toString());return new fr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new fr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new hr(this.current.getPosition(),this.buffer.toString());return new fr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new fr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new gn(e+5,gn.FNC1);if(n>=5&&n<15)return new gn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new gn(e+7,""+(i+1));if(i>=90&&i<116)return new gn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new q}return new gn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new gn(e+5,gn.FNC1);if(n>=5&&n<15)return new gn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new gn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new pt("Decoding invalid alphanumeric value: "+i)}return new gn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Xi{constructor(e){this.information=e,this.generalDecoder=new ci(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vn extends Xi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}Vn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}Vn.GTIN_SIZE=40;class rr extends Vn{constructor(e){super(e)}parseInformation(){let e=new Le;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(rr.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,rr.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,rr.HEADER_SIZE+44)}}rr.HEADER_SIZE=4;class Zr extends Xi{constructor(e){super(e)}parseInformation(){let e=new Le;return this.getGeneralDecoder().decodeAllCodes(e,Zr.HEADER_SIZE)}}Zr.HEADER_SIZE=5;class bi extends Vn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class ir extends bi{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=ir.HEADER_SIZE+bi.GTIN_SIZE+ir.WEIGHT_SIZE)throw new J;let e=new Le;return this.encodeCompressedGtin(e,ir.HEADER_SIZE),this.encodeCompressedWeight(e,ir.HEADER_SIZE+bi.GTIN_SIZE,ir.WEIGHT_SIZE),e.toString()}}ir.HEADER_SIZE=5,ir.WEIGHT_SIZE=15;class Xe extends ir{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class bt extends ir{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class ct extends Vn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ct.HEADER_SIZE+Vn.GTIN_SIZE)throw new J;let e=new Le;this.encodeCompressedGtin(e,ct.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Vn.GTIN_SIZE,ct.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(ct.HEADER_SIZE+Vn.GTIN_SIZE+ct.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}ct.HEADER_SIZE=8,ct.LAST_DIGIT_SIZE=2;class _t extends Vn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<_t.HEADER_SIZE+Vn.GTIN_SIZE)throw new J;let e=new Le;this.encodeCompressedGtin(e,_t.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+Vn.GTIN_SIZE,_t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+Vn.GTIN_SIZE+_t.LAST_DIGIT_SIZE,_t.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(_t.HEADER_SIZE+Vn.GTIN_SIZE+_t.LAST_DIGIT_SIZE+_t.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}_t.HEADER_SIZE=8,_t.LAST_DIGIT_SIZE=2,_t.FIRST_THREE_DIGITS_SIZE=10;class Ue extends bi{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Ue.HEADER_SIZE+Ue.GTIN_SIZE+Ue.WEIGHT_SIZE+Ue.DATE_SIZE)throw new J;let e=new Le;return this.encodeCompressedGtin(e,Ue.HEADER_SIZE),this.encodeCompressedWeight(e,Ue.HEADER_SIZE+Ue.GTIN_SIZE,Ue.WEIGHT_SIZE),this.encodeCompressedDate(e,Ue.HEADER_SIZE+Ue.GTIN_SIZE+Ue.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Ue.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Ue.HEADER_SIZE=8,Ue.WEIGHT_SIZE=20,Ue.DATE_SIZE=16;function Yn(k){try{if(k.get(1))return new rr(k);if(!k.get(2))return new Zr(k);switch(ci.extractNumericValueFromBitArray(k,1,4)){case 4:return new Xe(k);case 5:return new bt(k)}switch(ci.extractNumericValueFromBitArray(k,1,5)){case 12:return new ct(k);case 13:return new _t(k)}switch(ci.extractNumericValueFromBitArray(k,1,7)){case 56:return new Ue(k,"310","11");case 57:return new Ue(k,"320","11");case 58:return new Ue(k,"310","13");case 59:return new Ue(k,"320","13");case 60:return new Ue(k,"310","15");case 61:return new Ue(k,"320","15");case 62:return new Ue(k,"310","17");case 63:return new Ue(k,"320","17")}}catch(e){throw console.log(e),new pt("unknown decoder: "+k)}}class zt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof zt?zt.equalsOrNull(e.leftchar,n.leftchar)&&zt.equalsOrNull(e.rightchar,n.rightchar)&&zt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:zt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class As{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof As?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class ve extends cn{constructor(e){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof J){if(!this.pairs.length)throw new J;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new J}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new J}static isValidSequence(e){for(let n of ve.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new As(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(zt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Gi.buildBitArray(e),l=Yn(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new we(l,null,null,h,ae.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);l+=g.getLeftChar().getChecksumPortion(),c++;let C=g.getRightChar();C!=null&&(l+=C.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=ve.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let g=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new J;let C;try{C=this.decodeDataCharacter(e,c,l,!1)}catch(_){C=null,this.verbose&&console.log(_)}return new zt(g,C,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;u<c&&(g=!e.get(u),!!g);)u++;let C=0,_=u;for(let P=u;P<c;P++)if(e.get(P)!=g)l[C]++;else{if(C==3){if(h&&ve.reverseCounters(l),ve.isFinderPattern(l)){this.startEnd[0]=_,this.startEnd[1]=P;return}h&&ve.reverseCounters(l),_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,C--}else C++;l[C]=1,g=!g}throw new J}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let C=this.startEnd[0]-1;for(;C>=0&&!e.get(C);)C--;C++,l=this.startEnd[0]-C,c=C,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let g;try{g=this.parseFinderValue(h,ve.FINDER_PATTERNS)}catch{return null}return new ai(g,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Wt=0;Wt<c.length;Wt++)c[Wt]=0;if(l)ve.recordPatternInReverse(e,n.getStartEnd()[0],c);else{ve.recordPattern(e,n.getStartEnd()[1],c);for(let Wt=0,un=c.length-1;Wt<un;Wt++,un--){let Kn=c[Wt];c[Wt]=c[un],c[un]=Kn}}let u=17,h=et.sum(new Int32Array(c))/u,g=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new J;let C=this.getOddCounts(),_=this.getEvenCounts(),P=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Wt=0;Wt<c.length;Wt++){let un=1*c[Wt]/h,Kn=un+.5;if(Kn<1){if(un<.3)throw new J;Kn=1}else if(Kn>8){if(un>8.7)throw new J;Kn=8}let _i=Wt/2;Wt&1?(_[_i]=Kn,D[_i]=un-Kn):(C[_i]=Kn,P[_i]=un-Kn)}this.adjustOddEvenCounts(u);let H=4*n.getValue()+(i?0:2)+(l?0:1)-1,X=0,Z=0;for(let Wt=C.length-1;Wt>=0;Wt--){if(ve.isNotA1left(n,i,l)){let un=ve.WEIGHTS[H][2*Wt];Z+=C[Wt]*un}X+=C[Wt]}let re=0;for(let Wt=_.length-1;Wt>=0;Wt--)if(ve.isNotA1left(n,i,l)){let un=ve.WEIGHTS[H][2*Wt+1];re+=_[Wt]*un}let de=Z+re;if(X&1||X>13||X<4)throw new J;let Oe=(13-X)/2,Me=ve.SYMBOL_WIDEST[Oe],Ae=9-Me,kt=Nn.getRSSvalue(C,Me,!0),Ct=Nn.getRSSvalue(_,Ae,!1),or=ve.EVEN_TOTAL_SUBSET[Oe],kr=ve.GSUM[Oe],An=kt*or+Ct+kr;return new Lr(An,de)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=et.sum(new Int32Array(this.getOddCounts())),i=et.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let g=n+i-e,C=(n&1)==1,_=(i&1)==0;if(g==1)if(C){if(_)throw new J;c=!0}else{if(!_)throw new J;h=!0}else if(g==-1)if(C){if(_)throw new J;l=!0}else{if(!_)throw new J;u=!0}else if(g==0){if(C){if(!_)throw new J;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(_)throw new J}else throw new J;if(l){if(c)throw new J;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new J;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class wr extends Lr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class jt extends cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);jt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);jt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&jt.checkChecksum(u,h))return jt.constructResult(u,h)}throw new J}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Le;for(let C=13-l.length;C>0;C--)c.append("0");c.append(l);let u=0;for(let C=0;C<13;C++){let _=c.charAt(C).charCodeAt(0)-48;u+=C&1?_:3*_}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),g=n.getFinderPattern().getResultPoints();return new we(c.toString(),null,0,[h[0],h[1],g[0],g[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(te.NEED_RESULT_POINT_CALLBACK);if(h!=null){let _=(c[0]+c[1])/2;n&&(_=e.getSize()-1-_),h.foundPossibleResultPoint(new Pe(_,i))}let g=this.decodeDataCharacter(e,u,!0),C=this.decodeDataCharacter(e,u,!1);return new wr(1597*g.getValue()+C.getValue(),g.getChecksumPortion()+4*C.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let re=0;re<l.length;re++)l[re]=0;if(i)Re.recordPatternInReverse(e,n.getStartEnd()[0],l);else{Re.recordPattern(e,n.getStartEnd()[1]+1,l);for(let re=0,de=l.length-1;re<de;re++,de--){let Oe=l[re];l[re]=l[de],l[de]=Oe}}let c=i?16:15,u=et.sum(new Int32Array(l))/c,h=this.getOddCounts(),g=this.getEvenCounts(),C=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let re=0;re<l.length;re++){let de=l[re]/u,Oe=Math.floor(de+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Me=Math.floor(re/2);re&1?(g[Me]=Oe,_[Me]=de-Oe):(h[Me]=Oe,C[Me]=de-Oe)}this.adjustOddEvenCounts(i,c);let P=0,D=0;for(let re=h.length-1;re>=0;re--)D*=9,D+=h[re],P+=h[re];let H=0,X=0;for(let re=g.length-1;re>=0;re--)H*=9,H+=g[re],X+=g[re];let Z=D+3*H;if(i){if(P&1||P>12||P<4)throw new J;let re=(12-P)/2,de=jt.OUTSIDE_ODD_WIDEST[re],Oe=9-de,Me=Nn.getRSSvalue(h,de,!1),Ae=Nn.getRSSvalue(g,Oe,!0),kt=jt.OUTSIDE_EVEN_TOTAL_SUBSET[re],Ct=jt.OUTSIDE_GSUM[re];return new Lr(Me*kt+Ae+Ct,Z)}else{if(X&1||X>10||X<4)throw new J;let re=(10-X)/2,de=jt.INSIDE_ODD_WIDEST[re],Oe=9-de,Me=Nn.getRSSvalue(h,de,!0),Ae=Nn.getRSSvalue(g,Oe,!1),kt=jt.INSIDE_ODD_TOTAL_SUBSET[re],Ct=jt.INSIDE_GSUM[re];return new Lr(Ae*kt+Me+Ct,Z)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,g=u;for(let C=u;C<l;C++)if(e.get(C)!==c)i[h]++;else{if(h===3){if(cn.isFinderPattern(i))return[g,C];g+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new J}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,g=this.getDecodeFinderCounters(),C=new Int32Array(g.length);B.arraycopy(g,0,C,1,g.length-1),C[0]=h;const _=this.parseFinderValue(C,jt.FINDER_PATTERNS);let P=u,D=l[1];return i&&(P=e.getSize()-1-P,D=e.getSize()-1-D),new ai(_,[u,l[1]],P,D,n)}adjustOddEvenCounts(e,n){let i=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,g=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?g=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?g=!0:l<4&&(h=!0));let C=i+l-n,_=(i&1)===(e?1:0),P=(l&1)===1;if(C===1)if(_){if(P)throw new J;u=!0}else{if(!P)throw new J;g=!0}else if(C===-1)if(_){if(P)throw new J;c=!0}else{if(!P)throw new J;h=!0}else if(C===0){if(_){if(!P)throw new J;i<l?(c=!0,g=!0):(u=!0,h=!0)}else if(P)throw new J}else throw new J;if(c){if(u)throw new J;cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new J;cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],jt.OUTSIDE_GSUM=[0,161,961,2015,2715],jt.INSIDE_GSUM=[0,336,1036,1516],jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],jt.INSIDE_ODD_WIDEST=[2,4,6,8],jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Si extends Re{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(te.POSSIBLE_FORMATS):null,l=e&&e.get(te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ae.EAN_13)||i.includes(ae.UPC_A)||i.includes(ae.EAN_8)||i.includes(ae.UPC_E))&&this.readers.push(new Hi(e)),i.includes(ae.CODE_39)&&this.readers.push(new it(l)),i.includes(ae.CODE_128)&&this.readers.push(new ge),i.includes(ae.ITF)&&this.readers.push(new Ze),i.includes(ae.RSS_14)&&this.readers.push(new jt),i.includes(ae.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new Hi(e)),this.readers.push(new it),this.readers.push(new Hi(e)),this.readers.push(new ge),this.readers.push(new Ze),this.readers.push(new jt),this.readers.push(new ve(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new J}reset(){this.readers.forEach(e=>e.reset())}}class Yi extends ye{constructor(e=500,n){super(new Si(n),e,n)}}class Pt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Tt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Dt{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const g=u.getECCodewords(),C=u.getECBlocks();for(let _ of C)h+=_.getCount()*(_.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new q;for(let i of Dt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new Dt(1,10,10,8,8,new Pt(5,new Tt(1,3))),new Dt(2,12,12,10,10,new Pt(7,new Tt(1,5))),new Dt(3,14,14,12,12,new Pt(10,new Tt(1,8))),new Dt(4,16,16,14,14,new Pt(12,new Tt(1,12))),new Dt(5,18,18,16,16,new Pt(14,new Tt(1,18))),new Dt(6,20,20,18,18,new Pt(18,new Tt(1,22))),new Dt(7,22,22,20,20,new Pt(20,new Tt(1,30))),new Dt(8,24,24,22,22,new Pt(24,new Tt(1,36))),new Dt(9,26,26,24,24,new Pt(28,new Tt(1,44))),new Dt(10,32,32,14,14,new Pt(36,new Tt(1,62))),new Dt(11,36,36,16,16,new Pt(42,new Tt(1,86))),new Dt(12,40,40,18,18,new Pt(48,new Tt(1,114))),new Dt(13,44,44,20,20,new Pt(56,new Tt(1,144))),new Dt(14,48,48,22,22,new Pt(68,new Tt(1,174))),new Dt(15,52,52,24,24,new Pt(42,new Tt(2,102))),new Dt(16,64,64,14,14,new Pt(56,new Tt(2,140))),new Dt(17,72,72,16,16,new Pt(36,new Tt(4,92))),new Dt(18,80,80,18,18,new Pt(48,new Tt(4,114))),new Dt(19,88,88,20,20,new Pt(56,new Tt(4,144))),new Dt(20,96,96,22,22,new Pt(68,new Tt(4,174))),new Dt(21,104,104,24,24,new Pt(56,new Tt(6,136))),new Dt(22,120,120,18,18,new Pt(68,new Tt(6,175))),new Dt(23,132,132,20,20,new Pt(62,new Tt(8,163))),new Dt(24,144,144,22,22,new Pt(62,new Tt(8,156),new Tt(2,155))),new Dt(25,8,18,6,16,new Pt(7,new Tt(1,5))),new Dt(26,8,32,6,14,new Pt(11,new Tt(1,10))),new Dt(27,12,26,10,24,new Pt(14,new Tt(1,16))),new Dt(28,12,36,10,16,new Pt(18,new Tt(1,22))),new Dt(29,16,36,14,16,new Pt(24,new Tt(1,32))),new Dt(30,16,48,14,22,new Pt(28,new Tt(1,49)))]}}Dt.VERSIONS=Dt.buildVersions();class pr{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new q;this.version=pr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new be(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Dt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,g=!1,C=!1,_=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!g)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,g=!0;else if(i===c+4&&l===2&&!(u&7)&&!C)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,C=!0;else if(i===c-2&&l===0&&(u&7)===4&&!_)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,_=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new q;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new I("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,g=u*l,C=h*c,_=new be(C,g);for(let P=0;P<u;++P){const D=P*l;for(let H=0;H<h;++H){const X=H*c;for(let Z=0;Z<l;++Z){const re=P*(l+2)+1+Z,de=D+Z;for(let Oe=0;Oe<c;++Oe){const Me=H*(c+2)+1+Oe;if(e.get(Me,re)){const Ae=X+Oe;_.set(Ae,de)}}}}}return _}}class Wo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let Z of c)l+=Z.getCount();const u=new Array(l);let h=0;for(let Z of c)for(let re=0;re<Z.getCount();re++){const de=Z.getDataCodewords(),Oe=i.getECCodewords()+de;u[h++]=new Wo(de,new Uint8Array(Oe))}const C=u[0].codewords.length-i.getECCodewords(),_=C-1;let P=0;for(let Z=0;Z<_;Z++)for(let re=0;re<h;re++)u[re].codewords[Z]=e[P++];const D=n.getVersionNumber()===24,H=D?8:h;for(let Z=0;Z<H;Z++)u[Z].codewords[C-1]=e[P++];const X=u[0].codewords.length;for(let Z=C;Z<X;Z++)for(let re=0;re<h;re++){const de=D?(re+8)%h:re,Oe=D&&de>7?Z-1:Z;u[de].codewords[Oe]=e[P++]}if(P!==e.length)throw new I;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ho{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new I(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,g=u-h,C=255>>8-h<<g;n=(c[l]&C)>>g,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var bn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(bn||(bn={}));class Ir{static decode(e){const n=new Ho(e),i=new Le,l=new Le,c=new Array;let u=bn.ASCII_ENCODE;do if(u===bn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case bn.C40_ENCODE:this.decodeC40Segment(n,i);break;case bn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case bn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case bn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case bn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new q}u=bn.ASCII_ENCODE}while(u!==bn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new ze(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new q;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),bn.ASCII_ENCODE;if(c===129)return bn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return bn.C40_ENCODE;case 231:return bn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return bn.ANSIX12_ENCODE;case 239:return bn.TEXT_ENCODE;case 240:return bn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new q;break}}while(e.available()>0);return bn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(g+128)),i=!1):n.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(g){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:i?(n.append(String.fromCharCode(g+224)),i=!1):n.append(String.fromCharCode(g+96)),c=0;break;default:throw new q}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else throw new q;break;case 1:i?(n.append(String.fromCharCode(g+128)),i=!1):n.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C)}else switch(g){case 27:n.append("");break;case 30:i=!0;break;default:throw new q}c=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[g];i?(n.append(String.fromCharCode(C.charCodeAt(0)+128)),i=!1):n.append(C),c=0}else throw new q;break;default:throw new q}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new q;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new q;const h=new Uint8Array(u);for(let g=0;g<u;g++){if(e.available()<8)throw new q;h[g]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Be.decode(h,Ie.ISO88591))}catch(g){throw new pt("Platform does not support required encoding: "+g.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}Ir.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ir.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ir.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ir.TEXT_SHIFT2_SET_CHARS=Ir.C40_SHIFT2_SET_CHARS,Ir.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class no{constructor(){this.rsDecoder=new Mt(xe.DATA_MATRIX_FIELD_256)}decode(e){const n=new pr(e),i=n.getVersion(),l=n.readCodewords(),c=Wo.getDataBlocks(l,i);let u=0;for(let C of c)u+=C.getNumDataCodewords();const h=new Uint8Array(u),g=c.length;for(let C=0;C<g;C++){const _=c[C],P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let H=0;H<D;H++)h[H*g+C]=P[H]}return Ir.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class Zt{constructor(e){this.image=e,this.rectangleDetector=new We(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new J;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,g=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let C=Zt.sampleGrid(this.image,i,l,c,u,h,g);return new mn(C,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new Pe(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new Pe(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),g=this.transitionsBetween(l,c),C=this.transitionsBetween(c,n),_=u,P=[c,n,i,l];return _>h&&(_=h,P[0]=n,P[1]=i,P[2]=l,P[3]=c),_>g&&(_=g,P[0]=i,P[1]=l,P[2]=c,P[3]=n),_>C&&(P[0]=l,P[1]=c,P[2]=n,P[3]=i),P}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=Zt.shiftPoint(i,l,(u+1)*4),g=Zt.shiftPoint(l,i,(u+1)*4),C=this.transitionsBetween(h,n),_=this.transitionsBetween(g,c);return C<_?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),g=Zt.shiftPoint(n,i,(h+1)*4),C=Zt.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(g,c),h=this.transitionsBetween(C,c);let _=new Pe(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),P=new Pe(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(_))return this.isValid(P)?P:null;if(!this.isValid(P))return _;let D=this.transitionsBetween(g,_)+this.transitionsBetween(C,_),H=this.transitionsBetween(g,P)+this.transitionsBetween(C,P);return D>H?_:P}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,g=Zt.shiftPoint(n,i,h*4),C=Zt.shiftPoint(l,i,u*4);u=this.transitionsBetween(g,c)+1,h=this.transitionsBetween(C,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let _=(n.getX()+i.getX()+l.getX()+c.getX())/4,P=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=Zt.moveAway(n,_,P),i=Zt.moveAway(i,_,P),l=Zt.moveAway(l,_,P),c=Zt.moveAway(c,_,P);let D,H;return g=Zt.shiftPoint(n,i,h*4),g=Zt.shiftPoint(g,c,u*4),D=Zt.shiftPoint(i,n,h*4),D=Zt.shiftPoint(D,l,u*4),C=Zt.shiftPoint(l,c,h*4),C=Zt.shiftPoint(C,i,u*4),H=Zt.shiftPoint(c,l,h*4),H=Zt.shiftPoint(H,n,u*4),[g,D,C,H]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return tt.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let Z=i;i=l,l=Z,Z=c,c=u,u=Z}let g=Math.abs(c-i),C=Math.abs(u-l),_=-g/2,P=l<u?1:-1,D=i<c?1:-1,H=0,X=this.image.get(h?l:i,h?i:l);for(let Z=i,re=l;Z!==c;Z+=D){let de=this.image.get(h?re:Z,h?Z:re);if(de!==X&&(H++,X=de),_+=C,_>0){if(re===u)break;re+=P,_-=g}}return H}}class Nr{constructor(){this.decoder=new no}decode(e,n=null){let i,l;if(n!=null&&n.has(te.PURE_BARCODE)){const C=Nr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(C),l=Nr.NO_POINTS}else{const C=new Zt(e.getBlackMatrix()).detect();i=this.decoder.decode(C.getBits()),l=C.getPoints()}const c=i.getRawBytes(),u=new we(i.getText(),c,8*c.length,l,ae.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(Ee.BYTE_SEGMENTS,h);const g=i.getECLevel();return g!=null&&u.putMetadata(Ee.ERROR_CORRECTION_LEVEL,g),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new J;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const C=(i[0]-h+1)/l,_=(u-c+1)/l;if(C<=0||_<=0)throw new J;const P=l/2;c+=P,h+=P;const D=new be(C,_);for(let H=0;H<_;H++){const X=c+H*l;for(let Z=0;Z<C;Z++)e.get(h+Z*l,X)&&D.set(Z,H)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new J;const u=l-e[0];if(u===0)throw new J;return u}}Nr.NO_POINTS=[];class Fc extends ye{constructor(e=500){super(new Nr,e)}}var $i;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})($i||($i={}));class Gt{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Gt.FOR_BITS.set(i,this),Gt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Gt.L;case"M":return Gt.M;case"Q":return Gt.Q;case"H":return Gt.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Gt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Gt.FOR_BITS.size)throw new I;return Gt.FOR_BITS.get(e)}}Gt.FOR_BITS=new Map,Gt.FOR_VALUE=new Map,Gt.L=new Gt($i.L,"L",1),Gt.M=new Gt($i.M,"M",0),Gt.Q=new Gt($i.Q,"Q",3),Gt.H=new Gt($i.H,"H",2);class Pn{constructor(e){this.errorCorrectionLevel=Gt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return F.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Pn.doDecodeFormatInformation(e,n);return i!==null?i:Pn.doDecodeFormatInformation(e^Pn.FORMAT_INFO_MASK_QR,n^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of Pn.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new Pn(c[1]);let h=Pn.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=Pn.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new Pn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Pn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ie{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class st{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new q;try{return this.getVersionForNumber((e-17)/4)}catch{throw new q}}static getVersionForNumber(e){if(e<1||e>40)throw new I;return st.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<st.VERSION_DECODE_INFO.length;l++){const c=st.VERSION_DECODE_INFO[l];if(c===e)return st.getVersionForNumber(l+7);const u=Pn.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?st.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new be(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}st.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),st.VERSIONS=[new st(1,new Int32Array(0),new ie(7,new z(1,19)),new ie(10,new z(1,16)),new ie(13,new z(1,13)),new ie(17,new z(1,9))),new st(2,Int32Array.from([6,18]),new ie(10,new z(1,34)),new ie(16,new z(1,28)),new ie(22,new z(1,22)),new ie(28,new z(1,16))),new st(3,Int32Array.from([6,22]),new ie(15,new z(1,55)),new ie(26,new z(1,44)),new ie(18,new z(2,17)),new ie(22,new z(2,13))),new st(4,Int32Array.from([6,26]),new ie(20,new z(1,80)),new ie(18,new z(2,32)),new ie(26,new z(2,24)),new ie(16,new z(4,9))),new st(5,Int32Array.from([6,30]),new ie(26,new z(1,108)),new ie(24,new z(2,43)),new ie(18,new z(2,15),new z(2,16)),new ie(22,new z(2,11),new z(2,12))),new st(6,Int32Array.from([6,34]),new ie(18,new z(2,68)),new ie(16,new z(4,27)),new ie(24,new z(4,19)),new ie(28,new z(4,15))),new st(7,Int32Array.from([6,22,38]),new ie(20,new z(2,78)),new ie(18,new z(4,31)),new ie(18,new z(2,14),new z(4,15)),new ie(26,new z(4,13),new z(1,14))),new st(8,Int32Array.from([6,24,42]),new ie(24,new z(2,97)),new ie(22,new z(2,38),new z(2,39)),new ie(22,new z(4,18),new z(2,19)),new ie(26,new z(4,14),new z(2,15))),new st(9,Int32Array.from([6,26,46]),new ie(30,new z(2,116)),new ie(22,new z(3,36),new z(2,37)),new ie(20,new z(4,16),new z(4,17)),new ie(24,new z(4,12),new z(4,13))),new st(10,Int32Array.from([6,28,50]),new ie(18,new z(2,68),new z(2,69)),new ie(26,new z(4,43),new z(1,44)),new ie(24,new z(6,19),new z(2,20)),new ie(28,new z(6,15),new z(2,16))),new st(11,Int32Array.from([6,30,54]),new ie(20,new z(4,81)),new ie(30,new z(1,50),new z(4,51)),new ie(28,new z(4,22),new z(4,23)),new ie(24,new z(3,12),new z(8,13))),new st(12,Int32Array.from([6,32,58]),new ie(24,new z(2,92),new z(2,93)),new ie(22,new z(6,36),new z(2,37)),new ie(26,new z(4,20),new z(6,21)),new ie(28,new z(7,14),new z(4,15))),new st(13,Int32Array.from([6,34,62]),new ie(26,new z(4,107)),new ie(22,new z(8,37),new z(1,38)),new ie(24,new z(8,20),new z(4,21)),new ie(22,new z(12,11),new z(4,12))),new st(14,Int32Array.from([6,26,46,66]),new ie(30,new z(3,115),new z(1,116)),new ie(24,new z(4,40),new z(5,41)),new ie(20,new z(11,16),new z(5,17)),new ie(24,new z(11,12),new z(5,13))),new st(15,Int32Array.from([6,26,48,70]),new ie(22,new z(5,87),new z(1,88)),new ie(24,new z(5,41),new z(5,42)),new ie(30,new z(5,24),new z(7,25)),new ie(24,new z(11,12),new z(7,13))),new st(16,Int32Array.from([6,26,50,74]),new ie(24,new z(5,98),new z(1,99)),new ie(28,new z(7,45),new z(3,46)),new ie(24,new z(15,19),new z(2,20)),new ie(30,new z(3,15),new z(13,16))),new st(17,Int32Array.from([6,30,54,78]),new ie(28,new z(1,107),new z(5,108)),new ie(28,new z(10,46),new z(1,47)),new ie(28,new z(1,22),new z(15,23)),new ie(28,new z(2,14),new z(17,15))),new st(18,Int32Array.from([6,30,56,82]),new ie(30,new z(5,120),new z(1,121)),new ie(26,new z(9,43),new z(4,44)),new ie(28,new z(17,22),new z(1,23)),new ie(28,new z(2,14),new z(19,15))),new st(19,Int32Array.from([6,30,58,86]),new ie(28,new z(3,113),new z(4,114)),new ie(26,new z(3,44),new z(11,45)),new ie(26,new z(17,21),new z(4,22)),new ie(26,new z(9,13),new z(16,14))),new st(20,Int32Array.from([6,34,62,90]),new ie(28,new z(3,107),new z(5,108)),new ie(26,new z(3,41),new z(13,42)),new ie(30,new z(15,24),new z(5,25)),new ie(28,new z(15,15),new z(10,16))),new st(21,Int32Array.from([6,28,50,72,94]),new ie(28,new z(4,116),new z(4,117)),new ie(26,new z(17,42)),new ie(28,new z(17,22),new z(6,23)),new ie(30,new z(19,16),new z(6,17))),new st(22,Int32Array.from([6,26,50,74,98]),new ie(28,new z(2,111),new z(7,112)),new ie(28,new z(17,46)),new ie(30,new z(7,24),new z(16,25)),new ie(24,new z(34,13))),new st(23,Int32Array.from([6,30,54,78,102]),new ie(30,new z(4,121),new z(5,122)),new ie(28,new z(4,47),new z(14,48)),new ie(30,new z(11,24),new z(14,25)),new ie(30,new z(16,15),new z(14,16))),new st(24,Int32Array.from([6,28,54,80,106]),new ie(30,new z(6,117),new z(4,118)),new ie(28,new z(6,45),new z(14,46)),new ie(30,new z(11,24),new z(16,25)),new ie(30,new z(30,16),new z(2,17))),new st(25,Int32Array.from([6,32,58,84,110]),new ie(26,new z(8,106),new z(4,107)),new ie(28,new z(8,47),new z(13,48)),new ie(30,new z(7,24),new z(22,25)),new ie(30,new z(22,15),new z(13,16))),new st(26,Int32Array.from([6,30,58,86,114]),new ie(28,new z(10,114),new z(2,115)),new ie(28,new z(19,46),new z(4,47)),new ie(28,new z(28,22),new z(6,23)),new ie(30,new z(33,16),new z(4,17))),new st(27,Int32Array.from([6,34,62,90,118]),new ie(30,new z(8,122),new z(4,123)),new ie(28,new z(22,45),new z(3,46)),new ie(30,new z(8,23),new z(26,24)),new ie(30,new z(12,15),new z(28,16))),new st(28,Int32Array.from([6,26,50,74,98,122]),new ie(30,new z(3,117),new z(10,118)),new ie(28,new z(3,45),new z(23,46)),new ie(30,new z(4,24),new z(31,25)),new ie(30,new z(11,15),new z(31,16))),new st(29,Int32Array.from([6,30,54,78,102,126]),new ie(30,new z(7,116),new z(7,117)),new ie(28,new z(21,45),new z(7,46)),new ie(30,new z(1,23),new z(37,24)),new ie(30,new z(19,15),new z(26,16))),new st(30,Int32Array.from([6,26,52,78,104,130]),new ie(30,new z(5,115),new z(10,116)),new ie(28,new z(19,47),new z(10,48)),new ie(30,new z(15,24),new z(25,25)),new ie(30,new z(23,15),new z(25,16))),new st(31,Int32Array.from([6,30,56,82,108,134]),new ie(30,new z(13,115),new z(3,116)),new ie(28,new z(2,46),new z(29,47)),new ie(30,new z(42,24),new z(1,25)),new ie(30,new z(23,15),new z(28,16))),new st(32,Int32Array.from([6,34,60,86,112,138]),new ie(30,new z(17,115)),new ie(28,new z(10,46),new z(23,47)),new ie(30,new z(10,24),new z(35,25)),new ie(30,new z(19,15),new z(35,16))),new st(33,Int32Array.from([6,30,58,86,114,142]),new ie(30,new z(17,115),new z(1,116)),new ie(28,new z(14,46),new z(21,47)),new ie(30,new z(29,24),new z(19,25)),new ie(30,new z(11,15),new z(46,16))),new st(34,Int32Array.from([6,34,62,90,118,146]),new ie(30,new z(13,115),new z(6,116)),new ie(28,new z(14,46),new z(23,47)),new ie(30,new z(44,24),new z(7,25)),new ie(30,new z(59,16),new z(1,17))),new st(35,Int32Array.from([6,30,54,78,102,126,150]),new ie(30,new z(12,121),new z(7,122)),new ie(28,new z(12,47),new z(26,48)),new ie(30,new z(39,24),new z(14,25)),new ie(30,new z(22,15),new z(41,16))),new st(36,Int32Array.from([6,24,50,76,102,128,154]),new ie(30,new z(6,121),new z(14,122)),new ie(28,new z(6,47),new z(34,48)),new ie(30,new z(46,24),new z(10,25)),new ie(30,new z(2,15),new z(64,16))),new st(37,Int32Array.from([6,28,54,80,106,132,158]),new ie(30,new z(17,122),new z(4,123)),new ie(28,new z(29,46),new z(14,47)),new ie(30,new z(49,24),new z(10,25)),new ie(30,new z(24,15),new z(46,16))),new st(38,Int32Array.from([6,32,58,84,110,136,162]),new ie(30,new z(4,122),new z(18,123)),new ie(28,new z(13,46),new z(32,47)),new ie(30,new z(48,24),new z(14,25)),new ie(30,new z(42,15),new z(32,16))),new st(39,Int32Array.from([6,26,54,82,110,138,166]),new ie(30,new z(20,117),new z(4,118)),new ie(28,new z(40,47),new z(7,48)),new ie(30,new z(43,24),new z(22,25)),new ie(30,new z(10,15),new z(67,16))),new st(40,Int32Array.from([6,30,58,86,114,142,170]),new ie(30,new z(19,118),new z(6,119)),new ie(28,new z(18,47),new z(31,48)),new ie(30,new z(34,24),new z(34,25)),new ie(30,new z(20,15),new z(61,16)))];var xn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(xn||(xn={}));class It{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}It.values=new Map([[xn.DATA_MASK_000,new It(xn.DATA_MASK_000,(k,e)=>(k+e&1)===0)],[xn.DATA_MASK_001,new It(xn.DATA_MASK_001,(k,e)=>(k&1)===0)],[xn.DATA_MASK_010,new It(xn.DATA_MASK_010,(k,e)=>e%3===0)],[xn.DATA_MASK_011,new It(xn.DATA_MASK_011,(k,e)=>(k+e)%3===0)],[xn.DATA_MASK_100,new It(xn.DATA_MASK_100,(k,e)=>(Math.floor(k/2)+Math.floor(e/3)&1)===0)],[xn.DATA_MASK_101,new It(xn.DATA_MASK_101,(k,e)=>k*e%6===0)],[xn.DATA_MASK_110,new It(xn.DATA_MASK_110,(k,e)=>k*e%6<3)],[xn.DATA_MASK_111,new It(xn.DATA_MASK_111,(k,e)=>(k+e+k*e%3&1)===0)]]);class Qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new q;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=Pn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return st.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=st.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=st.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new q}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=It.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let g=0,C=0,_=0;for(let P=l-1;P>0;P-=2){P===6&&P--;for(let D=0;D<l;D++){const H=u?l-1-D:D;for(let X=0;X<2;X++)c.get(P-X,H)||(_++,C<<=1,this.bitMatrix.get(P-X,H)&&(C|=1),_===8&&(h[g++]=C,_=0,C=0))}u=!u}if(g!==n.getTotalCodewords())throw new q;return h}remask(){if(this.parsedFormatInfo===null)return;const e=It.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class ro{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new I;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const X of u)c+=X.getCount();const h=new Array(c);let g=0;for(const X of u)for(let Z=0;Z<X.getCount();Z++){const re=X.getDataCodewords(),de=l.getECCodewordsPerBlock()+re;h[g++]=new ro(re,new Uint8Array(de))}const C=h[0].codewords.length;let _=h.length-1;for(;_>=0&&h[_].codewords.length!==C;)_--;_++;const P=C-l.getECCodewordsPerBlock();let D=0;for(let X=0;X<P;X++)for(let Z=0;Z<g;Z++)h[Z].codewords[X]=e[D++];for(let X=_;X<g;X++)h[X].codewords[P]=e[D++];const H=h[0].codewords.length;for(let X=P;X<H;X++)for(let Z=0;Z<g;Z++){const re=Z<_?X:X+1;h[Z].codewords[re]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var sr;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(sr||(sr={}));class at{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,at.FOR_BITS.set(l,this),at.FOR_VALUE.set(e,this)}static forBits(e){const n=at.FOR_BITS.get(e);if(n===void 0)throw new I;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof at))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.TERMINATOR=new at(sr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),at.NUMERIC=new at(sr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),at.ALPHANUMERIC=new at(sr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),at.STRUCTURED_APPEND=new at(sr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),at.BYTE=new at(sr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),at.ECI=new at(sr.ECI,"ECI",Int32Array.from([0,0,0]),7),at.KANJI=new at(sr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),at.FNC1_FIRST_POSITION=new at(sr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),at.FNC1_SECOND_POSITION=new at(sr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),at.HANZI=new at(sr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(e,n,i,l){const c=new Ho(e);let u=new Le;const h=new Array;let g=-1,C=-1;try{let _=null,P=!1,D;do{if(c.available()<4)D=at.TERMINATOR;else{const H=c.readBits(4);D=at.forBits(H)}switch(D){case at.TERMINATOR:break;case at.FNC1_FIRST_POSITION:case at.FNC1_SECOND_POSITION:P=!0;break;case at.STRUCTURED_APPEND:if(c.available()<16)throw new q;g=c.readBits(8),C=c.readBits(8);break;case at.ECI:const H=Kt.parseECIValue(c);if(_=K.getCharacterSetECIByValue(H),_===null)throw new q;break;case at.HANZI:const X=c.readBits(4),Z=c.readBits(D.getCharacterCountBits(n));X===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(c,u,Z);break;default:const re=c.readBits(D.getCharacterCountBits(n));switch(D){case at.NUMERIC:Kt.decodeNumericSegment(c,u,re);break;case at.ALPHANUMERIC:Kt.decodeAlphanumericSegment(c,u,re,P);break;case at.BYTE:Kt.decodeByteSegment(c,u,re,_,h,l);break;case at.KANJI:Kt.decodeKanjiSegment(c,u,re);break;default:throw new q}break}}while(D!==at.TERMINATOR)}catch{throw new q}return new ze(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),g,C)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Be.decode(l,Ie.GB2312))}catch(u){throw new q(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new q;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Be.decode(l,Ie.SHIFT_JIS))}catch(u){throw new q(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new q;const h=new Uint8Array(i);for(let C=0;C<i;C++)h[C]=e.readBits(8);let g;l===null?g=Ie.guessEncoding(h,u):g=l.getName();try{n.append(Be.decode(h,g))}catch(C){throw new q(C)}c.push(h)}static toAlphaNumericChar(e){if(e>=Kt.ALPHANUMERIC_CHARS.length)throw new q;return Kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new q;const u=e.readBits(11);n.append(Kt.toAlphaNumericChar(Math.floor(u/45))),n.append(Kt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new q;n.append(Kt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new q;const l=e.readBits(10);if(l>=1e3)throw new q;n.append(Kt.toAlphaNumericChar(Math.floor(l/100))),n.append(Kt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Kt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new q;const l=e.readBits(7);if(l>=100)throw new q;n.append(Kt.toAlphaNumericChar(Math.floor(l/10))),n.append(Kt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new q;const l=e.readBits(4);if(l>=10)throw new q;n.append(Kt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new q}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Go{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Xo{constructor(){this.rsDecoder=new Mt(xe.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(be.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new Qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Go(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=ro.getDataBlocks(c,i,l);let h=0;for(const _ of u)h+=_.getNumDataCodewords();const g=new Uint8Array(h);let C=0;for(const _ of u){const P=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(P,D);for(let H=0;H<D;H++)g[C++]=P[H]}return Kt.decode(g,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new M}for(let l=0;l<n;l++)e[l]=i[l]}}class Zi extends Pe{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Zi(l,c,u)}}class _r{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let g=0;g<n;g++){const C=c+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));u[0]=0,u[1]=0,u[2]=0;let _=e;for(;_<l&&!h.get(_,C);)_++;let P=0;for(;_<l;){if(h.get(_,C))if(P===1)u[1]++;else if(P===2){if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,_);if(D!==null)return D}u[0]=u[2],u[1]=1,u[2]=0,P=1}else u[++P]++;else P===1&&P++,u[P]++;_++}if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,C,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=e;for(;g>=0&&c.get(n,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&!c.get(n,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(n,g)&&h[1]<=i;)h[1]++,g++;if(g===u||h[1]>i)return NaN;for(;g<u&&!c.get(n,g)&&h[2]<=i;)h[2]++,g++;if(h[2]>i)return NaN;const C=h[0]+h[1]+h[2];return 5*Math.abs(C-l)>=2*l?NaN:this.foundPatternCross(h)?_r.centerFromEnd(h,g):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=_r.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(h,u,c))return C.combineEstimate(u,c,h);const g=new Zi(c,u,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Br extends Pe{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Br(c,u,h,l)}}class ui{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(te.TRY_HARDER)!==void 0,i=e!=null&&e.get(te.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*sn.MAX_MODULES));(h<sn.MIN_SKIP||n)&&(h=sn.MIN_SKIP);let g=!1;const C=new Int32Array(5);for(let P=h-1;P<c&&!g;P+=h){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let D=0;for(let H=0;H<u;H++)if(l.get(H,P))(D&1)===1&&D++,C[D]++;else if(D&1)C[D]++;else if(D===4)if(sn.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,H,i)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>C[2]&&(P+=Z-C[2]-h,H=u-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;continue}D=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,D=3;else C[++D]++;sn.foundPatternCross(C)&&this.handlePossibleCenter(C,P,u,i)===!0&&(h=C[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return Pe.orderBestPatterns(_),new ui(_)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const g=h.getHeight(),C=h.getWidth();for(u=1;e+u<g&&n+u<C&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=g||n+u>=C)return!1;for(;e+u<g&&n+u<C&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=g||n+u>=C||c[3]>=i)return!1;for(;e+u<g&&n+u<C&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-l)<2*l&&sn.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let g=e;for(;g>=0&&c.get(n,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(n,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&c.get(n,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(n,g);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!c.get(n,g)&&h[3]<i;)h[3]++,g++;if(g===u||h[3]>=i)return NaN;for(;g<u&&c.get(n,g)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=2*l?NaN:sn.foundPatternCross(h)?sn.centerFromEnd(h,g):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let g=e;for(;g>=0&&c.get(g,n);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(g,n)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&c.get(g,n)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=e+1;g<u&&c.get(g,n);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!c.get(g,n)&&h[3]<i;)h[3]++,g++;if(g===u||h[3]>=i)return NaN;for(;g<u&&c.get(g,n)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const C=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(C-l)>=l?NaN:sn.foundPatternCross(h)?sn.centerFromEnd(h,g):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=sn.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const g=c/7;let C=!1;const _=this.possibleCenters;for(let P=0,D=_.length;P<D;P++){const H=_[P];if(H.aboutEquals(g,h,u)){_[P]=H.combineEstimate(h,u,g),C=!0;break}}if(!C){const P=new Br(u,h,g);_.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=sn.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=sn.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new J;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const g of this.possibleCenters){const C=g.getEstimatedModuleSize();l+=C,c+=C*C}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((g,C)=>{const _=Math.abs(C.getEstimatedModuleSize()-i),P=Math.abs(g.getEstimatedModuleSize()-i);return _<P?-1:_>P?1:0});const h=Math.max(.2*i,u);for(let g=0;g<n.length&&n.length>3;g++){const C=n[g];Math.abs(C.getEstimatedModuleSize()-i)>h&&(n.splice(g,1),g--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),g=Math.abs(c.getEstimatedModuleSize()-i);return h<g?1:h>g?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class Kr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(te.NEED_RESULT_POINT_CALLBACK);const i=new sn(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new J("No pattern found in proccess finder.");const u=Kr.computeDimension(n,i,l,c),h=st.getProvisionalVersionForDimension(u),g=h.getDimensionForVersion()-7;let C=null;if(h.getAlignmentPatternCenters().length>0){const H=i.getX()-n.getX()+l.getX(),X=i.getY()-n.getY()+l.getY(),Z=1-3/g,re=Math.floor(n.getX()+Z*(H-n.getX())),de=Math.floor(n.getY()+Z*(X-n.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{C=this.findAlignmentInRegion(c,re,de,Oe);break}catch(Me){if(!(Me instanceof J))throw Me}}const _=Kr.createTransform(n,i,l,C,u),P=Kr.sampleGrid(this.image,_,u);let D;return C===null?D=[l,n,i]:D=[l,n,i,C],new mn(P,D)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,g,C,_;return l!==null?(h=l.getX(),g=l.getY(),C=u-3,_=C):(h=n.getX()-e.getX()+i.getX(),g=n.getY()-e.getY()+i.getY(),C=u,_=u),At.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,C,_,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,g,i.getX(),i.getY())}static sampleGrid(e,n,i){return tt.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=et.round(Pe.distance(e,n)/l),u=et.round(Pe.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new J("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let g=Math.floor(n-(l-n)*u);return u=1,g<0?(u=n/(n-g),g=0):g>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(g-n),g=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,g),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let H=e;e=n,n=H,H=i,i=l,l=H}const u=Math.abs(i-e),h=Math.abs(l-n);let g=-u/2;const C=e<i?1:-1,_=n<l?1:-1;let P=0;const D=i+C;for(let H=e,X=n;H!==D;H+=C){const Z=c?X:H,re=c?H:X;if(P===1===this.image.get(Z,re)){if(P===2)return et.distance(H,X,e,n);P++}if(g+=h,g>0){if(X===l)break;X+=_,g-=u}}return P===2?et.distance(i+C,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new J("Alignment top exceeds estimated module size.");const g=Math.max(0,i-c),C=Math.min(this.image.getHeight()-1,i+c);if(C-g<e*3)throw new J("Alignment bottom exceeds estimated module size.");return new _r(this.image,u,g,h-u,C-g,e,this.resultPointCallback).find()}}class $n{constructor(){this.decoder=new Xo}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(te.PURE_BARCODE)!==void 0){const g=$n.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(g,n),l=$n.NO_POINTS}else{const g=new Kr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(g.getBits(),n),l=g.getPoints()}i.getOther()instanceof Go&&i.getOther().applyMirroredCorrection(l);const c=new we(i.getText(),i.getRawBytes(),void 0,l,ae.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(Ee.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(Ee.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(Ee.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(Ee.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new J;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],g=i[0];if(h>=g||c>=u)throw new J;if(u-c!==g-h&&(g=h+(u-c),g>=e.getWidth()))throw new J;const C=Math.round((g-h+1)/l),_=Math.round((u-c+1)/l);if(C<=0||_<=0)throw new J;if(_!==C)throw new J;const P=Math.floor(l/2);c+=P,h+=P;const D=h+Math.floor((C-1)*l)-g;if(D>0){if(D>P)throw new J;h-=D}const H=c+Math.floor((_-1)*l)-u;if(H>0){if(H>P)throw new J;c-=H}const X=new be(C,_);for(let Z=0;Z<_;Z++){const re=c+Math.floor(Z*l);for(let de=0;de<C;de++)e.get(h+Math.floor(de*l),re)&&X.set(de,Z)}return X}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,g=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++g===5)break;h=!h}c++,u++}if(c===l||u===i)throw new J;return(c-e[0])/7}}$n.NO_POINTS=new Array;class ht{PDF417Common(){}static getBitCountSum(e){return et.sum(e)}static toIntArray(e){if(e==null||!e.length)return ht.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=U.binarySearch(ht.SYMBOL_TABLE,e&262143);return n<0?-1:(ht.CODEWORD_TABLE[n]-1)%ht.NUMBER_OF_CODEWORDS}}ht.NUMBER_OF_CODEWORDS=929,ht.MAX_CODEWORDS_IN_BARCODE=ht.NUMBER_OF_CODEWORDS-1,ht.MIN_ROWS_IN_BARCODE=3,ht.MAX_ROWS_IN_BARCODE=90,ht.MODULES_IN_CODEWORD=17,ht.MODULES_IN_STOP_PATTERN=18,ht.BARS_IN_MODULE=8,ht.EMPTY_INT_ARRAY=new Int32Array([]),ht.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ht.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ja{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class vt{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=vt.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=vt.detect(i,l)),new Ja(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=vt.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const g of i)g[1]!=null&&(l=Math.trunc(Math.max(l,g[1].getY()))),g[3]!=null&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=vt.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return vt.copyToResult(u,vt.findRowsWithPattern(e,l,c,n,i,vt.START_PATTERN),vt.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),vt.copyToResult(u,vt.findRowsWithPattern(e,l,c,n,i,vt.STOP_PATTERN),vt.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let g=!1;const C=new Int32Array(u.length);for(;l<n;l+=vt.ROW_STEP){let P=vt.findGuardPattern(e,c,l,i,!1,u,C);if(P!=null){for(;l>0;){const D=vt.findGuardPattern(e,c,--l,i,!1,u,C);if(D!=null)P=D;else{l++;break}}h[0]=new Pe(P[0],l),h[1]=new Pe(P[1],l),g=!0;break}}let _=l+1;if(g){let P=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;_<n;_++){const H=vt.findGuardPattern(e,D[0],_,i,!1,u,C);if(H!=null&&Math.abs(D[0]-H[0])<vt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-H[1])<vt.MAX_PATTERN_DRIFT)D=H,P=0;else{if(P>vt.SKIPPED_ROW_COUNT_MAX)break;P++}}_-=P+1,h[2]=new Pe(D[0],_),h[3]=new Pe(D[1],_)}return _-l<vt.BARCODE_MIN_HEIGHT&&U.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){U.fillWithin(h,0,h.length,0);let g=n,C=0;for(;e.get(g,i)&&g>0&&C++<vt.MAX_PIXEL_DRIFT;)g--;let _=g,P=0,D=u.length;for(let H=c;_<l;_++)if(e.get(_,i)!==H)h[P]++;else{if(P===D-1){if(vt.patternMatchVariance(h,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return new Int32Array([g,_]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,P-1),h[P-1]=0,h[P]=0,P--}else P++;h[P]=1,H=!H}return P===D-1&&vt.patternMatchVariance(h,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE?new Int32Array([g,_-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let C=0;C<l;C++)c+=e[C],u+=n[C];if(c<u)return 1/0;let h=c/u;i*=h;let g=0;for(let C=0;C<l;C++){let _=e[C],P=n[C]*h,D=_>P?_-P:P-_;if(D>i)return 1/0;g+=D}return g/c}}vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),vt.MAX_AVG_VARIANCE=.42,vt.MAX_INDIVIDUAL_VARIANCE=.8,vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),vt.MAX_PIXEL_DRIFT=3,vt.MAX_PATTERN_DRIFT=5,vt.SKIPPED_ROW_COUNT_MAX=25,vt.ROW_STEP=5,vt.BARCODE_MIN_HEIGHT=10;class On{constructor(e,n){if(n.length===0)throw new I;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new On(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof On?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new On(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let g=n[h];for(let C=0;C<c;C++)u[h+C]=this.field.add(u[h+C],this.field.multiply(g,l[C]))}return new On(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new On(this.field,n)}multiplyScalar(e){if(e===0)return new On(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new On(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new I;if(n===0)return new On(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new On(this.field,l)}toString(){let e=new Le;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class el{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new I;return this.logTable[e]}inverse(e){if(e===0)throw new oe;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ki extends el{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new On(this,new Int32Array([0])),this.one=new On(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new I;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new On(this,i)}}Ki.PDF417_GF=new Ki(ht.NUMBER_OF_CODEWORDS,3);class Yo{constructor(){this.field=Ki.PDF417_GF}decode(e,n,i){let l=new On(this.field,e),c=new Int32Array(n),u=!1;for(let X=n;X>0;X--){let Z=l.evaluateAt(this.field.exp(X));c[n-X]=Z,Z!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const X of i){let Z=this.field.exp(e.length-1-X),re=new On(this.field,new Int32Array([this.field.subtract(0,Z),1]));h=h.multiply(re)}let g=new On(this.field,c),C=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),g,n),_=C[0],P=C[1],D=this.findErrorLocations(_),H=this.findErrorMagnitudes(P,_,D);for(let X=0;X<D.length;X++){let Z=e.length-1-this.field.log(D[X]);if(Z<0)throw M.getChecksumInstance();e[Z]=this.field.subtract(e[Z],H[X])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let D=l,H=u;if(l=c,u=h,l.isZero())throw M.getChecksumInstance();c=D;let X=this.field.getZero(),Z=l.getCoefficient(l.getDegree()),re=this.field.inverse(Z);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let de=c.getDegree()-l.getDegree(),Oe=this.field.multiply(c.getCoefficient(c.getDegree()),re);X=X.add(this.field.buildMonomial(de,Oe)),c=c.subtract(l.multiplyByMonomial(de,Oe))}h=X.multiply(u).subtract(H).negative()}let g=h.getCoefficient(0);if(g===0)throw M.getChecksumInstance();let C=this.field.inverse(g),_=h.multiply(C),P=c.multiply(C);return[_,P]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw M.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let C=1;C<=l;C++)c[l-C]=this.field.multiply(C,n.getCoefficient(C));let u=new On(this.field,c),h=i.length,g=new Int32Array(h);for(let C=0;C<h;C++){let _=this.field.inverse(i[C]),P=this.field.subtract(0,e.evaluateAt(_)),D=this.field.inverse(u.evaluateAt(_));g[C]=this.field.multiply(P,D)}return g}}class Ai{constructor(e,n,i,l,c){e instanceof Ai?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new J;u?(n=new Pe(0,l.getY()),i=new Pe(0,c.getY())):h&&(l=new Pe(e.getWidth()-1,n.getY()),c=new Pe(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Ai(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let g=i?this.topLeft:this.topRight,C=Math.trunc(g.getY()-e);C<0&&(C=0);let _=new Pe(g.getX(),C);i?l=_:u=_}if(n>0){let g=i?this.bottomLeft:this.bottomRight,C=Math.trunc(g.getY()+n);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let _=new Pe(g.getX(),C);i?c=_:h=_}return new Ai(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ts{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,g,C,_,P){if(u==="%%")return"%";if(n[++i]===void 0)return;u=C?parseInt(C.substr(1)):void 0;let D=_?parseInt(_.substr(1)):void 0,H;switch(P){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(u);break;case"p":H=parseFloat(n[i]).toPrecision(u);break;case"e":H=parseFloat(n[i]).toExponential(u);break;case"x":H=parseInt(n[i]).toString(D||16);break;case"d":H=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(D);let X=parseInt(g),Z=g&&g[0]+""=="0"?"0":" ";for(;H.length<X;)H=h!==void 0?H+Z:Z+H;return H}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=qr.form(e,n)}toString(){return this.buffer}}class jr{constructor(e){this.boundingBox=new Ai(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<jr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}jr.MAX_NEARBY_DISTANCE=5;class di{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return ht.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class tl extends jr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=-1,C=1,_=0;for(let P=u;P<h;P++){if(n[P]==null)continue;let D=n[P],H=D.getRowNumber()-g;if(H===0)_++;else if(H===1)C=Math.max(C,_),_=1,g=D.getRowNumber();else if(H<0||D.getRowNumber()>=e.getRowCount()||H>P)n[P]=null;else{let X;C>2?X=(C-2)*H:X=H;let Z=X>=P;for(let re=1;re<=X&&!Z;re++)Z=n[P-re]!=null;Z?n[P]=null:(g=D.getRowNumber(),_=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),g=-1;for(let C=c;C<u;C++){if(h[C]==null)continue;let _=h[C];_.setRowNumberAsRowIndicatorColumn();let P=_.getRowNumber()-g;P===0||(P===1?g=_.getRowNumber():_.getRowNumber()>=e.getRowCount()?h[C]=null:g=_.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new di,i=new di,l=new di,c=new di;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,C=h.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:i.setValue(g*3+1);break;case 1:c.setValue(g/3),l.setValue(g%3);break;case 2:n.setValue(g+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<ht.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>ht.MAX_ROWS_IN_BARCODE)return null;let u=new Ts(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Is{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ht.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Is.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=Is.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let g of h)if(Is.adjustRowNumber(l,g))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new qr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Ti{constructor(e,n,i,l){this.rowNumber=Ti.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ti.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ti.BARCODE_ROW_UNKNOWN=-1;class Mn{static initialize(){for(let e=0;e<ht.SYMBOL_TABLE.length;e++){let n=ht.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<ht.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Mn.RATIOS_TABLE[e]||(Mn.RATIOS_TABLE[e]=new Array(ht.BARS_IN_MODULE)),Mn.RATIOS_TABLE[e][ht.BARS_IN_MODULE-l-1]=Math.fround(c/ht.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Mn.getDecodedCodewordValue(Mn.sampleBitCounts(e));return n!==-1?n:Mn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=et.sum(e),i=new Int32Array(ht.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<ht.MODULES_IN_CODEWORD;u++){let h=n/(2*ht.MODULES_IN_CODEWORD)+u*n/ht.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Mn.getBitValue(e);return ht.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=et.sum(e),i=new Array(ht.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=Rt.MAX_VALUE,c=-1;this.bSymbolTableReady||Mn.initialize();for(let u=0;u<Mn.RATIOS_TABLE.length;u++){let h=0,g=Mn.RATIOS_TABLE[u];for(let C=0;C<ht.BARS_IN_MODULE;C++){let _=Math.fround(g[C]-i[C]);if(h+=Math.fround(_*_),h>=l)break}h<l&&(l=h,c=ht.SYMBOL_TABLE[u])}return c}}Mn.bSymbolTableReady=!1,Mn.RATIOS_TABLE=new Array(ht.SYMBOL_TABLE.length).map(k=>new Array(ht.BARS_IN_MODULE));class io{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class $o{static parseLong(e,n=void 0){return parseInt(e,n)}}class Qr extends E{}Qr.kind="NullPointerException";class Zo{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Qr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class so extends E{}class nl extends Zo{constructor(e=32){if(super(),this.count=0,e<0)throw new I("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new so;i=F.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ft;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function Ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Jl<"u")return Jl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let _s;function yn(k){if(typeof _s>"u"&&(_s=Ns()),_s===null)throw new Error("BigInt is not supported!");return _s(k)}function qi(){let k=[];k[0]=yn(1);let e=yn(900);k[1]=e;for(let n=2;n<16;n++)k[n]=k[n-1]*e;return k}class fe{static decode(e,n){let i=new Le(""),l=K.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new io;for(;c<e[0];){switch(u){case fe.TEXT_COMPACTION_MODE_LATCH:c=fe.textCompaction(e,c,i);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:c=fe.byteCompaction(u,e,l,c,i);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:c=fe.numericCompaction(e,c,i);break;case fe.ECI_CHARSET:K.getCharacterSetECIByValue(e[c++]);break;case fe.ECI_GENERAL_PURPOSE:c+=2;break;case fe.ECI_USER_DEFINED:c++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=fe.decodeMacroBlock(e,c,h);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new q;default:c--,c=fe.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw q.getFormatInstance()}if(i.length()===0)throw q.getFormatInstance();let g=new ze(null,i.toString(),null,n);return g.setOther(h),g}static decodeMacroBlock(e,n,i){if(n+fe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw q.getFormatInstance();let l=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<fe.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(F.parseInt(fe.decodeBase900toBase10(l,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Le;n=fe.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Le;n=fe.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new Le;n=fe.textCompaction(e,n+1,g),i.setSender(g.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Le;n=fe.textCompaction(e,n+1,C),i.setAddressee(C.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new Le;n=fe.numericCompaction(e,n+1,_),i.setSegmentCount(F.parseInt(_.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Le;n=fe.numericCompaction(e,n+1,P),i.setTimestamp($o.parseLong(P.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Le;n=fe.numericCompaction(e,n+1,D),i.setChecksum(F.parseInt(D.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new Le;n=fe.numericCompaction(e,n+1,H),i.setFileSize($o.parseLong(H.toString()));break;default:throw q.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(U.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let g=e[n++];if(g<fe.TEXT_COMPACTION_MODE_LATCH)l[u]=g/30,l[u+1]=g%30,u+=2;else switch(g){case fe.TEXT_COMPACTION_MODE_LATCH:l[u++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=e[n++],c[u]=g,u++;break}}return fe.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=Ft.ALPHA,u=Ft.ALPHA,h=0;for(;h<i;){let g=e[h],C="";switch(c){case Ft.ALPHA:if(g<26)C=String.fromCharCode(65+g);else switch(g){case 26:C=" ";break;case fe.LL:c=Ft.LOWER;break;case fe.ML:c=Ft.MIXED;break;case fe.PS:u=c,c=Ft.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.LOWER:if(g<26)C=String.fromCharCode(97+g);else switch(g){case 26:C=" ";break;case fe.AS:u=c,c=Ft.ALPHA_SHIFT;break;case fe.ML:c=Ft.MIXED;break;case fe.PS:u=c,c=Ft.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.MIXED:if(g<fe.PL)C=fe.MIXED_CHARS[g];else switch(g){case fe.PL:c=Ft.PUNCT;break;case 26:C=" ";break;case fe.LL:c=Ft.LOWER;break;case fe.AL:c=Ft.ALPHA;break;case fe.PS:u=c,c=Ft.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.PUNCT:if(g<fe.PAL)C=fe.PUNCT_CHARS[g];else switch(g){case fe.PAL:c=Ft.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(c=u,g<26)C=String.fromCharCode(65+g);else switch(g){case 26:C=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(c=u,g<fe.PAL)C=fe.PUNCT_CHARS[g];else switch(g){case fe.PAL:c=Ft.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case fe.TEXT_COMPACTION_MODE_LATCH:c=Ft.ALPHA;break}break}C!==""&&l.append(C),h++}}static byteCompaction(e,n,i,l,c){let u=new nl,h=0,g=0,C=!1;switch(e){case fe.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),P=n[l++];for(;l<n[0]&&!C;)switch(_[h++]=P,g=900*g+P,P=n[l++],P){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:l--,C=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)u.write(Number(yn(g)>>yn(8*(5-D))));g=0,h=0}break}l===n[0]&&P<fe.TEXT_COMPACTION_MODE_LATCH&&(_[h++]=P);for(let D=0;D<h;D++)u.write(_[D]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!C;){let D=n[l++];if(D<fe.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+D;else switch(D){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:l--,C=!0;break}if(h%5===0&&h>0){for(let H=0;H<6;++H)u.write(Number(yn(g)>>yn(8*(5-H))));g=0,h=0}}break}return c.append(Be.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<fe.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%fe.MAX_NUMERIC_CODEWORDS===0||h===fe.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(fe.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=yn(0);for(let c=0;c<n;c++)i+=fe.EXP900[n-c-1]*yn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new q;return l.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=Ns()?qi():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class St{constructor(){}static decode(e,n,i,l,c,u,h){let g=new Ai(e,n,i,l,c),C=null,_=null,P;for(let X=!0;;X=!1){if(n!=null&&(C=St.getRowIndicatorColumn(e,g,n,!0,u,h)),l!=null&&(_=St.getRowIndicatorColumn(e,g,l,!1,u,h)),P=St.merge(C,_),P==null)throw J.getNotFoundInstance();let Z=P.getBoundingBox();if(X&&Z!=null&&(Z.getMinY()<g.getMinY()||Z.getMaxY()>g.getMaxY()))g=Z;else break}P.setBoundingBox(g);let D=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(D,_);let H=C!=null;for(let X=1;X<=D;X++){let Z=H?X:D-X;if(P.getDetectionResultColumn(Z)!==void 0)continue;let re;Z===0||Z===D?re=new tl(g,Z===0):re=new jr(g),P.setDetectionResultColumn(Z,re);let de=-1,Oe=de;for(let Me=g.getMinY();Me<=g.getMaxY();Me++){if(de=St.getStartColumn(P,Z,Me,H),de<0||de>g.getMaxX()){if(Oe===-1)continue;de=Oe}let Ae=St.detectCodeword(e,g.getMinX(),g.getMaxX(),H,de,Me,u,h);Ae!=null&&(re.setCodeword(Me,Ae),Oe=de,u=Math.min(u,Ae.getWidth()),h=Math.max(h,Ae.getWidth()))}}return St.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let i=St.getBarcodeMetadata(e,n);if(i==null)return null;let l=Ai.merge(St.adjustBoundingBox(e),St.adjustBoundingBox(n));return new Is(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=St.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new tl(n,l);for(let g=0;g<2;g++){let C=g===0?1:-1,_=Math.trunc(Math.trunc(i.getX()));for(let P=Math.trunc(Math.trunc(i.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=C){let D=St.detectCodeword(e,0,e.getWidth(),l,_,P,c,u);D!=null&&(h.setCodeword(P,D),l?_=D.getStartX():_=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-St.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>ht.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=St.createBarcodeMatrix(e);St.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let g=0;g<e.getBarcodeRowCount();g++)for(let C=0;C<e.getBarcodeColumnCount();C++){let _=n[g][C+1].getValue(),P=g*e.getBarcodeColumnCount()+C;_.length===0?i.push(P):_.length===1?l[P]=_[0]:(u.push(P),c.push(_))}let h=new Array(c.length);for(let g=0;g<h.length;g++)h[g]=c[g];return St.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,ht.toIntArray(i),ht.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let g=0;g<u.length;g++)n[l[g]]=c[g][u[g]];try{return St.decodeCodewords(n,e,i)}catch(g){if(!(g instanceof M))throw g}if(u.length===0)throw M.getChecksumInstance();for(let g=0;g<u.length;g++)if(u[g]<c[g].length-1){u[g]++;break}else if(u[g]=0,g===u.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new di;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(St.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(St.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;St.isValidBarcodeColumn(e,n-c);){n-=c;for(let g of e.getDetectionResultColumn(n).getCodewords())if(g!=null)return(l?g.getEndX():g.getStartX())+c*h*(g.getEndX()-g.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,g){c=St.adjustCodewordStartColumn(e,n,i,l,c,u);let C=St.getModuleBitCount(e,n,i,l,c,u);if(C==null)return null;let _,P=et.sum(C);if(l)_=c+P;else{for(let X=0;X<C.length/2;X++){let Z=C[X];C[X]=C[C.length-1-X],C[C.length-1-X]=Z}_=c,c=_-P}if(!St.checkCodewordSkew(P,h,g))return null;let D=Mn.getDecodedValue(C),H=ht.getCodeword(D);return H===-1?null:new Ti(c,_,St.getCodewordBucketNumber(D),H)}static getModuleBitCount(e,n,i,l,c,u){let h=c,g=new Int32Array(8),C=0,_=l?1:-1,P=l;for(;(l?h<i:h>=n)&&C<g.length;)e.get(h,u)===P?(g[C]++,h+=_):(C++,P=!P);return C===g.length||h===(l?i:n)&&C===g.length-1?g:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,g=l?-1:1;for(let C=0;C<2;C++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>St.CODEWORD_SKEW_SIZE)return c;h+=g}g=-g,l=!l}return h}static checkCodewordSkew(e,n,i){return n-St.CODEWORD_SKEW_SIZE<=e&&e<=i+St.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw q.getFormatInstance();let l=1<<n+1,c=St.correctErrors(e,i,l);St.verifyCodewordCount(e,l);let u=fe.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+St.MAX_ERRORS||i<0||i>St.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return St.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw q.getFormatInstance();let i=e[0];if(i>e.length)throw q.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw q.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return St.getCodewordBucketNumber(St.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new qr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}St.CODEWORD_SKEW_SIZE=2,St.MAX_ERRORS=3,St.MAX_EC_CODEWORDS=512,St.errorCorrection=new Yo;class Dn{decode(e,n=null){let i=Dn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw J.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return Dn.decode(e,n,!0)}catch(i){throw i instanceof q||i instanceof M?J.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=vt.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=St.decode(c.getBits(),u[4],u[5],u[6],u[7],Dn.getMinCodewordWidth(u),Dn.getMaxCodewordWidth(u)),g=new we(h.getText(),h.getRawBytes(),void 0,u,ae.PDF_417);g.putMetadata(Ee.ERROR_CORRECTION_LEVEL,h.getECLevel());const C=h.getOther();C!=null&&g.putMetadata(Ee.PDF417_EXTRA_METADATA,C),l.push(g)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?F.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Dn.getMaxWidth(e[0],e[4]),Dn.getMaxWidth(e[6],e[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.max(Dn.getMaxWidth(e[1],e[5]),Dn.getMaxWidth(e[7],e[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Dn.getMinWidth(e[0],e[4]),Dn.getMinWidth(e[6],e[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.min(Dn.getMinWidth(e[1],e[5]),Dn.getMinWidth(e[7],e[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qi extends E{}Qi.kind="ReaderException";class oo{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!f(e)&&e.get(te.TRY_HARDER)===!0,i=f(e)?null:e.get(te.POSSIBLE_FORMATS),l=new Array;if(!f(i)){const c=i.some(u=>u===ae.UPC_A||u===ae.UPC_E||u===ae.EAN_13||u===ae.EAN_8||u===ae.CODABAR||u===ae.CODE_39||u===ae.CODE_93||u===ae.CODE_128||u===ae.ITF||u===ae.RSS_14||u===ae.RSS_EXPANDED);c&&!n&&l.push(new Si(e,this.verbose)),i.includes(ae.QR_CODE)&&l.push(new $n),i.includes(ae.DATA_MATRIX)&&l.push(new Nr),i.includes(ae.AZTEC)&&l.push(new $e),i.includes(ae.PDF_417)&&l.push(new Dn),c&&n&&l.push(new Si(e,this.verbose))}l.length===0&&(n||l.push(new Si(e,this.verbose)),l.push(new $n),l.push(new Nr),l.push(new $e),l.push(new Dn),n&&l.push(new Si(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Qi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Qi)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class Rs extends ye{constructor(e=null,n=500){const i=new oo;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ao extends ye{constructor(e=500){super(new Dn,e)}}class rl extends ye{constructor(e=500){super(new $n,e)}}var Ko;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(Ko||(Ko={}));var Sn=Ko;class qo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new qe(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new qe(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new I("No error correction bytes");const i=e.length-n;if(i<=0)throw new I("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new qe(this.field,c);u=u.multiplyByMonomial(n,1);const g=u.divide(l)[1].getCoefficients(),C=n-g.length;for(let _=0;_<C;_++)e[i+_]=0;B.arraycopy(g,0,e,i+C,g.length)}}class qt{constructor(){}static applyMaskPenaltyRule1(e){return qt.applyMaskPenaltyRule1Internal(e,!0)+qt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let g=0;g<l-1;g++){const C=h[g];C===h[g+1]&&C===i[u+1][g]&&C===i[u+1][g+1]&&n++}}return qt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const g=i[u];h+6<l&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(qt.isWhiteHorizontal(g,h-4,h)||qt.isWhiteHorizontal(g,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(qt.isWhiteVertical(i,h,u-4,u)||qt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*qt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let g=0;g<c;g++){const C=i[g];for(let _=0;_<l;_++)C[_]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*qt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new I("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let g=0,C=-1;for(let _=0;_<c;_++){const P=n?u[h][_]:u[_][h];P===C?g++:(g>=5&&(i+=qt.N1+(g-5)),g=1,C=P)}g>=5&&(i+=qt.N1+(g-5))}return i}}qt.N1=3,qt.N2=3,qt.N3=40,qt.N4=10;class lo{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)U.fill(n,e)}equals(e){if(!(e instanceof lo))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,g=this.width;h<g;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Le;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Le;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ii.NUM_MASK_PATTERNS}}Ii.NUM_MASK_PATTERNS=8;class Yt extends E{}Yt.kind="WriterException";class ut{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){ut.clearMatrix(c),ut.embedBasicPatterns(i,c),ut.embedTypeInfo(n,l,c),ut.maybeEmbedVersionInfo(i,c),ut.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){ut.embedPositionDetectionPatternsAndSeparators(n),ut.embedDarkDotAtLeftBottomCorner(n),ut.maybeEmbedPositionAdjustmentPatterns(e,n),ut.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new Q;ut.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),g=ut.TYPE_INFO_COORDINATES[c],C=g[0],_=g[1];if(i.setBoolean(C,_,h),c<8){const P=i.getWidth()-c-1;i.setBoolean(P,8,h)}else{const D=i.getHeight()-7+(c-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new Q;ut.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let g=0;g<2;++g){const C=u-g;if(!ut.isEmpty(i.get(C,h)))continue;let _;l<e.getSize()?(_=e.get(l),++l):_=!1,n!==255&&qt.getDataMaskBit(n,C,h)&&(_=!_),i.setBoolean(C,h,_)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Yt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-F.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new I("0 polynomial");const i=ut.findMSBSet(n);for(e<<=i-1;ut.findMSBSet(e)>=i;)e^=n<<ut.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Ii.isValidMaskPattern(n))throw new Yt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=ut.calculateBCHCode(l,ut.TYPE_INFO_POLY);i.appendBits(c,10);const u=new Q;if(u.appendBits(ut.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Yt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=ut.calculateBCHCode(e.getVersionNumber(),ut.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Yt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;ut.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),ut.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Yt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!ut.isEmpty(i.get(e+l,n)))throw new Yt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!ut.isEmpty(i.get(e,n+l)))throw new Yt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=ut.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=ut.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=ut.POSITION_DETECTION_PATTERN[0].length;ut.embedPositionDetectionPattern(0,0,e),ut.embedPositionDetectionPattern(e.getWidth()-n,0,e),ut.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;ut.embedHorizontalSeparationPattern(0,i-1,e),ut.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),ut.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;ut.embedVerticalSeparationPattern(l,0,e),ut.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),ut.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let g=0;g!==u;g++){const C=l[g];C>=0&&ut.isEmpty(n.get(C,h))&&ut.embedPositionAdjustmentPattern(C-2,h-2,n)}}}}ut.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ut.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ut.VERSION_INFO_POLY=7973,ut.TYPE_INFO_POLY=1335,ut.TYPE_INFO_MASK_PATTERN=21522;class Vc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $t{constructor(){}static calculateMaskPenalty(e){return qt.applyMaskPenaltyRule1(e)+qt.applyMaskPenaltyRule2(e)+qt.applyMaskPenaltyRule3(e)+qt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=$t.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(Sn.CHARACTER_SET)!==void 0;c&&(l=i.get(Sn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new Q;if(u===at.BYTE&&(c||$t.DEFAULT_BYTE_MODE_ENCODING!==l)){const Me=K.getCharacterSetECIByName(l);Me!==void 0&&this.appendECI(Me,h)}this.appendModeInfo(u,h);const g=new Q;this.appendBytes(e,u,g,l);let C;if(i!==null&&i.get(Sn.QR_VERSION)!==void 0){const Me=Number.parseInt(i.get(Sn.QR_VERSION).toString(),10);C=st.getVersionForNumber(Me);const Ae=this.calculateBitsNeeded(u,h,g,C);if(!this.willFit(Ae,C,n))throw new Yt("Data too big for requested version")}else C=this.recommendVersion(n,u,h,g);const _=new Q;_.appendBitArray(h);const P=u===at.BYTE?g.getSizeInBytes():e.length;this.appendLengthInfo(P,C,u,_),_.appendBitArray(g);const D=C.getECBlocksForLevel(n),H=C.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(H,_);const X=this.interleaveWithECBytes(_,C.getTotalCodewords(),H,D.getNumBlocks()),Z=new Ii;Z.setECLevel(n),Z.setMode(u),Z.setVersion(C);const re=C.getDimensionForVersion(),de=new lo(re,re),Oe=this.chooseMaskPattern(X,n,C,de);return Z.setMaskPattern(Oe),ut.buildMatrix(X,n,C,Oe,de),Z.setMatrix(de),Z}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,st.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<$t.ALPHANUMERIC_TABLE.length?$t.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(K.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return at.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if($t.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return at.BYTE}return l?at.ALPHANUMERIC:i?at.NUMERIC:at.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Be.encode(e,K.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Ii.NUM_MASK_PATTERNS;h++){ut.buildMatrix(e,n,i,h,l);let g=this.calculateMaskPenalty(l);g<c&&(c=g,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=st.getVersionForNumber(i);if($t.willFit(e,l,n))return l}throw new Yt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,g=(e+7)/8;return h>=g}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Yt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Yt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Yt("Block ID too large");const h=e%i,g=i-h,C=Math.floor(e/i),_=C+1,P=Math.floor(n/i),D=P+1,H=C-P,X=_-D;if(H!==X)throw new Yt("EC bytes mismatch");if(i!==g+h)throw new Yt("RS blocks mismatch");if(e!==(P+H)*g+(D+X)*h)throw new Yt("Total bytes mismatch");l<g?(c[0]=P,u[0]=H):(c[0]=D,u[0]=X)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Yt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const g=new Array;for(let _=0;_<l;++_){const P=new Int32Array(1),D=new Int32Array(1);$t.getNumDataBytesAndNumECBytesForBlockID(n,i,l,_,P,D);const H=P[0],X=new Uint8Array(H);e.toBytes(8*c,X,0,H);const Z=$t.generateECBytes(X,D[0]);g.push(new Vc(X,Z)),u=Math.max(u,H),h=Math.max(h,Z.length),c+=P[0]}if(i!==c)throw new Yt("Data bytes does not match offset");const C=new Q;for(let _=0;_<u;++_)for(const P of g){const D=P.getDataBytes();_<D.length&&C.appendBits(D[_],8)}for(let _=0;_<h;++_)for(const P of g){const D=P.getErrorCorrectionBytes();_<D.length&&C.appendBits(D[_],8)}if(n!==C.getSizeInBytes())throw new Yt("Interleaving error: "+n+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new qo(xe.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Yt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case at.NUMERIC:$t.appendNumericBytes(e,i);break;case at.ALPHANUMERIC:$t.appendAlphanumericBytes(e,i);break;case at.BYTE:$t.append8BitBytes(e,i,l);break;case at.KANJI:$t.appendKanjiBytes(e,i);break;default:throw new Yt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=$t.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=$t.getDigit(e.charAt(l));if(l+2<i){const u=$t.getDigit(e.charAt(l+1)),h=$t.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=$t.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=$t.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Yt;if(l+1<i){const u=$t.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Yt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Be.encode(e,i)}catch(c){throw new Yt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Be.encode(e,K.SJIS)}catch(c){throw new Yt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,g=u<<8&4294967295|h;let C=-1;if(g>=33088&&g<=40956?C=g-33088:g>=57408&&g<=60351&&(C=g-49472),C===-1)throw new Yt("Invalid byte sequence");const _=(C>>8)*192+(C&255);n.appendBits(_,13)}}static appendECI(e,n){n.appendBits(at.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}$t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$t.DEFAULT_BYTE_MODE_ENCODING=K.UTF8.getName();class Ni{write(e,n,i,l=null){if(e.length===0)throw new I("Found empty contents");if(n<0||i<0)throw new I("Requested dimensions are too small: "+n+"x"+i);let c=Gt.L,u=Ni.QUIET_ZONE_SIZE;l!==null&&(l.get(Sn.ERROR_CORRECTION)!==void 0&&(c=Gt.fromString(l.get(Sn.ERROR_CORRECTION).toString())),l.get(Sn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(Sn.MARGIN).toString(),10)));const h=$t.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new pt;const u=c.getWidth(),h=c.getHeight(),g=u+l*2,C=h+l*2,_=Math.max(n,g),P=Math.max(i,C),D=Math.min(Math.floor(_/g),Math.floor(P/C)),H=Math.floor((_-u*D)/2),X=Math.floor((P-h*D)/2),Z=this.createSVGElement(_,P);for(let re=0,de=X;re<h;re++,de+=D)for(let Oe=0,Me=H;Oe<u;Oe++,Me+=D)if(c.get(Oe,re)===1){const Ae=this.createSvgRectElement(Me,de,D,D);Z.appendChild(Ae)}return Z}createSVGElement(e,n){const i=document.createElementNS(Ni.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ni.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ni.QUIET_ZONE_SIZE=4,Ni.SVG_NS="http://www.w3.org/2000/svg";class Ji{encode(e,n,i,l,c){if(e.length===0)throw new I("Found empty contents");if(n!==ae.QR_CODE)throw new I("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new I(`Requested dimensions are too small: ${i}x${l}`);let u=Gt.L,h=Ji.QUIET_ZONE_SIZE;c!==null&&(c.get(Sn.ERROR_CORRECTION)!==void 0&&(u=Gt.fromString(c.get(Sn.ERROR_CORRECTION).toString())),c.get(Sn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Sn.MARGIN).toString(),10)));const g=$t.encode(e,u,c);return Ji.renderResult(g,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new pt;const u=c.getWidth(),h=c.getHeight(),g=u+l*2,C=h+l*2,_=Math.max(n,g),P=Math.max(i,C),D=Math.min(Math.floor(_/g),Math.floor(P/C)),H=Math.floor((_-u*D)/2),X=Math.floor((P-h*D)/2),Z=new be(_,P);for(let re=0,de=X;re<h;re++,de+=D)for(let Oe=0,Me=H;Oe<u;Oe++,Me+=D)c.get(Oe,re)===1&&Z.setRegion(Me,de,D,D);return Z}}Ji.QUIET_ZONE_SIZE=4;class zc{encode(e,n,i,l,c){let u;switch(n){case ae.QR_CODE:u=new Ji;break;default:throw new I("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class Fr extends me{constructor(e,n,i,l,c,u,h,g){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new I("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let g=0;g<e;g++){const C=l[c+g*Fr.THUMBNAIL_SCALE_FACTOR]&255;i[h+g]=4278190080|C*65793}c+=this.dataWidth*Fr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,g=c+e-1;h<u;h++,g--){const C=i[h];i[h]=i[g],i[g]=C}}}invert(){return new Ve(this)}}Fr.THUMBNAIL_SCALE_FACTOR=2;class ks extends me{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const g=n*i,C=new Uint8ClampedArray(g);for(let _=0;_<g;_++){const P=e[_],D=P>>16&255,H=P>>7&510,X=P&255;C[_]=(D+H+X)/4&255}this.luminances=C}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new I("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new ks(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Ve(this)}}class il extends K{static forName(e){return this.getCharacterSetECIByName(e)}}class Qo{}Qo.ISO_8859_1=K.ISO8859_1;class sl{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Jo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Uc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class es extends Uc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new es(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new es(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+F.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ea extends es{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new ea(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Wc(k,e,n){return new ea(k,e,n)}function Ps(k,e,n){return new es(k,e,n)}const Hc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fi=0,ts=1,zn=2,ol=3,Rr=4,al=new es(null,0,0),co=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ll(k){for(let e of k)U.fill(e,-1);return k[fi][Rr]=0,k[ts][Rr]=0,k[ts][fi]=28,k[ol][Rr]=0,k[zn][Rr]=0,k[zn][fi]=15,k}const ta=ll(U.createInt32Array(6,6));class Zn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=co[this.mode][e];l=Ps(l,u&65535,u>>16),i+=u>>16}let c=e===zn?4:5;return l=Ps(l,n,c),new Zn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===zn?4:5;return i=Ps(i,ta[this.mode][e],l),i=Ps(i,n,5),new Zn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Rr||this.mode===zn){let h=co[i][fi];n=Ps(n,h&65535,h>>16),l+=h>>16,i=fi}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Zn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Wc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Zn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(co[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Zn.calculateBinaryShiftCost(e)-Zn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new Q;for(const l of n)l.appendTo(i,e);return i}toString(){return Ie.format("%s bits=%d bytes=%d",Hc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Zn.INITIAL_STATE=new Zn(al,fi,0,0);function Gc(k){const e=Ie.getCharCode(" "),n=Ie.getCharCode("."),i=Ie.getCharCode(",");k[fi][e]=1;const l=Ie.getCharCode("Z"),c=Ie.getCharCode("A");for(let D=c;D<=l;D++)k[fi][D]=D-c+2;k[ts][e]=1;const u=Ie.getCharCode("z"),h=Ie.getCharCode("a");for(let D=h;D<=u;D++)k[ts][D]=D-h+2;k[zn][e]=1;const g=Ie.getCharCode("9"),C=Ie.getCharCode("0");for(let D=C;D<=g;D++)k[zn][D]=D-C+2;k[zn][i]=12,k[zn][n]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<_.length;D++)k[ol][Ie.getCharCode(_[D])]=D;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<P.length;D++)Ie.getCharCode(P[D])>0&&(k[Rr][Ie.getCharCode(P[D])]=D);return k}const na=Gc(U.createInt32Array(5,256));class Os{constructor(e){this.text=e}encode(){const e=Ie.getCharCode(" "),n=Ie.getCharCode(`
`);let i=Jo.singletonList(Zn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Ie.getCharCode("\r"):u=h===n?2:0;break;case Ie.getCharCode("."):u=h===e?3:0;break;case Ie.getCharCode(","):u=h===e?4:0;break;case Ie.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Os.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Jo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Os.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=na[e.getMode()][l]>0,u=null;for(let h=0;h<=Rr;h++){let g=na[h][l];if(g>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===zn){const C=u.latchAndAppend(h,g);i.push(C)}if(!c&&ta[e.getMode()][h]>=0){const C=u.shiftAndAppend(h,g);i.push(C)}}}if(e.getBinaryShiftByteCount()>0||na[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Rr,i)),e.getMode()!==Rr&&l.push(c.shiftAndAppend(Rr,i)),i===3||i===4){let u=c.latchAndAppend(zn,16-i).latchAndAppend(zn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Bt{constructor(){}static encodeBytes(e){return Bt.encode(e,Bt.DEFAULT_EC_PERCENT,Bt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Os(e).encode(),c=F.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,g,C,_,P;if(i!==Bt.DEFAULT_AZTEC_LAYERS){if(h=i<0,g=Math.abs(i),g>(h?Bt.MAX_NB_BITS_COMPACT:Bt.MAX_NB_BITS))throw new I(Ie.format("Illegal value %s for layers",i));C=Bt.totalBitsInLayer(g,h),_=Bt.WORD_SIZE[g];let Ae=C-C%_;if(P=Bt.stuffBits(l,_),P.getSize()+c>Ae)throw new I("Data to large for user specified layer");if(h&&P.getSize()>_*64)throw new I("Data to large for user specified layer")}else{_=0,P=null;for(let Ae=0;;Ae++){if(Ae>Bt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=Ae<=3,g=h?Ae+1:Ae,C=Bt.totalBitsInLayer(g,h),u>C)continue;(P==null||_!==Bt.WORD_SIZE[g])&&(_=Bt.WORD_SIZE[g],P=Bt.stuffBits(l,_));let kt=C-C%_;if(!(h&&P.getSize()>_*64)&&P.getSize()+c<=kt)break}}let D=Bt.generateCheckWords(P,C,_),H=P.getSize()/_,X=Bt.generateModeMessage(h,g,H),Z=(h?11:14)+g*4,re=new Int32Array(Z),de;if(h){de=Z;for(let Ae=0;Ae<re.length;Ae++)re[Ae]=Ae}else{de=Z+1+2*F.truncDivision(F.truncDivision(Z,2)-1,15);let Ae=F.truncDivision(Z,2),kt=F.truncDivision(de,2);for(let Ct=0;Ct<Ae;Ct++){let or=Ct+F.truncDivision(Ct,15);re[Ae-Ct-1]=kt-or-1,re[Ae+Ct]=kt+or+1}}let Oe=new be(de);for(let Ae=0,kt=0;Ae<g;Ae++){let Ct=(g-Ae)*4+(h?9:12);for(let or=0;or<Ct;or++){let kr=or*2;for(let An=0;An<2;An++)D.get(kt+kr+An)&&Oe.set(re[Ae*2+An],re[Ae*2+or]),D.get(kt+Ct*2+kr+An)&&Oe.set(re[Ae*2+or],re[Z-1-Ae*2-An]),D.get(kt+Ct*4+kr+An)&&Oe.set(re[Z-1-Ae*2-An],re[Z-1-Ae*2-or]),D.get(kt+Ct*6+kr+An)&&Oe.set(re[Z-1-Ae*2-or],re[Ae*2+An])}kt+=Ct*8}if(Bt.drawModeMessage(Oe,h,de,X),h)Bt.drawBullsEye(Oe,F.truncDivision(de,2),5);else{Bt.drawBullsEye(Oe,F.truncDivision(de,2),7);for(let Ae=0,kt=0;Ae<F.truncDivision(Z,2)-1;Ae+=15,kt+=16)for(let Ct=F.truncDivision(de,2)&1;Ct<de;Ct+=2)Oe.set(F.truncDivision(de,2)-kt,Ct),Oe.set(F.truncDivision(de,2)+kt,Ct),Oe.set(Ct,F.truncDivision(de,2)-kt),Oe.set(Ct,F.truncDivision(de,2)+kt)}let Me=new sl;return Me.setCompact(h),Me.setSize(de),Me.setLayers(g),Me.setCodeWords(H),Me.setMatrix(Oe),Me}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new Q;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Bt.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Bt.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=F.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+F.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new qo(Bt.getGF(i)),u=F.truncDivision(n,i),h=Bt.bitsToWords(e,i,u);c.encode(h,u-l);let g=n%i,C=new Q;C.appendBits(0,g);for(const _ of Array.from(h))C.appendBits(_,i);return C}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let g=0;g<n;g++)h|=e.get(c*n+g)?1<<n-g-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return xe.AZTEC_PARAM;case 6:return xe.AZTEC_DATA_6;case 8:return xe.AZTEC_DATA_8;case 10:return xe.AZTEC_DATA_10;case 12:return xe.AZTEC_DATA_12;default:throw new I("Unsupported word size "+e)}}static stuffBits(e,n){let i=new Q,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let g=0;g<n;g++)(u+g>=l||e.get(u+g))&&(h|=1<<n-1-g);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Bt.DEFAULT_EC_PERCENT=33,Bt.DEFAULT_AZTEC_LAYERS=0,Bt.MAX_NB_BITS=32,Bt.MAX_NB_BITS_COMPACT=4,Bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ms{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=Qo.ISO_8859_1,h=Bt.DEFAULT_EC_PERCENT,g=Bt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Sn.CHARACTER_SET)&&(u=il.forName(c.get(Sn.CHARACTER_SET).toString())),c.has(Sn.ERROR_CORRECTION)&&(h=F.parseInt(c.get(Sn.ERROR_CORRECTION).toString())),c.has(Sn.AZTEC_LAYERS)&&(g=F.parseInt(c.get(Sn.AZTEC_LAYERS).toString()))),Ms.encodeLayers(e,n,i,l,u,h,g)}static encodeLayers(e,n,i,l,c,u,h){if(n!==ae.AZTEC)throw new I("Can only encode AZTEC, but got "+n);let g=Bt.encode(Ie.getBytes(e,c),u,h);return Ms.renderResult(g,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new pt;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),g=Math.max(i,u),C=Math.min(h/c,g/u),_=(h-c*C)/2,P=(g-u*C)/2,D=new be(h,g);for(let H=0,X=P;H<u;H++,X+=C)for(let Z=0,re=_;Z<c;Z++,re+=C)l.get(Z,H)&&D.setRegion(re,X,C,C);return D}}a.AbstractExpandedDecoder=Xi,a.ArgumentException=A,a.ArithmeticException=oe,a.AztecCode=sl,a.AztecCodeReader=$e,a.AztecCodeWriter=Ms,a.AztecDecoder=Je,a.AztecDetector=Nt,a.AztecDetectorResult=Jt,a.AztecEncoder=Bt,a.AztecHighLevelEncoder=Os,a.AztecPoint=Ht,a.BarcodeFormat=ae,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=Q,a.BitMatrix=be,a.BitSource=Ho,a.BrowserAztecCodeReader=lt,a.BrowserBarcodeReader=Yi,a.BrowserCodeReader=ye,a.BrowserDatamatrixCodeReader=Fc,a.BrowserMultiFormatReader=Rs,a.BrowserPDF417Reader=ao,a.BrowserQRCodeReader=rl,a.BrowserQRCodeSvgWriter=Ni,a.CharacterSetECI=K,a.ChecksumException=M,a.Code128Reader=ge,a.Code39Reader=it,a.DataMatrixDecodedBitStreamParser=Ir,a.DataMatrixReader=Nr,a.DecodeHintType=te,a.DecoderResult=ze,a.DefaultGridSampler=Et,a.DetectorResult=mn,a.EAN13Reader=rn,a.EncodeHintType=Sn,a.Exception=E,a.FormatException=q,a.GenericGF=xe,a.GenericGFPoly=qe,a.GlobalHistogramBinarizer=Fe,a.GridSampler=xt,a.GridSamplerInstance=tt,a.HTMLCanvasElementLuminanceSource=ue,a.HybridBinarizer=pe,a.ITFReader=Ze,a.IllegalArgumentException=I,a.IllegalStateException=pt,a.InvertedLuminanceSource=Ve,a.LuminanceSource=me,a.MathUtils=et,a.MultiFormatOneDReader=Si,a.MultiFormatReader=oo,a.MultiFormatWriter=zc,a.NotFoundException=J,a.OneDReader=Re,a.PDF417DecodedBitStreamParser=fe,a.PDF417DecoderErrorCorrection=Yo,a.PDF417Reader=Dn,a.PDF417ResultMetadata=io,a.PerspectiveTransform=At,a.PlanarYUVLuminanceSource=Fr,a.QRCodeByteMatrix=lo,a.QRCodeDataMask=It,a.QRCodeDecodedBitStreamParser=Kt,a.QRCodeDecoderErrorCorrectionLevel=Gt,a.QRCodeDecoderFormatInformation=Pn,a.QRCodeEncoder=$t,a.QRCodeEncoderQRCode=Ii,a.QRCodeMaskUtil=qt,a.QRCodeMatrixUtil=ut,a.QRCodeMode=at,a.QRCodeReader=$n,a.QRCodeVersion=st,a.QRCodeWriter=Ji,a.RGBLuminanceSource=ks,a.RSS14Reader=jt,a.RSSExpandedReader=ve,a.ReaderException=Qi,a.ReedSolomonDecoder=Mt,a.ReedSolomonEncoder=qo,a.ReedSolomonException=He,a.Result=we,a.ResultMetadataType=Ee,a.ResultPoint=Pe,a.StringUtils=Ie,a.UnsupportedOperationException=Te,a.VideoInputDevice=W,a.WhiteRectangleDetector=We,a.WriterException=Yt,a.ZXingArrays=U,a.ZXingCharset=il,a.ZXingInteger=F,a.ZXingStandardCharsets=Qo,a.ZXingStringBuilder=Le,a.ZXingStringEncoding=Be,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Yn,Object.defineProperty(a,"__esModule",{value:!0})})}(_a,_a.exports)),_a.exports}rw();var Cf=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),um=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var f={advanced:[a]};return this.track.applyConstraints(f)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),iw=function(r){Cf(o,r);function o(a,f){return r.call(this,a,f)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var f={};f[this.name]=a;var p={advanced:[f]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),f=a[this.name];return{min:f.min,max:f.max,step:f.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(um);(function(r){Cf(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(iw);(function(r){Cf(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(um);var A1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(A1||(A1={}));var sw=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(f[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function f(){this.constructor=o}o.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){sw(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(tw);var T1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(T1||(T1={}));const ow=({user:r,onProfileClick:o})=>{const a=Fn();return y.jsx("div",{children:y.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?y.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[y.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),y.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):y.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[y.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),y.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},Ef=N.createContext({});function bf(r){const o=N.useRef(null);return o.current===null&&(o.current=r()),o.current}const Sf=typeof window<"u",dm=Sf?N.useLayoutEffect:N.useEffect,Pc=N.createContext(null);function Af(r,o){r.indexOf(o)===-1&&r.push(o)}function Tf(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const Vi=(r,o,a)=>a>o?o:a<r?r:a;let If=()=>{};const zi={},fm=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function hm(r){return typeof r=="object"&&r!==null}const pm=r=>/^0[^.\s]+$/u.test(r);function Nf(r){let o;return()=>(o===void 0&&(o=r()),o)}const $r=r=>r,aw=(r,o)=>a=>o(r(a)),Ya=(...r)=>r.reduce(aw),ja=(r,o,a)=>{const f=o-r;return f===0?1:(a-r)/f};class _f{constructor(){this.subscriptions=[]}add(o){return Af(this.subscriptions,o),()=>Tf(this.subscriptions,o)}notify(o,a,f){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,f);else for(let x=0;x<p;x++){const w=this.subscriptions[x];w&&w(o,a,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=r=>r*1e3,yi=r=>r/1e3;function mm(r,o){return o?r*(1e3/o):0}const gm=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,lw=1e-7,cw=12;function uw(r,o,a,f,p){let x,w,S=0;do w=o+(a-o)/2,x=gm(w,f,p)-r,x>0?a=w:o=w;while(Math.abs(x)>lw&&++S<cw);return w}function $a(r,o,a,f){if(r===o&&a===f)return $r;const p=x=>uw(x,0,1,r,a);return x=>x===0||x===1?x:gm(p(x),o,f)}const xm=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,ym=r=>o=>1-r(1-o),wm=$a(.33,1.53,.69,.99),Rf=ym(wm),vm=xm(Rf),Cm=r=>(r*=2)<1?.5*Rf(r):.5*(2-Math.pow(2,-10*(r-1))),kf=r=>1-Math.sin(Math.acos(r)),Em=ym(kf),bm=xm(kf),dw=$a(.42,0,1,1),fw=$a(0,0,.58,1),Sm=$a(.42,0,.58,1),hw=r=>Array.isArray(r)&&typeof r[0]!="number",Am=r=>Array.isArray(r)&&typeof r[0]=="number",pw={linear:$r,easeIn:dw,easeInOut:Sm,easeOut:fw,circIn:kf,circInOut:bm,circOut:Em,backIn:Rf,backInOut:vm,backOut:wm,anticipate:Cm},mw=r=>typeof r=="string",I1=r=>{if(Am(r)){If(r.length===4);const[o,a,f,p]=r;return $a(o,a,f,p)}else if(mw(r))return pw[r];return r},rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gw(r,o){let a=new Set,f=new Set,p=!1,x=!1;const w=new WeakSet;let S={delta:0,timestamp:0,isProcessing:!1};function v(A){w.has(A)&&(E.schedule(A),r()),A(S)}const E={schedule:(A,I=!1,R=!1)=>{const L=R&&p?a:f;return I&&w.add(A),L.has(A)||L.add(A),A},cancel:A=>{f.delete(A),w.delete(A)},process:A=>{if(S=A,p){x=!0;return}p=!0,[a,f]=[f,a],a.forEach(v),a.clear(),p=!1,x&&(x=!1,E.process(A))}};return E}const xw=40;function Tm(r,o){let a=!1,f=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,w=rc.reduce((F,Q)=>(F[Q]=gw(x),F),{}),{setup:S,read:v,resolveKeyframes:E,preUpdate:A,update:I,preRender:R,render:M,postRender:L}=w,B=()=>{const F=zi.useManualTiming?p.timestamp:performance.now();a=!1,zi.useManualTiming||(p.delta=f?1e3/60:Math.max(Math.min(F-p.timestamp,xw),1)),p.timestamp=F,p.isProcessing=!0,S.process(p),v.process(p),E.process(p),A.process(p),I.process(p),R.process(p),M.process(p),L.process(p),p.isProcessing=!1,a&&o&&(f=!1,r(B))},j=()=>{a=!0,f=!0,p.isProcessing||r(B)};return{schedule:rc.reduce((F,Q)=>{const ne=w[Q];return F[Q]=(te,q=!1,ce=!1)=>(a||j(),ne.schedule(te,q,ce)),F},{}),cancel:F=>{for(let Q=0;Q<rc.length;Q++)w[rc[Q]].cancel(F)},state:p,steps:w}}const{schedule:an,cancel:vs,state:tr,steps:xd}=Tm(typeof requestAnimationFrame<"u"?requestAnimationFrame:$r,!0);let fc;function yw(){fc=void 0}const Tr={now:()=>(fc===void 0&&Tr.set(tr.isProcessing||zi.useManualTiming?tr.timestamp:performance.now()),fc),set:r=>{fc=r,queueMicrotask(yw)}},Im=r=>o=>typeof o=="string"&&o.startsWith(r),Pf=Im("--"),ww=Im("var(--"),Of=r=>ww(r)?vw.test(r.split("/*")[0].trim()):!1,vw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Vo,transform:r=>Vi(0,1,r)},ic={...Vo,default:1},ka=r=>Math.round(r*1e5)/1e5,Mf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Cw(r){return r==null}const Ew=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Df=(r,o)=>a=>!!(typeof a=="string"&&Ew.test(a)&&a.startsWith(r)||o&&!Cw(a)&&Object.prototype.hasOwnProperty.call(a,o)),Nm=(r,o,a)=>f=>{if(typeof f!="string")return f;const[p,x,w,S]=f.match(Mf);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(w),alpha:S!==void 0?parseFloat(S):1}},bw=r=>Vi(0,255,r),yd={...Vo,transform:r=>Math.round(bw(r))},Zs={test:Df("rgb","red"),parse:Nm("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:f=1})=>"rgba("+yd.transform(r)+", "+yd.transform(o)+", "+yd.transform(a)+", "+ka(Fa.transform(f))+")"};function Sw(r){let o="",a="",f="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),f=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),f=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,f+=f,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(f,16),alpha:p?parseInt(p,16)/255:1}}const jd={test:Df("#"),parse:Sw,transform:Zs.transform},Za=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),xs=Za("deg"),wi=Za("%"),gt=Za("px"),Aw=Za("vh"),Tw=Za("vw"),N1={...wi,parse:r=>wi.parse(r)/100,transform:r=>wi.transform(r*100)},No={test:Df("hsl","hue"),parse:Nm("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:f=1})=>"hsla("+Math.round(r)+", "+wi.transform(ka(o))+", "+wi.transform(ka(a))+", "+ka(Fa.transform(f))+")"},Rn={test:r=>Zs.test(r)||jd.test(r)||No.test(r),parse:r=>Zs.test(r)?Zs.parse(r):No.test(r)?No.parse(r):jd.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Zs.transform(r):No.transform(r),getAnimatableNone:r=>{const o=Rn.parse(r);return o.alpha=0,Rn.transform(o)}},Iw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Nw(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Mf))==null?void 0:o.length)||0)+(((a=r.match(Iw))==null?void 0:a.length)||0)>0}const _m="number",Rm="color",_w="var",Rw="var(",_1="${}",kw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(r){const o=r.toString(),a=[],f={color:[],number:[],var:[]},p=[];let x=0;const S=o.replace(kw,v=>(Rn.test(v)?(f.color.push(x),p.push(Rm),a.push(Rn.parse(v))):v.startsWith(Rw)?(f.var.push(x),p.push(_w),a.push(v)):(f.number.push(x),p.push(_m),a.push(parseFloat(v))),++x,_1)).split(_1);return{values:a,split:S,indexes:f,types:p}}function km(r){return Va(r).values}function Pm(r){const{split:o,types:a}=Va(r),f=o.length;return p=>{let x="";for(let w=0;w<f;w++)if(x+=o[w],p[w]!==void 0){const S=a[w];S===_m?x+=ka(p[w]):S===Rm?x+=Rn.transform(p[w]):x+=p[w]}return x}}const Pw=r=>typeof r=="number"?0:Rn.test(r)?Rn.getAnimatableNone(r):r;function Ow(r){const o=km(r);return Pm(r)(o.map(Pw))}const Cs={test:Nw,parse:km,createTransformer:Pm,getAnimatableNone:Ow};function wd(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Mw({hue:r,saturation:o,lightness:a,alpha:f}){r/=360,o/=100,a/=100;let p=0,x=0,w=0;if(!o)p=x=w=a;else{const S=a<.5?a*(1+o):a+o-a*o,v=2*a-S;p=wd(v,S,r+1/3),x=wd(v,S,r),w=wd(v,S,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(w*255),alpha:f}}function vc(r,o){return a=>a>0?o:r}const hn=(r,o,a)=>r+(o-r)*a,vd=(r,o,a)=>{const f=r*r,p=a*(o*o-f)+f;return p<0?0:Math.sqrt(p)},Dw=[jd,Zs,No],Lw=r=>Dw.find(o=>o.test(r));function R1(r){const o=Lw(r);if(!o)return!1;let a=o.parse(r);return o===No&&(a=Mw(a)),a}const k1=(r,o)=>{const a=R1(r),f=R1(o);if(!a||!f)return vc(r,o);const p={...a};return x=>(p.red=vd(a.red,f.red,x),p.green=vd(a.green,f.green,x),p.blue=vd(a.blue,f.blue,x),p.alpha=hn(a.alpha,f.alpha,x),Zs.transform(p))},Fd=new Set(["none","hidden"]);function Bw(r,o){return Fd.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function jw(r,o){return a=>hn(r,o,a)}function Lf(r){return typeof r=="number"?jw:typeof r=="string"?Of(r)?vc:Rn.test(r)?k1:zw:Array.isArray(r)?Om:typeof r=="object"?Rn.test(r)?k1:Fw:vc}function Om(r,o){const a=[...r],f=a.length,p=r.map((x,w)=>Lf(x)(x,o[w]));return x=>{for(let w=0;w<f;w++)a[w]=p[w](x);return a}}function Fw(r,o){const a={...r,...o},f={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(f[p]=Lf(r[p])(r[p],o[p]));return p=>{for(const x in f)a[x]=f[x](p);return a}}function Vw(r,o){const a=[],f={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],w=r.indexes[x][f[x]],S=r.values[w]??0;a[p]=S,f[x]++}return a}const zw=(r,o)=>{const a=Cs.createTransformer(o),f=Va(r),p=Va(o);return f.indexes.var.length===p.indexes.var.length&&f.indexes.color.length===p.indexes.color.length&&f.indexes.number.length>=p.indexes.number.length?Fd.has(r)&&!p.values.length||Fd.has(o)&&!f.values.length?Bw(r,o):Ya(Om(Vw(f,p),p.values),a):vc(r,o)};function Mm(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?hn(r,o,a):Lf(r)(r,o)}const Uw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>an.update(o,a),stop:()=>vs(o),now:()=>tr.isProcessing?tr.timestamp:Tr.now()}},Dm=(r,o,a=10)=>{let f="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)f+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},Cc=2e4;function Bf(r){let o=0;const a=50;let f=r.next(o);for(;!f.done&&o<Cc;)o+=a,f=r.next(o);return o>=Cc?1/0:o}function Ww(r,o=100,a){const f=a({...r,keyframes:[0,o]}),p=Math.min(Bf(f),Cc);return{type:"keyframes",ease:x=>f.next(p*x).value/o,duration:yi(p)}}const Hw=5;function Lm(r,o,a){const f=Math.max(o-Hw,0);return mm(a-r(f),o-f)}const Cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},P1=.001;function Gw({duration:r=Cn.duration,bounce:o=Cn.bounce,velocity:a=Cn.velocity,mass:f=Cn.mass}){let p,x,w=1-o;w=Vi(Cn.minDamping,Cn.maxDamping,w),r=Vi(Cn.minDuration,Cn.maxDuration,yi(r)),w<1?(p=E=>{const A=E*w,I=A*r,R=A-a,M=Vd(E,w),L=Math.exp(-I);return P1-R/M*L},x=E=>{const I=E*w*r,R=I*a+a,M=Math.pow(w,2)*Math.pow(E,2)*r,L=Math.exp(-I),B=Vd(Math.pow(E,2),w);return(-p(E)+P1>0?-1:1)*((R-M)*L)/B}):(p=E=>{const A=Math.exp(-E*r),I=(E-a)*r+1;return-.001+A*I},x=E=>{const A=Math.exp(-E*r),I=(a-E)*(r*r);return A*I});const S=5/r,v=Yw(p,x,S);if(r=xi(r),isNaN(v))return{stiffness:Cn.stiffness,damping:Cn.damping,duration:r};{const E=Math.pow(v,2)*f;return{stiffness:E,damping:w*2*Math.sqrt(f*E),duration:r}}}const Xw=12;function Yw(r,o,a){let f=a;for(let p=1;p<Xw;p++)f=f-r(f)/o(f);return f}function Vd(r,o){return r*Math.sqrt(1-o*o)}const $w=["duration","bounce"],Zw=["stiffness","damping","mass"];function O1(r,o){return o.some(a=>r[a]!==void 0)}function Kw(r){let o={velocity:Cn.velocity,stiffness:Cn.stiffness,damping:Cn.damping,mass:Cn.mass,isResolvedFromDuration:!1,...r};if(!O1(r,Zw)&&O1(r,$w))if(r.visualDuration){const a=r.visualDuration,f=2*Math.PI/(a*1.2),p=f*f,x=2*Vi(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:Cn.mass,stiffness:p,damping:x}}else{const a=Gw(r);o={...o,...a,mass:Cn.mass},o.isResolvedFromDuration=!0}return o}function Ec(r=Cn.visualDuration,o=Cn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:f,restDelta:p}=a;const x=a.keyframes[0],w=a.keyframes[a.keyframes.length-1],S={done:!1,value:x},{stiffness:v,damping:E,mass:A,duration:I,velocity:R,isResolvedFromDuration:M}=Kw({...a,velocity:-yi(a.velocity||0)}),L=R||0,B=E/(2*Math.sqrt(v*A)),j=w-x,V=yi(Math.sqrt(v/A)),U=Math.abs(j)<5;f||(f=U?Cn.restSpeed.granular:Cn.restSpeed.default),p||(p=U?Cn.restDelta.granular:Cn.restDelta.default);let F;if(B<1){const ne=Vd(V,B);F=te=>{const q=Math.exp(-B*V*te);return w-q*((L+B*V*j)/ne*Math.sin(ne*te)+j*Math.cos(ne*te))}}else if(B===1)F=ne=>w-Math.exp(-V*ne)*(j+(L+V*j)*ne);else{const ne=V*Math.sqrt(B*B-1);F=te=>{const q=Math.exp(-B*V*te),ce=Math.min(ne*te,300);return w-q*((L+B*V*j)*Math.sinh(ce)+ne*j*Math.cosh(ce))/ne}}const Q={calculatedDuration:M&&I||null,next:ne=>{const te=F(ne);if(M)S.done=ne>=I;else{let q=ne===0?L:0;B<1&&(q=ne===0?xi(L):Lm(F,ne,te));const ce=Math.abs(q)<=f,K=Math.abs(w-te)<=p;S.done=ce&&K}return S.value=S.done?w:te,S},toString:()=>{const ne=Math.min(Bf(Q),Cc),te=Dm(q=>Q.next(ne*q).value,ne,30);return ne+"ms "+te},toTransition:()=>{}};return Q}Ec.applyToOptions=r=>{const o=Ww(r,100,Ec);return r.ease=o.ease,r.duration=xi(o.duration),r.type="keyframes",r};function zd({keyframes:r,velocity:o=0,power:a=.8,timeConstant:f=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:w,min:S,max:v,restDelta:E=.5,restSpeed:A}){const I=r[0],R={done:!1,value:I},M=ce=>S!==void 0&&ce<S||v!==void 0&&ce>v,L=ce=>S===void 0?v:v===void 0||Math.abs(S-ce)<Math.abs(v-ce)?S:v;let B=a*o;const j=I+B,V=w===void 0?j:w(j);V!==j&&(B=V-I);const U=ce=>-B*Math.exp(-ce/f),F=ce=>V+U(ce),Q=ce=>{const K=U(ce),Te=F(ce);R.done=Math.abs(K)<=E,R.value=R.done?V:Te};let ne,te;const q=ce=>{M(R.value)&&(ne=ce,te=Ec({keyframes:[R.value,L(R.value)],velocity:Lm(F,ce,R.value),damping:p,stiffness:x,restDelta:E,restSpeed:A}))};return q(0),{calculatedDuration:null,next:ce=>{let K=!1;return!te&&ne===void 0&&(K=!0,Q(ce),q(ce)),ne!==void 0&&ce>=ne?te.next(ce-ne):(!K&&Q(ce),R)}}}function qw(r,o,a){const f=[],p=a||zi.mix||Mm,x=r.length-1;for(let w=0;w<x;w++){let S=p(r[w],r[w+1]);if(o){const v=Array.isArray(o)?o[w]||$r:o;S=Ya(v,S)}f.push(S)}return f}function Qw(r,o,{clamp:a=!0,ease:f,mixer:p}={}){const x=r.length;if(If(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const w=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const S=qw(o,f,p),v=S.length,E=A=>{if(w&&A<r[0])return o[0];let I=0;if(v>1)for(;I<r.length-2&&!(A<r[I+1]);I++);const R=ja(r[I],r[I+1],A);return S[I](R)};return a?A=>E(Vi(r[0],r[x-1],A)):E}function Jw(r,o){const a=r[r.length-1];for(let f=1;f<=o;f++){const p=ja(0,o,f);r.push(hn(a,1,p))}}function ev(r){const o=[0];return Jw(o,r.length-1),o}function tv(r,o){return r.map(a=>a*o)}function nv(r,o){return r.map(()=>o||Sm).splice(0,r.length-1)}function Pa({duration:r=300,keyframes:o,times:a,ease:f="easeInOut"}){const p=hw(f)?f.map(I1):I1(f),x={done:!1,value:o[0]},w=tv(a&&a.length===o.length?a:ev(o),r),S=Qw(w,o,{ease:Array.isArray(p)?p:nv(o,p)});return{calculatedDuration:r,next:v=>(x.value=S(v),x.done=v>=r,x)}}const rv=r=>r!==null;function jf(r,{repeat:o,repeatType:a="loop"},f,p=1){const x=r.filter(rv),S=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!S||f===void 0?x[S]:f}const iv={decay:zd,inertia:zd,tween:Pa,keyframes:Pa,spring:Ec};function Bm(r){typeof r.type=="string"&&(r.type=iv[r.type])}class Ff{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const sv=r=>r/100;class Vf extends Ff{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,p;const{motionValue:a}=this.options;a&&a.updatedAt!==Tr.now()&&this.tick(Tr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(f=this.options).onStop)==null||p.call(f))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;Bm(o);const{type:a=Pa,repeat:f=0,repeatDelay:p=0,repeatType:x,velocity:w=0}=o;let{keyframes:S}=o;const v=a||Pa;v!==Pa&&typeof S[0]!="number"&&(this.mixKeyframes=Ya(sv,Mm(S[0],S[1])),S=[0,100]);const E=v({...o,keyframes:S});x==="mirror"&&(this.mirroredGenerator=v({...o,keyframes:[...S].reverse(),velocity:-w})),E.calculatedDuration===null&&(E.calculatedDuration=Bf(E));const{calculatedDuration:A}=E;this.calculatedDuration=A,this.resolvedDuration=A+p,this.totalDuration=this.resolvedDuration*(f+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:f,totalDuration:p,mixKeyframes:x,mirroredGenerator:w,resolvedDuration:S,calculatedDuration:v}=this;if(this.startTime===null)return f.next(0);const{delay:E=0,keyframes:A,repeat:I,repeatType:R,repeatDelay:M,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const V=this.currentTime-E*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,Q=f;if(I){const ce=Math.min(this.currentTime,p)/S;let K=Math.floor(ce),Te=ce%1;!Te&&ce>=1&&(Te=1),Te===1&&K--,K=Math.min(K,I+1),!!(K%2)&&(R==="reverse"?(Te=1-Te,M&&(Te-=M/S)):R==="mirror"&&(Q=w)),F=Vi(0,1,Te)*S}const ne=U?{done:!1,value:A[0]}:Q.next(F);x&&(ne.value=x(ne.value));let{done:te}=ne;!U&&v!==null&&(te=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return q&&L!==zd&&(ne.value=jf(A,this.options,j,this.speed)),B&&B(ne.value),q&&this.finish(),ne}then(o,a){return this.finished.then(o,a)}get duration(){return yi(this.calculatedDuration)}get time(){return yi(this.currentTime)}set time(o){var a;o=xi(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(Tr.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=yi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Uw,startTime:a}=this.options;this.driver||(this.driver=o(w=>this.tick(w))),(x=(p=this.options).onPlay)==null||x.call(p);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=a??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function ov(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const Ks=r=>r*180/Math.PI,Ud=r=>{const o=Ks(Math.atan2(r[1],r[0]));return Wd(o)},av={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Ud,rotateZ:Ud,skewX:r=>Ks(Math.atan(r[1])),skewY:r=>Ks(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Wd=r=>(r=r%360,r<0&&(r+=360),r),M1=Ud,D1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),L1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),lv={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:D1,scaleY:L1,scale:r=>(D1(r)+L1(r))/2,rotateX:r=>Wd(Ks(Math.atan2(r[6],r[5]))),rotateY:r=>Wd(Ks(Math.atan2(-r[2],r[0]))),rotateZ:M1,rotate:M1,skewX:r=>Ks(Math.atan(r[4])),skewY:r=>Ks(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Hd(r){return r.includes("scale")?1:0}function Gd(r,o){if(!r||r==="none")return Hd(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,p;if(a)f=lv,p=a;else{const S=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=av,p=S}if(!p)return Hd(o);const x=f[o],w=p[1].split(",").map(uv);return typeof x=="function"?x(w):w[x]}const cv=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Gd(a,o)};function uv(r){return parseFloat(r.trim())}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(zo),B1=r=>r===Vo||r===gt,dv=new Set(["x","y","z"]),fv=zo.filter(r=>!dv.has(r));function hv(r){const o=[];return fv.forEach(a=>{const f=r.getValue(a);f!==void 0&&(o.push([a,f.get()]),f.set(a.startsWith("scale")?1:0))}),o}const Qs={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Gd(o,"x"),y:(r,{transform:o})=>Gd(o,"y")};Qs.translateX=Qs.x;Qs.translateY=Qs.y;const Js=new Set;let Xd=!1,Yd=!1,$d=!1;function jm(){if(Yd){const r=Array.from(Js).filter(f=>f.needsMeasurement),o=new Set(r.map(f=>f.element)),a=new Map;o.forEach(f=>{const p=hv(f);p.length&&(a.set(f,p),f.render())}),r.forEach(f=>f.measureInitialState()),o.forEach(f=>{f.render();const p=a.get(f);p&&p.forEach(([x,w])=>{var S;(S=f.getValue(x))==null||S.set(w)})}),r.forEach(f=>f.measureEndState()),r.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}Yd=!1,Xd=!1,Js.forEach(r=>r.complete($d)),Js.clear()}function Fm(){Js.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Yd=!0)})}function pv(){$d=!0,Fm(),jm(),$d=!1}class zf{constructor(o,a,f,p,x,w=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=f,this.motionValue=p,this.element=x,this.isAsync=w}scheduleResolve(){this.state="scheduled",this.isAsync?(Js.add(this),Xd||(Xd=!0,an.read(Fm),an.resolveKeyframes(jm))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:f,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),w=o[o.length-1];if(x!==void 0)o[0]=x;else if(f&&a){const S=f.readValue(a,w);S!=null&&(o[0]=S)}o[0]===void 0&&(o[0]=w),p&&x===void 0&&p.set(o[0])}ov(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),Js.delete(this)}cancel(){this.state==="scheduled"&&(Js.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mv=r=>r.startsWith("--");function gv(r,o,a){mv(o)?r.style.setProperty(o,a):r.style[o]=a}const xv=Nf(()=>window.ScrollTimeline!==void 0),yv={};function wv(r,o){const a=Nf(r);return()=>yv[o]??a()}const Vm=wv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ra=([r,o,a,f])=>`cubic-bezier(${r}, ${o}, ${a}, ${f})`,j1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function zm(r,o){if(r)return typeof r=="function"?Vm()?Dm(r,o):"ease-out":Am(r)?Ra(r):Array.isArray(r)?r.map(a=>zm(a,o)||j1.easeOut):j1[r]}function vv(r,o,a,{delay:f=0,duration:p=300,repeat:x=0,repeatType:w="loop",ease:S="easeOut",times:v}={},E=void 0){const A={[o]:a};v&&(A.offset=v);const I=zm(S,p);Array.isArray(I)&&(A.easing=I);const R={delay:f,duration:p,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:x+1,direction:w==="reverse"?"alternate":"normal"};return E&&(R.pseudoElement=E),r.animate(A,R)}function Um(r){return typeof r=="function"&&"applyToOptions"in r}function Cv({type:r,...o}){return Um(r)&&Vm()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class Ev extends Ff{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:f,keyframes:p,pseudoElement:x,allowFlatten:w=!1,finalKeyframe:S,onComplete:v}=o;this.isPseudoElement=!!x,this.allowFlatten=w,this.options=o,If(typeof o.type!="string");const E=Cv(o);this.animation=vv(a,f,p,E,x),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const A=jf(p,this.options,S,this.speed);this.updateMotionValue?this.updateMotionValue(A):gv(a,f,A),this.animation.cancel()}v==null||v(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,f;const o=((f=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:f.call(a).duration)||0;return yi(Number(o))}get time(){return yi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=xi(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&xv()?(this.animation.timeline=o,$r):a(this)}}const Wm={anticipate:Cm,backInOut:vm,circInOut:bm};function bv(r){return r in Wm}function Sv(r){typeof r.ease=="string"&&bv(r.ease)&&(r.ease=Wm[r.ease])}const F1=10;class Av extends Ev{constructor(o){Sv(o),Bm(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:f,onComplete:p,element:x,...w}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const S=new Vf({...w,autoplay:!1}),v=xi(this.finishedTime??this.time);a.setWithVelocity(S.sample(v-F1).value,S.sample(v).value,F1),S.stop()}}const V1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Cs.test(r)||r==="0")&&!r.startsWith("url("));function Tv(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function Iv(r,o,a,f){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],w=V1(p,o),S=V1(x,o);return!w||!S?!1:Tv(r)||(a==="spring"||Um(a))&&f}function Zd(r){r.duration=0,r.type}const Nv=new Set(["opacity","clipPath","filter","transform"]),_v=Nf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rv(r){var A;const{motionValue:o,name:a,repeatDelay:f,repeatType:p,damping:x,type:w}=r;if(!(((A=o==null?void 0:o.owner)==null?void 0:A.current)instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:E}=o.owner.getProps();return _v()&&a&&Nv.has(a)&&(a!=="transform"||!E)&&!v&&!f&&p!=="mirror"&&x!==0&&w!=="inertia"}const kv=40;class Pv extends Ff{constructor({autoplay:o=!0,delay:a=0,type:f="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:w="loop",keyframes:S,name:v,motionValue:E,element:A,...I}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Tr.now();const R={autoplay:o,delay:a,type:f,repeat:p,repeatDelay:x,repeatType:w,name:v,motionValue:E,element:A,...I},M=(A==null?void 0:A.KeyframeResolver)||zf;this.keyframeResolver=new M(S,(B,j,V)=>this.onKeyframesResolved(B,j,R,!V),v,E,A),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,f,p){this.keyframeResolver=void 0;const{name:x,type:w,velocity:S,delay:v,isHandoff:E,onUpdate:A}=f;this.resolvedAt=Tr.now(),Iv(o,x,w,S)||((zi.instantAnimations||!v)&&(A==null||A(jf(o,f,a))),o[0]=o[o.length-1],Zd(f),f.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>kv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...f,keyframes:o},M=!E&&Rv(R)?new Av({...R,element:R.motionValue.owner.current}):new Vf(R);M.finished.then(()=>this.notifyFinished()).catch($r),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),pv()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const Ov=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mv(r){const o=Ov.exec(r);if(!o)return[,];const[,a,f,p]=o;return[`--${a??f}`,p]}function Hm(r,o,a=1){const[f,p]=Mv(r);if(!f)return;const x=window.getComputedStyle(o).getPropertyValue(f);if(x){const w=x.trim();return fm(w)?parseFloat(w):w}return Of(p)?Hm(p,o,a+1):p}function Uf(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Gm=new Set(["width","height","top","left","right","bottom",...zo]),Dv={test:r=>r==="auto",parse:r=>r},Xm=r=>o=>o.test(r),Ym=[Vo,gt,wi,xs,Tw,Aw,Dv],z1=r=>Ym.find(Xm(r));function Lv(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||pm(r):!0}const Bv=new Set(["brightness","contrast","saturate","opacity"]);function jv(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[f]=a.match(Mf)||[];if(!f)return r;const p=a.replace(f,"");let x=Bv.has(o)?1:0;return f!==a&&(x*=100),o+"("+x+p+")"}const Fv=/\b([a-z-]*)\(.*?\)/gu,Kd={...Cs,getAnimatableNone:r=>{const o=r.match(Fv);return o?o.map(jv).join(" "):r}},U1={...Vo,transform:Math.round},Vv={rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:ic,scaleX:ic,scaleY:ic,scaleZ:ic,skew:xs,skewX:xs,skewY:xs,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:Fa,originX:N1,originY:N1,originZ:gt},Wf={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,top:gt,right:gt,bottom:gt,left:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,backgroundPositionX:gt,backgroundPositionY:gt,...Vv,zIndex:U1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:U1},zv={...Wf,color:Rn,backgroundColor:Rn,outlineColor:Rn,fill:Rn,stroke:Rn,borderColor:Rn,borderTopColor:Rn,borderRightColor:Rn,borderBottomColor:Rn,borderLeftColor:Rn,filter:Kd,WebkitFilter:Kd},$m=r=>zv[r];function Zm(r,o){let a=$m(r);return a!==Kd&&(a=Cs),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const Uv=new Set(["auto","none","0"]);function Wv(r,o,a){let f=0,p;for(;f<r.length&&!p;){const x=r[f];typeof x=="string"&&!Uv.has(x)&&Va(x).values.length&&(p=r[f]),f++}if(p&&a)for(const x of o)r[x]=Zm(a,p)}class Hv extends zf{constructor(o,a,f,p,x){super(o,a,f,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:f}=this;if(!a||!a.current)return;super.readKeyframes();for(let v=0;v<o.length;v++){let E=o[v];if(typeof E=="string"&&(E=E.trim(),Of(E))){const A=Hm(E,a.current);A!==void 0&&(o[v]=A),v===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Gm.has(f)||o.length!==2)return;const[p,x]=o,w=z1(p),S=z1(x);if(w!==S)if(B1(w)&&B1(S))for(let v=0;v<o.length;v++){const E=o[v];typeof E=="string"&&(o[v]=parseFloat(E))}else Qs[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,f=[];for(let p=0;p<o.length;p++)(o[p]===null||Lv(o[p]))&&f.push(p);f.length&&Wv(o,f,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:f}=this;if(!o||!o.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qs[f](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(f,p).jump(p,!1)}measureEndState(){var S;const{element:o,name:a,unresolvedKeyframes:f}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=f.length-1,w=f[x];f[x]=Qs[a](o.measureViewportBox(),window.getComputedStyle(o.current)),w!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=w),(S=this.removedTransforms)!=null&&S.length&&this.removedTransforms.forEach(([v,E])=>{o.getValue(v).set(E)}),this.resolveNoneKeyframes()}}function Gv(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let f=document;const p=(a==null?void 0:a[r])??f.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Km=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function qm(r){return hm(r)&&"offsetHeight"in r}const W1=30,Xv=r=>!isNaN(parseFloat(r));class Yv{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var x;const p=Tr.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const w of this.dependents)w.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=Tr.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=Xv(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new _f);const f=this.events[o].add(a);return o==="change"?()=>{f(),an.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,f){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-f}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=Tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>W1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,W1);return mm(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lo(r,o){return new Yv(r,o)}const{schedule:Hf}=Tm(queueMicrotask,!1),oi={x:!1,y:!1};function Qm(){return oi.x||oi.y}function $v(r){return r==="x"||r==="y"?oi[r]?null:(oi[r]=!0,()=>{oi[r]=!1}):oi.x||oi.y?null:(oi.x=oi.y=!0,()=>{oi.x=oi.y=!1})}function Jm(r,o){const a=Gv(r),f=new AbortController,p={passive:!0,...o,signal:f.signal};return[a,p,()=>f.abort()]}function H1(r){return!(r.pointerType==="touch"||Qm())}function Zv(r,o,a={}){const[f,p,x]=Jm(r,a),w=S=>{if(!H1(S))return;const{target:v}=S,E=o(v,S);if(typeof E!="function"||!v)return;const A=I=>{H1(I)&&(E(I),v.removeEventListener("pointerleave",A))};v.addEventListener("pointerleave",A,p)};return f.forEach(S=>{S.addEventListener("pointerenter",w,p)}),x}const eg=(r,o)=>o?r===o?!0:eg(r,o.parentElement):!1,Gf=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Kv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qv(r){return Kv.has(r.tagName)||r.tabIndex!==-1}const hc=new WeakSet;function G1(r){return o=>{o.key==="Enter"&&r(o)}}function Cd(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const Qv=(r,o)=>{const a=r.currentTarget;if(!a)return;const f=G1(()=>{if(hc.has(a))return;Cd(a,"down");const p=G1(()=>{Cd(a,"up")}),x=()=>Cd(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",f,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",f),o)};function X1(r){return Gf(r)&&!Qm()}function Jv(r,o,a={}){const[f,p,x]=Jm(r,a),w=S=>{const v=S.currentTarget;if(!X1(S))return;hc.add(v);const E=o(v,S),A=(M,L)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),hc.has(v)&&hc.delete(v),X1(M)&&typeof E=="function"&&E(M,{success:L})},I=M=>{A(M,v===window||v===document||a.useGlobalTarget||eg(v,M.target))},R=M=>{A(M,!1)};window.addEventListener("pointerup",I,p),window.addEventListener("pointercancel",R,p)};return f.forEach(S=>{(a.useGlobalTarget?window:S).addEventListener("pointerdown",w,p),qm(S)&&(S.addEventListener("focus",E=>Qv(E,p)),!qv(S)&&!S.hasAttribute("tabindex")&&(S.tabIndex=0))}),x}function tg(r){return hm(r)&&"ownerSVGElement"in r}function e3(r){return tg(r)&&r.tagName==="svg"}const dr=r=>!!(r&&r.getVelocity),t3=[...Ym,Rn,Cs],n3=r=>t3.find(Xm(r)),Xf=N.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class r3 extends N.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const f=a.offsetParent,p=qm(f)&&f.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function i3({children:r,isPresent:o,anchorX:a,root:f}){const p=N.useId(),x=N.useRef(null),w=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:S}=N.useContext(Xf);return N.useInsertionEffect(()=>{const{width:v,height:E,top:A,left:I,right:R}=w.current;if(o||!x.current||!v||!E)return;const M=a==="left"?`left: ${I}`:`right: ${R}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");S&&(L.nonce=S);const B=f??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${E}px !important;
            ${M}px !important;
            top: ${A}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),y.jsx(r3,{isPresent:o,childRef:x,sizeRef:w,children:N.cloneElement(r,{ref:x})})}const s3=({children:r,initial:o,isPresent:a,onExitComplete:f,custom:p,presenceAffectsLayout:x,mode:w,anchorX:S,root:v})=>{const E=bf(o3),A=N.useId();let I=!0,R=N.useMemo(()=>(I=!1,{id:A,initial:o,isPresent:a,custom:p,onExitComplete:M=>{E.set(M,!0);for(const L of E.values())if(!L)return;f&&f()},register:M=>(E.set(M,!1),()=>E.delete(M))}),[a,E,f]);return x&&I&&(R={...R}),N.useMemo(()=>{E.forEach((M,L)=>E.set(L,!1))},[a]),N.useEffect(()=>{!a&&!E.size&&f&&f()},[a]),w==="popLayout"&&(r=y.jsx(i3,{isPresent:a,anchorX:S,root:v,children:r})),y.jsx(Pc.Provider,{value:R,children:r})};function o3(){return new Map}function ng(r=!0){const o=N.useContext(Pc);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:f,register:p}=o,x=N.useId();N.useEffect(()=>{if(r)return p(x)},[r]);const w=N.useCallback(()=>r&&f&&f(x),[x,f,r]);return!a&&f?[!1,w]:[!0]}const sc=r=>r.key||"";function Y1(r){const o=[];return N.Children.forEach(r,a=>{N.isValidElement(a)&&o.push(a)}),o}const Ed=({children:r,custom:o,initial:a=!0,onExitComplete:f,presenceAffectsLayout:p=!0,mode:x="sync",propagate:w=!1,anchorX:S="left",root:v})=>{const[E,A]=ng(w),I=N.useMemo(()=>Y1(r),[r]),R=w&&!E?[]:I.map(sc),M=N.useRef(!0),L=N.useRef(I),B=bf(()=>new Map),[j,V]=N.useState(I),[U,F]=N.useState(I);dm(()=>{M.current=!1,L.current=I;for(let te=0;te<U.length;te++){const q=sc(U[te]);R.includes(q)?B.delete(q):B.get(q)!==!0&&B.set(q,!1)}},[U,R.length,R.join("-")]);const Q=[];if(I!==j){let te=[...I];for(let q=0;q<U.length;q++){const ce=U[q],K=sc(ce);R.includes(K)||(te.splice(q,0,ce),Q.push(ce))}return x==="wait"&&Q.length&&(te=Q),F(Y1(te)),V(I),null}const{forceRender:ne}=N.useContext(Ef);return y.jsx(y.Fragment,{children:U.map(te=>{const q=sc(te),ce=w&&!E?!1:I===U||R.includes(q),K=()=>{if(B.has(q))B.set(q,!0);else return;let Te=!0;B.forEach(Be=>{Be||(Te=!1)}),Te&&(ne==null||ne(),F(L.current),w&&(A==null||A()),f&&f())};return y.jsx(s3,{isPresent:ce,initial:!M.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:v,onExitComplete:ce?void 0:K,anchorX:S,children:te},q)})})},rg=N.createContext({strict:!1}),$1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const r in $1)Bo[r]={isEnabled:o=>$1[r].some(a=>!!o[a])};function a3(r){for(const o in r)Bo[o]={...Bo[o],...r[o]}}const l3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||l3.has(r)}let ig=r=>!bc(r);function c3(r){typeof r=="function"&&(ig=o=>o.startsWith("on")?!bc(o):r(o))}try{c3(require("@emotion/is-prop-valid").default)}catch{}function u3(r,o,a){const f={};for(const p in r)p==="values"&&typeof r.values=="object"||(ig(p)||a===!0&&bc(p)||!o&&!bc(p)||r.draggable&&p.startsWith("onDrag"))&&(f[p]=r[p]);return f}const Oc=N.createContext({});function Mc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function za(r){return typeof r=="string"||Array.isArray(r)}const Yf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$f=["initial",...Yf];function Dc(r){return Mc(r.animate)||$f.some(o=>za(r[o]))}function sg(r){return!!(Dc(r)||r.variants)}function d3(r,o){if(Dc(r)){const{initial:a,animate:f}=r;return{initial:a===!1||za(a)?a:void 0,animate:za(f)?f:void 0}}return r.inherit!==!1?o:{}}function f3(r){const{initial:o,animate:a}=d3(r,N.useContext(Oc));return N.useMemo(()=>({initial:o,animate:a}),[Z1(o),Z1(a)])}function Z1(r){return Array.isArray(r)?r.join(" "):r}const Ua={};function h3(r){for(const o in r)Ua[o]=r[o],Pf(o)&&(Ua[o].isCSSVariable=!0)}function og(r,{layout:o,layoutId:a}){return Uo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ua[r]||r==="opacity")}const p3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m3=zo.length;function g3(r,o,a){let f="",p=!0;for(let x=0;x<m3;x++){const w=zo[x],S=r[w];if(S===void 0)continue;let v=!0;if(typeof S=="number"?v=S===(w.startsWith("scale")?1:0):v=parseFloat(S)===0,!v||a){const E=Km(S,Wf[w]);if(!v){p=!1;const A=p3[w]||w;f+=`${A}(${E}) `}a&&(o[w]=E)}}return f=f.trim(),a?f=a(o,p?"":f):p&&(f="none"),f}function Zf(r,o,a){const{style:f,vars:p,transformOrigin:x}=r;let w=!1,S=!1;for(const v in o){const E=o[v];if(Uo.has(v)){w=!0;continue}else if(Pf(v)){p[v]=E;continue}else{const A=Km(E,Wf[v]);v.startsWith("origin")?(S=!0,x[v]=A):f[v]=A}}if(o.transform||(w||a?f.transform=g3(o,r.transform,a):f.transform&&(f.transform="none")),S){const{originX:v="50%",originY:E="50%",originZ:A=0}=x;f.transformOrigin=`${v} ${E} ${A}`}}const Kf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ag(r,o,a){for(const f in o)!dr(o[f])&&!og(f,a)&&(r[f]=o[f])}function x3({transformTemplate:r},o){return N.useMemo(()=>{const a=Kf();return Zf(a,o,r),Object.assign({},a.vars,a.style)},[o])}function y3(r,o){const a=r.style||{},f={};return ag(f,a,r),Object.assign(f,x3(r,o)),f}function w3(r,o){const a={},f=y3(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=f,a}const v3={offset:"stroke-dashoffset",array:"stroke-dasharray"},C3={offset:"strokeDashoffset",array:"strokeDasharray"};function E3(r,o,a=1,f=0,p=!0){r.pathLength=1;const x=p?v3:C3;r[x.offset]=gt.transform(-f);const w=gt.transform(o),S=gt.transform(a);r[x.array]=`${w} ${S}`}function lg(r,{attrX:o,attrY:a,attrScale:f,pathLength:p,pathSpacing:x=1,pathOffset:w=0,...S},v,E,A){if(Zf(r,S,E),v){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:I,style:R}=r;I.transform&&(R.transform=I.transform,delete I.transform),(R.transform||I.transformOrigin)&&(R.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),R.transform&&(R.transformBox=(A==null?void 0:A.transformBox)??"fill-box",delete I.transformBox),o!==void 0&&(I.x=o),a!==void 0&&(I.y=a),f!==void 0&&(I.scale=f),p!==void 0&&E3(I,p,x,w,!1)}const cg=()=>({...Kf(),attrs:{}}),ug=r=>typeof r=="string"&&r.toLowerCase()==="svg";function b3(r,o,a,f){const p=N.useMemo(()=>{const x=cg();return lg(x,o,ug(f),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};ag(x,r.style,r),p.style={...x,...p.style}}return p}const S3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qf(r){return typeof r!="string"||r.includes("-")?!1:!!(S3.indexOf(r)>-1||/[A-Z]/u.test(r))}function A3(r,o,a,{latestValues:f},p,x=!1){const S=(qf(r)?b3:w3)(o,f,p,r),v=u3(o,typeof r=="string",x),E=r!==N.Fragment?{...v,...S,ref:a}:{},{children:A}=o,I=N.useMemo(()=>dr(A)?A.get():A,[A]);return N.createElement(r,{...E,children:I})}function K1(r){const o=[{},{}];return r==null||r.values.forEach((a,f)=>{o[0][f]=a.get(),o[1][f]=a.getVelocity()}),o}function Qf(r,o,a,f){if(typeof o=="function"){const[p,x]=K1(f);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=K1(f);o=o(a!==void 0?a:r.custom,p,x)}return o}function pc(r){return dr(r)?r.get():r}function T3({scrapeMotionValuesFromProps:r,createRenderState:o},a,f,p){return{latestValues:I3(a,f,p,r),renderState:o()}}function I3(r,o,a,f){const p={},x=f(r,{});for(const R in x)p[R]=pc(x[R]);let{initial:w,animate:S}=r;const v=Dc(r),E=sg(r);o&&E&&!v&&r.inherit!==!1&&(w===void 0&&(w=o.initial),S===void 0&&(S=o.animate));let A=a?a.initial===!1:!1;A=A||w===!1;const I=A?S:w;if(I&&typeof I!="boolean"&&!Mc(I)){const R=Array.isArray(I)?I:[I];for(let M=0;M<R.length;M++){const L=Qf(r,R[M]);if(L){const{transitionEnd:B,transition:j,...V}=L;for(const U in V){let F=V[U];if(Array.isArray(F)){const Q=A?F.length-1:0;F=F[Q]}F!==null&&(p[U]=F)}for(const U in B)p[U]=B[U]}}}return p}const dg=r=>(o,a)=>{const f=N.useContext(Oc),p=N.useContext(Pc),x=()=>T3(r,o,f,p);return a?x():bf(x)};function Jf(r,o,a){var x;const{style:f}=r,p={};for(const w in f)(dr(f[w])||o.style&&dr(o.style[w])||og(w,r)||((x=a==null?void 0:a.getValue(w))==null?void 0:x.liveStyle)!==void 0)&&(p[w]=f[w]);return p}const N3=dg({scrapeMotionValuesFromProps:Jf,createRenderState:Kf});function fg(r,o,a){const f=Jf(r,o,a);for(const p in r)if(dr(r[p])||dr(o[p])){const x=zo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;f[x]=r[p]}return f}const _3=dg({scrapeMotionValuesFromProps:fg,createRenderState:cg}),R3=Symbol.for("motionComponentSymbol");function _o(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function k3(r,o,a){return N.useCallback(f=>{f&&r.onMount&&r.onMount(f),o&&(f?o.mount(f):o.unmount()),a&&(typeof a=="function"?a(f):_o(a)&&(a.current=f))},[o])}const eh=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),P3="framerAppearId",hg="data-"+eh(P3),pg=N.createContext({});function O3(r,o,a,f,p){var B,j;const{visualElement:x}=N.useContext(Oc),w=N.useContext(rg),S=N.useContext(Pc),v=N.useContext(Xf).reducedMotion,E=N.useRef(null);f=f||w.renderer,!E.current&&f&&(E.current=f(r,{visualState:o,parent:x,props:a,presenceContext:S,blockInitialAnimation:S?S.initial===!1:!1,reducedMotionConfig:v}));const A=E.current,I=N.useContext(pg);A&&!A.projection&&p&&(A.type==="html"||A.type==="svg")&&M3(E.current,a,p,I);const R=N.useRef(!1);N.useInsertionEffect(()=>{A&&R.current&&A.update(a,S)});const M=a[hg],L=N.useRef(!!M&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,M))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,M)));return dm(()=>{A&&(R.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),L.current&&A.animationState&&A.animationState.animateChanges())}),N.useEffect(()=>{A&&(!L.current&&A.animationState&&A.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,M)}),L.current=!1),A.enteringChildren=void 0)}),A}function M3(r,o,a,f){const{layoutId:p,layout:x,drag:w,dragConstraints:S,layoutScroll:v,layoutRoot:E,layoutCrossfade:A}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:mg(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!w||S&&_o(S),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:f,crossfade:A,layoutScroll:v,layoutRoot:E})}function mg(r){if(r)return r.options.allowProjection!==!1?r.projection:mg(r.parent)}function bd(r,{forwardMotionProps:o=!1}={},a,f){a&&a3(a);const p=qf(r)?_3:N3;function x(S,v){let E;const A={...N.useContext(Xf),...S,layoutId:D3(S)},{isStatic:I}=A,R=f3(S),M=p(S,I);if(!I&&Sf){L3();const L=B3(A);E=L.MeasureLayout,R.visualElement=O3(r,M,A,f,L.ProjectionNode)}return y.jsxs(Oc.Provider,{value:R,children:[E&&R.visualElement?y.jsx(E,{visualElement:R.visualElement,...A}):null,A3(r,S,k3(M,R.visualElement,v),M,I,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const w=N.forwardRef(x);return w[R3]=r,w}function D3({layoutId:r}){const o=N.useContext(Ef).id;return o&&r!==void 0?o+"-"+r:r}function L3(r,o){N.useContext(rg).strict}function B3(r){const{drag:o,layout:a}=Bo;if(!o&&!a)return{};const f={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?f.MeasureLayout:void 0,ProjectionNode:f.ProjectionNode}}function j3(r,o){if(typeof Proxy>"u")return bd;const a=new Map,f=(x,w)=>bd(x,w,r,o),p=(x,w)=>f(x,w);return new Proxy(p,{get:(x,w)=>w==="create"?f:(a.has(w)||a.set(w,bd(w,void 0,r,o)),a.get(w))})}function gg({top:r,left:o,right:a,bottom:f}){return{x:{min:o,max:a},y:{min:r,max:f}}}function F3({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function V3(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),f=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:f.y,right:f.x}}function Sd(r){return r===void 0||r===1}function qd({scale:r,scaleX:o,scaleY:a}){return!Sd(r)||!Sd(o)||!Sd(a)}function $s(r){return qd(r)||xg(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function xg(r){return q1(r.x)||q1(r.y)}function q1(r){return r&&r!=="0%"}function Sc(r,o,a){const f=r-a,p=o*f;return a+p}function Q1(r,o,a,f,p){return p!==void 0&&(r=Sc(r,p,f)),Sc(r,a,f)+o}function Qd(r,o=0,a=1,f,p){r.min=Q1(r.min,o,a,f,p),r.max=Q1(r.max,o,a,f,p)}function yg(r,{x:o,y:a}){Qd(r.x,o.translate,o.scale,o.originPoint),Qd(r.y,a.translate,a.scale,a.originPoint)}const J1=.999999999999,ep=1.0000000000001;function z3(r,o,a,f=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,w;for(let S=0;S<p;S++){x=a[S],w=x.projectionDelta;const{visualElement:v}=x.options;v&&v.props.style&&v.props.style.display==="contents"||(f&&x.options.layoutScroll&&x.scroll&&x!==x.root&&ko(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),w&&(o.x*=w.x.scale,o.y*=w.y.scale,yg(r,w)),f&&$s(x.latestValues)&&ko(r,x.latestValues))}o.x<ep&&o.x>J1&&(o.x=1),o.y<ep&&o.y>J1&&(o.y=1)}function Ro(r,o){r.min=r.min+o,r.max=r.max+o}function tp(r,o,a,f,p=.5){const x=hn(r.min,r.max,p);Qd(r,o,a,x,f)}function ko(r,o){tp(r.x,o.x,o.scaleX,o.scale,o.originX),tp(r.y,o.y,o.scaleY,o.scale,o.originY)}function wg(r,o){return gg(V3(r.getBoundingClientRect(),o))}function U3(r,o,a){const f=wg(r,a),{scroll:p}=o;return p&&(Ro(f.x,p.offset.x),Ro(f.y,p.offset.y)),f}const np=()=>({translate:0,scale:1,origin:0,originPoint:0}),Po=()=>({x:np(),y:np()}),rp=()=>({min:0,max:0}),In=()=>({x:rp(),y:rp()}),Jd={current:null},vg={current:!1};function W3(){if(vg.current=!0,!!Sf)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Jd.current=r.matches;r.addEventListener("change",o),o()}else Jd.current=!1}const H3=new WeakMap;function G3(r,o,a){for(const f in o){const p=o[f],x=a[f];if(dr(p))r.addValue(f,p);else if(dr(x))r.addValue(f,Lo(p,{owner:r}));else if(x!==p)if(r.hasValue(f)){const w=r.getValue(f);w.liveStyle===!0?w.jump(p):w.hasAnimated||w.set(p)}else{const w=r.getStaticValue(f);r.addValue(f,Lo(w!==void 0?w:p,{owner:r}))}}for(const f in a)o[f]===void 0&&r.removeValue(f);return o}const ip=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class X3{scrapeMotionValuesFromProps(o,a,f){return{}}constructor({parent:o,props:a,presenceContext:f,reducedMotionConfig:p,blockInitialAnimation:x,visualState:w},S={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=Tr.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,an.render(this.render,!1,!0))};const{latestValues:v,renderState:E}=w;this.latestValues=v,this.baseTarget={...v},this.initialValues=a.initial?{...v}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=f,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=S,this.blockInitialAnimation=!!x,this.isControllingVariants=Dc(a),this.isVariantNode=sg(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:A,...I}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in I){const M=I[R];v[R]!==void 0&&dr(M)&&M.set(v[R])}}mount(o){var a;this.current=o,H3.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((f,p)=>this.bindToMotionValue(p,f)),vg.current||W3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jd.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),vs(this.notifyUpdate),vs(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const f=this.features[a];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const f=Uo.has(o);f&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",w=>{this.latestValues[o]=w,this.props.onUpdate&&an.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in Bo){const a=Bo[o];if(!a)continue;const{isEnabled:f,Feature:p}=a;if(!this.features[o]&&p&&f(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let f=0;f<ip.length;f++){const p=ip[f];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,w=o[x];w&&(this.propEventSubscriptions[p]=this.on(p,w))}this.prevMotionValues=G3(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const f=this.values.get(o);a!==f&&(f&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let f=this.values.get(o);return f===void 0&&a!==void 0&&(f=Lo(a===null?void 0:a,{owner:this}),this.addValue(o,f)),f}readValue(o,a){let f=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return f!=null&&(typeof f=="string"&&(fm(f)||pm(f))?f=parseFloat(f):!n3(f)&&Cs.test(a)&&(f=Zm(o,a)),this.setBaseTarget(o,dr(f)?f.get():f)),dr(f)?f.get():f}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let f;if(typeof a=="string"||typeof a=="object"){const w=Qf(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);w&&(f=w[o])}if(a&&f!==void 0)return f;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!dr(p)?p:this.initialValues[o]!==void 0&&f===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new _f),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Hf.render(this.render)}}class Cg extends X3{constructor(){super(...arguments),this.KeyframeResolver=Hv}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:f}){delete a[o],delete f[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;dr(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function Eg(r,{style:o,vars:a},f,p){const x=r.style;let w;for(w in o)x[w]=o[w];p==null||p.applyProjectionStyles(x,f);for(w in a)x.setProperty(w,a[w])}function Y3(r){return window.getComputedStyle(r)}class $3 extends Cg{constructor(){super(...arguments),this.type="html",this.renderInstance=Eg}readValueFromInstance(o,a){var f;if(Uo.has(a))return(f=this.projection)!=null&&f.isProjecting?Hd(a):cv(o,a);{const p=Y3(o),x=(Pf(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return wg(o,a)}build(o,a,f){Zf(o,a,f.transformTemplate)}scrapeMotionValuesFromProps(o,a,f){return Jf(o,a,f)}}const bg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z3(r,o,a,f){Eg(r,o,void 0,f);for(const p in o.attrs)r.setAttribute(bg.has(p)?p:eh(p),o.attrs[p])}class K3 extends Cg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=In}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Uo.has(a)){const f=$m(a);return f&&f.default||0}return a=bg.has(a)?a:eh(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,f){return fg(o,a,f)}build(o,a,f){lg(o,a,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(o,a,f,p){Z3(o,a,f,p)}mount(o){this.isSVGTag=ug(o.tagName),super.mount(o)}}const q3=(r,o)=>qf(r)?new K3(o):new $3(o,{allowProjection:r!==N.Fragment});function Mo(r,o,a){const f=r.getProps();return Qf(f,o,a!==void 0?a:f.custom,r)}const ef=r=>Array.isArray(r);function Q3(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Lo(a))}function J3(r){return ef(r)?r[r.length-1]||0:r}function eC(r,o){const a=Mo(r,o);let{transitionEnd:f={},transition:p={},...x}=a||{};x={...x,...f};for(const w in x){const S=J3(x[w]);Q3(r,w,S)}}function tC(r){return!!(dr(r)&&r.add)}function tf(r,o){const a=r.getValue("willChange");if(tC(a))return a.add(o);if(!a&&zi.WillChange){const f=new zi.WillChange("auto");r.addValue("willChange",f),f.add(o)}}function Sg(r){return r.props[hg]}const nC=r=>r!==null;function rC(r,{repeat:o,repeatType:a="loop"},f){const p=r.filter(nC),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const iC={type:"spring",stiffness:500,damping:25,restSpeed:10},sC=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),oC={type:"keyframes",duration:.8},aC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lC=(r,{keyframes:o})=>o.length>2?oC:Uo.has(r)?r.startsWith("scale")?sC(o[1]):iC:aC;function cC({when:r,delay:o,delayChildren:a,staggerChildren:f,staggerDirection:p,repeat:x,repeatType:w,repeatDelay:S,from:v,elapsed:E,...A}){return!!Object.keys(A).length}const th=(r,o,a,f={},p,x)=>w=>{const S=Uf(f,r)||{},v=S.delay||f.delay||0;let{elapsed:E=0}=f;E=E-xi(v);const A={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...S,delay:-E,onUpdate:R=>{o.set(R),S.onUpdate&&S.onUpdate(R)},onComplete:()=>{w(),S.onComplete&&S.onComplete()},name:r,motionValue:o,element:x?void 0:p};cC(S)||Object.assign(A,lC(r,A)),A.duration&&(A.duration=xi(A.duration)),A.repeatDelay&&(A.repeatDelay=xi(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let I=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(Zd(A),A.delay===0&&(I=!0)),(zi.instantAnimations||zi.skipAnimations)&&(I=!0,Zd(A),A.delay=0),A.allowFlatten=!S.type&&!S.ease,I&&!x&&o.get()!==void 0){const R=rC(A.keyframes,S);if(R!==void 0){an.update(()=>{A.onUpdate(R),A.onComplete()});return}}return S.isSync?new Vf(A):new Pv(A)};function uC({protectedKeys:r,needsAnimating:o},a){const f=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,f}function Ag(r,o,{delay:a=0,transitionOverride:f,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:w,...S}=o;f&&(x=f);const v=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const A in S){const I=r.getValue(A,r.latestValues[A]??null),R=S[A];if(R===void 0||E&&uC(E,A))continue;const M={delay:a,...Uf(x||{},A)},L=I.get();if(L!==void 0&&!I.isAnimating&&!Array.isArray(R)&&R===L&&!M.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const V=Sg(r);if(V){const U=window.MotionHandoffAnimation(V,A,an);U!==null&&(M.startTime=U,B=!0)}}tf(r,A),I.start(th(A,I,R,r.shouldReduceMotion&&Gm.has(A)?{type:!1}:M,r,B));const j=I.animation;j&&v.push(j)}return w&&Promise.all(v).then(()=>{an.update(()=>{w&&eC(r,w)})}),v}function Tg(r,o,a,f=0,p=1){const x=Array.from(r).sort((E,A)=>E.sortNodePosition(A)).indexOf(o),w=r.size,S=(w-1)*f;return typeof a=="function"?a(x,w):p===1?x*f:S-x*f}function nf(r,o,a={}){var v;const f=Mo(r,o,a.type==="exit"?(v=r.presenceContext)==null?void 0:v.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=f||{};a.transitionOverride&&(p=a.transitionOverride);const x=f?()=>Promise.all(Ag(r,f,a)):()=>Promise.resolve(),w=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:A=0,staggerChildren:I,staggerDirection:R}=p;return dC(r,o,E,A,I,R,a)}:()=>Promise.resolve(),{when:S}=p;if(S){const[E,A]=S==="beforeChildren"?[x,w]:[w,x];return E().then(()=>A())}else return Promise.all([x(),w(a.delay)])}function dC(r,o,a=0,f=0,p=0,x=1,w){const S=[];for(const v of r.variantChildren)v.notify("AnimationStart",o),S.push(nf(v,o,{...w,delay:a+(typeof f=="function"?0:f)+Tg(r.variantChildren,v,f,p,x)}).then(()=>v.notify("AnimationComplete",o)));return Promise.all(S)}function fC(r,o,a={}){r.notify("AnimationStart",o);let f;if(Array.isArray(o)){const p=o.map(x=>nf(r,x,a));f=Promise.all(p)}else if(typeof o=="string")f=nf(r,o,a);else{const p=typeof o=="function"?Mo(r,o,a.custom):o;f=Promise.all(Ag(r,p,a))}return f.then(()=>{r.notify("AnimationComplete",o)})}function Ig(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let f=0;f<a;f++)if(o[f]!==r[f])return!1;return!0}const hC=$f.length;function Ng(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?Ng(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<hC;a++){const f=$f[a],p=r.props[f];(za(p)||p===!1)&&(o[f]=p)}return o}const pC=[...Yf].reverse(),mC=Yf.length;function gC(r){return o=>Promise.all(o.map(({animation:a,options:f})=>fC(r,a,f)))}function xC(r){let o=gC(r),a=sp(),f=!0;const p=v=>(E,A)=>{var R;const I=Mo(r,A,v==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(I){const{transition:M,transitionEnd:L,...B}=I;E={...E,...B,...L}}return E};function x(v){o=v(r)}function w(v){const{props:E}=r,A=Ng(r.parent)||{},I=[],R=new Set;let M={},L=1/0;for(let j=0;j<mC;j++){const V=pC[j],U=a[V],F=E[V]!==void 0?E[V]:A[V],Q=za(F),ne=V===v?U.isActive:null;ne===!1&&(L=j);let te=F===A[V]&&F!==E[V]&&Q;if(te&&f&&r.manuallyAnimateOnMount&&(te=!1),U.protectedKeys={...M},!U.isActive&&ne===null||!F&&!U.prevProp||Mc(F)||typeof F=="boolean")continue;const q=yC(U.prevProp,F);let ce=q||V===v&&U.isActive&&!te&&Q||j>L&&Q,K=!1;const Te=Array.isArray(F)?F:[F];let Be=Te.reduce(p(V),{});ne===!1&&(Be={});const{prevResolvedValues:Ie={}}=U,Le={...Ie,...Be},be=pe=>{ce=!0,R.has(pe)&&(K=!0,R.delete(pe)),U.needsAnimating[pe]=!0;const me=r.getValue(pe);me&&(me.liveStyle=!1)};for(const pe in Le){const me=Be[pe],Ve=Ie[pe];if(M.hasOwnProperty(pe))continue;let ue=!1;ef(me)&&ef(Ve)?ue=!Ig(me,Ve):ue=me!==Ve,ue?me!=null?be(pe):R.add(pe):me!==void 0&&R.has(pe)?be(pe):U.protectedKeys[pe]=!0}U.prevProp=F,U.prevResolvedValues=Be,U.isActive&&(M={...M,...Be}),f&&r.blockInitialAnimation&&(ce=!1);const J=te&&q;ce&&(!J||K)&&I.push(...Te.map(pe=>{const me={type:V};if(typeof pe=="string"&&f&&!J&&r.manuallyAnimateOnMount&&r.parent){const{parent:Ve}=r,ue=Mo(Ve,pe);if(Ve.enteringChildren&&ue){const{delayChildren:W}=ue.transition||{};me.delay=Tg(Ve.enteringChildren,r,W)}}return{animation:pe,options:me}}))}if(R.size){const j={};if(typeof E.initial!="boolean"){const V=Mo(r,Array.isArray(E.initial)?E.initial[0]:E.initial);V&&V.transition&&(j.transition=V.transition)}R.forEach(V=>{const U=r.getBaseTarget(V),F=r.getValue(V);F&&(F.liveStyle=!0),j[V]=U??null}),I.push({animation:j})}let B=!!I.length;return f&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),f=!1,B?o(I):Promise.resolve()}function S(v,E){var I;if(a[v].isActive===E)return Promise.resolve();(I=r.variantChildren)==null||I.forEach(R=>{var M;return(M=R.animationState)==null?void 0:M.setActive(v,E)}),a[v].isActive=E;const A=w(v);for(const R in a)a[R].protectedKeys={};return A}return{animateChanges:w,setActive:S,setAnimateFunction:x,getState:()=>a,reset:()=>{a=sp(),f=!0}}}function yC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!Ig(o,r):!1}function Ys(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sp(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class Es{constructor(o){this.isMounted=!1,this.node=o}update(){}}class wC extends Es{constructor(o){super(o),o.animationState||(o.animationState=xC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Mc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let vC=0;class CC extends Es{constructor(){super(...arguments),this.id=vC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===f)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const EC={animation:{Feature:wC},exit:{Feature:CC}};function Wa(r,o,a,f={passive:!0}){return r.addEventListener(o,a,f),()=>r.removeEventListener(o,a)}function Ka(r){return{point:{x:r.pageX,y:r.pageY}}}const bC=r=>o=>Gf(o)&&r(o,Ka(o));function Oa(r,o,a,f){return Wa(r,o,bC(a),f)}const _g=1e-4,SC=1-_g,AC=1+_g,Rg=.01,TC=0-Rg,IC=0+Rg;function yr(r){return r.max-r.min}function NC(r,o,a){return Math.abs(r-o)<=a}function op(r,o,a,f=.5){r.origin=f,r.originPoint=hn(o.min,o.max,r.origin),r.scale=yr(a)/yr(o),r.translate=hn(a.min,a.max,r.origin)-r.originPoint,(r.scale>=SC&&r.scale<=AC||isNaN(r.scale))&&(r.scale=1),(r.translate>=TC&&r.translate<=IC||isNaN(r.translate))&&(r.translate=0)}function Ma(r,o,a,f){op(r.x,o.x,a.x,f?f.originX:void 0),op(r.y,o.y,a.y,f?f.originY:void 0)}function ap(r,o,a){r.min=a.min+o.min,r.max=r.min+yr(o)}function _C(r,o,a){ap(r.x,o.x,a.x),ap(r.y,o.y,a.y)}function lp(r,o,a){r.min=o.min-a.min,r.max=r.min+yr(o)}function Da(r,o,a){lp(r.x,o.x,a.x),lp(r.y,o.y,a.y)}function Yr(r){return[r("x"),r("y")]}const kg=({current:r})=>r?r.ownerDocument.defaultView:null,cp=(r,o)=>Math.abs(r-o);function RC(r,o){const a=cp(r.x,o.x),f=cp(r.y,o.y);return Math.sqrt(a**2+f**2)}class Pg{constructor(o,a,{transformPagePoint:f,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:w=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Td(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=RC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!L)return;const{point:B}=R,{timestamp:j}=tr;this.history.push({...B,timestamp:j});const{onStart:V,onMove:U}=this.handlers;M||(V&&V(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,R)},this.handlePointerMove=(R,M)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=Ad(M,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(R,M)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Td(R.type==="pointercancel"?this.lastMoveEventInfo:Ad(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,V),B&&B(R,V)},!Gf(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=f,this.distanceThreshold=w,this.contextWindow=p||window;const S=Ka(o),v=Ad(S,this.transformPagePoint),{point:E}=v,{timestamp:A}=tr;this.history=[{...E,timestamp:A}];const{onSessionStart:I}=a;I&&I(o,Td(v,this.history)),this.removeListeners=Ya(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),vs(this.updatePoint)}}function Ad(r,o){return o?{point:o(r.point)}:r}function up(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Td({point:r},o){return{point:r,delta:up(r,Og(o)),offset:up(r,kC(o)),velocity:PC(o,.1)}}function kC(r){return r[0]}function Og(r){return r[r.length-1]}function PC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,f=null;const p=Og(r);for(;a>=0&&(f=r[a],!(p.timestamp-f.timestamp>xi(o)));)a--;if(!f)return{x:0,y:0};const x=yi(p.timestamp-f.timestamp);if(x===0)return{x:0,y:0};const w={x:(p.x-f.x)/x,y:(p.y-f.y)/x};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}function OC(r,{min:o,max:a},f){return o!==void 0&&r<o?r=f?hn(o,r,f.min):Math.max(r,o):a!==void 0&&r>a&&(r=f?hn(a,r,f.max):Math.min(r,a)),r}function dp(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function MC(r,{top:o,left:a,bottom:f,right:p}){return{x:dp(r.x,a,p),y:dp(r.y,o,f)}}function fp(r,o){let a=o.min-r.min,f=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,f]=[f,a]),{min:a,max:f}}function DC(r,o){return{x:fp(r.x,o.x),y:fp(r.y,o.y)}}function LC(r,o){let a=.5;const f=yr(r),p=yr(o);return p>f?a=ja(o.min,o.max-f,r.min):f>p&&(a=ja(r.min,r.max-p,o.min)),Vi(0,1,a)}function BC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const rf=.35;function jC(r=rf){return r===!1?r=0:r===!0&&(r=rf),{x:hp(r,"left","right"),y:hp(r,"top","bottom")}}function hp(r,o,a){return{min:pp(r,o),max:pp(r,a)}}function pp(r,o){return typeof r=="number"?r:r[o]||0}const FC=new WeakMap;class VC{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:f}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=I=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Ka(I).point)},w=(I,R)=>{const{drag:M,dragPropagation:L,onDragStart:B}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$v(M),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr(V=>{let U=this.getAxisMotionValue(V).get()||0;if(wi.test(U)){const{projection:F}=this.visualElement;if(F&&F.layout){const Q=F.layout.layoutBox[V];Q&&(U=yr(Q)*(parseFloat(U)/100))}}this.originPoint[V]=U}),B&&an.postRender(()=>B(I,R)),tf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},S=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R;const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:V}=R;if(L&&this.currentDirection===null){this.currentDirection=zC(V),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",R.point,V),this.updateAxis("y",R.point,V),this.visualElement.render(),j&&j(I,R)},v=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R,this.stop(I,R),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Yr(I=>{var R;return this.getAnimationState(I)==="paused"&&((R=this.getAxisMotionValue(I).animation)==null?void 0:R.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Pg(o,{onSessionStart:x,onStart:w,onMove:S,onSessionEnd:v,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:f,contextWindow:kg(this.visualElement)})}stop(o,a){const f=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!f)return;const{velocity:w}=p;this.startAnimation(w);const{onDragEnd:S}=this.getProps();S&&an.postRender(()=>S(f,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,f){const{drag:p}=this.getProps();if(!f||!oc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let w=this.originPoint[o]+f[o];this.constraints&&this.constraints[o]&&(w=OC(w,this.constraints[o],this.elastic[o])),x.set(w)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&_o(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&f?this.constraints=MC(f.layoutBox,o):this.constraints=!1,this.elastic=jC(a),p!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&Yr(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=BC(f.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!_o(o))return!1;const f=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=U3(f,p.root,this.visualElement.getTransformPagePoint());let w=DC(p.layout.layoutBox,x);if(a){const S=a(F3(w));this.hasMutatedConstraints=!!S,S&&(w=gg(S))}return w}startAnimation(o){const{drag:a,dragMomentum:f,dragElastic:p,dragTransition:x,dragSnapToOrigin:w,onDragTransitionEnd:S}=this.getProps(),v=this.constraints||{},E=Yr(A=>{if(!oc(A,a,this.currentDirection))return;let I=v&&v[A]||{};w&&(I={min:0,max:0});const R=p?200:1e6,M=p?40:1e7,L={type:"inertia",velocity:f?o[A]:0,bounceStiffness:R,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...x,...I};return this.startAxisValueAnimation(A,L)});return Promise.all(E).then(S)}startAxisValueAnimation(o,a){const f=this.getAxisMotionValue(o);return tf(this.visualElement,o),f.start(th(o,f,0,a,this.visualElement,!1))}stopAnimation(){Yr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Yr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,f=this.visualElement.getProps(),p=f[a];return p||this.visualElement.getValue(o,(f.initial?f.initial[o]:void 0)||0)}snapToCursor(o){Yr(a=>{const{drag:f}=this.getProps();if(!oc(a,f,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:w,max:S}=p.layout.layoutBox[a];x.set(o[a]-hn(w,S,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:f}=this.visualElement;if(!_o(a)||!f||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Yr(w=>{const S=this.getAxisMotionValue(w);if(S&&this.constraints!==!1){const v=S.get();p[w]=LC({min:v,max:v},this.constraints[w])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),Yr(w=>{if(!oc(w,o,null))return;const S=this.getAxisMotionValue(w),{min:v,max:E}=this.constraints[w];S.set(hn(v,E,p[w]))})}addListeners(){if(!this.visualElement.current)return;FC.set(this.visualElement,this);const o=this.visualElement.current,a=Oa(o,"pointerdown",v=>{const{drag:E,dragListener:A=!0}=this.getProps();E&&A&&this.start(v)}),f=()=>{const{dragConstraints:v}=this.getProps();_o(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",f);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),an.read(f);const w=Wa(window,"resize",()=>this.scalePositionWithinConstraints()),S=p.addEventListener("didUpdate",({delta:v,hasLayoutChanged:E})=>{this.isDragging&&E&&(Yr(A=>{const I=this.getAxisMotionValue(A);I&&(this.originPoint[A]+=v[A].translate,I.set(I.get()+v[A].translate))}),this.visualElement.render())});return()=>{w(),a(),x(),S&&S()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:f=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:w=rf,dragMomentum:S=!0}=o;return{...o,drag:a,dragDirectionLock:f,dragPropagation:p,dragConstraints:x,dragElastic:w,dragMomentum:S}}}function oc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function zC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class UC extends Es{constructor(o){super(o),this.removeGroupControls=$r,this.removeListeners=$r,this.controls=new VC(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$r}unmount(){this.removeGroupControls(),this.removeListeners()}}const mp=r=>(o,a)=>{r&&an.postRender(()=>r(o,a))};class WC extends Es{constructor(){super(...arguments),this.removePointerDownListener=$r}onPointerDown(o){this.session=new Pg(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kg(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:f,onPanEnd:p}=this.node.getProps();return{onSessionStart:mp(o),onStart:mp(a),onMove:f,onEnd:(x,w)=>{delete this.session,p&&an.postRender(()=>p(x,w))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Na={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(gt.test(r))r=parseFloat(r);else return r;const a=gp(r,o.target.x),f=gp(r,o.target.y);return`${a}% ${f}%`}},HC={correct:(r,{treeScale:o,projectionDelta:a})=>{const f=r,p=Cs.parse(r);if(p.length>5)return f;const x=Cs.createTransformer(r),w=typeof p[0]!="number"?1:0,S=a.x.scale*o.x,v=a.y.scale*o.y;p[0+w]/=S,p[1+w]/=v;const E=hn(S,v,.5);return typeof p[2+w]=="number"&&(p[2+w]/=E),typeof p[3+w]=="number"&&(p[3+w]/=E),x(p)}};let Id=!1;class GC extends N.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f,layoutId:p}=this.props,{projection:x}=o;h3(XC),x&&(a.group&&a.group.add(x),f&&f.register&&p&&f.register(x),Id&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),mc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:f,drag:p,isPresent:x}=this.props,{projection:w}=f;return w&&(w.isPresent=x,Id=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?w.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?w.promote():w.relegate()||an.postRender(()=>{const S=w.getStack();(!S||!S.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Hf.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:f}=this.props,{projection:p}=o;Id=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),f&&f.deregister&&f.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function Mg(r){const[o,a]=ng(),f=N.useContext(Ef);return y.jsx(GC,{...r,layoutGroup:f,switchLayoutGroup:N.useContext(pg),isPresent:o,safeToRemove:a})}const XC={borderRadius:{...Na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Na,borderTopRightRadius:Na,borderBottomLeftRadius:Na,borderBottomRightRadius:Na,boxShadow:HC};function YC(r,o,a){const f=dr(r)?r:Lo(r);return f.start(th("",f,o,a)),f.animation}const $C=(r,o)=>r.depth-o.depth;class ZC{constructor(){this.children=[],this.isDirty=!1}add(o){Af(this.children,o),this.isDirty=!0}remove(o){Tf(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort($C),this.isDirty=!1,this.children.forEach(o)}}function KC(r,o){const a=Tr.now(),f=({timestamp:p})=>{const x=p-a;x>=o&&(vs(f),r(x-o))};return an.setup(f,!0),()=>vs(f)}const Dg=["TopLeft","TopRight","BottomLeft","BottomRight"],qC=Dg.length,xp=r=>typeof r=="string"?parseFloat(r):r,yp=r=>typeof r=="number"||gt.test(r);function QC(r,o,a,f,p,x){p?(r.opacity=hn(0,a.opacity??1,JC(f)),r.opacityExit=hn(o.opacity??1,0,eE(f))):x&&(r.opacity=hn(o.opacity??1,a.opacity??1,f));for(let w=0;w<qC;w++){const S=`border${Dg[w]}Radius`;let v=wp(o,S),E=wp(a,S);if(v===void 0&&E===void 0)continue;v||(v=0),E||(E=0),v===0||E===0||yp(v)===yp(E)?(r[S]=Math.max(hn(xp(v),xp(E),f),0),(wi.test(E)||wi.test(v))&&(r[S]+="%")):r[S]=E}(o.rotate||a.rotate)&&(r.rotate=hn(o.rotate||0,a.rotate||0,f))}function wp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const JC=Lg(0,.5,Em),eE=Lg(.5,.95,$r);function Lg(r,o,a){return f=>f<r?0:f>o?1:a(ja(r,o,f))}function vp(r,o){r.min=o.min,r.max=o.max}function Xr(r,o){vp(r.x,o.x),vp(r.y,o.y)}function Cp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function Ep(r,o,a,f,p){return r-=o,r=Sc(r,1/a,f),p!==void 0&&(r=Sc(r,1/p,f)),r}function tE(r,o=0,a=1,f=.5,p,x=r,w=r){if(wi.test(o)&&(o=parseFloat(o),o=hn(w.min,w.max,o/100)-w.min),typeof o!="number")return;let S=hn(x.min,x.max,f);r===x&&(S-=o),r.min=Ep(r.min,o,a,S,p),r.max=Ep(r.max,o,a,S,p)}function bp(r,o,[a,f,p],x,w){tE(r,o[a],o[f],o[p],o.scale,x,w)}const nE=["x","scaleX","originX"],rE=["y","scaleY","originY"];function Sp(r,o,a,f){bp(r.x,o,nE,a?a.x:void 0,f?f.x:void 0),bp(r.y,o,rE,a?a.y:void 0,f?f.y:void 0)}function Ap(r){return r.translate===0&&r.scale===1}function Bg(r){return Ap(r.x)&&Ap(r.y)}function Tp(r,o){return r.min===o.min&&r.max===o.max}function iE(r,o){return Tp(r.x,o.x)&&Tp(r.y,o.y)}function Ip(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function jg(r,o){return Ip(r.x,o.x)&&Ip(r.y,o.y)}function Np(r){return yr(r.x)/yr(r.y)}function _p(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class sE{constructor(){this.members=[]}add(o){Af(this.members,o),o.scheduleRender()}remove(o){if(Tf(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let f;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){f=x;break}}return f?(this.promote(f),!0):!1}promote(o,a){const f=this.lead;if(o!==f&&(this.prevLead=f,this.lead=o,o.show(),f)){f.instance&&f.scheduleRender(),o.scheduleRender(),o.resumeFrom=f,a&&(o.resumeFrom.preserveOpacity=!0),f.snapshot&&(o.snapshot=f.snapshot,o.snapshot.latestValues=f.animationValues||f.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:f}=o;a.onExitComplete&&a.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oE(r,o,a){let f="";const p=r.x.translate/o.x,x=r.y.translate/o.y,w=(a==null?void 0:a.z)||0;if((p||x||w)&&(f=`translate3d(${p}px, ${x}px, ${w}px) `),(o.x!==1||o.y!==1)&&(f+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:A,rotateX:I,rotateY:R,skewX:M,skewY:L}=a;E&&(f=`perspective(${E}px) ${f}`),A&&(f+=`rotate(${A}deg) `),I&&(f+=`rotateX(${I}deg) `),R&&(f+=`rotateY(${R}deg) `),M&&(f+=`skewX(${M}deg) `),L&&(f+=`skewY(${L}deg) `)}const S=r.x.scale*o.x,v=r.y.scale*o.y;return(S!==1||v!==1)&&(f+=`scale(${S}, ${v})`),f||"none"}const Nd=["","X","Y","Z"],aE=1e3;let lE=0;function _d(r,o,a,f){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),f&&(f[r]=0))}function Fg(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=Sg(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",an,!(p||x))}const{parent:f}=r;f&&!f.hasCheckedOptimisedAppear&&Fg(f)}function Vg({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:f,resetTransform:p}){return class{constructor(w={},S=o==null?void 0:o()){this.id=lE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dE),this.nodes.forEach(mE),this.nodes.forEach(gE),this.nodes.forEach(fE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=S?S.root||S:this,this.path=S?[...S.path,S]:[],this.parent=S,this.depth=S?S.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZC)}addEventListener(w,S){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new _f),this.eventHandlers.get(w).add(S)}notifyListeners(w,...S){const v=this.eventHandlers.get(w);v&&v.notify(...S)}hasListeners(w){return this.eventHandlers.has(w)}mount(w){if(this.instance)return;this.isSVG=tg(w)&&!e3(w),this.instance=w;const{layoutId:S,layout:v,visualElement:E}=this.options;if(E&&!E.current&&E.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||S)&&(this.isLayoutDirty=!0),r){let A,I=0;const R=()=>this.root.updateBlockedByResize=!1;an.read(()=>{I=window.innerWidth}),r(w,()=>{const M=window.innerWidth;M!==I&&(I=M,this.root.updateBlockedByResize=!0,A&&A(),A=KC(R,250),mc.hasAnimatedSinceResize&&(mc.hasAnimatedSinceResize=!1,this.nodes.forEach(Pp)))})}S&&this.root.registerSharedNode(S,this),this.options.animate!==!1&&E&&(S||v)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:I,hasRelativeLayoutChanged:R,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||CE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=E.getProps(),V=!this.targetLayout||!jg(this.targetLayout,M),U=!I&&R;if(this.options.layoutRoot||this.resumeFrom||U||I&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Uf(L,"layout"),onPlay:B,onComplete:j};(E.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(A,U)}else I||Pp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xE),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fg(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const I=this.path[A];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:S,layout:v}=this.options;if(S===void 0&&!v)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pE),this.nodes.forEach(cE),this.nodes.forEach(uE)):this.nodes.forEach(kp),this.clearAllSnapshots();const S=Tr.now();tr.delta=Vi(0,1e3/60,S-tr.timestamp),tr.timestamp=S,tr.isProcessing=!0,xd.update.process(tr),xd.preRender.process(tr),xd.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hE),this.sharedNodes.forEach(yE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yr(this.snapshot.measuredBox.x)&&!yr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:S}=this.options;S&&S.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let S=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(S=!1),S&&this.instance){const v=f(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:v,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!p)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,S=this.projectionDelta&&!Bg(this.projectionDelta),v=this.getTransformTemplate(),E=v?v(this.latestValues,""):void 0,A=E!==this.prevTransformTemplateValue;w&&this.instance&&(S||$s(this.latestValues)||A)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const S=this.measurePageBox();let v=this.removeElementScroll(S);return w&&(v=this.removeTransform(v)),EE(v),{animationId:this.root.animationId,measuredBox:S,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:w}=this.options;if(!w)return In();const S=w.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(bE))){const{scroll:A}=this.root;A&&(Ro(S.x,A.offset.x),Ro(S.y,A.offset.y))}return S}removeElementScroll(w){var v;const S=In();if(Xr(S,w),(v=this.scroll)!=null&&v.wasRoot)return S;for(let E=0;E<this.path.length;E++){const A=this.path[E],{scroll:I,options:R}=A;A!==this.root&&I&&R.layoutScroll&&(I.wasRoot&&Xr(S,w),Ro(S.x,I.offset.x),Ro(S.y,I.offset.y))}return S}applyTransform(w,S=!1){const v=In();Xr(v,w);for(let E=0;E<this.path.length;E++){const A=this.path[E];!S&&A.options.layoutScroll&&A.scroll&&A!==A.root&&ko(v,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),$s(A.latestValues)&&ko(v,A.latestValues)}return $s(this.latestValues)&&ko(v,this.latestValues),v}removeTransform(w){const S=In();Xr(S,w);for(let v=0;v<this.path.length;v++){const E=this.path[v];if(!E.instance||!$s(E.latestValues))continue;qd(E.latestValues)&&E.updateSnapshot();const A=In(),I=E.measurePageBox();Xr(A,I),Sp(S,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,A)}return $s(this.latestValues)&&Sp(S,this.latestValues),S}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var R;const S=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=S.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=S.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=S.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==S;if(!(w||v&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:I}=this.options;if(!(!this.layout||!(A||I))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const M=this.getClosestProjectingParent();M&&M.layout&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),Da(this.relativeTargetOrigin,this.layout.layoutBox,M.layout.layoutBox),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_C(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xr(this.target,this.layout.layoutBox),yg(this.target,this.targetDelta)):Xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const M=this.getClosestProjectingParent();M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?(this.relativeParent=M,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),Da(this.relativeTargetOrigin,this.target,M.target),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qd(this.parent.latestValues)||xg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const w=this.getLead(),S=!!this.resumingFrom||this!==w;let v=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(v=!1),S&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(v=!1),v)return;const{layout:E,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||A))return;Xr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;z3(this.layoutCorrected,this.treeScale,this.path,S),w.layout&&!w.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(w.target=w.layout.layoutBox,w.targetWithTransforms=In());const{target:M}=w;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cp(this.prevProjectionDelta.x,this.projectionDelta.x),Cp(this.prevProjectionDelta.y,this.projectionDelta.y)),Ma(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!_p(this.projectionDelta.x,this.prevProjectionDelta.x)||!_p(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var S;if((S=this.options.visualElement)==null||S.scheduleRender(),w){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Po(),this.projectionDelta=Po(),this.projectionDeltaWithTransform=Po()}setAnimationOrigin(w,S=!1){const v=this.snapshot,E=v?v.latestValues:{},A={...this.latestValues},I=Po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!S;const R=In(),M=v?v.source:void 0,L=this.layout?this.layout.source:void 0,B=M!==L,j=this.getStack(),V=!j||j.members.length<=1,U=!!(B&&!V&&this.options.crossfade===!0&&!this.path.some(vE));this.animationProgress=0;let F;this.mixTargetDelta=Q=>{const ne=Q/1e3;Op(I.x,w.x,ne),Op(I.y,w.y,ne),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Da(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wE(this.relativeTarget,this.relativeTargetOrigin,R,ne),F&&iE(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=In()),Xr(F,this.relativeTarget)),B&&(this.animationValues=A,QC(A,E,this.latestValues,ne,U,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){var S,v,E;this.notifyListeners("animationStart"),(S=this.currentAnimation)==null||S.stop(),(E=(v=this.resumingFrom)==null?void 0:v.currentAnimation)==null||E.stop(),this.pendingAnimation&&(vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{mc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Lo(0)),this.currentAnimation=YC(this.motionValue,[0,1e3],{...w,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),w.onUpdate&&w.onUpdate(A)},onStop:()=>{},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:S,target:v,layout:E,latestValues:A}=w;if(!(!S||!v||!E)){if(this!==w&&this.layout&&E&&zg(this.options.animationType,this.layout.layoutBox,E.layoutBox)){v=this.target||In();const I=yr(this.layout.layoutBox.x);v.x.min=w.target.x.min,v.x.max=v.x.min+I;const R=yr(this.layout.layoutBox.y);v.y.min=w.target.y.min,v.y.max=v.y.min+R}Xr(S,v),ko(S,A),Ma(this.projectionDeltaWithTransform,this.layoutCorrected,S,A)}}registerSharedNode(w,S){this.sharedNodes.has(w)||this.sharedNodes.set(w,new sE),this.sharedNodes.get(w).add(S);const E=S.options.initialPromotionConfig;S.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(S):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var S;const{layoutId:w}=this.options;return w?((S=this.getStack())==null?void 0:S.lead)||this:this}getPrevLead(){var S;const{layoutId:w}=this.options;return w?(S=this.getStack())==null?void 0:S.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:S,preserveFollowOpacity:v}={}){const E=this.getStack();E&&E.promote(this,v),w&&(this.projectionDelta=void 0,this.needsReset=!0),S&&this.setOptions({transition:S})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let S=!1;const{latestValues:v}=w;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(S=!0),!S)return;const E={};v.z&&_d("z",w,E,this.animationValues);for(let A=0;A<Nd.length;A++)_d(`rotate${Nd[A]}`,w,E,this.animationValues),_d(`skew${Nd[A]}`,w,E,this.animationValues);w.render();for(const A in E)w.setStaticValue(A,E[A]),this.animationValues&&(this.animationValues[A]=E[A]);w.scheduleRender()}applyProjectionStyles(w,S){if(!this.instance||this.isSVG)return;if(!this.isVisible){w.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,w.visibility="",w.opacity="",w.pointerEvents=pc(S==null?void 0:S.pointerEvents)||"",w.transform=v?v(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=pc(S==null?void 0:S.pointerEvents)||""),this.hasProjected&&!$s(this.latestValues)&&(w.transform=v?v({},""):"none",this.hasProjected=!1);return}w.visibility="";const A=E.animationValues||E.latestValues;this.applyTransformsToTarget();let I=oE(this.projectionDeltaWithTransform,this.treeScale,A);v&&(I=v(A,I)),w.transform=I;const{x:R,y:M}=this.projectionDelta;w.transformOrigin=`${R.origin*100}% ${M.origin*100}% 0`,E.animationValues?w.opacity=E===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:w.opacity=E===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const L in Ua){if(A[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:V}=Ua[L],U=I==="none"?A[L]:B(A[L],E);if(j){const F=j.length;for(let Q=0;Q<F;Q++)w[j[Q]]=U}else V?this.options.visualElement.renderState.vars[L]=U:w[L]=U}this.options.layoutId&&(w.pointerEvents=E===this?pc(S==null?void 0:S.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var S;return(S=w.currentAnimation)==null?void 0:S.stop()}),this.root.nodes.forEach(Rp),this.root.sharedNodes.clear()}}}function cE(r){r.updateLayout()}function uE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:p}=r.layout,{animationType:x}=r.options,w=o.source!==r.layout.source;x==="size"?Yr(I=>{const R=w?o.measuredBox[I]:o.layoutBox[I],M=yr(R);R.min=f[I].min,R.max=R.min+M}):zg(x,o.layoutBox,f)&&Yr(I=>{const R=w?o.measuredBox[I]:o.layoutBox[I],M=yr(f[I]);R.max=R.min+M,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[I].max=r.relativeTarget[I].min+M)});const S=Po();Ma(S,f,o.layoutBox);const v=Po();w?Ma(v,r.applyTransform(p,!0),o.measuredBox):Ma(v,f,o.layoutBox);const E=!Bg(S);let A=!1;if(!r.resumeFrom){const I=r.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:R,layout:M}=I;if(R&&M){const L=In();Da(L,o.layoutBox,R.layoutBox);const B=In();Da(B,f,M.layoutBox),jg(L,B)||(A=!0),I.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=I)}}}r.notifyListeners("didUpdate",{layout:f,snapshot:o,delta:v,layoutDelta:S,hasLayoutChanged:E,hasRelativeLayoutChanged:A})}else if(r.isLead()){const{onExitComplete:f}=r.options;f&&f()}r.options.transition=void 0}function dE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function fE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function hE(r){r.clearSnapshot()}function Rp(r){r.clearMeasurements()}function kp(r){r.isLayoutDirty=!1}function pE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Pp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function mE(r){r.resolveTargetDelta()}function gE(r){r.calcProjection()}function xE(r){r.resetSkewAndRotation()}function yE(r){r.removeLeadSnapshot()}function Op(r,o,a){r.translate=hn(o.translate,0,a),r.scale=hn(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Mp(r,o,a,f){r.min=hn(o.min,a.min,f),r.max=hn(o.max,a.max,f)}function wE(r,o,a,f){Mp(r.x,o.x,a.x,f),Mp(r.y,o.y,a.y,f)}function vE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const CE={duration:.45,ease:[.4,0,.1,1]},Dp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Lp=Dp("applewebkit/")&&!Dp("chrome/")?Math.round:$r;function Bp(r){r.min=Lp(r.min),r.max=Lp(r.max)}function EE(r){Bp(r.x),Bp(r.y)}function zg(r,o,a){return r==="position"||r==="preserve-aspect"&&!NC(Np(o),Np(a),.2)}function bE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const SE=Vg({attachResizeListener:(r,o)=>Wa(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rd={current:void 0},Ug=Vg({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Rd.current){const r=new SE({});r.mount(window),r.setOptions({layoutScroll:!0}),Rd.current=r}return Rd.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),AE={pan:{Feature:WC},drag:{Feature:UC,ProjectionNode:Ug,MeasureLayout:Mg}};function jp(r,o,a){const{props:f}=r;r.animationState&&f.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=f[p];x&&an.postRender(()=>x(o,Ka(o)))}class TE extends Es{mount(){const{current:o}=this.node;o&&(this.unmount=Zv(o,(a,f)=>(jp(this.node,f,"Start"),p=>jp(this.node,p,"End"))))}unmount(){}}class IE extends Es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(Wa(this.node.current,"focus",()=>this.onFocus()),Wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fp(r,o,a){const{props:f}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&f.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=f[p];x&&an.postRender(()=>x(o,Ka(o)))}class NE extends Es{mount(){const{current:o}=this.node;o&&(this.unmount=Jv(o,(a,f)=>(Fp(this.node,f,"Start"),(p,{success:x})=>Fp(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sf=new WeakMap,kd=new WeakMap,_E=r=>{const o=sf.get(r.target);o&&o(r)},RE=r=>{r.forEach(_E)};function kE({root:r,...o}){const a=r||document;kd.has(a)||kd.set(a,{});const f=kd.get(a),p=JSON.stringify(o);return f[p]||(f[p]=new IntersectionObserver(RE,{root:r,...o})),f[p]}function PE(r,o,a){const f=kE(o);return sf.set(r,a),f.observe(r),()=>{sf.delete(r),f.unobserve(r)}}const OE={some:0,all:1};class ME extends Es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:f,amount:p="some",once:x}=o,w={root:a?a.current:void 0,rootMargin:f,threshold:typeof p=="number"?p:OE[p]},S=v=>{const{isIntersecting:E}=v;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:A,onViewportLeave:I}=this.node.getProps(),R=E?A:I;R&&R(v)};return PE(this.node.current,w,S)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(DE(o,a))&&this.startObserver()}unmount(){}}function DE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const LE={inView:{Feature:ME},tap:{Feature:NE},focus:{Feature:IE},hover:{Feature:TE}},BE={layout:{ProjectionNode:Ug,MeasureLayout:Mg}},jE={...EC,...LE,...AE,...BE},si=j3(jE,q3),FE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=N.useContext(Xn),[x,w]=N.useState(""),[S,v]=N.useState(""),[E,A]=N.useState(""),[I,R]=N.useState(null),[M,L]=N.useState(null),[B,j]=N.useState(""),[V,U]=N.useState(0),[F,Q]=N.useState({x:0,y:0}),[ne,te]=N.useState(1),[q,ce]=N.useState(null),[K,Te]=N.useState(!1),[Be,Ie]=N.useState(!1),[Le,be]=N.useState({}),[J,Fe]=N.useState({}),[pe,me]=N.useState(!1),[Ve,ue]=N.useState(!1),[W,Y]=N.useState(null),[ye,we]=N.useState(!1),[Ce,ae]=N.useState(!1),Ne=N.useRef(null),Ee=Fn(),ze=Dr(),De=new URLSearchParams(ze.search),qe=De.get("redirect"),oe=De.get("code"),xe=qe==="lobby",He=()=>{const $e="abcdefghijklmnopqrstuvwxyz0123456789";let lt="";for(let Re=0;Re<10;Re++)lt+=$e.charAt(Math.floor(Math.random()*$e.length));return lt};N.useEffect(()=>{if(xe&&!x&&!S){const $e=He(),lt=He();w($e),v(lt),Fe(Re=>({...Re,username:!0,password:!0})),be(Re=>({...Re,username:"",password:""})),U(2)}},[xe,x,S,E]),N.useEffect(()=>{localStorage.getItem("access_token")&&Ee(qe==="lobby"?oe?`/lobby?code=${oe}`:"/?showLobbyModal=true":qe==="product-selection"?"/product-selection":"/")},[qe,oe,Ee]),N.useEffect(()=>{V===2&&E&&et(E)&&(me(!0),Fe($e=>({...$e,displayName:!0})),be($e=>({...$e,displayName:""})))},[V,E]),N.useEffect(()=>{V===3&&oe!=="demolobby"&&(x&&S&&E)&&!Ce&&(we(!0),ae(!0))},[V,oe,x,S,E,Ce]);const pt=()=>{we(!1),setTimeout(()=>{Ne.current&&Ne.current.click()},150)},Mt=()=>{we(!1)},mt=$e=>{const lt=/^[a-z0-9]+$/;return $e.length>=2&&lt.test($e)},Je=$e=>$e.length>=2,et=$e=>$e.length>=2,Rt=()=>{V<Nt.length-1&&(V===0&&!E&&(A(x),Fe($e=>({...$e,displayName:!0})),be($e=>({...$e,displayName:""}))),V===1&&E&&E.length>=2?me(!0):me(!1),U($e=>$e+1))},Pe=()=>{if(V>0){const $e=V-1;U($e);const lt=Nt[$e];if(lt.validate){const Re=lt.value;lt.validate(Re)&&me(!0)}else me(!0)}},mn=($e,lt,Re)=>{Re($e.target.value);const ge=$e.target.value;lt(ge)?(Fe(it=>({...it,[Nt[V].id]:!0})),be(it=>({...it,[Nt[V].id]:""})),me(!0)):(Fe(it=>({...it,[Nt[V].id]:!1})),be(it=>({...it,[Nt[V].id]:"Must be at least 2 characters"})),me(!1))},Jt=$e=>{const lt=$e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");w(lt),mt(lt)?(Fe(Re=>({...Re,username:!0})),be(Re=>({...Re,username:""})),me(!0)):(Fe(Re=>({...Re,username:!1})),be(Re=>({...Re,username:"Must be at least 2 characters"})),me(!1))},We=$e=>{mn($e,Je,v)},xt=$e=>{mn($e,et,A)},At=$e=>{const lt=$e.target.files[0];if(lt){const Re=new FileReader;Re.onload=ge=>{const it=new Image;it.onload=()=>{let Ze=it.width,yt=it.height;const Xt=1500;Ze>yt&&Ze>Xt?(yt=yt*Xt/Ze,Ze=Xt):yt>Ze&&yt>Xt&&(Ze=Ze*Xt/yt,yt=Xt);const En=document.createElement("canvas");En.width=Ze,En.height=yt,En.getContext("2d").drawImage(it,0,0,Ze,yt);const ot=En.toDataURL("image/jpeg",.75);R(lt),L(ot),Te(!0),Fe(rn=>({...rn,image:!0})),be(rn=>({...rn,image:""})),me(!0)},it.src=ge.target.result},Re.readAsDataURL(lt)}},Et=($e,lt)=>{ce(lt)},tt=async()=>{try{const $e=await pf(M,q);L($e),Te(!1)}catch($e){console.error("Error cropping the image:",$e),j("Failed to crop image. Please try again.")}},Ht=async $e=>{if($e.preventDefault(),Ie(!0),j(""),console.log("Signup attempt - Username:",x,"Password:",S),!x||!S||!E){j("All fields are required"),Ie(!1);return}if(!I||!M){j("Your profile picture is required"),Ie(!1);return}try{const lt="/signup",Re=await fetch(window.server_url+lt,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:S})}),ge=await Re.json();if(ge.error==="Username already taken")if(xe){const Xt=He(),En=He();w(Xt),v(En);const ln=await fetch(window.server_url+lt,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Xt,password:En})}),ot=await ln.json();if(!ln.ok||ot.error==="Username already taken"){j("Unable to create account. Please try again."),Ie(!1);return}r(ot)}else{j("Username is taken"),Ie(!1);return}else{if(!Re.ok){j(ge.message||"Signup failed"),Ie(!1);return}r(ge)}await p();const it=localStorage.getItem("access_token");if(!it)throw new Error("Authentication failed");let Ze=null;if(I)Ze=M,Ze=Ze.split(",")[1];else{const ln=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();Ze=btoa(new Uint8Array(ln).reduce((ot,rn)=>ot+String.fromCharCode(rn),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${it}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:Ze})})).ok)throw new Error("Failed to update profile");await p(),Ee(qe==="lobby"?oe?`/lobby?code=${oe}`:"/?showLobbyModal=true":qe==="product-selection"?"/product-selection":"/")}catch(lt){console.error("Error:",lt),j("An error occurred. Please try again.")}Ie(!1)},Nt=[{id:"username",label:"Username",value:x,onChange:Jt,type:"text",placeholder:"Enter a username",validate:mt},{id:"password",label:"Password",value:S,onChange:We,type:"text",placeholder:"Create a password",validate:Je},{id:"displayName",label:oe==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:xt,type:"text",placeholder:"Enter your preferred name",validate:et},{id:"image",label:oe==="demolobby"?"Profile Image (Upload Any Image)":"Take a Selfie (so people can find you)",type:"file",onChange:At,accept:"image/*"}];return y.jsxs("div",{className:"signup-container",children:[y.jsx("button",{onClick:()=>Ee("/"),className:"homescreen-button",children:"Home"}),y.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),y.jsx("h3",{className:"signup-header",children:oe==="demolobby"?"Join the demo":"Sign Up to Join"}),oe&&oe!=="demolobby"&&y.jsxs("h2",{className:"signup-header",children:[oe," lobby"]}),oe==="demolobby"&&y.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),y.jsxs("p",{className:"login-link-text",children:["Already have an account? ",y.jsx("a",{href:"#",onClick:$e=>{$e.preventDefault(),Ee("/login")},className:"login-link",children:"Login here"})]}),y.jsxs("div",{className:"step-form-container",children:[y.jsx("div",{className:"step-progress",children:(xe?Nt.slice(2):Nt).map(($e,lt)=>y.jsx("div",{className:`progress-dot ${xe?(lt===V-2?"active":"")+(lt<V-2?" completed":""):(lt===V?"active":"")+(lt<V?" completed":"")}`},lt))}),y.jsxs("form",{onSubmit:Ht,children:[y.jsx(Ed,{mode:"wait",initial:!1,children:y.jsxs(si.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[y.jsx("div",{className:"step-content",children:y.jsxs(si.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[y.jsx("label",{className:"step-label",children:Nt[V].label}),y.jsx(si.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:Nt[V].type==="file"?y.jsx("div",{className:"image-upload-container",children:K?y.jsxs("div",{className:"cropper-container",children:[y.jsx("div",{className:"cropper-wrapper",children:y.jsx(hf,{image:M,crop:F,zoom:ne,aspect:1,onCropComplete:Et,onCropChange:Q,onZoomChange:te})}),y.jsxs("div",{className:"cropper-controls",children:[y.jsx("button",{type:"button",onClick:()=>{Te(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),y.jsx("button",{type:"button",onClick:tt,className:"save-crop-button",children:"Good"})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("input",{ref:Ne,type:"file",onChange:Nt[V].onChange,accept:Nt[V].accept,className:"step-input"}),M&&y.jsx("div",{children:y.jsx("img",{src:M,alt:"Profile preview",className:"profile-preview-image"})})]})}):y.jsx("input",{type:Nt[V].type,value:Nt[V].value,onChange:Nt[V].onChange,placeholder:Nt[V].placeholder,className:"step-input",autoFocus:!0})}),y.jsxs(Ed,{mode:"wait",children:[Le[Nt[V].id]&&y.jsx(si.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Le[Nt[V].id]}),J[Nt[V].id]&&y.jsx(si.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:" Valid"})]})]})}),!K&&y.jsxs("div",{className:"button-container",children:[V>0&&y.jsx(si.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Pe,className:"backz-button",children:" Back"}),pe&&V<Nt.length-1&&y.jsx(si.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Rt,className:"nextz-button",children:"Next "})]})]},V)}),B&&y.jsx(si.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),V===Nt.length-1&&y.jsx(si.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Be,children:Be?"Loading...":"Complete Signup"})]})]}),y.jsx(Ed,{children:ye&&y.jsx(si.div,{className:"selfie-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Mt,children:y.jsxs(si.div,{className:"selfie-modal-content",initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:400,damping:25},onClick:$e=>$e.stopPropagation(),children:[y.jsx("h2",{className:"selfie-modal-header",children:" You Must Take a Selfie"}),y.jsx("p",{className:"selfie-modal-subtext",children:"Don't use old photos, people need to know how you look in order to find you in the room - trust us."}),y.jsx("button",{type:"button",className:"selfie-modal-button",onClick:pt,children:"Understood"})]})})})]})},VE=5e3,Wg=(r,o=null,a=null)=>{N.useEffect(()=>{const f=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,w=localStorage.getItem("access_token"),S=await fetch(x,{headers:{Authorization:`Bearer ${w}`,lobby_code:a}});if(!S.ok){console.error("Failed to fetch lobby metadata");return}const v=await S.json();r(v.player_count),o&&o(v.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};f();const p=setInterval(f,VE);return()=>clearInterval(p)},[r,o,a])},Lc="currentLobbyCode",Bc="currentLobbyTimestamp",nh="currentLobbyLastValidated",zE=30*60*1e3,UE=3*60*1e3,WE=r=>{localStorage.setItem(Lc,r),localStorage.setItem(Bc,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},HE=()=>{const r=localStorage.getItem(Lc),o=localStorage.getItem(Bc);return!r||!o?null:Date.now()-parseInt(o)>zE?(Ac(),console.log("Lobby code expired, cleared from storage"),null):r},GE=()=>{const r=localStorage.getItem(nh);return r?Date.now()-parseInt(r)>UE:!0},XE=()=>{localStorage.setItem(nh,Date.now().toString())},Ac=()=>{localStorage.removeItem(Lc),localStorage.removeItem(Bc),localStorage.removeItem(nh),console.log("Cleared lobby storage")},YE=()=>{localStorage.getItem(Lc)&&localStorage.setItem(Bc,Date.now().toString())},$E=()=>{const[r,o]=N.useState(!1),[a,f]=N.useState(!1),[p,x]=N.useState(""),[w,S]=N.useState(""),[v,E]=N.useState(""),[A,I]=N.useState(null);vf();const{user:R,userProfile:M,checkAuth:L,permissions:B}=N.useContext(Xn),[j,V]=N.useState(null),[U,F]=N.useState(null),[Q,ne]=N.useState([]),[te,q]=N.useState(!1),[ce,K]=N.useState(null),Te=Fn();Wg(V,F);const[Be,Ie]=N.useState(!1);N.useRef(null);const Le=N.useRef(null),be=async(ue=!1)=>{const W=HE();if(!W||!R){K(null);return}if(K(W),ue||GE())try{const Y=localStorage.getItem("access_token"),ye=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${W}`,{headers:{Authorization:`Bearer ${Y}`,lobby_code:W}});if(ye.ok){const we=await ye.json();we.status==="error"||we.lobby_state==="terminated"?(Ac(),K(null)):XE()}else ye.status===404&&(Ac(),K(null))}catch(Y){console.error("Error validating current lobby:",Y)}},J=async()=>{if(R){q(!0);try{const ue=localStorage.getItem("access_token"),W=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${ue}`}});if(W.ok){const Y=await W.json();console.log("User's active lobbies:",Y),Y&&Y.lobbies&&Array.isArray(Y.lobbies)?ne(Y.lobbies):ne([])}else console.error("Failed to fetch user's active lobbies"),ne([])}catch(ue){console.error("Error fetching user's active lobbies:",ue),ne([])}finally{q(!1)}}};N.useEffect(()=>{R?(J(),be(!0)):K(null)},[R]),N.useEffect(()=>{L()},[]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){f(!0);const Y=window.location.pathname;window.history.replaceState({},"",Y)}},[R]);const Fe=ue=>{(B==="admin"||B==="organizer")&&Te(`/admin_lobby_view?code=${ue}`)},pe=ue=>{ue.preventDefault();const Y=new FormData(ue.target).get("name");if(!Y||Y.trim()===""){S("Please enter a lobby code");return}const ye=Y.toLowerCase().replace(/[^a-z0-9]/g,"");if(ye===""){S("Lobby code must contain only letters and numbers");return}E(ye),f(!1),console.log(ye),x(ye),Te(`/lobby?code=${ye}`),x(""),S("")},me=()=>{Ie(!1),Le.current&&(Le.current.clear(),Le.current=null)},Ve=()=>a?y.jsx("div",{className:"lobby-modal-overlay",children:y.jsxs("div",{className:"lobby-modal-container",children:[y.jsx("button",{onClick:()=>{f(!1),x(""),S(""),me()},className:"lobby-modal-close",children:""}),y.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),y.jsxs("form",{onSubmit:pe,className:"lobby-form",children:[y.jsxs("div",{className:"lobby-input-container",children:[y.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),w&&y.jsx("div",{className:"lobby-error-message",children:w})]}),y.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return y.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[y.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[y.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),y.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),y.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),y.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[y.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:y.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),y.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:y.jsx(ow,{user:R,onProfileClick:()=>o(!0)})}),y.jsx("div",{style:{position:"absolute",top:"85px",display:B==="admin"||B==="organizer"?"flex":"none",justifyContent:"flex-end",width:"94%",left:"3%",alignItems:"center"},children:(B==="admin"||B==="organizer")&&y.jsx("button",{className:"login-button",onClick:()=>Te("/organizer-account-details"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ue=>{ue.currentTarget.style.transform="translateY(-2px)",ue.currentTarget.style.boxShadow="0 2px 8px rgba(74, 58, 58, 0.7)"},onMouseLeave:ue=>{ue.currentTarget.style.transform="translateY(0)",ue.currentTarget.style.boxShadow="0 0 4px rgba(74, 58, 58, 0.5)"},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Settings"})})}),(B==="admin"||B==="organizer")&&R==="topaz"&&y.jsx("div",{style:{position:"absolute",top:"120px",right:"20px",zIndex:10},children:y.jsx("button",{className:"master-lobbies-button",onClick:()=>Te("/master_lobby_view"),children:"Lobbies"})}),r&&y.jsx(R2,{onSubmit:ue=>{o(!1)},onClose:()=>o(!1),existingProfile:M}),y.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:R?y.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&M&&(B==="admin"||B==="organizer")?(()=>{const ue="Create a Lobby",W=M?M.name.slice(0,15):"";return y.jsxs(y.Fragment,{children:[ue.split("").map((Y,ye)=>y.jsx("span",{style:{"--i":ye+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`main-${ye}`)),y.jsx("br",{}),W&&W.split("").map((Y,ye)=>y.jsx("span",{style:{"--i":ye+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`name-${ye}`))]})})():(()=>{const ue="Join the Experience",W=M?M.name.slice(0,15):"";return y.jsxs(y.Fragment,{children:[ue.split("").map((Y,ye)=>y.jsx("span",{style:{"--i":ye+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`main-${ye}`)),y.jsx("br",{}),W&&W.split("").map((Y,ye)=>y.jsx("span",{style:{"--i":ye+1,marginRight:Y===" "?"0.5em":"1px"},children:Y},`name-${ye}`))]})})()}):y.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/access",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})})}),R&&B!=="admin"&&B!=="organizer"&&y.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"calc(50% + 100px)"},children:y.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>Te("/post-event-auth"),style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0 auto",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",cursor:"pointer",":hover":{transform:"scale(1.02)"}},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"View Matches"})})}),R&&y.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:y.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:y.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[y.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?f(!0):Te("/signup?redirect=lobby"),disabled:j===null||U==="terminate",style:{opacity:1,cursor:j===null||U==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),R&&B!=="admin"&&B!=="organizer"&&y.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.com/organizer-signup",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Become Organizer"})}),(B==="admin"||B==="organizer")&&y.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:Q.length>0?void 0:()=>Te("/create_lobby"),disabled:Q.length>0,title:Q.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:Q.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:Q.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:Q.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:Q.length>0?"not-allowed":"pointer",opacity:Q.length>0?.6:1,":hover":{transform:Q.length>0?"none":"scale(1.02)"}},children:y.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),ce&&!((B==="admin"||B==="organizer")&&Q.length>0)&&y.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:y.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:y.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Te(`/lobby?code=${ce}`),onMouseEnter:ue=>{ue.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",ue.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",ue.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",ue.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:ue=>{ue.currentTarget.style.transform="translateY(0) rotateX(0)",ue.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",ue.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",ue.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[y.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce.charAt(0).toUpperCase()}),y.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",ce]})]})})}),(B==="admin"||B==="organizer")&&Q.length>0&&y.jsx("div",{className:"events-list",style:{position:"absolute",bottom:ce&&!((B==="admin"||B==="organizer")&&Q.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:te?y.jsx("div",{style:{textAlign:"center",color:"white"},children:y.jsx("p",{children:"Loading your lobbies..."})}):Q.length>0?y.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:Q.map((ue,W)=>y.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>Fe(ue),onMouseEnter:Y=>{Y.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",Y.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",Y.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",Y.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:Y=>{Y.currentTarget.style.transform="translateY(0) rotateX(0)",Y.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",Y.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",Y.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[y.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ue&&ue.length>0?ue.charAt(0).toUpperCase():"?"}),y.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",ue||"Unknown"]})]},W))}):y.jsx("div",{style:{}})})]}),y.jsx(Ve,{})]})};function ZE(){const{pathname:r}=Dr();return N.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function KE(){const{pathname:r}=Dr(),o=r.startsWith("/organizer-dashboard");return N.useEffect(()=>{const a=document.getElementById("root"),f=document.body;return o?(a==null||a.classList.add("dashboard-view"),f==null||f.classList.add("dashboard-view")):(a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")),()=>{a==null||a.classList.remove("dashboard-view"),f==null||f.classList.remove("dashboard-view")}},[r,o]),null}const qE=()=>{const{login:r,signup:o,user:a,logout:f,checkAuth:p}=N.useContext(Xn),[x,w]=N.useState(""),[S,v]=N.useState(""),[E,A]=N.useState(""),[I,R]=N.useState(""),[M,L]=N.useState(!0),[B,j]=N.useState({}),[V,U]=N.useState(!1),F=Fn(),Q=ce=>{const K=/^[a-z0-9]+$/;return ce.length>=2&&K.test(ce)},ne=ce=>{const K=ce.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");w(K),K.length>0?U(!0):U(!1),Q(K)?j(Te=>({...Te,username:""})):j(Te=>({...Te,username:" "}))},te=ce=>{const K=ce.target.value.toLowerCase();v(K)},q=async ce=>{if(ce.preventDefault(),R(""),!Q(x)){R("Please enter a valid username");return}try{const K=M?"/login":"/signup",Te=await fetch(window.server_url+K,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:S}),mode:"cors"});if(Te.ok){const Be=await Te.json();r(Be),p(),F("/")}else{const Be=await Te.json();R(Be.message||`${M?"Login":"Signup"} failed`)}}catch(K){R("Network error occurred. Please try again."),console.error("Error:",K)}};return y.jsxs("div",{className:"login-container",children:[y.jsx("button",{onClick:()=>F("/"),className:"homescreen-button",children:"Home"}),y.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),y.jsx("h1",{className:"login-header",children:"Login"}),y.jsxs("div",{className:"login-signup-form",children:[I&&y.jsx("div",{className:"error-message",children:I}),y.jsxs("form",{onSubmit:q,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:ne,required:!0}),V&&y.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),y.jsx("div",{className:"form-group",children:y.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:S,onChange:te,required:!0})}),y.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},QE=()=>{const r=Fn(),{logout:o}=N.useContext(Xn);return localStorage.removeItem("access_token"),N.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),y.jsx("div",{children:"Logged out redirecting to homescreen"})};var JE=Object.defineProperty,Tc=Object.getOwnPropertySymbols,Hg=Object.prototype.hasOwnProperty,Gg=Object.prototype.propertyIsEnumerable,Vp=(r,o,a)=>o in r?JE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,of=(r,o)=>{for(var a in o||(o={}))Hg.call(o,a)&&Vp(r,a,o[a]);if(Tc)for(var a of Tc(o))Gg.call(o,a)&&Vp(r,a,o[a]);return r},af=(r,o)=>{var a={};for(var f in r)Hg.call(r,f)&&o.indexOf(f)<0&&(a[f]=r[f]);if(r!=null&&Tc)for(var f of Tc(r))o.indexOf(f)<0&&Gg.call(r,f)&&(a[f]=r[f]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var eo;(r=>{const o=class Lt{constructor(v,E,A,I){if(this.version=v,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],v<Lt.MIN_VERSION||v>Lt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(A);if(this.drawCodewords(M),I==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(I=B,L=j),this.applyMask(B)}}p(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(v,E){const A=r.QrSegment.makeSegments(v);return Lt.encodeSegments(A,E)}static encodeBinary(v,E){const A=r.QrSegment.makeBytes(v);return Lt.encodeSegments([A],E)}static encodeSegments(v,E,A=1,I=40,R=-1,M=!0){if(!(Lt.MIN_VERSION<=A&&A<=I&&I<=Lt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=A;;L++){const F=Lt.getNumDataCodewords(L,E)*8,Q=w.getTotalBits(v,L);if(Q<=F){B=Q;break}if(L>=I)throw new RangeError("Data too long")}for(const F of[Lt.Ecc.MEDIUM,Lt.Ecc.QUARTILE,Lt.Ecc.HIGH])M&&B<=Lt.getNumDataCodewords(L,F)*8&&(E=F);let j=[];for(const F of v){a(F.mode.modeBits,4,j),a(F.numChars,F.mode.numCharCountBits(L),j);for(const Q of F.getData())j.push(Q)}p(j.length==B);const V=Lt.getNumDataCodewords(L,E)*8;p(j.length<=V),a(0,Math.min(4,V-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let F=236;j.length<V;F^=253)a(F,8,j);let U=[];for(;U.length*8<j.length;)U.push(0);return j.forEach((F,Q)=>U[Q>>>3]|=F<<7-(Q&7)),new Lt(L,E,U,R)}getModule(v,E){return 0<=v&&v<this.size&&0<=E&&E<this.size&&this.modules[E][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),E=v.length;for(let A=0;A<E;A++)for(let I=0;I<E;I++)A==0&&I==0||A==0&&I==E-1||A==E-1&&I==0||this.drawAlignmentPattern(v[A],v[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const E=this.errorCorrectionLevel.formatBits<<3|v;let A=E;for(let R=0;R<10;R++)A=A<<1^(A>>>9)*1335;const I=(E<<10|A)^21522;p(I>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,f(I,R));this.setFunctionModule(8,7,f(I,6)),this.setFunctionModule(8,8,f(I,7)),this.setFunctionModule(7,8,f(I,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,f(I,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,f(I,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,f(I,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let A=0;A<12;A++)v=v<<1^(v>>>11)*7973;const E=this.version<<12|v;p(E>>>18==0);for(let A=0;A<18;A++){const I=f(E,A),R=this.size-11+A%3,M=Math.floor(A/3);this.setFunctionModule(R,M,I),this.setFunctionModule(M,R,I)}}drawFinderPattern(v,E){for(let A=-4;A<=4;A++)for(let I=-4;I<=4;I++){const R=Math.max(Math.abs(I),Math.abs(A)),M=v+I,L=E+A;0<=M&&M<this.size&&0<=L&&L<this.size&&this.setFunctionModule(M,L,R!=2&&R!=4)}}drawAlignmentPattern(v,E){for(let A=-2;A<=2;A++)for(let I=-2;I<=2;I++)this.setFunctionModule(v+I,E+A,Math.max(Math.abs(I),Math.abs(A))!=1)}setFunctionModule(v,E,A){this.modules[E][v]=A,this.isFunction[E][v]=!0}addEccAndInterleave(v){const E=this.version,A=this.errorCorrectionLevel;if(v.length!=Lt.getNumDataCodewords(E,A))throw new RangeError("Invalid argument");const I=Lt.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][E],R=Lt.ECC_CODEWORDS_PER_BLOCK[A.ordinal][E],M=Math.floor(Lt.getNumRawDataModules(E)/8),L=I-M%I,B=Math.floor(M/I);let j=[];const V=Lt.reedSolomonComputeDivisor(R);for(let F=0,Q=0;F<I;F++){let ne=v.slice(Q,Q+B-R+(F<L?0:1));Q+=ne.length;const te=Lt.reedSolomonComputeRemainder(ne,V);F<L&&ne.push(0),j.push(ne.concat(te))}let U=[];for(let F=0;F<j[0].length;F++)j.forEach((Q,ne)=>{(F!=B-R||ne>=L)&&U.push(Q[F])});return p(U.length==M),U}drawCodewords(v){if(v.length!=Math.floor(Lt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let I=0;I<this.size;I++)for(let R=0;R<2;R++){const M=A-R,B=(A+1&2)==0?this.size-1-I:I;!this.isFunction[B][M]&&E<v.length*8&&(this.modules[B][M]=f(v[E>>>3],7-(E&7)),E++)}}p(E==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let A=0;A<this.size;A++){let I;switch(v){case 0:I=(A+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=A%3==0;break;case 3:I=(A+E)%3==0;break;case 4:I=(Math.floor(A/3)+Math.floor(E/2))%2==0;break;case 5:I=A*E%2+A*E%3==0;break;case 6:I=(A*E%2+A*E%3)%2==0;break;case 7:I=((A+E)%2+A*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][A]&&I&&(this.modules[E][A]=!this.modules[E][A])}}getPenaltyScore(){let v=0;for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==M?(L++,L==5?v+=Lt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Lt.PENALTY_N3),M=this.modules[R][j],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Lt.PENALTY_N3}for(let R=0;R<this.size;R++){let M=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==M?(L++,L==5?v+=Lt.PENALTY_N1:L>5&&v++):(this.finderPenaltyAddHistory(L,B),M||(v+=this.finderPenaltyCountPatterns(B)*Lt.PENALTY_N3),M=this.modules[j][R],L=1);v+=this.finderPenaltyTerminateAndCount(M,L,B)*Lt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let M=0;M<this.size-1;M++){const L=this.modules[R][M];L==this.modules[R][M+1]&&L==this.modules[R+1][M]&&L==this.modules[R+1][M+1]&&(v+=Lt.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((M,L)=>M+(L?1:0),E);const A=this.size*this.size,I=Math.ceil(Math.abs(E*20-A*10)/A)-1;return p(0<=I&&I<=9),v+=I*Lt.PENALTY_N4,p(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let A=[6];for(let I=this.size-7;A.length<v;I-=E)A.splice(1,0,I);return A}}static getNumRawDataModules(v){if(v<Lt.MIN_VERSION||v>Lt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*v+128)*v+64;if(v>=2){const A=Math.floor(v/7)+2;E-=(25*A-10)*A-55,v>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(v,E){return Math.floor(Lt.getNumRawDataModules(v)/8)-Lt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][v]*Lt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<v-1;I++)E.push(0);E.push(1);let A=1;for(let I=0;I<v;I++){for(let R=0;R<E.length;R++)E[R]=Lt.reedSolomonMultiply(E[R],A),R+1<E.length&&(E[R]^=E[R+1]);A=Lt.reedSolomonMultiply(A,2)}return E}static reedSolomonComputeRemainder(v,E){let A=E.map(I=>0);for(const I of v){const R=I^A.shift();A.push(0),E.forEach((M,L)=>A[L]^=Lt.reedSolomonMultiply(M,R))}return A}static reedSolomonMultiply(v,E){if(v>>>8||E>>>8)throw new RangeError("Byte out of range");let A=0;for(let I=7;I>=0;I--)A=A<<1^(A>>>7)*285,A^=(E>>>I&1)*v;return p(A>>>8==0),A}finderPenaltyCountPatterns(v){const E=v[1];p(E<=this.size*3);const A=E>0&&v[2]==E&&v[3]==E*3&&v[4]==E&&v[5]==E;return(A&&v[0]>=E*4&&v[6]>=E?1:0)+(A&&v[6]>=E*4&&v[0]>=E?1:0)}finderPenaltyTerminateAndCount(v,E,A){return v&&(this.finderPenaltyAddHistory(E,A),E=0),E+=this.size,this.finderPenaltyAddHistory(E,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(v,E){E[0]==0&&(v+=this.size),E.pop(),E.unshift(v)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(S,v,E){if(v<0||v>31||S>>>v)throw new RangeError("Value out of range");for(let A=v-1;A>=0;A--)E.push(S>>>A&1)}function f(S,v){return(S>>>v&1)!=0}function p(S){if(!S)throw new Error("Assertion error")}const x=class vn{constructor(v,E,A){if(this.mode=v,this.numChars=E,this.bitData=A,E<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(v){let E=[];for(const A of v)a(A,8,E);return new vn(vn.Mode.BYTE,v.length,E)}static makeNumeric(v){if(!vn.isNumeric(v))throw new RangeError("String contains non-numeric characters");let E=[];for(let A=0;A<v.length;){const I=Math.min(v.length-A,3);a(parseInt(v.substring(A,A+I),10),I*3+1,E),A+=I}return new vn(vn.Mode.NUMERIC,v.length,E)}static makeAlphanumeric(v){if(!vn.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],A;for(A=0;A+2<=v.length;A+=2){let I=vn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A))*45;I+=vn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A+1)),a(I,11,E)}return A<v.length&&a(vn.ALPHANUMERIC_CHARSET.indexOf(v.charAt(A)),6,E),new vn(vn.Mode.ALPHANUMERIC,v.length,E)}static makeSegments(v){return v==""?[]:vn.isNumeric(v)?[vn.makeNumeric(v)]:vn.isAlphanumeric(v)?[vn.makeAlphanumeric(v)]:[vn.makeBytes(vn.toUtf8ByteArray(v))]}static makeEci(v){let E=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)a(v,8,E);else if(v<16384)a(2,2,E),a(v,14,E);else if(v<1e6)a(6,3,E),a(v,21,E);else throw new RangeError("ECI assignment value out of range");return new vn(vn.Mode.ECI,0,E)}static isNumeric(v){return vn.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return vn.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,E){let A=0;for(const I of v){const R=I.mode.numCharCountBits(E);if(I.numChars>=1<<R)return 1/0;A+=4+R+I.bitData.length}return A}static toUtf8ByteArray(v){v=encodeURI(v);let E=[];for(let A=0;A<v.length;A++)v.charAt(A)!="%"?E.push(v.charCodeAt(A)):(E.push(parseInt(v.substring(A+1,A+3),16)),A+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=x;r.QrSegment=x})(eo||(eo={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(eo||(eo={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(eo||(eo={}));var Oo=eo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var eb={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Xg=128,Yg="L",$g="#FFFFFF",Zg="#000000",Kg=!1,qg=1,tb=4,nb=0,rb=.1;function Qg(r,o=0){const a=[];return r.forEach(function(f,p){let x=null;f.forEach(function(w,S){if(!w&&x!==null){a.push(`M${x+o} ${p+o}h${S-x}v1H${x+o}z`),x=null;return}if(S===f.length-1){if(!w)return;x===null?a.push(`M${S+o},${p+o} h1v1H${S+o}z`):a.push(`M${x+o},${p+o} h${S+1-x}v1H${x+o}z`);return}w&&x===null&&(x=S)})}),a.join("")}function Jg(r,o){return r.slice().map((a,f)=>f<o.y||f>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function ib(r,o,a,f){if(f==null)return null;const p=r.length+a*2,x=Math.floor(o*rb),w=p/o,S=(f.width||x)*w,v=(f.height||x)*w,E=f.x==null?r.length/2-S/2:f.x*w,A=f.y==null?r.length/2-v/2:f.y*w,I=f.opacity==null?1:f.opacity;let R=null;if(f.excavate){let L=Math.floor(E),B=Math.floor(A),j=Math.ceil(S+E-L),V=Math.ceil(v+A-B);R={x:L,y:B,w:j,h:V}}const M=f.crossOrigin;return{x:E,y:A,h:v,w:S,excavation:R,opacity:I,crossOrigin:M}}function sb(r,o){return o!=null?Math.max(Math.floor(o),0):r?tb:nb}function ex({value:r,level:o,minVersion:a,includeMargin:f,marginSize:p,imageSettings:x,size:w,boostLevel:S}){let v=nn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Oo.QrSegment.makeSegments(j)),B),[]);return Oo.QrCode.encodeSegments(L,eb[o],a,void 0,void 0,S)},[r,o,a,S]);const{cells:E,margin:A,numCells:I,calculatedImageSettings:R}=nn.useMemo(()=>{let M=v.getModules();const L=sb(f,p),B=M.length+L*2,j=ib(M,w,L,x);return{cells:M,margin:L,numCells:B,calculatedImageSettings:j}},[v,w,x,f,p]);return{qrcode:v,margin:A,cells:E,numCells:I,calculatedImageSettings:R}}var ob=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ab=nn.forwardRef(function(o,a){const f=o,{value:p,size:x=Xg,level:w=Yg,bgColor:S=$g,fgColor:v=Zg,includeMargin:E=Kg,minVersion:A=qg,boostLevel:I,marginSize:R,imageSettings:M}=f,B=af(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,V=af(B,["style"]),U=M==null?void 0:M.src,F=nn.useRef(null),Q=nn.useRef(null),ne=nn.useCallback(be=>{F.current=be,typeof a=="function"?a(be):a&&(a.current=be)},[a]),[te,q]=nn.useState(!1),{margin:ce,cells:K,numCells:Te,calculatedImageSettings:Be}=ex({value:p,level:w,minVersion:A,boostLevel:I,includeMargin:E,marginSize:R,imageSettings:M,size:x});nn.useEffect(()=>{if(F.current!=null){const be=F.current,J=be.getContext("2d");if(!J)return;let Fe=K;const pe=Q.current,me=Be!=null&&pe!==null&&pe.complete&&pe.naturalHeight!==0&&pe.naturalWidth!==0;me&&Be.excavation!=null&&(Fe=Jg(K,Be.excavation));const Ve=window.devicePixelRatio||1;be.height=be.width=x*Ve;const ue=x/Te*Ve;J.scale(ue,ue),J.fillStyle=S,J.fillRect(0,0,Te,Te),J.fillStyle=v,ob?J.fill(new Path2D(Qg(Fe,ce))):K.forEach(function(W,Y){W.forEach(function(ye,we){ye&&J.fillRect(we+ce,Y+ce,1,1)})}),Be&&(J.globalAlpha=Be.opacity),me&&J.drawImage(pe,Be.x+ce,Be.y+ce,Be.w,Be.h)}}),nn.useEffect(()=>{q(!1)},[U]);const Ie=of({height:x,width:x},j);let Le=null;return U!=null&&(Le=nn.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{q(!0)},ref:Q,crossOrigin:Be==null?void 0:Be.crossOrigin})),nn.createElement(nn.Fragment,null,nn.createElement("canvas",of({style:Ie,height:x,width:x,ref:ne,role:"img"},V)),Le)});ab.displayName="QRCodeCanvas";var rh=nn.forwardRef(function(o,a){const f=o,{value:p,size:x=Xg,level:w=Yg,bgColor:S=$g,fgColor:v=Zg,includeMargin:E=Kg,minVersion:A=qg,boostLevel:I,title:R,marginSize:M,imageSettings:L}=f,B=af(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:V,numCells:U,calculatedImageSettings:F}=ex({value:p,level:w,minVersion:A,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:L,size:x});let Q=V,ne=null;L!=null&&F!=null&&(F.excavation!=null&&(Q=Jg(V,F.excavation)),ne=nn.createElement("image",{href:L.src,height:F.h,width:F.w,x:F.x+j,y:F.y+j,preserveAspectRatio:"none",opacity:F.opacity,crossOrigin:F.crossOrigin}));const te=Qg(Q,j);return nn.createElement("svg",of({height:x,width:x,viewBox:`0 0 ${U} ${U}`,ref:a,role:"img"},B),!!R&&nn.createElement("title",null,R),nn.createElement("path",{fill:S,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),nn.createElement("path",{fill:v,d:te,shapeRendering:"crispEdges"}),ne)});rh.displayName="QRCodeSVG";const lb=({player:r})=>y.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?y.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[y.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),y.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):y.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[y.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),y.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var zp=typeof window>"u"?N.useEffect:N.useLayoutEffect,cb=({isPlaying:r,duration:o,startAt:a=0,updateInterval:f=0,onComplete:p,onUpdate:x})=>{let[w,S]=N.useState(a),v=N.useRef(0),E=N.useRef(a),A=N.useRef(a*-1e3),I=N.useRef(null),R=N.useRef(null),M=N.useRef(null),L=V=>{let U=V/1e3;if(R.current===null){R.current=U,I.current=requestAnimationFrame(L);return}let F=U-R.current,Q=v.current+F;R.current=U,v.current=Q;let ne=E.current+(f===0?Q:(Q/f|0)*f),te=E.current+Q,q=typeof o=="number"&&te>=o;S(q?o:ne),q||(I.current=requestAnimationFrame(L))},B=()=>{I.current&&cancelAnimationFrame(I.current),M.current&&clearTimeout(M.current),R.current=null},j=N.useCallback(V=>{B(),v.current=0;let U=typeof V=="number"?V:a;E.current=U,S(U),r&&(I.current=requestAnimationFrame(L))},[r,a]);return zp(()=>{if(x==null||x(w),o&&w>=o){A.current+=o*1e3;let{shouldRepeat:V=!1,delay:U=0,newStartAt:F}=(p==null?void 0:p(A.current/1e3))||{};V&&(M.current=setTimeout(()=>j(F),U*1e3))}},[w,o]),zp(()=>(r&&(I.current=requestAnimationFrame(L)),B),[r,o,f]),{elapsedTime:w,reset:j}},ub=(r,o,a)=>{let f=r/2,p=o/2,x=f-p,w=2*x,S=a==="clockwise"?"1,0":"0,1",v=2*Math.PI*x;return{path:`m ${f},${p} a ${x},${x} 0 ${S} 0,${w} a ${x},${x} 0 ${S} 0,-${w}`,pathLength:v}},Up=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,db=r=>({position:"relative",width:r,height:r}),fb={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},tx=(r,o,a,f,p)=>{if(f===0)return o;let x=(p?f-r:r)/f;return o+a*x},Wp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(f,p,x,w)=>`#${p}${p}${x}${x}${w}${w}`).substring(1).match(/.{2}/g))==null?void 0:o.map(f=>parseInt(f,16)))!=null?a:[]},hb=(r,o)=>{var a;let{colors:f,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof f=="string")return f;let w=(a=p==null?void 0:p.findIndex((R,M)=>R>=o&&o>=p[M+1]))!=null?a:-1;if(!p||w===-1)return f[0];if(!x)return f[w];let S=p[w]-o,v=p[w]-p[w+1],E=Wp(f[w]),A=Wp(f[w+1]),I=!!r.isGrowing;return`rgb(${E.map((R,M)=>tx(S,R,A[M]-R,v,I)|0).join(",")})`},pb=r=>{let{duration:o,initialRemainingTime:a,updateInterval:f,size:p=180,strokeWidth:x=12,trailStrokeWidth:w,isPlaying:S=!1,isGrowing:v=!1,rotation:E="clockwise",onComplete:A,onUpdate:I}=r,R=N.useRef(),M=Math.max(x,w??0),{path:L,pathLength:B}=ub(p,M,E),{elapsedTime:j}=cb({isPlaying:S,duration:o,startAt:Up(o,a),updateInterval:f,onUpdate:typeof I=="function"?U=>{let F=Math.ceil(o-U);F!==R.current&&(R.current=F,I(F))}:void 0,onComplete:typeof A=="function"?U=>{var F;let{shouldRepeat:Q,delay:ne,newInitialRemainingTime:te}=(F=A(U))!=null?F:{};if(Q)return{shouldRepeat:Q,delay:ne,newStartAt:Up(o,te)}}:void 0}),V=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(V),rotation:E,size:p,stroke:hb(r,V),strokeDashoffset:tx(j,0,B,o,v),strokeWidth:x}},ih=r=>{let{children:o,strokeLinecap:a,trailColor:f,trailStrokeWidth:p}=r,{path:x,pathLength:w,stroke:S,strokeDashoffset:v,remainingTime:E,elapsedTime:A,size:I,strokeWidth:R}=pb(r);return nn.createElement("div",{style:db(I)},nn.createElement("svg",{viewBox:`0 0 ${I} ${I}`,width:I,height:I,xmlns:"http://www.w3.org/2000/svg"},nn.createElement("path",{d:x,fill:"none",stroke:f??"#d9d9d9",strokeWidth:p??R}),nn.createElement("path",{d:x,fill:"none",stroke:S,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:w,strokeDashoffset:v})),typeof o=="function"&&nn.createElement("div",{style:fb},o({remainingTime:E,elapsedTime:A,color:S})))};ih.displayName="CountdownCircleTimer";const mb=({onComplete:r})=>{const[o,a]=N.useState(7),[f,p]=N.useState(!1),x=N.useRef(null),w=N.useRef(null);N.useEffect(()=>(x.current&&clearTimeout(x.current),w.current&&clearInterval(w.current),w.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(v=>v<=1?(w.current&&clearInterval(w.current),x.current&&clearTimeout(x.current),r&&r(),0):v-1),p(!1)},500)},1e3),()=>{w.current&&clearInterval(w.current),x.current&&clearTimeout(x.current)}),[r]);const S=f?"pop-burst":"";return y.jsx("div",{className:"lobby-countdown-overlay",children:y.jsxs("div",{className:`lobby-countdown-container ${S}`,children:[y.jsx("div",{className:"lobby-countdown-number",children:o}),y.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},gb=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=N.useContext(Xn),[f,p]=N.useState(0),[x,w]=N.useState(!1),[S,v]=N.useState(!1),[E,A]=N.useState([0]),[I,R]=N.useState(!1),M=N.useRef(null),L=N.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return N.useEffect(()=>{const j=()=>{if(f>=B.length-1){clearInterval(M.current),r&&r();return}w(!0);const V=f+1;A([f,V]),L.current=setTimeout(()=>{R(!1),p(V),w(!1),setTimeout(()=>{A([V]),v(!0),B[V].animatedText&&R(!0)},500)},500)};return M.current=setInterval(j,B[f].duration),v(!0),f===0&&B[0].animatedText&&R(!0),()=>{M.current&&clearInterval(M.current),L.current&&clearTimeout(L.current)}},[f,B.length,r]),y.jsx("div",{className:"tutorial-overlay",children:y.jsxs("div",{className:"tutorial-container",children:[E.map(j=>y.jsxs("div",{className:`tutorial-slide ${j===f?"current":j<f?"previous":"next"}`,children:[j===f&&B[j].animatedText&&I&&y.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&y.jsx("div",{className:"volume-arrow-container",children:y.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),y.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:y.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),y.jsx("div",{className:`tutorial-text ${S&&j===f?"text-animate":""}`,children:B[j].text})]},j)),y.jsx("div",{className:"tutorial-progress-bar-container",children:y.jsx("div",{className:"tutorial-progress-bar",children:y.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},xb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=N.useState(!1),p=N.useRef(null);return N.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},3e3)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?y.jsxs("div",{className:"match-overlay",children:[y.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,w)=>y.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${w}`)),[...Array(50)].map((x,w)=>y.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${w}`))]}),y.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},yb=({isVisible:r,onAnimationEnd:o})=>{const[a,f]=N.useState(!1),p=N.useRef(null);return N.useEffect(()=>(p.current&&clearTimeout(p.current),r?(f(!0),p.current=setTimeout(()=>{f(!1),o&&o()},1800)):f(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?y.jsxs("div",{className:"ready-overlay",children:[y.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,w)=>y.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${w}`)),[...Array(50)].map((x,w)=>y.jsx("div",{className:`confetti confetti-${w%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${w}`))]}),y.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},ac=9,wb=5,vb=5e3,Cb=!1,Eb=()=>{const r=Math.floor(540),[o,a]=N.useState([]),[f,p]=N.useState("self"),[x,w]=N.useState(!1),[S,v]=N.useState(""),E=N.useRef(null),A=N.useRef(null),[I,R]=N.useState(!1),M=N.useRef(!1),[L,B]=N.useState(!1),{loadSound:j,seekTo:V,cancelSound:U,checkSound:F,soundEnabled:Q,setSoundEnabled:ne,isPlaying:te}=vf(),[q,ce]=N.useState("yonder"),K=Fn(),{code:Te}=oy(),[Be,Ie]=N.useState(null);Wg(Ie,null,q);const{user:Le,userProfile:be,checkAuth:J,permissions:Fe}=N.useContext(Xn);N.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{Le||await J()}catch(ct){console.error("Authentication error:",ct);const Ue=new URLSearchParams(window.location.search).get("code")||Te;K(Ue?`/signup?redirect=lobby&code=${Ue}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+Le+"&message=no token on the lobby page",{method:"GET"});const _t=new URLSearchParams(window.location.search).get("code")||Te;K(_t?`/signup?redirect=lobby&code=${_t}`:"/signup?redirect=lobby")}})()},[K,Te,J,Le]),N.useEffect(()=>{(()=>{const ct=new URLSearchParams(window.location.search).get("code")||Te;if(ct){ce(ct),WE(ct),ot(ct);const _t=`hasSeenTutorial_${ct}`,Ue=localStorage.getItem(_t),Yn=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:ct,lobbyTutorialKey:_t,hasSeenLobbyTutorial:Ue,isAuthenticated:Yn}),!Ue&&Yn&&(Zr(!0),localStorage.setItem(_t,"true"))}})()},[Te]);const[pe,me]=N.useState(null),[Ve,ue]=N.useState(null),[W,Y]=N.useState(null),[ye,we]=N.useState(null),[Ce,ae]=N.useState(null),Ne=N.useRef(!1),Ee=N.useRef(null),ze=N.useRef(null),[De,qe]=N.useState(null),[oe,xe]=N.useState(null),[He,pt]=N.useState(null),[Mt,mt]=N.useState(null),[Je,et]=N.useState(!0),Rt=N.useRef(0),[Pe,mn]=N.useState(null),[Jt,We]=N.useState(null),[xt,At]=N.useState([]),[Et,tt]=N.useState([]),[Ht,Nt]=N.useState(!document.hidden),$e=N.useRef("yonder"),lt=N.useRef({}),Re=N.useRef([]),[ge,it]=N.useState(!1),Ze=N.useRef(null),[yt,Xt]=N.useState(!1);N.useEffect(()=>{$e.current=q},[q]);async function En(Xe,bt){const ct=localStorage.getItem("access_token"),Ue=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${ct}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:Xe,tags_desiring_work:bt})})).json();console.log("SET PROFILE INFO:",Ue)}const ln=async Xe=>{if(Xe.length!==0){it(!0);try{const bt=localStorage.getItem("access_token"),ct=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${bt}`,"Content-Type":"application/json",lobby_code:$e.current},body:JSON.stringify({usernames:Xe})});if(ct.ok){const _t=await ct.json();lt.current={...lt.current,..._t},console.log("Profile images fetched:",Object.keys(_t))}else console.error("Failed to fetch profile images:",ct.status)}catch(bt){console.error("Error fetching profile images:",bt)}finally{it(!1)}}},ot=async Xe=>{try{const bt=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:Xe}});if(bt.ok){const ct=await bt.json();ct.logo_icon?(Ze.current=ct.logo_icon,Xt(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",bt.status)}catch(bt){console.error("Error fetching lobby setup data:",bt)}};async function rn(){try{const Xe=localStorage.getItem("access_token");U(),lt.current={},Re.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${Xe}`,lobby_code:q}})).ok&&K("/")}catch(Xe){console.error("Error disconnecting from lobby:",Xe),K("/")}finally{U(),K("/"),console.log("finally")}}const[Ss,Wi]=N.useState(!1),[nr,Hi]=N.useState(null),cn=N.useRef(!1),[Lr,ai]=N.useState(!1),[Nn,Gi]=N.useState(null),fr=(Xe,bt)=>{if(!Xe||!bt)return null;for(const ct of Xe.tags_work)if(bt.desiring_tags_work.includes(ct)){for(const _t of bt.tags_work)if(Xe.desiring_tags_work.includes(_t))return{playerTag:ct,opponentTag:_t}}return null};async function li(){try{Rt.current+=1,Rt.current>5&&(Rt.current=0,Ne.current=!1);const Xe=localStorage.getItem("access_token"),bt=!document.hidden,ct=$e.current;if(console.log("lobby code fr:",ct),ct=="yonder"){console.log("lobby code is not set");return}const _t=await fetch(`${window.server_url}/lobby?is_visible=${bt}`,{headers:{Authorization:`Bearer ${Xe}`,is_visible_t_f:bt?"t":"f",lobby_code:ct}});if(_t.ok){const Ue=await _t.json();if(console.log("LOBBY PAIR DATA:",ct,Ue),Ue.status=="inactive"){U(),K("/post-event-auth");return}Ue.lobby_state!=="terminated"&&YE(),Y(Ue.opponent_name),Ue.opponent_name==null&&me(null),a(Ue.custom_tags),qe(Ue.lobby_state),mt(Ue.lobby_duration);const Yn=typeof Ue.round_time_left=="number"&&!isNaN(Ue.round_time_left)?Ue.round_time_left:0;console.log("Timer Debug:",{roundDuration:Ue.lobby_duration,timeLeft:Yn,lobbyState:Ue.lobby_state,usingDefaultDuration:!Ue.lobby_duration}),Ee.current=Yn,ze.current=Ue.beat_go_off,xe(Math.floor(Yn));const zt=Math.floor(Yn/60),As=Math.floor(Yn%60);pt(`${zt}:${As.toString().padStart(2,"0")}`),ae(Ue.table_number),Ue.player_tags!=null&&Ue.player_tags.tags_work!=null&&At(Ue.player_tags.tags_work),Ue.player_tags!=null&&Ue.player_tags.desiring_tags_work!=null&&tt(Ue.player_tags.desiring_tags_work),Ee.current!=null&&Ue.lobby_state=="active"&&Ee.current!=0&&(V(r-Ee.current),console.log("seeking to",r-Ee.current));const ve=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${ct}`,{headers:{Authorization:`Bearer ${Xe}`,lobby_code:ct}});if(ve.ok){const wr=await ve.json();Ie(wr.player_count);const jt=wr.usernames||[];if(JSON.stringify(Re.current)!==JSON.stringify(jt)){Re.current=jt;const Yi=jt.filter(Pt=>!lt.current[Pt]&&Pt!==(Le==null?void 0:Le.username));Yi.length>0&&(Cb||(console.log("Fetching images for new users:",Yi),ln(Yi)))}}if((W!=Ue.opponent_name||pe==null)&&!Ne.current&&Ue.opponent_name!=null){Ne.current=!0,console.log("fetching profile");const wr=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${Xe}`}});if(wr.ok){const jt=await wr.json();me(jt),console.log("profile fetched:",jt.name)}else console.log("profile fetch failed");Ne.current=!1}if(nr==="interrim"&&Ue.lobby_state==="active"&&Ue.opponent_name&&!cn.current){console.log("Checking for matches...");const wr=fr(Ue.player_tags,Ue.opponent_tags);wr&&(console.log("Match found! Setting animation and banner...",wr),Gi(wr),ai(!0),cn.current=!0,Wi(!0))}Hi(Ue.lobby_state)}}catch(Xe){console.error("Error fetching lobby data:",Xe)}}N.useEffect(()=>{F()?ne(!0):ne(!1);const Xe=setInterval(async()=>{li()},vb);return()=>clearInterval(Xe)},[]),N.useEffect(()=>{const Xe=setTimeout(li,1e3);return()=>clearTimeout(Xe)},[De,q]),N.useEffect(()=>{const Xe=()=>{const bt=!document.hidden;bt&&!Ht&&(console.log("Page became visible - fetching latest data"),li()),Nt(bt)};return document.addEventListener("visibilitychange",Xe),()=>{document.removeEventListener("visibilitychange",Xe)}},[Ht]);const gn=()=>y.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:y.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[y.jsx("button",{onClick:()=>et(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),y.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),y.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),y.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),y.jsx("button",{onClick:()=>{j(),et(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),hr=(Xe,bt)=>{Pe==null&&mn(xt),Jt==null&&We(Et);const ct=Xe==="self"?Pe:Jt;if(!(ct!=null&&ct.includes(bt))&&(ct==null?void 0:ct.length)>=wb){v("Reached tag limit for this section"),setTimeout(()=>{var Ue;(Ue=A.current)==null||Ue.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{v("")},3e3);return}Xe==="self"?mn(Ue=>Ue.includes(bt)?Ue.filter(Yn=>Yn!==bt):[...Ue,bt]):We(Ue=>Ue.includes(bt)?Ue.filter(Yn=>Yn!==bt):[...Ue,bt])},kn=()=>{Pe!=null&&(En(Pe,Jt||[]),setTimeout(()=>{At(Pe||[])},800)),p("desiring"),setTimeout(()=>{var Xe;(Xe=E.current)==null||Xe.scrollIntoView({behavior:"smooth",block:"start"})},100)},Ge=()=>{Jt!=null&&(En(Pe||[],Jt),setTimeout(()=>{At(Pe||[]),tt(Jt)},800),setTimeout(()=>{M.current||(M.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},[ci,Xi]=N.useState(!1);N.useEffect(()=>{if(De==="interrim")Xi(!0);else if(De==="active"){const Xe=setTimeout(()=>{Xi(!1)},1e3);return()=>clearTimeout(Xe)}},[De]);const Vn=()=>{console.log("Lobby countdown animation completed")},[rr,Zr]=N.useState(!1),bi=()=>{Zr(!1)};N.useEffect(()=>{(De!=="active"||!pe)&&(ai(!1),Gi(null))},[De,pe]),N.useEffect(()=>{De==="terminated"&&(lt.current={},Re.current=[],Ac())},[De]);const ir=N.useRef(null);return N.useEffect(()=>{var Xe;!x&&!(xt!=null&&xt.length)&&!(Et!=null&&Et.length)&&(o==null?void 0:o.length)>0&&((Xe=ir.current)==null||Xe.scrollIntoView({behavior:"smooth"}),w(!0))},[xt,Et,o,x]),y.jsxs("div",{className:"lobby-container",children:[y.jsxs("div",{className:"lobby-content",children:[y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:y.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(De==="checkin"||De==="active"&&!pe||De==="interrim")&&y.jsx("div",{className:"user-profile-container",children:y.jsxs("div",{className:"user-profile",children:[y.jsx("img",{src:be!=null&&be.image_data?`data:image/jpeg;base64,${be.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),y.jsx("div",{className:"user-profile-glow"})]})}),y.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:y.jsx("h2",{children:o.length>0&&(xt.length==0||Et.length==0)?y.jsxs(y.Fragment,{children:["You're not ready, complete your profile to get matched up.",y.jsx("button",{className:"missing-tags-button",onClick:()=>{var Xe;return(Xe=ir.current)==null?void 0:Xe.scrollIntoView({behavior:"smooth"})},children:"Complete Profile"})]}):De==="active"&&pe?y.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",pe.name,"!"]}):De==="checkin"?y.jsxs(y.Fragment,{children:["Wait here ",be.name.slice(0,15),".",y.jsx("br",{}),"Your host will start the experience."]}):De==="active"&&!pe?"You will be paired with someone in the next round.":De==="interrim"?"Get ready for the next round!":De==="terminated"?"This session has ended. Thank you for participating!":""})},De),De==="active"&&pe&&Ce&&y.jsx("div",{className:"table-number",children:y.jsxs("h3",{children:["at table: ",Ce]})}),(Ze.current||De!=="checkin")&&y.jsxs("div",{className:`timer-sponsor-container ${Ze.current&&De!=="checkin"?"has-timer":""}`,children:[Ze.current&&y.jsx("div",{className:"sponsor-logo",children:y.jsx("img",{src:`data:image/jpeg;base64,${Ze.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),De!=="checkin"&&y.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(De==="active"||De==="interrim")&&oe?y.jsxs(y.Fragment,{children:[y.jsx(ih,{isPlaying:De==="active",duration:Mt||300,initialRemainingTime:oe||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(li(),{shouldRepeat:!1}),children:({remainingTime:Xe})=>{const bt=typeof Xe=="number"&&!isNaN(Xe)?Xe:0,ct=Math.floor(bt/60),_t=Math.floor(bt%60);return y.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[ct,":",String(_t).padStart(2,"0")]})}},`${De}-${oe}`),y.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):y.jsx("span",{className:"time-left-text"})})]}),Lr&&Nn&&De==="active"&&pe&&y.jsxs("div",{className:"match-banner",children:[y.jsx("span",{className:"match-tag",children:Nn.playerTag}),y.jsx("div",{className:"match-arrow"}),y.jsx("span",{className:"match-tag",children:Nn.opponentTag})]}),y.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:De==="active"||De==="interrim"?pe?y.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:y.jsx(lb,{player:pe})}):y.jsx(y.Fragment,{}):De==="terminated"?y.jsx("div",{className:"status-message",children:y.jsxs("h2",{children:["This session has ended.",y.jsx("br",{}),"Thank you for participating!"]})}):null}),(De==="checkin"||De==="active"&&!pe)&&Be!==null&&y.jsx("div",{className:"player-count-container",children:y.jsxs("div",{className:"player-count-widget",children:[y.jsxs("div",{className:"player-count-icon",children:[y.jsx("div",{className:"icon-pulse"}),y.jsx("img",{src:"/assets/players_display_icon2.png",alt:"Players in lobby",className:"player-count-img"})]}),y.jsxs("div",{className:"player-count-info",children:[y.jsx("span",{className:"player-count-number",children:Be}),y.jsx("span",{className:"player-count-label",children:"joined"})]}),y.jsx("div",{className:"player-count-lobby",children:q})]})}),(De==="checkin"||De==="active"&&!pe)&&y.jsx("div",{className:"lobby-profiles-container",children:y.jsx("div",{className:"lobby-profiles-grid",children:Be>0?y.jsxs(y.Fragment,{children:[Array.from({length:Math.min(Be,ac)}).map((Xe,bt)=>{let ct;{const Ue=Re.current[bt];Ue&&lt.current[Ue]?ct=`data:image/jpeg;base64,${lt.current[Ue]}`:ct="/assets/avatar_8.png"}return y.jsxs("div",{className:`profile-icon-wrapper ${bt===Math.min(Be,ac)-1?"pop-in":""}`,children:[y.jsx("img",{src:ct,alt:`Profile ${bt+1}`,className:"profile-icon",loading:"lazy"}),y.jsx("div",{className:"profile-icon-glow"})]},`profile-${bt}`)}),Be>ac&&y.jsx("div",{className:"profile-icon-wrapper more-profiles",children:y.jsxs("div",{className:"more-profiles-bubble",children:["+",Be-ac]})})]}):y.jsx("div",{children:"No profiles to display"})})}),(De==="checkin"||De==="active")&&y.jsxs("div",{className:"selected-tags-container",children:[xt&&xt.length>0&&y.jsxs("div",{className:"tag-category",children:[y.jsx("h4",{children:"I am:"}),y.jsx("div",{className:"tag-list",children:xt.map(Xe=>y.jsx("span",{className:"tag-item",children:Xe},`self-${Xe}`))})]}),Et&&Et.length>0&&y.jsxs("div",{className:"tag-category",children:[y.jsx("h4",{children:"Looking for:"}),y.jsx("div",{className:"tag-list",children:Et.map(Xe=>y.jsx("span",{className:"tag-item",children:Xe},`desiring-${Xe}`))})]})]}),y.jsx("button",{className:"leave-lobby-button",onClick:rn,children:"Take a Break"}),y.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Zr(!0),children:"Tutorial"}),(Fe==="admin"||Fe==="organizer")&&y.jsx("button",{className:"admin-view-button",onClick:()=>K(`/admin_lobby_view?code=${q}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&y.jsx("form",{onSubmit:Xe=>{Xe.preventDefault(),f==="self"?kn():Ge()},children:y.jsxs("div",{className:"tags-section",ref:ir,children:[y.jsxs("div",{className:"progress-bar-container",children:[y.jsx("div",{className:`self-progress-bar-tab ${f==="self"?"active":""} ${xt.length>0?"complete":""}`,onClick:()=>p("self"),children:" Who are you?"}),y.jsx("div",{className:`desiring-progress-bar-tab ${f==="desiring"?"active":""} ${Et.length>0?"complete":""}`,onClick:()=>xt.length>0?p("desiring"):null,children:" Who do you want to meet?"})]}),y.jsxs("div",{className:`tag-group ${f==="self"?"active":"hidden"}`,children:[y.jsx("div",{className:"bounce-wrapper",children:y.jsx("h2",{children:"Who are you?"})}),y.jsx("div",{className:"tag-labels-container",children:o.map(Xe=>y.jsxs("label",{className:"tag-label",children:[y.jsx("input",{type:"checkbox",checked:Pe!=null?Pe.includes(Xe):xt.includes(Xe),onChange:()=>hr("self",Xe)}),Xe]},`self-${Xe}`))})]}),y.jsxs("div",{className:`tag-group ${f==="desiring"?"active":"hidden"}`,ref:E,children:[y.jsx("div",{className:"bounce-wrapper",children:y.jsx("h2",{children:"Who do you want to meet?"})}),y.jsx("div",{className:"tag-labels-container",children:o.map(Xe=>y.jsxs("label",{className:"tag-label",children:[y.jsx("input",{type:"checkbox",checked:Jt!=null?Jt.includes(Xe):Et.includes(Xe),onChange:()=>hr("desiring",Xe)}),Xe]},`desiring-${Xe}`))})]}),y.jsx("button",{type:"submit",className:"tag-selection-button",ref:A,children:f==="self"?"Continue":"Save"}),S&&y.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:S})]})})]}),Q||!Je||De=="checkin"||De==null||te?null:y.jsx(gn,{}),ci&&!(o.length>0&&Et.length===0)&&y.jsx(mb,{onComplete:Vn}),rr&&y.jsx(gb,{onComplete:bi,lobbyCode:q}),y.jsx(xb,{isVisible:Ss,onAnimationEnd:()=>{Wi(!1),cn.current=!1}}),y.jsx(yb,{isVisible:I,onAnimationEnd:()=>{R(!1),M.current=!1}})]})};let bb={data:""},Sb=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||bb,Ab=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Tb=/\/\*[^]*?\*\/|  +/g,Hp=/\n+/g,ys=(r,o)=>{let a="",f="",p="";for(let x in r){let w=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+w+";":f+=x[1]=="f"?ys(w,x):x+"{"+ys(w,x[1]=="k"?"":o)+"}":typeof w=="object"?f+=ys(w,o?o.replace(/([^,])+/g,S=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,S):S?S+" "+v:v)):x):w!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=ys.p?ys.p(x,w):x+":"+w+";")}return a+(o&&p?o+"{"+p+"}":p)+f},ji={},nx=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+nx(r[a]);return o}return r},Ib=(r,o,a,f,p)=>{let x=nx(r),w=ji[x]||(ji[x]=(v=>{let E=0,A=11;for(;E<v.length;)A=101*A+v.charCodeAt(E++)>>>0;return"go"+A})(x));if(!ji[w]){let v=x!==r?r:(E=>{let A,I,R=[{}];for(;A=Ab.exec(E.replace(Tb,""));)A[4]?R.shift():A[3]?(I=A[3].replace(Hp," ").trim(),R.unshift(R[0][I]=R[0][I]||{})):R[0][A[1]]=A[2].replace(Hp," ").trim();return R[0]})(r);ji[w]=ys(p?{["@keyframes "+w]:v}:v,a?"":"."+w)}let S=a&&ji.g?ji.g:null;return a&&(ji.g=ji[w]),((v,E,A,I)=>{I?E.data=E.data.replace(I,v):E.data.indexOf(v)===-1&&(E.data=A?v+E.data:E.data+v)})(ji[w],o,f,S),w},Nb=(r,o,a)=>r.reduce((f,p,x)=>{let w=o[x];if(w&&w.call){let S=w(a),v=S&&S.props&&S.props.className||/^go/.test(S)&&S;w=v?"."+v:S&&typeof S=="object"?S.props?"":ys(S,""):S===!1?"":S}return f+p+(w??"")},"");function jc(r){let o=this||{},a=r.call?r(o.p):r;return Ib(a.unshift?a.raw?Nb(a,[].slice.call(arguments,1),o.p):a.reduce((f,p)=>Object.assign(f,p&&p.call?p(o.p):p),{}):a,Sb(o.target),o.g,o.o,o.k)}let rx,lf,cf;jc.bind({g:1});let Ui=jc.bind({k:1});function _b(r,o,a,f){ys.p=o,rx=r,lf=a,cf=f}function bs(r,o){let a=this||{};return function(){let f=arguments;function p(x,w){let S=Object.assign({},x),v=S.className||p.className;a.p=Object.assign({theme:lf&&lf()},S),a.o=/ *go\d+/.test(v),S.className=jc.apply(a,f)+(v?" "+v:"");let E=r;return r[0]&&(E=S.as||r,delete S.as),cf&&E[0]&&cf(S),rx(E,S)}return p}}var Rb=r=>typeof r=="function",Ic=(r,o)=>Rb(r)?r(o):r,kb=(()=>{let r=0;return()=>(++r).toString()})(),ix=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),Pb=20,sx=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,Pb)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return sx(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:f}=o;return{...r,toasts:r.toasts.map(x=>x.id===f||f===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},gc=[],qs={toasts:[],pausedAt:void 0},to=r=>{qs=sx(qs,r),gc.forEach(o=>{o(qs)})},Ob={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Mb=(r={})=>{let[o,a]=N.useState(qs),f=N.useRef(qs);N.useEffect(()=>(f.current!==qs&&a(qs),gc.push(a),()=>{let x=gc.indexOf(a);x>-1&&gc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var w,S,v;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((w=r[x.type])==null?void 0:w.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((S=r[x.type])==null?void 0:S.duration)||(r==null?void 0:r.duration)||Ob[x.type],style:{...r.style,...(v=r[x.type])==null?void 0:v.style,...x.style}}});return{...o,toasts:p}},Db=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||kb()}),qa=r=>(o,a)=>{let f=Db(o,r,a);return to({type:2,toast:f}),f.id},xr=(r,o)=>qa("blank")(r,o);xr.error=qa("error");xr.success=qa("success");xr.loading=qa("loading");xr.custom=qa("custom");xr.dismiss=r=>{to({type:3,toastId:r})};xr.remove=r=>to({type:4,toastId:r});xr.promise=(r,o,a)=>{let f=xr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?Ic(o.success,p):void 0;return x?xr.success(x,{id:f,...a,...a==null?void 0:a.success}):xr.dismiss(f),p}).catch(p=>{let x=o.error?Ic(o.error,p):void 0;x?xr.error(x,{id:f,...a,...a==null?void 0:a.error}):xr.dismiss(f)}),r};var Lb=(r,o)=>{to({type:1,toast:{id:r,height:o}})},Bb=()=>{to({type:5,time:Date.now()})},La=new Map,jb=1e3,Fb=(r,o=jb)=>{if(La.has(r))return;let a=setTimeout(()=>{La.delete(r),to({type:4,toastId:r})},o);La.set(r,a)},Vb=r=>{let{toasts:o,pausedAt:a}=Mb(r);N.useEffect(()=>{if(a)return;let x=Date.now(),w=o.map(S=>{if(S.duration===1/0)return;let v=(S.duration||0)+S.pauseDuration-(x-S.createdAt);if(v<0){S.visible&&xr.dismiss(S.id);return}return setTimeout(()=>xr.dismiss(S.id),v)});return()=>{w.forEach(S=>S&&clearTimeout(S))}},[o,a]);let f=N.useCallback(()=>{a&&to({type:6,time:Date.now()})},[a]),p=N.useCallback((x,w)=>{let{reverseOrder:S=!1,gutter:v=8,defaultPosition:E}=w||{},A=o.filter(M=>(M.position||E)===(x.position||E)&&M.height),I=A.findIndex(M=>M.id===x.id),R=A.filter((M,L)=>L<I&&M.visible).length;return A.filter(M=>M.visible).slice(...S?[R+1]:[0,R]).reduce((M,L)=>M+(L.height||0)+v,0)},[o]);return N.useEffect(()=>{o.forEach(x=>{if(x.dismissed)Fb(x.id,x.removeDelay);else{let w=La.get(x.id);w&&(clearTimeout(w),La.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:Lb,startPause:Bb,endPause:f,calculateOffset:p}}},zb=Ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ub=Ui`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Wb=Ui`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Hb=bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ub} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Wb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Gb=Ui`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Xb=bs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Gb} 1s linear infinite;
`,Yb=Ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$b=Ui`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Zb=bs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Yb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$b} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Kb=bs("div")`
  position: absolute;
`,qb=bs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Qb=Ui`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Jb=bs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Qb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,eS=({toast:r})=>{let{icon:o,type:a,iconTheme:f}=r;return o!==void 0?typeof o=="string"?N.createElement(Jb,null,o):o:a==="blank"?null:N.createElement(qb,null,N.createElement(Xb,{...f}),a!=="loading"&&N.createElement(Kb,null,a==="error"?N.createElement(Hb,{...f}):N.createElement(Zb,{...f})))},tS=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,nS=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,rS="0%{opacity:0;} 100%{opacity:1;}",iS="0%{opacity:1;} 100%{opacity:0;}",sS=bs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,oS=bs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,aS=(r,o)=>{let a=r.includes("top")?1:-1,[f,p]=ix()?[rS,iS]:[tS(a),nS(a)];return{animation:o?`${Ui(f)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ui(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},lS=N.memo(({toast:r,position:o,style:a,children:f})=>{let p=r.height?aS(r.position||o||"top-center",r.visible):{opacity:0},x=N.createElement(eS,{toast:r}),w=N.createElement(oS,{...r.ariaProps},Ic(r.message,r));return N.createElement(sS,{className:r.className,style:{...p,...a,...r.style}},typeof f=="function"?f({icon:x,message:w}):N.createElement(N.Fragment,null,x,w))});_b(N.createElement);var cS=({id:r,className:o,style:a,onHeightUpdate:f,children:p})=>{let x=N.useCallback(w=>{if(w){let S=()=>{let v=w.getBoundingClientRect().height;f(r,v)};S(),new MutationObserver(S).observe(w,{subtree:!0,childList:!0,characterData:!0})}},[r,f]);return N.createElement("div",{ref:x,className:o,style:a},p)},uS=(r,o)=>{let a=r.includes("top"),f=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ix()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...f,...p}},dS=jc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lc=16,Nc=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:f,children:p,containerStyle:x,containerClassName:w})=>{let{toasts:S,handlers:v}=Vb(a);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:lc,left:lc,right:lc,bottom:lc,pointerEvents:"none",...x},className:w,onMouseEnter:v.startPause,onMouseLeave:v.endPause},S.map(E=>{let A=E.position||o,I=v.calculateOffset(E,{reverseOrder:r,gutter:f,defaultPosition:o}),R=uS(A,I);return N.createElement(cS,{id:E.id,key:E.id,onHeightUpdate:v.updateHeight,className:E.visible?dS:"",style:R},E.type==="custom"?Ic(E.message,E):p?p(E):N.createElement(lS,{toast:E,position:A}))}))},Gn=xr;const Pd=({direction:r="down",show:o=!0,className:a="",style:f={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return y.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:f,children:[y.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:y.jsxs("g",{transform:p,children:[y.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),y.jsxs("defs",{children:[y.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[y.jsx("stop",{stopColor:"#7f5fff"}),y.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),y.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),y.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:y.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),y.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},fS=({isOpen:r,onClose:o,onConfirm:a,userName:f})=>r?y.jsx("div",{className:"kick-modal",children:y.jsxs("div",{className:"kick-modal-content",children:[y.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),y.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",f," from the lobby?"]}),y.jsxs("div",{className:"kick-modal-actions",children:[y.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),y.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,hS=({isOpen:r,onClose:o,onConfirm:a})=>r?y.jsx("div",{className:"join-modal",children:y.jsxs("div",{className:"join-modal-content",children:[y.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),y.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),y.jsxs("div",{className:"join-modal-actions",children:[y.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),y.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,ox=(r,o)=>new Promise((a,f)=>{const x=new XMLSerializer().serializeToString(r),w=800,S=1e3,v=document.createElement("canvas");v.width=w,v.height=S;const E=v.getContext("2d");E.fillStyle="#ffffff",E.fillRect(0,0,w,S);const A=new window.Image;A.crossOrigin="anonymous",A.onload=()=>{const I=new window.Image;I.onload=()=>{const B=A.width/A.height*180,j=36,V=28,U=550,F=22,Q=182+F,ne=j+F*1.2,te=V+32,q=Q+ne,ce=te,K=S-q-ce,Te=q+(K-U)/2-35,Be=(w-U)/2;let Ie=2;const Le=(w-B)/2;E.drawImage(A,Le,Ie,B,180),Ie+=180+F,E.fillStyle="#000000",E.font=`600 ${j}px Helvetica, Arial, sans-serif`,E.textAlign="center",E.textBaseline="top",E.fillText("Scan to join the ice-breaking session!",w/2,Ie),Ie+=j+F*1.2,E.drawImage(I,Be,Te,U,U);const J=S-32-V;E.font=`${V}px Helvetica, Arial, sans-serif`,E.fillStyle="#000000",E.textBaseline="top";const Fe=`code (optional): ${o}`;E.fillText(Fe,w/2,J),v.toBlob(pe=>{pe?a(pe):f(new Error("Failed to create blob"))},"image/png")},I.onerror=()=>f(new Error("Failed to load QR code image")),I.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(x)))},A.onerror=()=>f(new Error("Failed to load logo image")),A.src="/assets/reuneo_test_9.png"}),pS=({lobbyState:r,playerCount:o,onStart:a,onEnd:f,lobbyCode:p,currentRound:x})=>{const w=r==="checkin",S=o>=2&&r==="checkin",v=r==="active",E=r==="active",A=r==="terminated",[I,R]=N.useState(null),[M,L]=N.useState({qr:!1}),[B,j]=N.useState(!1),V=N.useRef(!1),U=()=>{R("start")},F=()=>{R("end")},Q=()=>{j(!0),R("checkin")},ne=()=>{I==="start"?(a(),Gn.success("Rounds started!",{position:"top-center"})):I==="end"&&f(),R(null)},te=()=>R(null);N.useEffect(()=>{V.current||r==="checkin"&&o===0&&(V.current=!0,j(!0),R("checkin"))},[r,o]);const q=(Le,be)=>Le?"progress-arrow active-shimmer":be?"progress-arrow available-shimmer":"progress-arrow inactive",ce=w&&!B&&o<6,K=r==="checkin"&&o>=6,Te=r==="active"&&x+1>=12;function Be(Le,be={}){const{silent:J=!1}=be,Fe=URL.createObjectURL(Le),pe=document.createElement("a");pe.href=Fe,pe.download=`reuneo-lobby-${p}.png`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(Fe),J||(L(me=>({...me,qr:!0})),setTimeout(()=>L(me=>({...me,qr:!1})),800))}const Ie=()=>{const Le=document.getElementById("modal-qr-svg");Le&&ox(Le,p).then(be=>{Be(be,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":be})]).then(()=>{L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800)}).catch(()=>{L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800)}):(L(J=>({...J,qr:!0})),setTimeout(()=>L(J=>({...J,qr:!1})),800))}).catch(be=>{console.error("Error generating QR code image:",be),alert("Failed to generate QR code image.")})};return y.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[y.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[y.jsx("div",{className:q(w,!1),tabIndex:0,title:"Check-in phase",onClick:Q,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),y.jsx(Pd,{direction:"down",show:ce})]}),y.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[y.jsx("div",{className:q(v,S&&!v),tabIndex:0,title:S?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),y.jsx(Pd,{direction:"down",show:K})]}),y.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[y.jsx("div",{className:q(A,E&&!A),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:F,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),y.jsx(Pd,{direction:"down",show:Te})]}),I&&y.jsx("div",{className:"progress-modal-overlay",children:y.jsx("div",{className:"progress-modal",children:I==="checkin"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"progress-modal-title",children:"Check-in: Print or Display this QR code to your attendees"}),y.jsx("div",{className:"progress-modal-message",children:"They scan to join. Once you have 6-10 people ready, click 'Start Rounds' - New arrivals will get paired up in the next rounds."}),y.jsxs("div",{className:"progress-modal-qr",onClick:Ie,style:{cursor:"pointer",position:"relative"},children:[y.jsx(rh,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"modal-qr-svg"}),y.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:y.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[y.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),y.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),M.qr&&y.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),y.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"0.5rem",fontSize:"1rem",color:"#3b3b3b",fontFamily:"Helvetica, Arial, sans-serif"},children:["code (optional): ",p]}),y.jsx("div",{className:"progress-modal-actions",children:y.jsx("button",{className:"progress-modal-btn confirm",onClick:te,children:"Got it"})})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"progress-modal-title",children:I==="start"?"Are you sure you want to start rounds? - Dont worry new people can join in the next rounds.":"Are you sure you want to end the rounds?"}),y.jsx("div",{className:"progress-modal-actions",children:I==="start"?y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"progress-modal-btn cancel",onClick:te,children:"Not Yet"}),y.jsx("button",{className:"progress-modal-btn confirm",onClick:ne,children:"Start"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"progress-modal-btn cancel",onClick:te,children:"Keep Going"}),y.jsx("button",{className:"progress-modal-btn confirm danger",onClick:ne,children:"End"})]})})]})})})]})},mS=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,f=o.slice(0,a),p=o.length-a,x=o.length;return y.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[y.jsxs("div",{className:"overlapping-profile-list",children:[f.map((w,S)=>y.jsx("img",{src:w.pfp_data||"/assets/player_icon_trans.png",alt:w.name||"Player",className:"overlapping-profile-img",style:{zIndex:S+1}},w.username||w.name||S)),p>0&&y.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),y.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},gS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=N.useContext(Xn),p=Fn(),x=Dr(),w=!1,S=Math.floor(9*60),{loadSound:v,seekTo:E,cancelSound:A,checkSound:I,soundEnabled:R,setSoundEnabled:M,isPlaying:L}=vf(),[B,j]=N.useState(!0),[V,U]=N.useState(!document.hidden),F=N.useRef(null),ne=new URLSearchParams(x.search).get("code"),[te,q]=N.useState(ne||"test");N.useEffect(()=>{ne||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const xt=localStorage.getItem("access_token"),At=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${xt}`}});if(At.ok){const Et=await At.json();if(console.log("Active lobbies response:",Et),Et&&Et.lobbies&&Et.lobbies.length>0){const tt=Et.lobbies[0];q(tt),window.history.replaceState({},"",`/admin_lobby_view?code=${tt}`)}}}catch(xt){console.error("Error fetching active lobby:",xt)}})())},[ne]);const[ce,K]=N.useState(!1),[Te,Be]=N.useState(null),[Ie,Le]=N.useState(!1),[be,J]=N.useState(null),[Fe,pe]=N.useState(null),[me,Ve]=N.useState(null),[ue,W]=N.useState(null),[Y,ye]=N.useState(null),[we,Ce]=N.useState({}),[ae,Ne]=N.useState([]),[Ee,ze]=N.useState(0),De=((Fe==null?void 0:Fe.length)||0)+((be==null?void 0:be.length)*2||0),[qe,oe]=N.useState(!1);N.useEffect(()=>{I()?M(!0):M(!1)},[]),N.useEffect(()=>{const We=()=>{const xt=!document.hidden;xt&&!V&&console.log("Page became visible - next poll will fetch latest data"),U(xt)};return document.addEventListener("visibilitychange",We),()=>{document.removeEventListener("visibilitychange",We)}},[V]),N.useEffect(()=>{(ue==="terminated"||ue==="inactive")&&A()},[ue]),N.useEffect(()=>{if(a(),f!=="admin"&&f!=="organizer"){p("/");return}const We=async At=>{if(we[At])return we[At];try{const Et=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(At)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(Et.ok){let tt=await Et.text();tt.startsWith('"')&&tt.endsWith('"')&&(tt=tt.slice(1,-1));const Ht=tt.startsWith("data:image")?tt:`data:image/jpeg;base64,${tt}`;return Ce(Nt=>({...Nt,[At]:Ht})),Ht}return null}catch(Et){return console.error(`Error fetching profile picture for ${At}:`,Et),null}},xt=setInterval(async()=>{try{const At=!document.hidden,Et=await fetch(`${window.server_url}/admin_lobby_data?is_visible=${At}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,is_visible_t_f:At?"t":"f",lobby_code:te}});if(Et.ok){const tt=await Et.json();console.log("Admin lobby data:",te,tt),(tt.lobby_state==="inactive"||tt.status==="inactive")&&A();const Ht=typeof tt.round_time_left=="number"&&!isNaN(tt.round_time_left)?tt.round_time_left:0;if(F.current=Ht,F.current!=null&&tt.lobby_state==="active"&&F.current!=0&&(E(S-F.current),console.log("seeking to",S-F.current)),tt.lobby_state==="active"&&ze(Nt=>tt.current_round>Nt?tt.current_round:Nt),tt.lobby_state==="terminated"&&(ze(0),A()),tt&&tt.unpaired_players){const Nt=await Promise.all(tt.unpaired_players.map(async lt=>{const Re=await We(lt.username);return{...lt,pfp_data:Re}})),$e=await Promise.all((tt.pairs_data||[]).map(async lt=>{const Re=await We(lt[0].username),ge=await We(lt[1].username);return[{...lt[0],pfp_data:Re},{...lt[1],pfp_data:ge}]}));pe(Nt),J($e),Ve(tt.round_time_left),W(tt.lobby_state),ye(tt.lobby_duration||300),Ne(tt.custom_tags||[])}else console.error("Invalid lobby data structure:",tt),pe([]),J([])}else console.error("Failed to fetch admin lobby data:",Et.status)}catch(At){console.error("Error fetching admin lobby data:",At)}},1e3);return()=>clearInterval(xt)},[we]);const xe=We=>{Be(We),K(!0)},He=()=>{K(!1),Be(null)},pt=()=>{Te&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:Te.username,lobby_code:te})}).then(We=>{We.ok?console.log(`User ${Te.name} kicked successfully`):console.error(`Failed to kick user ${Te.name}`)}).catch(We=>{console.error("Error kicking user:",We)}).finally(()=>{He()})},Mt=()=>{Le(!0)},mt=()=>{Le(!1)},Je=()=>{p(`/lobby?code=${te}`),mt()};function et(We,xt={}){const{silent:At=!1}=xt,Et=URL.createObjectURL(We),tt=document.createElement("a");tt.href=Et,tt.download=`reuneo-lobby-${te}.png`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(Et),At||Gn.success("QR code downloaded!")}async function Rt(){const We=document.getElementById("admin-qr-svg");We&&ox(We,te).then(xt=>{et(xt,{silent:!0}),navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":xt})]).then(()=>{Gn.success("Downloaded and copied to clipboard!")}).catch(()=>{Gn.success("QR code downloaded!")}):Gn.success("QR code downloaded!")}).catch(xt=>{console.error("Error generating QR code image:",xt),Gn.error("Failed to generate QR code image.")})}const Pe=()=>y.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:y.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[y.jsx("button",{onClick:()=>j(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"16px",cursor:"pointer",fontWeight:"bold",padding:"4px 8px"},children:"X"}),y.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),y.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),y.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),y.jsx("button",{onClick:()=>{v(),j(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),mn=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:te}})},Jt=async()=>{A(),(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:te}})).ok&&p("/")};return y.jsxs(y.Fragment,{children:[y.jsx(Nc,{position:"top-center"}),y.jsxs("div",{className:"admin-lobby-container",children:[w,y.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:y.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),y.jsx(pS,{lobbyState:ue,playerCount:De,onStart:mn,onEnd:Jt,lobbyCode:te,currentRound:Ee}),y.jsx(mS,{players:{pairedPlayers:be,lobbyData:Fe}}),y.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>oe(We=>!We),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:qe?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[qe?"Hide Controls":"More Controls",y.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:qe?"rotate(180deg)":"rotate(0deg)"},children:""})]}),y.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:qe?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:qe?1:0,pointerEvents:qe?"auto":"none",marginBottom:qe?"2rem":0},children:[y.jsxs("div",{className:"admin-lobby-qr",onClick:Rt,style:{cursor:"pointer"},children:[y.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",y.jsx("span",{className:"copy-icon","aria-label":"Copy",children:y.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[y.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),y.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),y.jsx("div",{style:{position:"relative",display:"inline-block"},children:y.jsx(rh,{value:`${window.location.origin}/lobby?code=${te}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#000000",id:"admin-qr-svg"})}),y.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(te);const We=document.querySelector(".lobby-code-display");We.classList.add("copied"),setTimeout(()=>We.classList.remove("copied"),250)},children:[y.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),y.jsx("span",{className:"lobby-code-value",children:te}),y.jsx("span",{className:"copy-icon","aria-label":"Copy",children:y.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[y.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),y.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),y.jsxs("div",{className:"admin-lobby-event-settings",children:[y.jsxs("div",{className:"admin-profile",children:[y.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),y.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),y.jsx("button",{onClick:Mt,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),y.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[y.jsxs("span",{className:"setting-label",children:["Round Duration: ",y.jsxs("span",{className:"setting-value",children:[Math.floor(Y/60)," min"]})]}),y.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),ae&&ae.length>0&&y.jsx("div",{className:"setting-item",children:y.jsxs("div",{className:"tags-container",children:[ae.slice(0,3).map((We,xt)=>y.jsx("span",{className:"tag-pill",children:We},xt)),ae.length>3&&y.jsxs("span",{className:"tag-pill more-tags",children:["+",ae.length-3," more"]})]})})]})]}),y.jsx("div",{className:"admin-lobby-actions"})]}),(ue==="active"||ue==="interrim")&&me&&y.jsx("div",{className:"admin-lobby-timer-container",children:y.jsxs("div",{className:"admin-lobby-timer-glass",children:[y.jsx(ih,{isPlaying:ue==="active",duration:Y,initialRemainingTime:me,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:We})=>{const xt=Math.floor(We/60),At=Math.floor(We%60);return y.jsxs("span",{className:`timer-text ${We<=10?"timer-text-fadescale":""}`,children:[xt,":",String(At).padStart(2,"0")]})}},`${ue}-${Math.floor(me)}`),y.jsx("span",{className:"timer-subtext",children:"round time left"}),y.jsx("svg",{width:"0",height:"0",children:y.jsx("defs",{children:y.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[y.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),y.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),ue!=="checkin"&&y.jsxs("div",{className:"admin-lobby-stats",children:[y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-title",children:"Total Players"}),y.jsx("div",{className:"stat-value",children:((Fe==null?void 0:Fe.length)||0)+((be==null?void 0:be.length)*2||0)})]}),y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-title",children:"Paired Players"}),y.jsx("div",{className:"stat-value",children:(be==null?void 0:be.length)*2||0})]}),y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-title",children:"Unpaired Players"}),y.jsx("div",{className:"stat-value",children:(Fe==null?void 0:Fe.length)||0})]})]}),be&&ue!=="checkin"&&y.jsx("div",{className:"admin-lobby-players",children:y.jsxs("div",{className:"player-section",children:[y.jsxs("div",{className:"section-header",children:["Paired Players: ",y.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(be==null?void 0:be.length)*2||0})]}),y.jsx("div",{className:"player-grid",children:be.map((We,xt)=>{const At=We[0].match_details&&We[0].match_details.opponent_matched_tags&&We[0].match_details.opponent_matched_tags.length>0||We[1].match_details&&We[1].match_details.opponent_matched_tags&&We[1].match_details.opponent_matched_tags.length>0;return y.jsxs("div",{className:"paired-player-card",children:[At&&y.jsx("div",{className:"matched-pair-badge",children:"Matched"}),y.jsxs("div",{className:"paired-player",onClick:()=>xe(We[0]),children:[y.jsx("img",{src:We[0].pfp_data,alt:We[0].name,className:"paired-player-avatar"}),y.jsx("h3",{className:"paired-player-name",children:We[0].name}),We[0].match_details&&We[0].match_details.opponent_matched_tags&&We[0].match_details.opponent_matched_tags.length>0&&y.jsx("div",{className:"matching-tag-container",children:y.jsx("div",{className:"matched-player-tag",children:We[0].match_details.opponent_matched_tags.map((Et,tt)=>y.jsx("span",{className:"matching-tag-pill",children:Et},tt))})})]}),y.jsxs("div",{className:"paired-player",onClick:()=>xe(We[1]),children:[y.jsx("img",{src:We[1].pfp_data,alt:We[1].name,className:"paired-player-avatar"}),y.jsx("h3",{className:"paired-player-name",children:We[1].name}),We[1].match_details&&We[1].match_details.opponent_matched_tags&&We[1].match_details.opponent_matched_tags.length>0&&y.jsx("div",{className:"matching-tag-container",children:y.jsx("div",{className:"matched-player-tag",children:We[1].match_details.opponent_matched_tags.map((Et,tt)=>y.jsx("span",{className:"matching-tag-pill",children:Et},tt))})})]})]},xt)})})]})}),Fe&&y.jsx("div",{className:"admin-lobby-players",children:y.jsxs("div",{className:"player-section",children:[y.jsxs("div",{className:"section-header",children:[ue==="checkin"?"People Joined":"Unpaired Players",": ",y.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(Fe==null?void 0:Fe.length)||0})]}),y.jsx("div",{className:"player-grid",children:Fe.map((We,xt)=>y.jsxs("div",{className:"player-card",onClick:()=>xe(We),children:[y.jsx("img",{src:We.pfp_data,alt:We.name,className:"player-avatar"}),y.jsx("h3",{className:"player-name",children:We.name})]},xt))})]})}),y.jsx(hS,{isOpen:Ie,onClose:mt,onConfirm:Je}),y.jsx(fS,{isOpen:ce,onClose:He,onConfirm:pt,userName:(Te==null?void 0:Te.name)||"this user"})]}),R||!B||ue=="checkin"||ue==null||L?null:y.jsx(Pe,{})]})},xS=()=>{const r=Fn(),{user:o}=N.useContext(Xn),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return y.jsxs("div",{className:"product-selection-container",children:[y.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[y.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),y.jsxs("div",{className:"product-selection-content",children:[y.jsx("div",{className:"product-selection-header",children:y.jsx("h1",{children:"Product Selection"})}),y.jsxs("div",{className:"plans-section",children:[y.jsx("h2",{children:"Available Plans"}),y.jsxs("div",{className:"plan-card",children:[y.jsx("h3",{children:"Organizer Plan"}),y.jsxs("div",{className:"plan-description",children:[y.jsx("p",{children:"Create experiences for your community with our beta plan."}),y.jsxs("ul",{children:[y.jsx("li",{children:"Create unlimited experiences"}),y.jsx("li",{children:"Access to organizer dashboard"}),y.jsx("li",{children:"Priority customer support"})]})]}),y.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),y.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},yS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:f}=N.useContext(Xn),[p,x]=N.useState(""),[w,S]=N.useState(""),[v,E]=N.useState(!1),[A,I]=N.useState(""),[R,M]=N.useState(!1),[L,B]=N.useState([]),[j,V]=N.useState(""),[U,F]=N.useState("5"),[Q,ne]=N.useState("0"),[te,q]=N.useState(!1),[ce,K]=N.useState(null),[Te,Be]=N.useState(!1),[Ie,Le]=N.useState(null),[be,J]=N.useState(null),[Fe,pe]=N.useState(""),[me,Ve]=N.useState(""),[ue,W]=N.useState(null),[Y,ye]=N.useState(null),[we,Ce]=N.useState(""),[ae,Ne]=N.useState(!1),[Ee,ze]=N.useState(!1),[De,qe]=N.useState({x:0,y:0}),[oe,xe]=N.useState(1),[He,pt]=N.useState(null),Mt=8,mt=Fn(),Je=N.useRef(null);N.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),S(r)),Je.current&&Je.current.focus()},[r]);const et=Re=>{const ge=/^[a-z0-9]+$/;return Re.length>=2&&ge.test(Re)},Rt=Re=>{const ge=Re.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");S(ge),M(!0),setTimeout(()=>{M(!1)},500)},Pe=()=>{if(j.includes(",")){const Re=j.split(",").map(it=>it.startsWith(" ")?it.substring(1):it),ge=[];Re.forEach(it=>{const Ze=it.trim();Ze&&!L.includes(Ze)&&!ge.includes(Ze)&&ge.push(Ze)}),ge.length>0&&B([...L,...ge]),V("")}else j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),V(""))},mn=Re=>{B(L.filter(ge=>ge!==Re))},Jt=Re=>{Re.key==="Enter"&&j.trim()&&(Re.preventDefault(),Pe())},We=Re=>{Re==="icebreaker"?L.length>0||j.trim()?(Le("icebreaker"),Be(!0)):(K("icebreaker"),B([]),V("")):Re==="custom"&&K("custom")},xt=()=>{K(Ie),B([]),V(""),Be(!1),Le(null)},At=()=>{Be(!1),Le(null)},Et=(Re,ge,it)=>new Promise(Ze=>{const yt=new Image;yt.onload=()=>{const Xt=document.createElement("canvas"),En=Xt.getContext("2d");let{width:ln,height:ot}=yt;ln>ot?ln>ge&&(ot=ot*ge/ln,ln=ge):ot>it&&(ln=ln*it/ot,ot=it),Xt.width=ln,Xt.height=ot,En.drawImage(yt,0,0,ln,ot);const rn=Xt.toDataURL("image/jpeg",.7);Ze(rn)},yt.src=URL.createObjectURL(Re)}),tt=async Re=>{const ge=Re.target.files[0];if(ge){if(Ce(""),ze(!0),!["image/jpeg","image/jpg","image/png"].includes(ge.type)){Ce("Invalid format. Please upload a JPG or PNG image."),ze(!1);return}if(ge.size>2*1024*1024){Ce("File too large. Please choose an image under 2MB."),ze(!1);return}try{const it=await Et(ge,400,400);J(ge),W(it),Ne(!0),ze(!1)}catch(it){console.error("Error processing image:",it),Ce("Error processing image. Please try again."),ze(!1)}}},Ht=(Re,ge)=>{pt(ge)},Nt=async()=>{try{ze(!0);const Re=await pf(ue,He);ye(Re),Ne(!1),ze(!1)}catch(Re){console.error("Error cropping logo:",Re),Ce("Error processing image. Please try again."),Ne(!1),ze(!1)}},$e=()=>{J(null),W(null),ye(null),Ne(!1),ze(!1),qe({x:0,y:0}),xe(1),pt(null),Ce("");const Re=document.getElementById("logoUpload");Re&&(Re.value="")},lt=async Re=>{if(Re.preventDefault(),!et(w)){I("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),I("");const ge=parseInt(U)*60+parseInt(Q);let it=null;Y&&(it=Y.split(",")[1]);try{const Ze={lobby_code:w,custom_tags:ce==="custom"?L:[],lobby_duration:ge,show_table_numbers:te};it&&(Ze.logo_icon=it),Fe.trim()&&(Ze.logo_name=Fe.trim()),me.trim()&&(Ze.logo_hyperlink=me.trim());const yt=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(Ze)});if(yt.ok)console.log("Lobby created successfully"),console.log(await yt.json()),mt(`/admin_lobby_view?code=${w}`);else{const Xt=await yt.json();I(Xt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(Ze){I("An error occurred while creating the lobby"),console.error("Error creating lobby:",Ze)}finally{E(!1)}};return y.jsxs("div",{className:"create-lobby-background",children:[y.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>mt(-1)}),y.jsxs("div",{className:"create-lobby-container",children:[y.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),y.jsxs("form",{onSubmit:lt,className:"create-lobby-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),y.jsx("input",{ref:Je,type:"text",id:"lobbyCode",value:w,onChange:Rt,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),y.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Round Duration"}),y.jsxs("div",{className:"duration-input-container",children:[y.jsxs("div",{className:"duration-input-group",children:[y.jsx("input",{type:"number",id:"minutes",value:U,onChange:Re=>{const ge=Re.target.value;(ge===""||parseInt(ge)>0&&parseInt(ge)<=Mt)&&(F(ge),parseInt(ge)===Mt&&ne("0"))},min:"1",max:Mt,placeholder:`1-${Mt}`,className:"form-input duration-input",autoComplete:"off"}),y.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),y.jsxs("div",{className:"duration-input-group",children:[y.jsx("input",{type:"number",id:"seconds",value:Q,onChange:Re=>{const ge=Re.target.value;(ge===""||parseInt(ge)>=0&&parseInt(ge)<=59)&&ne(ge)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(U)===Mt}),y.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),y.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",Mt," minutes"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),y.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:te,onChange:Re=>q(Re.target.checked),className:"form-input checkbox-input"}),y.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),y.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Matchmaking Categories"}),y.jsxs("div",{className:"matchmaking-tabs",children:[y.jsx("button",{type:"button",className:`tab-button ${ce==="icebreaker"?"tab-selected":""}`,onClick:()=>We("icebreaker"),children:"Community Ice Breaker"}),y.jsx("button",{type:"button",className:`tab-button ${ce==="custom"?"tab-selected":""}`,onClick:()=>We("custom"),children:"Custom Matching"})]}),ce==="custom"&&y.jsxs("div",{className:"custom-matching-section",children:[y.jsxs("div",{className:"tag-input-container",children:[y.jsx("input",{type:"text",id:"tagInput",value:j,onChange:Re=>V(Re.target.value),onKeyDown:Jt,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),y.jsx("button",{type:"button",onClick:Pe,className:"tag-add-button",children:"+"})]}),L.length>0&&y.jsx("div",{className:"tag-list",children:L.map((Re,ge)=>y.jsxs("div",{className:"tag-item",children:[Re,y.jsx("button",{type:"button",onClick:()=>mn(Re),className:"tag-remove-button",children:""})]},ge))}),y.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]})]}),y.jsxs("div",{className:"form-group logo-upload-section",children:[y.jsx("label",{children:"Sponsor Logo"}),!Y&&!ae&&y.jsxs(y.Fragment,{children:[Ee?y.jsx("div",{className:"logo-processing",children:"Processing..."}):y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:tt,style:{display:"none"}}),y.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),we&&y.jsx("div",{className:"logo-error-message",children:we})]}),ae&&ue&&y.jsxs("div",{className:"logo-crop-container",children:[y.jsx("div",{className:"logo-crop-area",children:y.jsx(hf,{image:ue,crop:De,zoom:oe,aspect:1,onCropChange:qe,onZoomChange:xe,onCropComplete:Ht})}),y.jsxs("div",{className:"logo-crop-controls",children:[y.jsx("button",{type:"button",onClick:Nt,className:"logo-save-button",disabled:Ee,children:Ee?"Processing...":"Save Crop"}),y.jsx("button",{type:"button",onClick:$e,className:"logo-cancel-button",children:"Cancel"})]})]}),Y&&!ae&&y.jsx("div",{className:"logo-preview-container",children:y.jsxs("div",{className:"logo-preview",children:[y.jsx("img",{src:Y,alt:"Logo preview",className:"logo-preview-image"}),y.jsx("button",{type:"button",onClick:$e,className:"logo-remove-button",children:""})]})}),!1]}),A&&y.jsx("div",{className:"error-message",children:A}),y.jsx("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Creating...":"Create Lobby"})]})]}),Te&&y.jsx("div",{className:"modal-overlay",children:y.jsxs("div",{className:"modal-content",children:[y.jsx("h3",{children:"Switch to Community Ice Breaker?"}),y.jsx("p",{children:"This will clear your current matching categories."}),y.jsxs("div",{className:"modal-buttons",children:[y.jsx("button",{type:"button",onClick:At,className:"modal-button modal-cancel",children:"Cancel"}),y.jsx("button",{type:"button",onClick:xt,className:"modal-button modal-confirm",children:"Confirm"})]})]})})]})},wS=r=>{try{const o=new URLSearchParams(r||window.location.search),a=o.get("via")||"",f=o.get("rewardful")||o.get("rewardful_referral")||"",p=typeof window<"u"&&window.Rewardful&&window.Rewardful.referral||"",x=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("rewardful_referral")||"",w=p||f||a||x||"";return w&&typeof window<"u"&&window.localStorage&&window.localStorage.setItem("rewardful_referral",w),w}catch{return""}},vS=()=>{const{login:r,user:o,checkAuth:a,permissions:f}=N.useContext(Xn),[p,x]=N.useState(""),[w,S]=N.useState(""),[v,E]=N.useState(""),[A,I]=N.useState(""),[R,M]=N.useState(""),[L,B]=N.useState(""),[j,V]=N.useState({}),[U,F]=N.useState(""),[Q,ne]=N.useState(!1),te=Fn(),q=Dr();N.useEffect(()=>{localStorage.getItem("access_token")&&!o&&a()},[]),N.useEffect(()=>{f!==null&&(f==="admin"||f==="organizer")&&te("/")},[f,te]),N.useEffect(()=>{(async()=>{if(o!==null&&f!==null&&f!=="admin"&&f!=="organizer")try{const ae=localStorage.getItem("access_token");if(!ae)return;const Ne=await fetch(`${window.server_url}/check-subscription-status`,{headers:{Authorization:`Bearer ${ae}`}});Ne.ok&&(await Ne.json()).has_access===!0&&te("/organizer-account-details")}catch(ae){console.error("Error checking subscription status:",ae)}})()},[o,f,te]);const ce=Ce=>{const ae=/^[a-z0-9]+$/;return Ce.length>=2&&ae.test(Ce)},K=Ce=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ce)&&Ce.trim()!=="",Te=Ce=>Ce.replace(/\D/g,"").length===10,Be=Ce=>Ce.trim().length>=2,Ie=Ce=>{const ae=Ce.replace(/\D/g,"");return ae.length===0?"":ae.length<=3?`(${ae}`:ae.length<=6?`(${ae.slice(0,3)}) ${ae.slice(3)}`:`(${ae.slice(0,3)}) ${ae.slice(3,6)}-${ae.slice(6,10)}`},Le=Ce=>Ce.replace(/\D/g,""),be=Ce=>{const ae=Ce.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");x(ae),U&&F("")},J=Ce=>{S(Ce.target.value),U&&F(""),j.email&&V(ae=>({...ae,email:""}))},Fe=Ce=>{const ae=Ce.target.value;E(ae),U&&F(""),j.phone&&V(Ne=>({...Ne,phone:""}))},pe=()=>{const Ce=Ie(v);E(Ce),Ce&&!Te(Ce)?V(ae=>({...ae,phone:"Invalid phone number"})):V(ae=>({...ae,phone:""}))},me=Ce=>{const ae=Ce.target.value;I(ae),U&&F(""),j.cityState&&V(Ne=>({...Ne,cityState:""}))},Ve=()=>{A&&!Be(A)?V(Ce=>({...Ce,cityState:"City/State must be at least 2 characters"})):V(Ce=>({...Ce,cityState:""}))},ue=Ce=>{M(Ce.target.value),j.eventType&&V(ae=>({...ae,eventType:""}))},W=Ce=>{B(Ce.target.value),j.avgAttendees&&V(ae=>({...ae,avgAttendees:""}))},Y=async Ce=>{Ce.preventDefault(),F(""),ne(!0);const ae=o!==null;if(!ae&&(!p||!ce(p))){F("Username must be at least 2 characters and contain only lowercase letters and numbers"),ne(!1);return}if(!w||!K(w)){V(qe=>({...qe,email:"Please enter a valid email address"})),F("Please enter a valid email address"),ne(!1);return}const Ne=Le(v);if(!v||!Te(v)){V(qe=>({...qe,phone:"Please enter a valid phone number"})),F("Please enter a valid phone number"),ne(!1);return}if(!A||!Be(A)){V(qe=>({...qe,cityState:"City/State is required (minimum 2 characters)"})),F("City/State is required (minimum 2 characters)"),ne(!1);return}const Ee=new URLSearchParams(q.search),ze=wS(q.search),De=Ee.get("ref")||Ee.get("affiliate_code")||"";if(ae){const qe=localStorage.getItem("access_token");if(!qe){F("Authentication required. Please log in again."),ne(!1);return}try{if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${qe}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:Ne,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");const xe=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${qe}`,"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:ze,affiliate_code:De})}),He=await xe.json();if(!xe.ok||He.error){if(He.error&&He.error.includes("already have an active subscription")){te("/organizer-account-details");return}F(He.error||"Failed to create checkout session. Please try again."),ne(!1);return}window.location.href=He.checkout_url;return}catch(oe){console.error("Error creating checkout session:",oe),F("An error occurred. Please try again."),ne(!1);return}}try{const oe=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:p,password:p})}),xe=await oe.json();if(xe.error==="Username already taken"){F("Username is taken"),ne(!1);return}if(!oe.ok){F(xe.message||"Signup failed"),ne(!1);return}r(xe),await a();const He=localStorage.getItem("access_token");if(!He)throw new Error("Authentication failed");const pt=await fetch("/assets/fakeprofile.png");if(!pt.ok)throw new Error("Failed to fetch profile image");const mt=await(await pt.blob()).arrayBuffer(),Je=btoa(new Uint8Array(mt).reduce((mn,Jt)=>mn+String.fromCharCode(Jt),""));if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${He}`,"Content-Type":"application/json"},body:JSON.stringify({name:p,image_data:Je,phone_number:Ne,city_state:A,event_type:R||"",avg_attendees:L||""})})).ok)throw new Error("Failed to update profile");await a();const Rt=await fetch(`${window.server_url}/create-checkout-session`,{method:"POST",headers:{Authorization:`Bearer ${He}`,"Content-Type":"application/json"},body:JSON.stringify({email:w,rewardful_referral:ze,affiliate_code:De})}),Pe=await Rt.json();if(!Rt.ok||Pe.error){if(Pe.error&&Pe.error.includes("already have an active subscription")){te("/organizer-account-details");return}throw new Error(Pe.error||"Failed to create checkout session")}window.location.href=Pe.checkout_url}catch(qe){console.error("Error:",qe),F("An error occurred. Please try again."),ne(!1)}},ye=o===null,we=Q||f==="admin"||f==="organizer";return y.jsxs("div",{className:"signup-container",children:[y.jsx("button",{onClick:()=>te("/"),className:"homescreen-button",children:"Home"}),y.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),y.jsx("h3",{className:"signup-header",children:"Become an Organizer"}),y.jsx("div",{className:"step-form-container",children:y.jsxs("form",{onSubmit:Y,children:[y.jsxs("div",{style:{display:ye?"block":"none"},children:[y.jsx("label",{className:"step-label",children:"Username"}),y.jsx("input",{type:"text",value:p,onChange:be,placeholder:"Enter a username",className:"step-input",autoFocus:ye}),p.length>0&&y.jsxs("div",{className:"username-info-message",children:[y.jsxs("svg",{className:"info-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[y.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),y.jsx("path",{d:"M8 5V7M8 11V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),y.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),y.jsx("span",{children:"This will be your temporary password"})]})]}),y.jsxs("div",{style:{marginTop:ye?"20px":"0"},children:[y.jsxs("label",{className:"step-label",children:["Email",j.email&&y.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[y.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),y.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),y.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),y.jsx("input",{type:"email",value:w,onChange:J,placeholder:"Enter your email",className:`step-input ${j.email?"input-error":""}`,autoFocus:!ye})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsxs("label",{className:"step-label",children:["Phone Number",j.phone&&y.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[y.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),y.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),y.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),y.jsx("input",{type:"tel",value:v,onChange:Fe,onBlur:pe,placeholder:"(123) 456-7890",className:`step-input ${j.phone?"input-error":""}`})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsxs("label",{className:"step-label",children:["City / State",j.cityState&&y.jsxs("svg",{className:"error-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"},children:[y.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"#dc3545",strokeWidth:"1.5",fill:"#ffebee"}),y.jsx("path",{d:"M8 4V8M8 12V10",stroke:"#dc3545",strokeWidth:"1.5",strokeLinecap:"round"}),y.jsx("circle",{cx:"8",cy:"4",r:"0.5",fill:"#dc3545"})]})]}),y.jsx("input",{type:"text",value:A,onChange:me,onBlur:Ve,placeholder:"City / State",className:`step-input ${j.cityState?"input-error":""}`})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsx("label",{className:"step-label",children:"What events do you host?"}),y.jsxs("select",{value:R,onChange:ue,className:"step-select",children:[y.jsx("option",{value:"",children:"Select an option..."}),y.jsx("option",{value:"Hospitality-Restaurants",children:"Hospitality-Restaurants"}),y.jsx("option",{value:"Social",children:"Social"}),y.jsx("option",{value:"Residential",children:"Residential"}),y.jsx("option",{value:"Business Networking",children:"Business Networking"}),y.jsx("option",{value:"Event Specialist",children:"Event Specialist"}),y.jsx("option",{value:"Education",children:"Education"}),y.jsx("option",{value:"HR-Team Building",children:"HR-Team Building"}),y.jsx("option",{value:"Corporate",children:"Corporate"}),y.jsx("option",{value:"Co-working",children:"Co-working"}),y.jsx("option",{value:"Dating",children:"Dating"}),y.jsx("option",{value:"Other",children:"Other"})]})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsx("label",{className:"step-label",children:"Avg # of attendees"}),y.jsxs("select",{value:L,onChange:W,className:"step-select",children:[y.jsx("option",{value:"",children:"Select an option..."}),y.jsx("option",{value:"5-15",children:"5-15"}),y.jsx("option",{value:"15-30",children:"15-30"}),y.jsx("option",{value:"30-50",children:"30-50"}),y.jsx("option",{value:"50-75",children:"50-75"}),y.jsx("option",{value:"75-100",children:"75-100"}),y.jsx("option",{value:"100-150",children:"100-150"}),y.jsx("option",{value:"150-200",children:"150-200"}),y.jsx("option",{value:"200+",children:"200+"})]})]}),U&&y.jsx("div",{className:"error-message",style:{marginTop:"15px",marginBottom:"10px"},children:U}),y.jsx("button",{type:"submit",className:"primary-button",disabled:we,style:{marginTop:"20px"},children:Q?"Loading...":"Submit"})]})})]})},CS=()=>{const[r,o]=N.useState(!1),[a,f]=N.useState(""),p=N.useRef(null),x=Fn(),w=Dr();return N.useEffect(()=>{const v=new URLSearchParams(w.search).get("session_id");return(async()=>{let A="/";if(!v){f("Missing session ID"),o(!0),p.current=setTimeout(()=>{o(!1),x(A)},2e3);return}try{const I=localStorage.getItem("access_token");if(!I){f("Authentication required"),o(!0),p.current=setTimeout(()=>{o(!1),x(A)},2e3);return}const R=await fetch(`${window.server_url}/organizer-signup-success?session_id=${v}`,{headers:{Authorization:`Bearer ${I}`}}),M=await R.json();if(!R.ok||M.error)console.error("Payment verification failed:",M.error),f(M.error||"Payment verification failed");else try{const L=await fetch(`${window.server_url}/view_my_active_lobbies`,{headers:{Authorization:`Bearer ${I}`}});if(L.ok){const B=await L.json();A=!!(B&&Array.isArray(B.lobbies)&&B.lobbies.length>0)?"/":"/create_lobby"}else A="/"}catch(L){console.error("Error checking active lobbies:",L),A="/"}}catch(I){console.error("Error verifying payment:",I),f("Failed to verify payment")}o(!0),p.current=setTimeout(()=>{o(!1),x(A)},2e3)})(),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[w.search,x]),r?y.jsxs("div",{className:"success-overlay",children:[y.jsx("div",{className:"success-text",children:"Success! You're now an organizer!"}),a&&y.jsx("div",{className:"success-error",style:{marginTop:"20px"},children:a})]}):y.jsx("div",{className:"signup-container",children:y.jsx("div",{className:"loading-message",children:"Processing..."})})},ES=()=>{const{user:r,checkAuth:o,permissions:a}=N.useContext(Xn),f=Fn(),[p,x]=N.useState(null),[w,S]=N.useState(!0),[v,E]=N.useState(!1),[A,I]=N.useState(""),[R,M]=N.useState(!1),[L,B]=N.useState(!1);N.useEffect(()=>{a!==null&&a!=="admin"&&a!=="organizer"&&f("/organizer-signup")},[a,f]),N.useEffect(()=>{r&&(async()=>{try{const F=localStorage.getItem("access_token");if(!F){f("/organizer-signup");return}const Q=await fetch(`${window.server_url}/organizer-account-details`,{headers:{Authorization:`Bearer ${F}`}}),ne=await Q.json();if(!Q.ok||ne.error){if((a==="admin"||a==="organizer")&&ne.has_subscription!==!1){I(ne.error||"Some subscription details may be incomplete"),x(ne),S(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}I(ne.error||"Failed to load account details"),ne.has_subscription!==!1&&x(ne),S(!1);return}if(ne.has_subscription===!1){f("/organizer-signup");return}x(ne)}catch(F){console.error("Error fetching account details:",F),I("Failed to load account details. Please try again.")}finally{S(!1)}})()},[r,a,f]),N.useEffect(()=>(R?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[R]);const j=U=>U?new Date(U*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,V=async()=>{E(!0),I("");try{const U=localStorage.getItem("access_token");if(!U){I("Authentication required"),E(!1);return}const F=await fetch(`${window.server_url}/cancel-subscription`,{method:"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"}}),Q=await F.json();if(!F.ok||Q.error){I(Q.error||"Failed to cancel subscription"),E(!1),M(!1);return}B(!0),M(!1),setTimeout(()=>{f("/")},1500)}catch(U){console.error("Error canceling subscription:",U),I("An error occurred. Please try again."),E(!1),M(!1)}};return w?y.jsx("div",{className:"signup-container",children:y.jsx("div",{className:"loading-message",children:"Loading account details..."})}):!p&&!w?y.jsxs("div",{className:"signup-container",children:[y.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),y.jsx("div",{className:"error-message",children:A||"No account details found"})]}):p?y.jsxs("div",{className:"signup-container",children:[y.jsx("button",{onClick:()=>f("/"),className:"homescreen-button",children:"Home"}),y.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),y.jsx("h3",{className:"signup-header",children:"Organizer Account Details"}),y.jsx("div",{className:"step-form-container",children:y.jsxs("div",{className:"account-details-content",children:[A&&y.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:A}),p.subscription_status&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Subscription Status:"}),y.jsx("span",{className:`detail-value status-${p.subscription_status}`,children:p.subscription_status})]}),p.email&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Email:"}),y.jsx("span",{className:"detail-value",children:p.email})]}),p.billing_period&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Billing Period:"}),y.jsx("span",{className:"detail-value",children:p.billing_period})]}),p.amount!==null&&p.amount!==void 0&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Amount:"}),y.jsxs("span",{className:"detail-value",children:["$",p.amount," ",p.currency||""]})]}),p.current_period_start&&j(p.current_period_start)&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Current Period Start:"}),y.jsx("span",{className:"detail-value",children:j(p.current_period_start)})]}),p.current_period_end&&j(p.current_period_end)&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Current Period End:"}),y.jsx("span",{className:"detail-value",children:j(p.current_period_end)})]}),p.cancel_at_period_end&&y.jsxs("div",{className:"detail-row",children:[y.jsx("span",{className:"detail-label",children:"Cancellation:"}),y.jsx("span",{className:"detail-value",children:"Will cancel at period end"})]}),y.jsx("button",{onClick:()=>M(!0),className:"primary-button cancel-button",style:{marginTop:"30px"},children:"Cancel Subscription"})]})}),R&&y.jsx("div",{className:"modal-overlay",onClick:U=>U.stopPropagation(),children:y.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[y.jsx("h3",{children:"Cancel Subscription"}),y.jsx("p",{children:"Are you sure you want to cancel your subscription?"}),y.jsxs("div",{className:"modal-buttons",children:[y.jsx("button",{className:"modal-button modal-cancel",onClick:()=>M(!1),disabled:v,children:"Cancel"}),y.jsx("button",{className:"modal-button modal-confirm",onClick:V,disabled:v,children:v?"Processing...":"Confirm"})]})]})}),L&&y.jsx("div",{className:"toast-container",children:y.jsx("div",{className:"toast-message",children:"Subscription canceled successfully"})})]}):null},uf=({size:r=60,className:o=""})=>y.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:y.jsx("div",{className:"attendees-spinner-inner"})}),Od=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16"],bS=r=>{if(!r)return Od[0];let o=0;for(let f=0;f<r.length;f++)o=r.charCodeAt(f)+((o<<5)-o);const a=Math.abs(o)%Od.length;return Od[a]},df=nn.memo(({tag:r})=>{const o=bS(r);return y.jsx("span",{className:"attendee-modal-tag-pill",style:{background:o},children:r})});df.displayName="TagPill";const SS=r=>{if(!r)return"Date not available";let o;if(typeof r=="number")o=r<1e10?new Date(r*1e3):new Date(r);else if(typeof r=="string")o=new Date(r);else return"Date not available";return isNaN(o.getTime())?"Date not available":o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},AS=({attendees:r=[]})=>{const o=N.useRef(null),a=N.useRef(null),f=N.useRef(null),[p,x]=N.useState(null),[w,S]=N.useState(!1),[v,E]=N.useState({}),[A,I]=N.useState(!1),[R,M]=N.useState({}),L=N.useRef(-1),B=N.useRef(null),[j,V]=N.useState(!1),[U,F]=N.useState(null),[Q,ne]=N.useState({}),[te,q]=N.useState(!1),[ce,K]=N.useState(null),[Te,Be]=N.useState(null),[Ie,Le]=N.useState(!1),be=N.useRef(null),J=N.useRef(null),Fe=N.useRef({}),pe=N.useRef(null);N.useEffect(()=>{const oe=window.matchMedia("(pointer: coarse)"),xe=()=>S(!!oe.matches);return xe(),oe.addEventListener?oe.addEventListener("change",xe):oe.addListener(xe),()=>{oe.removeEventListener?oe.removeEventListener("change",xe):oe.removeListener(xe)}},[]),N.useEffect(()=>{const oe=xe=>{a.current&&(a.current.contains(xe.target)||x(null))};return document.addEventListener("pointerdown",oe,{capture:!0}),()=>{document.removeEventListener("pointerdown",oe,{capture:!0})}},[]);const me=N.useCallback((oe=1)=>{const xe=o.current;if(!xe)return;const He=Math.round(xe.clientWidth*.75)*oe;xe.scrollBy({left:He,behavior:"smooth"})},[]),Ve=N.useCallback(()=>{const oe=o.current;return oe?oe.scrollLeft>0:!1},[]),ue=N.useCallback(()=>{const oe=o.current;return oe?oe.scrollLeft<oe.scrollWidth-oe.clientWidth-1:!1},[]),[W,Y]=N.useState({left:!1,right:!0});N.useEffect(()=>{const oe=()=>{Y({left:Ve(),right:ue()})},xe=o.current;return xe&&(oe(),xe.addEventListener("scroll",oe),window.addEventListener("resize",oe)),()=>{xe&&(xe.removeEventListener("scroll",oe),window.removeEventListener("resize",oe))}},[r.length,Ve,ue]);const ye=N.useCallback(async oe=>{if(A||oe.length===0)return;const xe=oe.filter(pt=>!v[pt]&&!R[pt]);if(xe.length===0)return;I(!0);const He={...R};xe.forEach(pt=>{He[pt]=!0}),M(He);try{const pt=localStorage.getItem("access_token"),Mt=await fetch(`${window.server_url}/organizer_attendees/images`,{method:"POST",headers:{Authorization:`Bearer ${pt}`,"Content-Type":"application/json"},body:JSON.stringify({usernames:xe})});if(!Mt.ok)throw Mt.status===401?new Error("Unauthorized"):new Error("Failed to load images");const mt=await Mt.json();if(mt.status==="success"&&mt.images){const Je={...v};xe.forEach(et=>{mt.images[et]?Je[et]=`data:image/jpeg;base64,${mt.images[et]}`:Je[et]=null}),E(Je)}}catch(pt){console.error("Error loading images:",pt)}finally{I(!1);const pt={...R};xe.forEach(Mt=>{delete pt[Mt]}),M(pt)}},[A,v,R]);N.useEffect(()=>{if(r.length===0||L.current>=0)return;const oe=r.slice(0,30).map(xe=>xe.username);oe.length>0&&(ye(oe),L.current=Math.min(29,r.length-1))},[r.length,ye]),N.useEffect(()=>{if(r.length===0||!o.current)return;const oe=new IntersectionObserver(He=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{He.forEach(pt=>{if(pt.isIntersecting){const Mt=parseInt(pt.target.dataset.index),mt=L.current;if(Mt>=mt-5&&Mt<r.length&&mt<r.length-1){const Je=mt+1,et=Math.min(Je+30,r.length);if(Je<r.length){const Rt=r.slice(Je,et).map(Pe=>Pe.username);ye(Rt),L.current=et-1}}}})},150)},{root:o.current,rootMargin:"200px",threshold:.5});return o.current.querySelectorAll("[data-index]").forEach(He=>oe.observe(He)),f.current=oe,()=>{B.current&&clearTimeout(B.current),f.current&&f.current.disconnect()}},[r.length,ye]);const we=N.useCallback(()=>!U||r.length===0?-1:r.findIndex(oe=>oe.username===U),[U,r]),Ce=N.useCallback(oe=>{var pt;const xe=we();if(xe===-1||r.length===0)return null;let He;return oe==="next"?He=(xe+1)%r.length:He=xe===0?r.length-1:xe-1,((pt=r[He])==null?void 0:pt.username)||null},[we,r]),ae=N.useCallback(async oe=>{const xe=Ce(oe);xe&&(Be(oe==="next"?"left":"right"),pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>{Be(null),pe.current=null},400),await ze(xe,!1))},[Ce]),Ne=N.useMemo(()=>!(r.length<=1),[r.length]),Ee=N.useMemo(()=>!(r.length<=1),[r.length]),ze=N.useCallback(async(oe,xe=!0)=>{var He,pt,Mt,mt;if(Fe.current[oe]){F(oe),V(!0),K(null),Le(xe);return}be.current&&be.current,be.current=oe,q(!0),K(null),V(!0),F(oe),Le(xe);try{const Je=localStorage.getItem("access_token");if(!Je)throw new Error("Authentication required");const et=await fetch(`${window.server_url}/organizer_attendees/${oe}/details`,{headers:{Authorization:`Bearer ${Je}`}});if(be.current!==oe)return;if(et.status===401)throw localStorage.removeItem("access_token"),new Error("Session expired. Please log in again.");if(et.status===403)throw new Error("Access denied. Organizer permissions required.");if(et.status===404)throw new Error("Attendee details not found.");if(!et.ok)throw new Error("Failed to load attendee details");const Rt=await et.json();if(Rt.status==="success"&&Rt.attendee){const Pe={username:Rt.attendee.username,name:Rt.attendee.name||Rt.attendee.username,image_data:Rt.attendee.image_data?`data:image/jpeg;base64,${Rt.attendee.image_data}`:null,last_joined_date:Rt.attendee.last_joined_date,self_tags:((He=Rt.attendee.tags)==null?void 0:He.tags_work)||[],desiring_tags:((pt=Rt.attendee.tags)==null?void 0:pt.desiring_tags_work)||[],lobbies_attended:((Mt=Rt.attendee.stats)==null?void 0:Mt.lobbies_attended)||0,rounds_paired:((mt=Rt.attendee.stats)==null?void 0:mt.rounds_paired)||0};ne(mn=>{const Jt={...mn,[oe]:Pe};return Fe.current=Jt,Jt}),be.current===oe&&F(oe)}else throw new Error(Rt.error||"Failed to load attendee details")}catch(Je){be.current===oe&&(console.error("Error fetching attendee details:",Je),K(Je.message||"An error occurred while loading details."))}finally{be.current===oe&&(q(!1),be.current=null)}},[]),De=N.useCallback(()=>{J.current&&clearTimeout(J.current),pe.current&&clearTimeout(pe.current),V(!1),K(null),Be(null),Le(!1),J.current=setTimeout(()=>{F(null),J.current=null},300)},[]);N.useEffect(()=>()=>{J.current&&clearTimeout(J.current)},[]),N.useEffect(()=>{const oe=xe=>{xe.key==="Escape"&&j&&(xe.stopPropagation(),De())};return document.addEventListener("keydown",oe,!0),()=>document.removeEventListener("keydown",oe,!0)},[j,De]),N.useEffect(()=>{if(j){const oe=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=oe}}},[j]),N.useEffect(()=>()=>{pe.current&&clearTimeout(pe.current)},[]);const qe=N.useMemo(()=>r.map((oe,xe)=>({username:oe.username||`temp-${xe}`,name:oe.name||oe.username||`User ${xe+1}`,small_image_data:oe.small_image_data||null})),[r]);return y.jsxs("section",{className:`attendees-root ${j&&Ie?"attendees-root-modal-open":""}`,ref:a,"aria-label":"Your Community",children:[y.jsxs("div",{className:"attendees-card",children:[y.jsx("header",{className:"attendees-header",children:y.jsx("h2",{className:"attendees-title",children:"Your Community"})}),y.jsxs("div",{className:"attendees-carouselWrap",children:[y.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowLeft","aria-label":"Scroll left",onClick:()=>me(-1),disabled:!W.left||w,children:""}),y.jsx("div",{ref:o,className:"attendees-scroller",role:"list","aria-label":"Community attendees list",onMouseLeave:()=>{w||x(null)},children:qe.map((oe,xe)=>{const He=p===oe.username,pt=p!==null,Mt=v[oe.username],mt=R[oe.username];return y.jsxs("div",{"data-index":xe,className:["attendees-item",He?"is-active":"",pt&&!He?"is-dimmed":"",w?"is-touch":"is-mouse"].join(" "),role:"listitem",tabIndex:0,onMouseEnter:()=>{w||x(oe.username)},onFocus:()=>x(oe.username),onClick:()=>{w&&x(oe.username),ze(oe.username,!0)},onKeyDown:Je=>{(Je.key==="Enter"||Je.key===" ")&&(Je.preventDefault(),x(oe.username)),Je.key==="Escape"&&x(null)},children:[y.jsx("div",{className:"attendees-avatarWrap","aria-hidden":"true",children:mt?y.jsx(uf,{size:30,className:"attendees-tile-spinner"}):Mt?y.jsx("img",{className:"attendees-avatarImg",src:Mt,alt:"",onError:Je=>{Je.target.src="/assets/fakeprofile.png"}}):y.jsx("img",{className:"attendees-avatarImg",src:"/assets/fakeprofile.png",alt:""})}),y.jsx("div",{className:"attendees-name",title:oe.name,children:oe.name})]},oe.username)})}),y.jsx("button",{type:"button",className:"attendees-arrow attendees-arrowRight","aria-label":"Scroll right",onClick:()=>me(1),disabled:!W.right||w,children:""})]}),y.jsxs("div",{className:"attendees-dots","aria-hidden":"true",children:[y.jsx("span",{className:"attendees-dot is-on"}),y.jsx("span",{className:"attendees-dot"}),y.jsx("span",{className:"attendees-dot"}),y.jsx("span",{className:"attendees-dot"})]})]}),j&&y.jsxs(y.Fragment,{children:[r.length>1&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-left",onClick:oe=>{oe.stopPropagation(),ae("prev")},disabled:!Ne,children:""}),y.jsx("button",{type:"button",className:"attendee-modal-nav-arrow attendee-modal-nav-right",onClick:oe=>{oe.stopPropagation(),ae("next")},disabled:!Ee,children:""})]}),y.jsx("div",{className:"attendee-modal-overlay",onClick:De,children:y.jsx("div",{className:`attendee-modal-content ${Te?`swipe-${Te}`:""}`,onClick:oe=>oe.stopPropagation(),children:te?y.jsxs("div",{className:"attendee-modal-loading",children:[y.jsx(uf,{size:60}),y.jsx("p",{children:"Loading attendee details..."})]}):ce?y.jsx("div",{className:"attendee-modal-error",children:y.jsx("p",{className:"attendee-modal-error-message",children:ce})}):U&&Q[U]?y.jsx("div",{className:"attendee-modal-inner",children:(()=>{const oe=Q[U];return y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"attendee-modal-header",id:"attendee-modal-title",children:oe.name}),y.jsxs("div",{className:"attendee-modal-grid",children:[y.jsxs("div",{className:"attendee-modal-left",children:[y.jsx("div",{className:"attendee-modal-date",children:SS(oe.last_joined_date)}),y.jsxs("div",{className:"attendee-modal-profile-card",children:[y.jsx("div",{className:"attendee-modal-profile-img-wrapper",children:oe.image_data?y.jsx("img",{className:"attendee-modal-profile-img",src:oe.image_data,alt:oe.name,onError:xe=>{xe.target.src="/assets/fakeprofile.png"}}):y.jsx("img",{className:"attendee-modal-profile-img",src:"/assets/fakeprofile.png",alt:oe.name})}),y.jsx("div",{className:"attendee-modal-profile-footer",children:oe.name})]})]}),y.jsxs("div",{className:"attendee-modal-right",children:[y.jsxs("div",{className:"attendee-modal-stat",children:[y.jsx("span",{className:"attendee-modal-stat-label",children:"events attended"}),y.jsx("span",{className:"attendee-modal-stat-value",children:oe.lobbies_attended})]}),y.jsxs("div",{className:"attendee-modal-stat",children:[y.jsx("span",{className:"attendee-modal-stat-label",children:"real connections"}),y.jsxs("div",{className:"attendee-modal-stat-value-with-icons",children:[y.jsx("span",{className:"attendee-modal-stat-value",children:oe.rounds_paired}),y.jsx("div",{className:"attendee-modal-staggered-icons",children:[...Array(4)].map((xe,He)=>y.jsx("img",{className:"attendee-modal-staggered-icon",src:"/assets/fakeprofile.png",alt:""},He))})]})]}),y.jsxs("div",{className:"attendee-modal-tags-section",children:[y.jsx("h3",{className:"attendee-modal-tags-label",children:"who I am:"}),y.jsx("div",{className:"attendee-modal-tags-container",children:oe.self_tags&&oe.self_tags.length>0?oe.self_tags.map((xe,He)=>y.jsx(df,{tag:xe},`self-${He}-${xe}`)):y.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]}),y.jsxs("div",{className:"attendee-modal-tags-section",children:[y.jsx("h3",{className:"attendee-modal-tags-label",children:"looking for:"}),y.jsx("div",{className:"attendee-modal-tags-container",children:oe.desiring_tags&&oe.desiring_tags.length>0?oe.desiring_tags.map((xe,He)=>y.jsx(df,{tag:xe},`desiring-${He}-${xe}`)):y.jsx("span",{className:"attendee-modal-empty-state",children:"No tags"})})]})]})]})]})})()}):null})})]})]})},TS=()=>{const{user:r,permissions:o,checkAuth:a}=N.useContext(Xn),f=Fn(),[p,x]=N.useState([]),[w,S]=N.useState(!0),[v,E]=N.useState(null);N.useEffect(()=>{o!==null&&o!=="admin"&&o!=="organizer"&&f("/organizer-signup")},[o,f]),N.useEffect(()=>{a()},[a]);const A=N.useCallback(async()=>{S(!0),E(null);try{const I=localStorage.getItem("access_token");if(!I){E("Authentication required"),S(!1);return}const R=await fetch(`${window.server_url}/organizer_attendees`,{headers:{Authorization:`Bearer ${I}`}});if(R.status===401){localStorage.removeItem("access_token"),f("/organizer-signup");return}if(R.status===403){E("Access denied. Organizer permissions required."),S(!1);return}if(!R.ok)throw new Error("Failed to load attendees");const M=await R.json();if(M.status==="success")x(M.attendees||[]);else throw new Error(M.error||"Failed to load attendees")}catch(I){console.error("Error fetching attendees:",I),I.message==="Failed to fetch"||I.message.includes("network")?E("Network error. Please check your connection and try again."):E(I.message||"An error occurred. Please try again.")}finally{S(!1)}},[f]);return N.useEffect(()=>{(o==="organizer"||o==="admin")&&A()},[o,A]),y.jsxs("div",{className:"organizer-dashboard",children:[y.jsxs("div",{className:"dashboard-header",children:[y.jsx("h1",{children:"Organizer Dashboard"}),y.jsx("button",{onClick:()=>f("/"),className:"dashboard-home-button",children:"Home"})]}),w?y.jsx("div",{className:"attendees-loading-container",children:y.jsx(uf,{size:60})}):v?y.jsxs("div",{className:"attendees-error-container",children:[y.jsx("div",{className:"attendees-error-message",children:v}),y.jsx("button",{className:"attendees-retry-button",onClick:A,children:"Retry"})]}):p.length===0?y.jsx("div",{className:"attendees-empty-container",children:y.jsx("div",{className:"attendees-empty-message",children:"No attendees yet"})}):y.jsx(AS,{attendees:p})]})},IS=5e3,NS=()=>{const{checkAuth:r,permissions:o,user:a}=N.useContext(Xn),f=Fn(),[p,x]=N.useState([]),[w,S]=N.useState(!0),[v,E]=N.useState(null),[A,I]=N.useState(!1);return N.useEffect(()=>{r()},[r]),N.useEffect(()=>{a==="topaz"&&o==="admin"?I(!0):o!==null&&a!==null&&f("/")},[o,a,f]),N.useEffect(()=>{if(!A)return;let R=!0,M,L=!0;const B=async()=>{L&&S(!0),E(null);try{const j=localStorage.getItem("access_token");if(!j)return;const V=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${j}`}});if(!V.ok)throw new Error("Failed to fetch lobbies");const U=await V.json();if(U.status!=="success"||!Array.isArray(U.lobbies))throw new Error("Invalid response format");if(!R)return;x(U.lobbies),console.log("Received lobbies data:",U.lobbies)}catch(j){R&&E(j.message||"Error fetching lobbies")}finally{R&&L&&S(!1),L=!1,M=setTimeout(B,IS)}};return B(),()=>{R=!1,M&&clearTimeout(M)}},[A]),w?y.jsx("div",{className:"master-lobby-container",children:y.jsxs("div",{className:"loading-state",children:[y.jsx("div",{className:"loading-spinner"}),y.jsx("p",{children:"Loading lobbies..."})]})}):v&&p.length===0?y.jsx("div",{className:"master-lobby-container",children:y.jsx("div",{className:"error-state",children:y.jsx("p",{children:v})})}):p.length===0?y.jsx("div",{className:"master-lobby-container",children:y.jsx("div",{className:"empty-state",children:y.jsx("p",{children:"No active lobbies found"})})}):y.jsxs("div",{className:"master-lobby-container",children:[y.jsx("button",{className:"back-button",onClick:()=>f(-1),children:"Back"}),v&&y.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[v," (showing last known data)"]}),y.jsx("div",{className:"master-lobby-grid",children:p.map(R=>y.jsx("div",{className:"lobby-tile",children:y.jsxs("div",{className:"lobby-tile-content",children:[y.jsx("h3",{className:"lobby-code",children:R.code}),y.jsxs("div",{className:"lobby-stats",children:[y.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),y.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),y.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})},Gp=({size:r=60,className:o=""})=>y.jsx("div",{className:`attendees-spinner ${o}`,style:{width:r,height:r},children:y.jsx("div",{className:"attendees-spinner-inner"})}),_S=r=>r?`data:image/jpeg;base64,${r}`:"/assets/fakeprofile.png",Md=r=>[...r].sort((o,a)=>{var S,v,E,A;const f=o.lobby_date?new Date(o.lobby_date).getTime():0,p=a.lobby_date?new Date(a.lobby_date).getTime():0;if(f!==p)return p-f;const x=(((S=o.paired_with)==null?void 0:S.name)||((v=o.paired_with)==null?void 0:v.username)||"").toLowerCase(),w=(((E=a.paired_with)==null?void 0:E.name)||((A=a.paired_with)==null?void 0:A.username)||"").toLowerCase();return x<w?-1:x>w?1:0}),RS=(r,o)=>{var w;if(!r||r.length===0)return{hasNew:o.length>0,hasUpdated:!1};const a=new Set(r.map(S=>{var v;return(v=S.paired_with)==null?void 0:v.username})),f=o.some(S=>{var v;return((v=S.paired_with)==null?void 0:v.username)&&!a.has(S.paired_with.username)});let p=!1;const x=new Map(r.map(S=>{var v;return[(v=S.paired_with)==null?void 0:v.username,S]}));for(const S of o){const v=(w=S.paired_with)==null?void 0:w.username;if(!v)continue;const E=x.get(v);if(E&&JSON.stringify(E)!==JSON.stringify(S)){p=!0;break}}return{hasNew:f,hasUpdated:p}},kS=(r,o,a)=>{var x;if(!r||r.length===0)return o;const f=[...r],p=[];for(const w of o){const S=(x=w.paired_with)==null?void 0:x.username;if(!S)continue;const v=f.findIndex(E=>{var A;return((A=E.paired_with)==null?void 0:A.username)===S});v>=0?f[v]=w:p.push(w)}return[...p,...f]},xc=(r,o)=>{var p;const a=(p=r.paired_with)==null?void 0:p.username;if(a)return a;const f=`${r.lobby_date||""}-${r.interaction_date||""}`;return f!=="-"?f:`interaction-${o}`},cc=(r,o)=>r.find((a,f)=>xc(a,f)===o)||null,Xp=async(r,o,a,f)=>{try{const p=localStorage.getItem("access_token");if(!p)throw new Error("Not authenticated");const x=await fetch(`${window.server_url}/update-paired-interaction`,{method:"PATCH",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({lobby_id:r,paired_with_username:o,...a}),signal:f});if(!x.ok){const S=await x.text();throw new Error(S||`HTTP ${x.status}`)}return{success:!0,data:await x.json()}}catch(p){if(p.name==="AbortError")throw p;return{success:!1,error:p.message}}},PS=({rating:r,onRatingChange:o,interactionKey:a})=>{const f=r||0,p=x=>{o(x)};return y.jsxs("div",{className:"star-rating-container",children:[y.jsx("div",{className:"star-rating-question",children:"How was the chat?"}),y.jsx("div",{className:"star-rating-stars",children:[1,2,3,4,5].map(x=>y.jsx("button",{type:"button",className:`star-button ${x<=f?"star-filled":"star-empty"}`,onClick:()=>p(x),"aria-label":`Rate ${x} star${x!==1?"s":""}`,children:""},x))}),y.jsx("div",{className:"star-rating-disclaimer",children:"(Don't worry, your response is hidden)"})]})},OS=({value:r,onChange:o,interactionKey:a})=>{const f=p=>{o(p)};return y.jsxs("div",{className:"share-contact-container",children:[y.jsx("div",{className:"share-contact-question",children:"Share Your Contact?"}),y.jsxs("div",{className:"share-contact-buttons",children:[y.jsx("button",{type:"button",className:`share-contact-button ${r===!1?"selected":""}`,onClick:()=>f(!1),children:"No"}),y.jsx("button",{type:"button",className:`share-contact-button ${r===!0?"selected":""}`,onClick:()=>f(!0),children:"Yes"})]})]})},MS=()=>{const r=Fn(),{checkAuth:o,user:a}=N.useContext(Xn),[f,p]=N.useState([]),[x,w]=N.useState(!0),[S,v]=N.useState(!1),[E,A]=N.useState(!0),[I,R]=N.useState(0),[M,L]=N.useState(null),[B,j]=N.useState(!1),[V,U]=N.useState(new Map),[F,Q]=N.useState(new Map),ne=N.useRef(!1),te=N.useRef(!0),q=N.useRef(null),ce=N.useRef(null),K=N.useRef([]),Te=N.useRef(!1),Be=N.useRef(new Map),Ie=N.useRef(new Map),Le=N.useRef(new Map),be=N.useRef(new Map),J=N.useRef(new Map),Fe=N.useRef(new Map),pe=N.useCallback(W=>{const Y=Be.current.get(W);Y&&(clearTimeout(Y),Be.current.delete(W));const ye=Ie.current.get(W);ye&&(ye.abort(),Ie.current.delete(W))},[]),me=N.useCallback(async(W,Y,ye)=>{if(!ne.current){ne.current=!0;try{const we=localStorage.getItem("access_token");if(!we){te.current&&r("/");return}const Ce=`${window.server_url}/paired-player-history?offset=${W}&limit=30`,ae=await fetch(Ce,{headers:{Authorization:`Bearer ${we}`}});if(!ae.ok){if(ae.status===401){te.current&&r("/");return}const ze=await ae.text();throw new Error(`HTTP ${ae.status}: ${ze}`)}const Ne=await ae.json();if(!te.current)return;if(Ne.status!=="success"||!Array.isArray(Ne.interactions))throw new Error("Invalid response format");const Ee=Md(Ne.interactions);if(ye){const ze=K.current,De=RS(ze,Ee),qe=kS(ze,Ee,!0);console.log("[PairedHistory] Poll update:",{count:Ee.length,hasNew:De.hasNew,hasUpdated:De.hasUpdated});const oe=Md(qe);p(oe),K.current=oe,A(Ne.has_more),R(Ne.next_offset||0),(De.hasNew||De.hasUpdated)&&j(!0)}else Y?(console.log("[PairedHistory] Initial load:",{count:Ee.length}),p(Ee),K.current=Ee,A(Ne.has_more),R(Ne.next_offset||0),w(!1)):(p(ze=>{const De=[...ze,...Ee],qe=Md(De);return K.current=qe,qe}),A(Ne.has_more),R(Ne.next_offset||0),v(!1));L(null)}catch(we){if(console.error("[PairedHistory] Error:",{message:we.message,type:ye?"polling":Y?"initial":"infinite-scroll"}),!te.current)return;L(we.message),Gn.error(`Error: ${we.message}`),Y?w(!1):ye||v(!1)}finally{te.current&&(ne.current=!1)}}},[r]);N.useEffect(()=>{if(te.current=!0,Te.current)return;if(!localStorage.getItem("access_token")){r("/");return}return Te.current=!0,o(),me(0,!0,!1),()=>{te.current=!1}},[]),N.useEffect(()=>{const W=()=>{document.hidden||ne.current||!te.current||me(0,!1,!0)};if(document.hidden)return;const Y=setInterval(W,5e3),ye=()=>{};return document.addEventListener("visibilitychange",ye),()=>{clearInterval(Y),document.removeEventListener("visibilitychange",ye)}},[me]),N.useEffect(()=>(B&&(q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{te.current&&j(!1)},4e3)),()=>{q.current&&clearTimeout(q.current)}),[B]),N.useEffect(()=>{if(!E||S||ne.current)return;const W=new IntersectionObserver(Y=>{Y[0].isIntersecting&&E&&!S&&!ne.current&&te.current&&(v(!0),me(I,!1,!1))},{root:null,rootMargin:"300px",threshold:.1});return ce.current&&W.observe(ce.current),()=>{W.disconnect()}},[E,S,I,me]),N.useEffect(()=>{K.current=f},[f]),N.useEffect(()=>{J.current=V},[V]),N.useEffect(()=>{Fe.current=F},[F]),N.useEffect(()=>{f.length!==0&&(U(W=>{const Y=new Map(W);let ye=!1;return f.forEach((we,Ce)=>{const ae=xc(we,Ce);if(!Y.has(ae)){const Ne=we.partner_star_rating;Ne!==null&&Ne>=1&&Ne<=5&&(Y.set(ae,Ne),ye=!0)}}),ye?Y:W}),Q(W=>{const Y=new Map(W);let ye=!1;return f.forEach((we,Ce)=>{const ae=xc(we,Ce);if(!Y.has(ae)){const Ne=we.user_show_contact;Ne!==null&&typeof Ne=="boolean"&&(Y.set(ae,Ne),ye=!0)}}),ye?Y:W}))},[f]);const Ve=N.useCallback((W,Y)=>{var ae;const ye=cc(K.current,W);if(!(ye!=null&&ye.lobby_id)||!((ae=ye.paired_with)!=null&&ae.username)){Gn.error("Unable to save: interaction not found");return}let we=Le.current.get(W);if(we===void 0){const Ne=J.current.get(W),Ee=ye.partner_star_rating;we=Ne??(Ee!==null&&Ee>=1&&Ee<=5?Ee:null),Le.current.set(W,we)}pe(W),U(Ne=>{const Ee=new Map(Ne);return Ee.set(W,Y),J.current=Ee,Ee});const Ce=setTimeout(async()=>{var qe;if(!te.current)return;const Ne=cc(K.current,W);if(!(Ne!=null&&Ne.lobby_id)||!((qe=Ne.paired_with)!=null&&qe.username)){if(!te.current)return;U(oe=>{const xe=new Map(oe);return we!=null?xe.set(W,we):xe.delete(W),J.current=xe,xe}),Le.current.delete(W),Gn.error("Unable to save: interaction not found");return}const Ee=new AbortController;Ie.current.set(W,Ee);const ze=Ne.paired_with.username,De=Ne.lobby_id;console.log("[PairedHistory] Updating rating:",{partner_username:ze,lobby_id:De,rating:Y,previous_rating:we});try{const oe=await Xp(De,ze,{partner_star_rating:Y},Ee.signal);if(!te.current)return;Ie.current.delete(W),oe.success?(Le.current.delete(W),console.log("[PairedHistory] Rating update successful:",{partner_username:ze,lobby_id:De,rating:Y,response:oe.data}),Gn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Rating update failed:",{partner_username:ze,lobby_id:De,rating:Y,error:oe.error}),U(xe=>{const He=new Map(xe);return we!=null?He.set(W,we):He.delete(W),J.current=He,He}),Le.current.delete(W),Gn.error(oe.error||"Failed to save. Please try again."))}catch(oe){if(!te.current)return;if(Ie.current.delete(W),oe.name==="AbortError"){console.log("[PairedHistory] Rating update aborted:",{partner_username:ze,lobby_id:De});return}console.error("[PairedHistory] Rating update error:",{partner_username:ze,lobby_id:De,rating:Y,error:oe.message}),U(xe=>{const He=new Map(xe);return we!=null?He.set(W,we):He.delete(W),J.current=He,He}),Le.current.delete(W),Gn.error(oe.message||"Failed to save. Please try again.")}},500);Be.current.set(W,Ce)},[pe]),ue=N.useCallback((W,Y)=>{var ae;const ye=cc(K.current,W);if(!(ye!=null&&ye.lobby_id)||!((ae=ye.paired_with)!=null&&ae.username)){Gn.error("Unable to save: interaction not found");return}let we=be.current.get(W);if(we===void 0){const Ne=Fe.current.get(W),Ee=ye.user_show_contact;we=Ne??(Ee!==null&&typeof Ee=="boolean"?Ee:null),be.current.set(W,we)}pe(W),Q(Ne=>{const Ee=new Map(Ne);return Ee.set(W,Y),Fe.current=Ee,Ee});const Ce=setTimeout(async()=>{var qe;if(!te.current)return;const Ne=cc(K.current,W);if(!(Ne!=null&&Ne.lobby_id)||!((qe=Ne.paired_with)!=null&&qe.username)){if(!te.current)return;Q(oe=>{const xe=new Map(oe);return we!=null?xe.set(W,we):xe.delete(W),Fe.current=xe,xe}),be.current.delete(W),Gn.error("Unable to save: interaction not found");return}const Ee=new AbortController;Ie.current.set(W,Ee);const ze=Ne.paired_with.username,De=Ne.lobby_id;console.log("[PairedHistory] Updating share contact:",{partner_username:ze,lobby_id:De,user_show_contact:Y,previous_value:we});try{const oe=await Xp(De,ze,{user_show_contact:Y},Ee.signal);if(!te.current)return;Ie.current.delete(W),oe.success?(be.current.delete(W),console.log("[PairedHistory] Share contact update successful:",{partner_username:ze,lobby_id:De,user_show_contact:Y,response:oe.data}),Gn.success("Saved",{duration:1e3,style:{background:"#144dff",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}})):(console.error("[PairedHistory] Share contact update failed:",{partner_username:ze,lobby_id:De,user_show_contact:Y,error:oe.error}),Q(xe=>{const He=new Map(xe);return we!=null?He.set(W,we):He.delete(W),Fe.current=He,He}),be.current.delete(W),Gn.error(oe.error||"Failed to save. Please try again."))}catch(oe){if(!te.current)return;if(Ie.current.delete(W),oe.name==="AbortError"){console.log("[PairedHistory] Share contact update aborted:",{partner_username:ze,lobby_id:De});return}console.error("[PairedHistory] Share contact update error:",{partner_username:ze,lobby_id:De,user_show_contact:Y,error:oe.message}),Q(xe=>{const He=new Map(xe);return we!=null?He.set(W,we):He.delete(W),Fe.current=He,He}),be.current.delete(W),Gn.error(oe.message||"Failed to save. Please try again.")}},300);Be.current.set(W,Ce)},[pe]);return N.useEffect(()=>()=>{te.current=!1,q.current&&clearTimeout(q.current),Ie.current.forEach(W=>{W.abort()}),Be.current.forEach(W=>{clearTimeout(W)}),Be.current.clear(),Ie.current.clear(),Le.current.clear(),be.current.clear()},[]),y.jsxs("div",{className:"paired-player-history-container",children:[y.jsx(Nc,{position:"top-center"}),B&&y.jsx("div",{className:"new-info-indicator",children:"New Notifications"}),y.jsxs("div",{className:"paired-player-history-content",children:[y.jsx("h1",{className:"paired-player-history-title",children:"Paired Player History"}),x&&y.jsx("div",{className:"loading-grid",children:Array.from({length:30}).map((W,Y)=>y.jsx(Gp,{size:60},Y))}),!x&&f.length===0&&y.jsx("div",{className:"empty-state",children:y.jsx("p",{children:"No Past History Available"})}),!x&&f.length>0&&y.jsxs("div",{className:"interactions-list",children:[f.map((W,Y)=>{const ye=W.paired_with||{},we=_S(ye.image_data),Ce=xc(W,Y),ae=V.get(Ce)??(W.partner_star_rating!==null&&W.partner_star_rating>=1&&W.partner_star_rating<=5?W.partner_star_rating:null),Ne=F.has(Ce)?F.get(Ce):W.user_show_contact!==null&&typeof W.user_show_contact=="boolean"?W.user_show_contact:null,Ee=ye.contact_url&&W.partner_show_contact===!0;return y.jsxs("div",{className:"interaction-card",children:[y.jsxs("div",{className:"interaction-card-main",children:[y.jsxs("div",{className:"interaction-card-left",children:[y.jsx("div",{className:"interaction-card-image",children:y.jsx("img",{src:we,alt:ye.name||"Partner",onError:ze=>{ze.target.src="/assets/fakeprofile.png"}})}),y.jsx("div",{className:"interaction-card-name",children:ye.name||ye.username||"Unknown"})]}),y.jsxs("div",{className:"interaction-card-right",children:[y.jsx(PS,{rating:ae,onRatingChange:ze=>Ve(Ce,ze),interactionKey:Ce}),y.jsx(OS,{value:Ne,onChange:ze=>ue(Ce,ze),interactionKey:Ce})]})]}),Ee&&y.jsxs("div",{className:"interaction-card-contact-row",children:[y.jsx("img",{src:"/assets/contact_url_asset.png",alt:"Contact",className:"contact-url-icon"}),y.jsx("a",{href:ye.contact_url,target:"_blank",rel:"noopener noreferrer",className:"contact-url-link",title:ye.contact_url,children:ye.contact_url})]})]},Ce)}),E&&y.jsx("div",{ref:ce,"data-sentinel":"true",className:"infinite-scroll-sentinel",children:S&&y.jsx(Gp,{size:40})}),!E&&y.jsx("div",{className:"no-more-interactions",children:"No more interactions"})]})]})]})},DS=!1,LS=()=>{const r=Fn(),{checkAuth:o}=N.useContext(Xn),[a,f]=N.useState(""),[p,x]=N.useState(""),[w,S]=N.useState(""),[v,E]=N.useState(!0),[A,I]=N.useState(!1),[R,M]=N.useState(""),[L,B]=N.useState(!1);N.useEffect(()=>{(async()=>{var U,F;try{const Q=localStorage.getItem("access_token");if(!Q){r("/login");return}const ne=await fetch(`${window.server_url}/load_user`,{headers:{Authorization:`Bearer ${Q}`}});if(ne.status===401){localStorage.removeItem("access_token"),r("/login");return}if(!ne.ok)throw new Error("Failed to load user data");const te=await ne.json();f(((U=te.profile)==null?void 0:U.name)||""),x(te.email||""),S(((F=te.profile)==null?void 0:F.contact_url)||"")}catch(Q){console.error("Error fetching user data:",Q),M("Failed to load user data. Please try again.")}finally{E(!1)}})()},[r]);const j=async V=>{if(V.preventDefault(),I(!0),M(""),!p||!p.trim()){M("Email is required to access your matches."),I(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.trim())){M("Please enter a valid email address."),I(!1);return}try{const F=localStorage.getItem("access_token");if(!F){r("/login");return}const Q={name:a||"",email:p||"",contact_url:w||""},ne=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify(Q)});if(ne.status===401){localStorage.removeItem("access_token"),r("/login");return}if(!ne.ok){const te=await ne.json();throw new Error(te.detail||te.message||"Failed to update profile")}DS||(Gn.success("Profile saved! Redirecting to your matches...",{duration:2e3,style:{background:"#4b73ef",color:"white",borderRadius:"8px",padding:"12px 20px",fontSize:"0.9rem",fontWeight:"500"}}),await o(),setTimeout(()=>r("/paired-player-history"),1500))}catch(F){console.error("Error updating profile:",F),M(F.message||"An error occurred. Please try again.")}finally{I(!1)}};return v?y.jsx("div",{className:"post-event-auth-container",children:y.jsx("div",{className:"loading-message",children:"Loading..."})}):L?y.jsxs("div",{className:"post-event-auth-container",children:[y.jsx(Nc,{position:"top-center"}),y.jsxs("div",{className:"step-form-container",style:{textAlign:"center",padding:"40px 20px"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),y.jsx("h2",{style:{color:"#ffffff",marginBottom:"16px",fontSize:"1.5rem"},children:"Check Your Email!"}),y.jsxs("p",{style:{color:"rgba(255,255,255,0.8)",marginBottom:"24px",lineHeight:"1.6"},children:["We sent a magic link to ",y.jsx("strong",{children:p}),y.jsx("br",{}),y.jsx("br",{}),"Click the link in your email to access your matches."]}),y.jsxs("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem",marginBottom:"24px"},children:["The link expires in 15 minutes.",y.jsx("br",{}),"Don't see it? Check your spam folder."]}),y.jsx("button",{onClick:()=>B(!1),className:"primary-button",style:{backgroundColor:"transparent",border:"1px solid rgba(255,255,255,0.3)",marginTop:"10px"},children:" Back to Form"})]})]}):y.jsxs("div",{className:"post-event-auth-container",children:[y.jsx(Nc,{position:"top-center"}),y.jsx("button",{onClick:()=>r("/"),className:"homescreen-button",children:"Home"}),y.jsx("h3",{className:"post-event-auth-header",children:"Gain Access to Your Matches"}),y.jsx("div",{className:"step-form-container",children:y.jsxs("form",{onSubmit:j,children:[R&&y.jsx("div",{className:"error-message",style:{marginBottom:"20px"},children:R}),y.jsxs("div",{style:{marginTop:"0"},children:[y.jsx("label",{className:"step-label",children:"Name"}),y.jsx("input",{type:"text",value:a,onChange:V=>f(V.target.value),placeholder:"Enter your name",className:"step-input"})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsxs("label",{className:"step-label",children:["Email ",y.jsx("span",{style:{color:"#ff6b6b"},children:"*"})]}),y.jsx("input",{type:"email",value:p,onChange:V=>x(V.target.value),placeholder:"Enter your email",className:"step-input",required:!0})]}),y.jsxs("div",{style:{marginTop:"20px"},children:[y.jsx("label",{className:"step-label",children:"Contact URL"}),y.jsx("input",{type:"text",value:w,onChange:V=>S(V.target.value),placeholder:"Enter your contact URL (e.g., https://linkedin.com/...)",className:"step-input"})]}),y.jsx("button",{type:"submit",className:"primary-button",disabled:A,style:{marginTop:"30px"},children:A?"Submitting...":"Submit"})]})})]})},BS=()=>{const r=Fn(),{checkAuth:o}=N.useContext(Xn),[a,f]=N.useState("verifying"),[p,x]=N.useState("");return N.useEffect(()=>{(async()=>{try{const S=await fetch(`${window.server_url}/auth/session`,{method:"GET",credentials:"include"});S.ok?(await S.json()).authenticated?(f("success"),await o(),setTimeout(()=>{r("/")},2e3)):(f("error"),x("Session not found. Please try logging in again.")):(f("error"),x("Could not verify your session. Please try again."))}catch(S){console.error("Session verification error:",S),f("error"),x("Network error. Please check your connection and try again.")}})()},[o,r]),y.jsx("div",{className:"auth-success-container",children:y.jsxs("div",{className:"auth-success-card",children:[a==="verifying"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"auth-success-spinner"}),y.jsx("h2",{children:"Signing you in..."}),y.jsx("p",{children:"Please wait while we verify your session."})]}),a==="success"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"auth-success-checkmark",children:""}),y.jsx("h2",{children:"Welcome to Reuneo!"}),y.jsx("p",{children:"You're now signed in. Redirecting you..."})]}),a==="error"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"auth-success-error",children:""}),y.jsx("h2",{children:"Something went wrong"}),y.jsx("p",{children:p}),y.jsx("button",{className:"auth-success-button",onClick:()=>r("/login"),children:"Back to Login"})]})]})})};o2.createRoot(document.getElementById("root")).render(y.jsx(N.StrictMode,{children:y.jsx(a2,{children:y.jsxs(Gy,{basename:"/",children:[y.jsx(ZE,{}),y.jsx(KE,{}),y.jsxs(Cy,{children:[y.jsx(Jn,{path:"/",element:y.jsx($E,{})}),y.jsx(Jn,{path:"/login",element:y.jsx(qE,{})}),y.jsx(Jn,{path:"/signup",element:y.jsx(FE,{})}),y.jsx(Jn,{path:"/logout",element:y.jsx(QE,{})}),y.jsx(Jn,{path:"/lobby",element:y.jsx(Eb,{})}),y.jsx(Jn,{path:"/admin_lobby_view",element:y.jsx(gS,{})}),y.jsx(Jn,{path:"/create_lobby",element:y.jsx(yS,{})}),y.jsx(Jn,{path:"/product-selection",element:y.jsx(xS,{})}),y.jsx(Jn,{path:"/organizer-signup",element:y.jsx(vS,{})}),y.jsx(Jn,{path:"/organizer-signup-success",element:y.jsx(CS,{})}),y.jsx(Jn,{path:"/organizer-account-details",element:y.jsx(ES,{})}),y.jsx(Jn,{path:"/organizer-dashboard",element:y.jsx(TS,{})}),y.jsx(Jn,{path:"/master_lobby_view",element:y.jsx(NS,{})}),y.jsx(Jn,{path:"/paired-player-history",element:y.jsx(MS,{})}),y.jsx(Jn,{path:"/post-event-auth",element:y.jsx(LS,{})}),y.jsx(Jn,{path:"/auth/success",element:y.jsx(BS,{})})]})]})})}));
