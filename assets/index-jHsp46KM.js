(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function a(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(p){if(p.ep)return;p.ep=!0;const x=a(p);fetch(p.href,x)}})();var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ef={exports:{}},Ea={},tf={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function zx(){if(z0)return St;z0=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function R(X){return X===null||typeof X!="object"?null:(X=N&&X[N]||X["@@iterator"],typeof X=="function"?X:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function j(X,te,Ee){this.props=X,this.context=te,this.refs=B,this.updater=Ee||k}j.prototype.isReactComponent={},j.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},j.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function U(){}U.prototype=j.prototype;function H(X,te,Ee){this.props=X,this.context=te,this.refs=B,this.updater=Ee||k}var z=H.prototype=new U;z.constructor=H,L(z,j.prototype),z.isPureReactComponent=!0;var J=Array.isArray,le=Object.prototype.hasOwnProperty,ue={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function ce(X,te,Ee){var Ve,st={},we=null,$e=null;if(te!=null)for(Ve in te.ref!==void 0&&($e=te.ref),te.key!==void 0&&(we=""+te.key),te)le.call(te,Ve)&&!$.hasOwnProperty(Ve)&&(st[Ve]=te[Ve]);var ze=arguments.length-2;if(ze===1)st.children=Ee;else if(1<ze){for(var mt=Array(ze),ge=0;ge<ze;ge++)mt[ge]=arguments[ge+2];st.children=mt}if(X&&X.defaultProps)for(Ve in ze=X.defaultProps,ze)st[Ve]===void 0&&(st[Ve]=ze[Ve]);return{$$typeof:r,type:X,key:we,ref:$e,props:st,_owner:ue.current}}function q(X,te){return{$$typeof:r,type:X.type,key:te,ref:X.ref,props:X.props,_owner:X._owner}}function _e(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function Fe(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ee){return te[Ee]})}var Re=/\/+/g;function Oe(X,te){return typeof X=="object"&&X!==null&&X.key!=null?Fe(""+X.key):te.toString(36)}function ke(X,te,Ee,Ve,st){var we=typeof X;(we==="undefined"||we==="boolean")&&(X=null);var $e=!1;if(X===null)$e=!0;else switch(we){case"string":case"number":$e=!0;break;case"object":switch(X.$$typeof){case r:case o:$e=!0}}if($e)return $e=X,st=st($e),X=Ve===""?"."+Oe($e,0):Ve,J(st)?(Ee="",X!=null&&(Ee=X.replace(Re,"$&/")+"/"),ke(st,te,Ee,"",function(ge){return ge})):st!=null&&(_e(st)&&(st=q(st,Ee+(!st.key||$e&&$e.key===st.key?"":(""+st.key).replace(Re,"$&/")+"/")+X)),te.push(st)),1;if($e=0,Ve=Ve===""?".":Ve+":",J(X))for(var ze=0;ze<X.length;ze++){we=X[ze];var mt=Ve+Oe(we,ze);$e+=ke(we,te,Ee,mt,st)}else if(mt=R(X),typeof mt=="function")for(X=mt.call(X),ze=0;!(we=X.next()).done;)we=we.value,mt=Ve+Oe(we,ze++),$e+=ke(we,te,Ee,mt,st);else if(we==="object")throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return $e}function ee(X,te,Ee){if(X==null)return X;var Ve=[],st=0;return ke(X,Ve,"","",function(we){return te.call(Ee,we,st++)}),Ve}function je(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(Ee){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ee)},function(Ee){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ee)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var he={current:null},de={transition:null},Te={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:de,ReactCurrentOwner:ue};function fe(){throw Error("act(...) is not supported in production builds of React.")}return St.Children={map:ee,forEach:function(X,te,Ee){ee(X,function(){te.apply(this,arguments)},Ee)},count:function(X){var te=0;return ee(X,function(){te++}),te},toArray:function(X){return ee(X,function(te){return te})||[]},only:function(X){if(!_e(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},St.Component=j,St.Fragment=a,St.Profiler=p,St.PureComponent=H,St.StrictMode=d,St.Suspense=w,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,St.act=fe,St.cloneElement=function(X,te,Ee){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Ve=L({},X.props),st=X.key,we=X.ref,$e=X._owner;if(te!=null){if(te.ref!==void 0&&(we=te.ref,$e=ue.current),te.key!==void 0&&(st=""+te.key),X.type&&X.type.defaultProps)var ze=X.type.defaultProps;for(mt in te)le.call(te,mt)&&!$.hasOwnProperty(mt)&&(Ve[mt]=te[mt]===void 0&&ze!==void 0?ze[mt]:te[mt])}var mt=arguments.length-2;if(mt===1)Ve.children=Ee;else if(1<mt){ze=Array(mt);for(var ge=0;ge<mt;ge++)ze[ge]=arguments[ge+2];Ve.children=ze}return{$$typeof:r,type:X.type,key:st,ref:we,props:Ve,_owner:$e}},St.createContext=function(X){return X={$$typeof:y,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:x,_context:X},X.Consumer=X},St.createElement=ce,St.createFactory=function(X){var te=ce.bind(null,X);return te.type=X,te},St.createRef=function(){return{current:null}},St.forwardRef=function(X){return{$$typeof:A,render:X}},St.isValidElement=_e,St.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:je}},St.memo=function(X,te){return{$$typeof:E,type:X,compare:te===void 0?null:te}},St.startTransition=function(X){var te=de.transition;de.transition={};try{X()}finally{de.transition=te}},St.unstable_act=fe,St.useCallback=function(X,te){return he.current.useCallback(X,te)},St.useContext=function(X){return he.current.useContext(X)},St.useDebugValue=function(){},St.useDeferredValue=function(X){return he.current.useDeferredValue(X)},St.useEffect=function(X,te){return he.current.useEffect(X,te)},St.useId=function(){return he.current.useId()},St.useImperativeHandle=function(X,te,Ee){return he.current.useImperativeHandle(X,te,Ee)},St.useInsertionEffect=function(X,te){return he.current.useInsertionEffect(X,te)},St.useLayoutEffect=function(X,te){return he.current.useLayoutEffect(X,te)},St.useMemo=function(X,te){return he.current.useMemo(X,te)},St.useReducer=function(X,te,Ee){return he.current.useReducer(X,te,Ee)},St.useRef=function(X){return he.current.useRef(X)},St.useState=function(X){return he.current.useState(X)},St.useSyncExternalStore=function(X,te,Ee){return he.current.useSyncExternalStore(X,te,Ee)},St.useTransition=function(){return he.current.useTransition()},St.version="18.3.1",St}var W0;function nd(){return W0||(W0=1,tf.exports=zx()),tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function Wx(){if(H0)return Ea;H0=1;var r=nd(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function y(A,w,E){var S,N={},R=null,k=null;E!==void 0&&(R=""+E),w.key!==void 0&&(R=""+w.key),w.ref!==void 0&&(k=w.ref);for(S in w)d.call(w,S)&&!x.hasOwnProperty(S)&&(N[S]=w[S]);if(A&&A.defaultProps)for(S in w=A.defaultProps,w)N[S]===void 0&&(N[S]=w[S]);return{$$typeof:o,type:A,key:R,ref:k,props:N,_owner:p.current}}return Ea.Fragment=a,Ea.jsx=y,Ea.jsxs=y,Ea}var G0;function Hx(){return G0||(G0=1,ef.exports=Wx()),ef.exports}var I=Hx(),P=nd();const tn=Bp(P);var Jl={},nf={exports:{}},xr={},rf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Gx(){return X0||(X0=1,function(r){function o(de,Te){var fe=de.length;de.push(Te);e:for(;0<fe;){var X=fe-1>>>1,te=de[X];if(0<p(te,Te))de[X]=Te,de[fe]=te,fe=X;else break e}}function a(de){return de.length===0?null:de[0]}function d(de){if(de.length===0)return null;var Te=de[0],fe=de.pop();if(fe!==Te){de[0]=fe;e:for(var X=0,te=de.length,Ee=te>>>1;X<Ee;){var Ve=2*(X+1)-1,st=de[Ve],we=Ve+1,$e=de[we];if(0>p(st,fe))we<te&&0>p($e,st)?(de[X]=$e,de[we]=fe,X=we):(de[X]=st,de[Ve]=fe,X=Ve);else if(we<te&&0>p($e,fe))de[X]=$e,de[we]=fe,X=we;else break e}}return Te}function p(de,Te){var fe=de.sortIndex-Te.sortIndex;return fe!==0?fe:de.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var w=[],E=[],S=1,N=null,R=3,k=!1,L=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(de){for(var Te=a(E);Te!==null;){if(Te.callback===null)d(E);else if(Te.startTime<=de)d(E),Te.sortIndex=Te.expirationTime,o(w,Te);else break;Te=a(E)}}function J(de){if(B=!1,z(de),!L)if(a(w)!==null)L=!0,je(le);else{var Te=a(E);Te!==null&&he(J,Te.startTime-de)}}function le(de,Te){L=!1,B&&(B=!1,U(ce),ce=-1),k=!0;var fe=R;try{for(z(Te),N=a(w);N!==null&&(!(N.expirationTime>Te)||de&&!Fe());){var X=N.callback;if(typeof X=="function"){N.callback=null,R=N.priorityLevel;var te=X(N.expirationTime<=Te);Te=r.unstable_now(),typeof te=="function"?N.callback=te:N===a(w)&&d(w),z(Te)}else d(w);N=a(w)}if(N!==null)var Ee=!0;else{var Ve=a(E);Ve!==null&&he(J,Ve.startTime-Te),Ee=!1}return Ee}finally{N=null,R=fe,k=!1}}var ue=!1,$=null,ce=-1,q=5,_e=-1;function Fe(){return!(r.unstable_now()-_e<q)}function Re(){if($!==null){var de=r.unstable_now();_e=de;var Te=!0;try{Te=$(!0,de)}finally{Te?Oe():(ue=!1,$=null)}}else ue=!1}var Oe;if(typeof H=="function")Oe=function(){H(Re)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ee=ke.port2;ke.port1.onmessage=Re,Oe=function(){ee.postMessage(null)}}else Oe=function(){j(Re,0)};function je(de){$=de,ue||(ue=!0,Oe())}function he(de,Te){ce=j(function(){de(r.unstable_now())},Te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(de){de.callback=null},r.unstable_continueExecution=function(){L||k||(L=!0,je(le))},r.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<de?Math.floor(1e3/de):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return a(w)},r.unstable_next=function(de){switch(R){case 1:case 2:case 3:var Te=3;break;default:Te=R}var fe=R;R=Te;try{return de()}finally{R=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(de,Te){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var fe=R;R=de;try{return Te()}finally{R=fe}},r.unstable_scheduleCallback=function(de,Te,fe){var X=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,de){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=fe+te,de={id:S++,callback:Te,priorityLevel:de,startTime:fe,expirationTime:te,sortIndex:-1},fe>X?(de.sortIndex=fe,o(E,de),a(w)===null&&de===a(E)&&(B?(U(ce),ce=-1):B=!0,he(J,fe-X))):(de.sortIndex=te,o(w,de),L||k||(L=!0,je(le))),de},r.unstable_shouldYield=Fe,r.unstable_wrapCallback=function(de){var Te=R;return function(){var fe=R;R=Te;try{return de.apply(this,arguments)}finally{R=fe}}}}(sf)),sf}var Y0;function Xx(){return Y0||(Y0=1,rf.exports=Gx()),rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Yx(){if(K0)return xr;K0=1;var r=nd(),o=Xx();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,f=1;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function x(t,s){y(t,s),y(t+"Capture",s)}function y(t,s){for(p[t]=s,t=0;t<s.length;t++)d.add(s[t])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function R(t){return w.call(N,t)?!0:w.call(S,t)?!1:E.test(t)?N[t]=!0:(S[t]=!0,!1)}function k(t,s,f,g){if(f!==null&&f.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L(t,s,f,g){if(s===null||typeof s>"u"||k(t,s,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(t,s,f,g,C,b,M){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=C,this.mustUseProperty=f,this.propertyName=t,this.type=s,this.sanitizeURL=b,this.removeEmptyString=M}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new B(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new B(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new B(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new B(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new B(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new B(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new B(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new B(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new B(t,5,!1,t.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(U,H);j[s]=new B(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(U,H);j[s]=new B(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(U,H);j[s]=new B(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new B(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,s,f,g){var C=j.hasOwnProperty(s)?j[s]:null;(C!==null?C.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,f,C,g)&&(f=null),g||C===null?R(s)&&(f===null?t.removeAttribute(s):t.setAttribute(s,""+f)):C.mustUseProperty?t[C.propertyName]=f===null?C.type===3?!1:"":f:(s=C.attributeName,g=C.attributeNamespace,f===null?t.removeAttribute(s):(C=C.type,f=C===3||C===4&&f===!0?"":""+f,g?t.setAttributeNS(g,s,f):t.setAttribute(s,f))))}var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),ue=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),Fe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),de=Symbol.iterator;function Te(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,X;function te(t){if(X===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);X=s&&s[1]||""}return`
`+X+t}var Ee=!1;function Ve(t,s){if(!t||Ee)return"";Ee=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ae){var g=ae}Reflect.construct(t,[],s)}else{try{s.call()}catch(ae){g=ae}t.call(s.prototype)}else{try{throw Error()}catch(ae){g=ae}t()}}catch(ae){if(ae&&g&&typeof ae.stack=="string"){for(var C=ae.stack.split(`
`),b=g.stack.split(`
`),M=C.length-1,W=b.length-1;1<=M&&0<=W&&C[M]!==b[W];)W--;for(;1<=M&&0<=W;M--,W--)if(C[M]!==b[W]){if(M!==1||W!==1)do if(M--,W--,0>W||C[M]!==b[W]){var Y=`
`+C[M].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=M&&0<=W);break}}}finally{Ee=!1,Error.prepareStackTrace=f}return(t=t?t.displayName||t.name:"")?te(t):""}function st(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=Ve(t.type,!1),t;case 11:return t=Ve(t.type.render,!1),t;case 1:return t=Ve(t.type,!0),t;default:return""}}function we(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case ue:return"Portal";case q:return"Profiler";case ce:return"StrictMode";case Oe:return"Suspense";case ke:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fe:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case Re:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ee:return s=t.displayName||null,s!==null?s:we(t.type)||"Memo";case je:s=t._payload,t=t._init;try{return we(t(s))}catch{}}return null}function $e(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ge(t){var s=mt(t)?"checked":"value",f=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),g=""+t[s];if(!t.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var C=f.get,b=f.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return C.call(this)},set:function(M){g=""+M,b.call(this,M)}}),Object.defineProperty(t,s,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ct(t){t._valueTracker||(t._valueTracker=ge(t))}function dt(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var f=s.getValue(),g="";return t&&(g=mt(t)?t.checked?"true":"false":t.value),t=g,t!==f?(s.setValue(t),!0):!1}function Me(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function At(t,s){var f=s.checked;return fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??t._wrapperState.initialChecked})}function Bt(t,s){var f=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;f=ze(s.value!=null?s.value:f),t._wrapperState={initialChecked:g,initialValue:f,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Gt(t,s){s=s.checked,s!=null&&z(t,"checked",s,!1)}function Pt(t,s){Gt(t,s);var f=ze(s.value),g=s.type;if(f!=null)g==="number"?(f===0&&t.value===""||t.value!=f)&&(t.value=""+f):t.value!==""+f&&(t.value=""+f);else if(g==="submit"||g==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ht(t,s.type,f):s.hasOwnProperty("defaultValue")&&ht(t,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function bt(t,s,f){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,f||s===t.value||(t.value=s),t.defaultValue=s}f=t.name,f!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,f!==""&&(t.name=f)}function ht(t,s,f){(s!=="number"||Me(t.ownerDocument)!==t)&&(f==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+f&&(t.defaultValue=""+f))}var Dn=Array.isArray;function Ne(t,s,f,g){if(t=t.options,s){s={};for(var C=0;C<f.length;C++)s["$"+f[C]]=!0;for(f=0;f<t.length;f++)C=s.hasOwnProperty("$"+t[f].value),t[f].selected!==C&&(t[f].selected=C),C&&g&&(t[f].defaultSelected=!0)}else{for(f=""+ze(f),s=null,C=0;C<t.length;C++){if(t[C].value===f){t[C].selected=!0,g&&(t[C].defaultSelected=!0);return}s!==null||t[C].disabled||(s=t[C])}s!==null&&(s.selected=!0)}}function Xn(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return fe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wt(t,s){var f=s.value;if(f==null){if(f=s.children,s=s.defaultValue,f!=null){if(s!=null)throw Error(a(92));if(Dn(f)){if(1<f.length)throw Error(a(93));f=f[0]}s=f}s==null&&(s=""),f=s}t._wrapperState={initialValue:ze(f)}}function ve(t,s){var f=ze(s.value),g=ze(s.defaultValue);f!=null&&(f=""+f,f!==t.value&&(t.value=f),s.defaultValue==null&&t.defaultValue!==f&&(t.defaultValue=f)),g!=null&&(t.defaultValue=""+g)}function Pe(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Qe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Qe(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yt,pt=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,f,g,C){MSApp.execUnsafeLocalFunction(function(){return t(s,f,g,C)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(yt=yt||document.createElement("div"),yt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=yt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function rn(t,s){if(s){var f=t.firstChild;if(f&&f===t.lastChild&&f.nodeType===3){f.nodeValue=s;return}}t.textContent=s}var Mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(Mt).forEach(function(t){zt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Mt[s]=Mt[t]})});function It(t,s,f){return s==null||typeof s=="boolean"||s===""?"":f||typeof s!="number"||s===0||Mt.hasOwnProperty(t)&&Mt[t]?(""+s).trim():s+"px"}function be(t,s){t=t.style;for(var f in s)if(s.hasOwnProperty(f)){var g=f.indexOf("--")===0,C=It(f,s[f],g);f==="float"&&(f="cssFloat"),g?t.setProperty(f,C):t[f]=C}}var Vt=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(t,s){if(s){if(Vt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function Xt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zr=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,vt=null,Yn=null;function ws(t){if(t=aa(t)){if(typeof ji!="function")throw Error(a(280));var s=t.stateNode;s&&(s=hl(s),ji(t.stateNode,t.type,s))}}function Vi(t){vt?Yn?Yn.push(t):Yn=[t]:vt=t}function Kn(){if(vt){var t=vt,s=Yn;if(Yn=vt=null,ws(t),s)for(t=0;t<s.length;t++)ws(s[t])}}function Ui(t,s){return t(s)}function sn(){}var Tr=!1;function ti(t,s,f){if(Tr)return t(s,f);Tr=!0;try{return Ui(t,s,f)}finally{Tr=!1,(vt!==null||Yn!==null)&&(sn(),Kn())}}function En(t,s){var f=t.stateNode;if(f===null)return null;var g=hl(f);if(g===null)return null;f=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(f&&typeof f!="function")throw Error(a(231,s,typeof f));return f}var zi=!1;if(A)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){zi=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{zi=!1}function ni(t,s,f,g,C,b,M,W,Y){var ae=Array.prototype.slice.call(arguments,3);try{s.apply(f,ae)}catch(ye){this.onError(ye)}}var fn=!1,ir=null,bn=!1,De=null,ri={onError:function(t){fn=!0,ir=t}};function vs(t,s,f,g,C,b,M,W,Y){fn=!1,ir=null,ni.apply(ri,arguments)}function In(t,s,f,g,C,b,M,W,Y){if(vs.apply(this,arguments),fn){if(fn){var ae=ir;fn=!1,ir=null}else throw Error(a(198));bn||(bn=!0,De=ae)}}function Zn(t){var s=t,f=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(f=s.return),t=s.return;while(t)}return s.tag===3?f:null}function wi(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Wr(t){if(Zn(t)!==t)throw Error(a(188))}function fr(t){var s=t.alternate;if(!s){if(s=Zn(t),s===null)throw Error(a(188));return s!==t?null:t}for(var f=t,g=s;;){var C=f.return;if(C===null)break;var b=C.alternate;if(b===null){if(g=C.return,g!==null){f=g;continue}break}if(C.child===b.child){for(b=C.child;b;){if(b===f)return Wr(C),t;if(b===g)return Wr(C),s;b=b.sibling}throw Error(a(188))}if(f.return!==g.return)f=C,g=b;else{for(var M=!1,W=C.child;W;){if(W===f){M=!0,f=C,g=b;break}if(W===g){M=!0,g=C,f=b;break}W=W.sibling}if(!M){for(W=b.child;W;){if(W===f){M=!0,f=b,g=C;break}if(W===g){M=!0,g=b,f=C;break}W=W.sibling}if(!M)throw Error(a(189))}}if(f.alternate!==g)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?t:s}function Cs(t){return t=fr(t),t!==null?Le(t):null}function Le(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Le(t);if(s!==null)return s;t=t.sibling}return null}var qe=o.unstable_scheduleCallback,Ge=o.unstable_cancelCallback,rt=o.unstable_shouldYield,Ke=o.unstable_requestPaint,gt=o.unstable_now,Es=o.unstable_getCurrentPriorityLevel,pe=o.unstable_ImmediatePriority,As=o.unstable_UserBlockingPriority,Nt=o.unstable_NormalPriority,sr=o.unstable_LowPriority,Uo=o.unstable_IdlePriority,Ct=null,ut=null;function Rt(t){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Ct,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:xn,zo=Math.log,Wo=Math.LN2;function xn(t){return t>>>=0,t===0?32:31-(zo(t)/Wo|0)|0}var wr=64,eo=4194304;function Yt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vr(t,s){var f=t.pendingLanes;if(f===0)return 0;var g=0,C=t.suspendedLanes,b=t.pingedLanes,M=f&268435455;if(M!==0){var W=M&~C;W!==0?g=Yt(W):(b&=M,b!==0&&(g=Yt(b)))}else M=f&~C,M!==0?g=Yt(M):b!==0&&(g=Yt(b));if(g===0)return 0;if(s!==0&&s!==g&&!(s&C)&&(C=g&-g,b=s&-s,C>=b||C===16&&(b&4194240)!==0))return s;if(g&4&&(g|=f&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=g;0<s;)f=31-or(s),C=1<<f,g|=t[f],s&=~C;return g}function Dc(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wi(t,s){for(var f=t.suspendedLanes,g=t.pingedLanes,C=t.expirationTimes,b=t.pendingLanes;0<b;){var M=31-or(b),W=1<<M,Y=C[M];Y===-1?(!(W&f)||W&g)&&(C[M]=Dc(W,s)):Y<=s&&(t.expiredLanes|=W),b&=~W}}function Ut(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tn(){var t=wr;return wr<<=1,!(wr&4194240)&&(wr=64),t}function ne(t){for(var s=[],f=0;31>f;f++)s.push(t);return s}function F(t,s,f){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-or(s),t[s]=f}function Ye(t,s){var f=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var g=t.eventTimes;for(t=t.expirationTimes;0<f;){var C=31-or(f),b=1<<C;s[C]=0,g[C]=-1,t[C]=-1,f&=~b}}function dn(t,s){var f=t.entangledLanes|=s;for(t=t.entanglements;f;){var g=31-or(f),C=1<<g;C&s|t[g]&s&&(t[g]|=s),f&=~C}}var xt=0;function qa(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var to,$n,Ze,Kt,Ho,Go=!1,Hi=[],Cr=null,Nr=null,ii=null,Jt=new Map,Hr=new Map,jn=[],nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(t,s){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Jt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(s.pointerId)}}function at(t,s,f,g,C,b){return t===null||t.nativeEvent!==b?(t={blockedOn:s,domEventName:f,eventSystemFlags:g,nativeEvent:b,targetContainers:[C]},s!==null&&(s=aa(s),s!==null&&$n(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),t)}function Nn(t,s,f,g,C){switch(s){case"focusin":return Cr=at(Cr,t,s,f,g,C),!0;case"dragenter":return Nr=at(Nr,t,s,f,g,C),!0;case"mouseover":return ii=at(ii,t,s,f,g,C),!0;case"pointerover":var b=C.pointerId;return Jt.set(b,at(Jt.get(b)||null,t,s,f,g,C)),!0;case"gotpointercapture":return b=C.pointerId,Hr.set(b,at(Hr.get(b)||null,t,s,f,g,C)),!0}return!1}function Ja(t){var s=Ms(t.target);if(s!==null){var f=Zn(s);if(f!==null){if(s=f.tag,s===13){if(s=wi(f),s!==null){t.blockedOn=s,Ho(t.priority,function(){Ze(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){t.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var f=no(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(f===null){f=t.nativeEvent;var g=new f.constructor(f.type,f);zr=g,f.target.dispatchEvent(g),zr=null}else return s=aa(f),s!==null&&$n(s),t.blockedOn=f,!1;s.shift()}return!0}function Xo(t,s,f){Gi(t)&&f.delete(s)}function vi(){Go=!1,Cr!==null&&Gi(Cr)&&(Cr=null),Nr!==null&&Gi(Nr)&&(Nr=null),ii!==null&&Gi(ii)&&(ii=null),Jt.forEach(Xo),Hr.forEach(Xo)}function Ss(t,s){t.blockedOn===s&&(t.blockedOn=null,Go||(Go=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,vi)))}function Gr(t){function s(C){return Ss(C,t)}if(0<Hi.length){Ss(Hi[0],t);for(var f=1;f<Hi.length;f++){var g=Hi[f];g.blockedOn===t&&(g.blockedOn=null)}}for(Cr!==null&&Ss(Cr,t),Nr!==null&&Ss(Nr,t),ii!==null&&Ss(ii,t),Jt.forEach(s),Hr.forEach(s),f=0;f<jn.length;f++)g=jn[f],g.blockedOn===t&&(g.blockedOn=null);for(;0<jn.length&&(f=jn[0],f.blockedOn===null);)Ja(f),f.blockedOn===null&&jn.shift()}var Rr=J.ReactCurrentBatchConfig,si=!0;function el(t,s,f,g){var C=xt,b=Rr.transition;Rr.transition=null;try{xt=1,Ci(t,s,f,g)}finally{xt=C,Rr.transition=b}}function bs(t,s,f,g){var C=xt,b=Rr.transition;Rr.transition=null;try{xt=4,Ci(t,s,f,g)}finally{xt=C,Rr.transition=b}}function Ci(t,s,f,g){if(si){var C=no(t,s,f,g);if(C===null)Hc(t,s,g,Rn,f),Qa(t,g);else if(Nn(C,t,s,f,g))g.stopPropagation();else if(Qa(t,g),s&4&&-1<nt.indexOf(t)){for(;C!==null;){var b=aa(C);if(b!==null&&to(b),b=no(t,s,f,g),b===null&&Hc(t,s,g,Rn,f),b===C)break;C=b}C!==null&&g.stopPropagation()}else Hc(t,s,g,null,f)}}var Rn=null;function no(t,s,f,g){if(Rn=null,t=ei(g),t=Ms(t),t!==null)if(s=Zn(t),s===null)t=null;else if(f=s.tag,f===13){if(t=wi(s),t!==null)return t;t=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Rn=t,null}function Yo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Es()){case pe:return 1;case As:return 4;case Nt:case sr:return 16;case Uo:return 536870912;default:return 16}default:return 16}}var Xr=null,Ko=null,ro=null;function tl(){if(ro)return ro;var t,s=Ko,f=s.length,g,C="value"in Xr?Xr.value:Xr.textContent,b=C.length;for(t=0;t<f&&s[t]===C[t];t++);var M=f-t;for(g=1;g<=M&&s[f-g]===C[b-g];g++);return ro=C.slice(t,1<g?1-g:void 0)}function Dt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Is(){return!0}function Ts(){return!1}function hn(t){function s(f,g,C,b,M){this._reactName=f,this._targetInst=C,this.type=g,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var W in t)t.hasOwnProperty(W)&&(f=t[W],this[W]=f?f(b):b[W]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Is:Ts,this.isPropagationStopped=Ts,this}return fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),s}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oe=hn(Xi),ft=fe({},Xi,{view:0,detail:0}),_n=hn(ft),Yi,io,Ns,so=fe({},ft,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ns&&(Ns&&t.type==="mousemove"?(Yi=t.screenX-Ns.screenX,io=t.screenY-Ns.screenY):io=Yi=0,Ns=t),Yi)},movementY:function(t){return"movementY"in t?t.movementY:io}}),nl=hn(so),Zo=fe({},so,{dataTransfer:0}),yn=hn(Zo),$o=fe({},ft,{relatedTarget:0}),Zt=hn($o),oo=fe({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ei=hn(oo),Wt=fe({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Je=hn(Wt),kc=fe({},Xi,{data:0}),Ht=hn(kc),Ai={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ki={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Lc[t])?!!s[t]:!1}function Rs(){return _r}var rl=fe({},ft,{key:function(t){if(t.key){var s=Ai[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Dt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ki[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?Dt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qo=hn(rl),il=fe({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=hn(il),Bc=fe({},ft,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Zi=hn(Bc),Jo=fe({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fc=hn(Jo),_s=fe({},so,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jc=hn(_s),oi=[9,13,27,32],$i=A&&"CompositionEvent"in window,kn=null;A&&"documentMode"in document&&(kn=document.documentMode);var sl=A&&"TextEvent"in window&&!kn,Er=A&&(!$i||kn&&8<kn&&11>=kn),ol=" ",ao=!1;function al(t,s){switch(t){case"keyup":return oi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vn=!1;function Vc(t,s){switch(t){case"compositionend":return ea(s);case"keypress":return s.which!==32?null:(ao=!0,ol);case"textInput":return t=s.data,t===ol&&ao?null:t;default:return null}}function ta(t,s){if(Vn)return t==="compositionend"||!$i&&al(t,s)?(t=tl(),ro=Ko=Xr=null,Vn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Er&&s.locale!=="ko"?null:s.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Os[t.type]:s==="textarea"}function Ps(t,s,f,g){Vi(g),s=ul(s,"onChange"),0<s.length&&(f=new oe("onChange","change",null,f,g),t.push({event:f,listeners:s}))}var _=null,e=null;function n(t){ih(t,0)}function i(t){var s=uo(t);if(dt(s))return t}function l(t,s){if(t==="change")return s}var c=!1;if(A){var u;if(A){var h="oninput"in document;if(!h){var m=document.createElement("div");m.setAttribute("oninput","return;"),h=typeof m.oninput=="function"}u=h}else u=!1;c=u&&(!document.documentMode||9<document.documentMode)}function v(){_&&(_.detachEvent("onpropertychange",T),e=_=null)}function T(t){if(t.propertyName==="value"&&i(e)){var s=[];Ps(s,e,t,ei(t)),ti(n,s)}}function O(t,s,f){t==="focusin"?(v(),_=s,e=f,_.attachEvent("onpropertychange",T)):t==="focusout"&&v()}function D(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function V(t,s){if(t==="click")return i(s)}function G(t,s){if(t==="input"||t==="change")return i(s)}function K(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Q=typeof Object.is=="function"?Object.is:K;function se(t,s){if(Q(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var f=Object.keys(t),g=Object.keys(s);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var C=f[g];if(!w.call(s,C)||!Q(t[C],s[C]))return!1}return!0}function Ae(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Se(t,s){var f=Ae(t);t=0;for(var g;f;){if(f.nodeType===3){if(g=t+f.textContent.length,t<=s&&g>=s)return{node:f,offset:s-t};t=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ae(f)}}function xe(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?xe(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Et(){for(var t=window,s=Me();s instanceof t.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)t=s.contentWindow;else break;s=Me(t.document)}return s}function lt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function qn(t){var s=Et(),f=t.focusedElem,g=t.selectionRange;if(s!==f&&f&&f.ownerDocument&&xe(f.ownerDocument.documentElement,f)){if(g!==null&&lt(f)){if(s=g.start,t=g.end,t===void 0&&(t=s),"selectionStart"in f)f.selectionStart=s,f.selectionEnd=Math.min(t,f.value.length);else if(t=(s=f.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var C=f.textContent.length,b=Math.min(g.start,C);g=g.end===void 0?b:Math.min(g.end,C),!t.extend&&b>g&&(C=g,g=b,b=C),C=Se(f,b);var M=Se(f,g);C&&M&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==M.node||t.focusOffset!==M.offset)&&(s=s.createRange(),s.setStart(C.node,C.offset),t.removeAllRanges(),b>g?(t.addRange(s),t.extend(M.node,M.offset)):(s.setEnd(M.node,M.offset),t.addRange(s)))}}for(s=[],t=f;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<s.length;f++)t=s[f],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ar=A&&"documentMode"in document&&11>=document.documentMode,wn=null,Ft=null,on=null,Un=!1;function Si(t,s,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Un||wn==null||wn!==Me(g)||(g=wn,"selectionStart"in g&&lt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),on&&se(on,g)||(on=g,g=ul(Ft,"onSelect"),0<g.length&&(s=new oe("onSelect","select",null,s,f),t.push({event:s,listeners:g}),s.target=wn)))}function Yr(t,s){var f={};return f[t.toLowerCase()]=s.toLowerCase(),f["Webkit"+t]="webkit"+s,f["Moz"+t]="moz"+s,f}var qi={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionend:Yr("Transition","TransitionEnd")},na={},$d={};A&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function ll(t){if(na[t])return na[t];if(!qi[t])return t;var s=qi[t],f;for(f in s)if(s.hasOwnProperty(f)&&f in $d)return na[t]=s[f];return t}var qd=ll("animationend"),Qd=ll("animationiteration"),Jd=ll("animationstart"),eh=ll("transitionend"),th=new Map,nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(t,s){th.set(t,s),x(s,[t])}for(var Uc=0;Uc<nh.length;Uc++){var zc=nh[Uc],qm=zc.toLowerCase(),Qm=zc[0].toUpperCase()+zc.slice(1);Qi(qm,"on"+Qm)}Qi(qd,"onAnimationEnd"),Qi(Qd,"onAnimationIteration"),Qi(Jd,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(eh,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function rh(t,s,f){var g=t.type||"unknown-event";t.currentTarget=f,In(g,s,void 0,t),t.currentTarget=null}function ih(t,s){s=(s&4)!==0;for(var f=0;f<t.length;f++){var g=t[f],C=g.event;g=g.listeners;e:{var b=void 0;if(s)for(var M=g.length-1;0<=M;M--){var W=g[M],Y=W.instance,ae=W.currentTarget;if(W=W.listener,Y!==b&&C.isPropagationStopped())break e;rh(C,W,ae),b=Y}else for(M=0;M<g.length;M++){if(W=g[M],Y=W.instance,ae=W.currentTarget,W=W.listener,Y!==b&&C.isPropagationStopped())break e;rh(C,W,ae),b=Y}}}if(bn)throw t=De,bn=!1,De=null,t}function qt(t,s){var f=s[$c];f===void 0&&(f=s[$c]=new Set);var g=t+"__bubble";f.has(g)||(sh(s,t,2,!1),f.add(g))}function Wc(t,s,f){var g=0;s&&(g|=4),sh(f,t,g,s)}var cl="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[cl]){t[cl]=!0,d.forEach(function(f){f!=="selectionchange"&&(Jm.has(f)||Wc(f,!1,t),Wc(f,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[cl]||(s[cl]=!0,Wc("selectionchange",!1,s))}}function sh(t,s,f,g){switch(Yo(s)){case 1:var C=el;break;case 4:C=bs;break;default:C=Ci}f=C.bind(null,s,f,t),C=void 0,!zi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),g?C!==void 0?t.addEventListener(s,f,{capture:!0,passive:C}):t.addEventListener(s,f,!0):C!==void 0?t.addEventListener(s,f,{passive:C}):t.addEventListener(s,f,!1)}function Hc(t,s,f,g,C){var b=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var W=g.stateNode.containerInfo;if(W===C||W.nodeType===8&&W.parentNode===C)break;if(M===4)for(M=g.return;M!==null;){var Y=M.tag;if((Y===3||Y===4)&&(Y=M.stateNode.containerInfo,Y===C||Y.nodeType===8&&Y.parentNode===C))return;M=M.return}for(;W!==null;){if(M=Ms(W),M===null)return;if(Y=M.tag,Y===5||Y===6){g=b=M;continue e}W=W.parentNode}}g=g.return}ti(function(){var ae=b,ye=ei(f),Ce=[];e:{var me=th.get(t);if(me!==void 0){var Be=oe,We=t;switch(t){case"keypress":if(Dt(f)===0)break e;case"keydown":case"keyup":Be=qo;break;case"focusin":We="focus",Be=Zt;break;case"focusout":We="blur",Be=Zt;break;case"beforeblur":case"afterblur":Be=Zt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=Zi;break;case qd:case Qd:case Jd:Be=Ei;break;case eh:Be=Fc;break;case"scroll":Be=_n;break;case"wheel":Be=jc;break;case"copy":case"cut":case"paste":Be=Je;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Qo}var He=(s&4)!==0,vn=!He&&t==="scroll",re=He?me!==null?me+"Capture":null:me;He=[];for(var Z=ae,ie;Z!==null;){ie=Z;var Ie=ie.stateNode;if(ie.tag===5&&Ie!==null&&(ie=Ie,re!==null&&(Ie=En(Z,re),Ie!=null&&He.push(sa(Z,Ie,ie)))),vn)break;Z=Z.return}0<He.length&&(me=new Be(me,We,null,f,ye),Ce.push({event:me,listeners:He}))}}if(!(s&7)){e:{if(me=t==="mouseover"||t==="pointerover",Be=t==="mouseout"||t==="pointerout",me&&f!==zr&&(We=f.relatedTarget||f.fromElement)&&(Ms(We)||We[bi]))break e;if((Be||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,Be?(We=f.relatedTarget||f.toElement,Be=ae,We=We?Ms(We):null,We!==null&&(vn=Zn(We),We!==vn||We.tag!==5&&We.tag!==6)&&(We=null)):(Be=null,We=ae),Be!==We)){if(He=nl,Ie="onMouseLeave",re="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(He=Qo,Ie="onPointerLeave",re="onPointerEnter",Z="pointer"),vn=Be==null?me:uo(Be),ie=We==null?me:uo(We),me=new He(Ie,Z+"leave",Be,f,ye),me.target=vn,me.relatedTarget=ie,Ie=null,Ms(ye)===ae&&(He=new He(re,Z+"enter",We,f,ye),He.target=ie,He.relatedTarget=vn,Ie=He),vn=Ie,Be&&We)t:{for(He=Be,re=We,Z=0,ie=He;ie;ie=lo(ie))Z++;for(ie=0,Ie=re;Ie;Ie=lo(Ie))ie++;for(;0<Z-ie;)He=lo(He),Z--;for(;0<ie-Z;)re=lo(re),ie--;for(;Z--;){if(He===re||re!==null&&He===re.alternate)break t;He=lo(He),re=lo(re)}He=null}else He=null;Be!==null&&oh(Ce,me,Be,He,!1),We!==null&&vn!==null&&oh(Ce,vn,We,He,!0)}}e:{if(me=ae?uo(ae):window,Be=me.nodeName&&me.nodeName.toLowerCase(),Be==="select"||Be==="input"&&me.type==="file")var Xe=l;else if(Ot(me))if(c)Xe=G;else{Xe=D;var et=O}else(Be=me.nodeName)&&Be.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Xe=V);if(Xe&&(Xe=Xe(t,ae))){Ps(Ce,Xe,f,ye);break e}et&&et(t,me,ae),t==="focusout"&&(et=me._wrapperState)&&et.controlled&&me.type==="number"&&ht(me,"number",me.value)}switch(et=ae?uo(ae):window,t){case"focusin":(Ot(et)||et.contentEditable==="true")&&(wn=et,Ft=ae,on=null);break;case"focusout":on=Ft=wn=null;break;case"mousedown":Un=!0;break;case"contextmenu":case"mouseup":case"dragend":Un=!1,Si(Ce,f,ye);break;case"selectionchange":if(Ar)break;case"keydown":case"keyup":Si(Ce,f,ye)}var tt;if($i)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Vn?al(t,f)&&(ot="onCompositionEnd"):t==="keydown"&&f.keyCode===229&&(ot="onCompositionStart");ot&&(Er&&f.locale!=="ko"&&(Vn||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Vn&&(tt=tl()):(Xr=ye,Ko="value"in Xr?Xr.value:Xr.textContent,Vn=!0)),et=ul(ae,ot),0<et.length&&(ot=new Ht(ot,t,null,f,ye),Ce.push({event:ot,listeners:et}),tt?ot.data=tt:(tt=ea(f),tt!==null&&(ot.data=tt)))),(tt=sl?Vc(t,f):ta(t,f))&&(ae=ul(ae,"onBeforeInput"),0<ae.length&&(ye=new Ht("onBeforeInput","beforeinput",null,f,ye),Ce.push({event:ye,listeners:ae}),ye.data=tt))}ih(Ce,s)})}function sa(t,s,f){return{instance:t,listener:s,currentTarget:f}}function ul(t,s){for(var f=s+"Capture",g=[];t!==null;){var C=t,b=C.stateNode;C.tag===5&&b!==null&&(C=b,b=En(t,f),b!=null&&g.unshift(sa(t,b,C)),b=En(t,s),b!=null&&g.push(sa(t,b,C))),t=t.return}return g}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oh(t,s,f,g,C){for(var b=s._reactName,M=[];f!==null&&f!==g;){var W=f,Y=W.alternate,ae=W.stateNode;if(Y!==null&&Y===g)break;W.tag===5&&ae!==null&&(W=ae,C?(Y=En(f,b),Y!=null&&M.unshift(sa(f,Y,W))):C||(Y=En(f,b),Y!=null&&M.push(sa(f,Y,W)))),f=f.return}M.length!==0&&t.push({event:s,listeners:M})}var ex=/\r\n?/g,tx=/\u0000|\uFFFD/g;function ah(t){return(typeof t=="string"?t:""+t).replace(ex,`
`).replace(tx,"")}function fl(t,s,f){if(s=ah(s),ah(t)!==s&&f)throw Error(a(425))}function dl(){}var Gc=null,Xc=null;function Yc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,nx=typeof clearTimeout=="function"?clearTimeout:void 0,lh=typeof Promise=="function"?Promise:void 0,rx=typeof queueMicrotask=="function"?queueMicrotask:typeof lh<"u"?function(t){return lh.resolve(null).then(t).catch(ix)}:Kc;function ix(t){setTimeout(function(){throw t})}function Zc(t,s){var f=s,g=0;do{var C=f.nextSibling;if(t.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(g===0){t.removeChild(C),Gr(s);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=C}while(f);Gr(s)}function Ji(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function ch(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return t;s--}else f==="/$"&&s++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),ai="__reactFiber$"+co,oa="__reactProps$"+co,bi="__reactContainer$"+co,$c="__reactEvents$"+co,sx="__reactListeners$"+co,ox="__reactHandles$"+co;function Ms(t){var s=t[ai];if(s)return s;for(var f=t.parentNode;f;){if(s=f[bi]||f[ai]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(t=ch(t);t!==null;){if(f=t[ai])return f;t=ch(t)}return s}t=f,f=t.parentNode}return null}function aa(t){return t=t[ai]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function hl(t){return t[oa]||null}var qc=[],fo=-1;function es(t){return{current:t}}function Qt(t){0>fo||(t.current=qc[fo],qc[fo]=null,fo--)}function $t(t,s){fo++,qc[fo]=t.current,t.current=s}var ts={},Qn=es(ts),dr=es(!1),Ds=ts;function ho(t,s){var f=t.type.contextTypes;if(!f)return ts;var g=t.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var C={},b;for(b in f)C[b]=s[b];return g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=C),C}function hr(t){return t=t.childContextTypes,t!=null}function pl(){Qt(dr),Qt(Qn)}function uh(t,s,f){if(Qn.current!==ts)throw Error(a(168));$t(Qn,s),$t(dr,f)}function fh(t,s,f){var g=t.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var C in g)if(!(C in s))throw Error(a(108,$e(t)||"Unknown",C));return fe({},f,g)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,Ds=Qn.current,$t(Qn,t),$t(dr,dr.current),!0}function dh(t,s,f){var g=t.stateNode;if(!g)throw Error(a(169));f?(t=fh(t,s,Ds),g.__reactInternalMemoizedMergedChildContext=t,Qt(dr),Qt(Qn),$t(Qn,t)):Qt(dr),$t(dr,f)}var Ii=null,ml=!1,Qc=!1;function hh(t){Ii===null?Ii=[t]:Ii.push(t)}function ax(t){ml=!0,hh(t)}function ns(){if(!Qc&&Ii!==null){Qc=!0;var t=0,s=xt;try{var f=Ii;for(xt=1;t<f.length;t++){var g=f[t];do g=g(!0);while(g!==null)}Ii=null,ml=!1}catch(C){throw Ii!==null&&(Ii=Ii.slice(t+1)),qe(pe,ns),C}finally{xt=s,Qc=!1}}return null}var po=[],go=0,xl=null,yl=0,Or=[],Pr=0,ks=null,Ti=1,Ni="";function Ls(t,s){po[go++]=yl,po[go++]=xl,xl=t,yl=s}function ph(t,s,f){Or[Pr++]=Ti,Or[Pr++]=Ni,Or[Pr++]=ks,ks=t;var g=Ti;t=Ni;var C=32-or(g)-1;g&=~(1<<C),f+=1;var b=32-or(s)+C;if(30<b){var M=C-C%5;b=(g&(1<<M)-1).toString(32),g>>=M,C-=M,Ti=1<<32-or(s)+C|f<<C|g,Ni=b+t}else Ti=1<<b|f<<C|g,Ni=t}function Jc(t){t.return!==null&&(Ls(t,1),ph(t,1,0))}function eu(t){for(;t===xl;)xl=po[--go],po[go]=null,yl=po[--go],po[go]=null;for(;t===ks;)ks=Or[--Pr],Or[Pr]=null,Ni=Or[--Pr],Or[Pr]=null,Ti=Or[--Pr],Or[Pr]=null}var Sr=null,br=null,en=!1,Kr=null;function gh(t,s){var f=Lr(5,null,null,0);f.elementType="DELETED",f.stateNode=s,f.return=t,s=t.deletions,s===null?(t.deletions=[f],t.flags|=16):s.push(f)}function mh(t,s){switch(t.tag){case 5:var f=t.type;return s=s.nodeType!==1||f.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Sr=t,br=Ji(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Sr=t,br=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(f=ks!==null?{id:Ti,overflow:Ni}:null,t.memoizedState={dehydrated:s,treeContext:f,retryLane:1073741824},f=Lr(18,null,null,0),f.stateNode=s,f.return=t,t.child=f,Sr=t,br=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(en){var s=br;if(s){var f=s;if(!mh(t,s)){if(tu(t))throw Error(a(418));s=Ji(f.nextSibling);var g=Sr;s&&mh(t,s)?gh(g,f):(t.flags=t.flags&-4097|2,en=!1,Sr=t)}}else{if(tu(t))throw Error(a(418));t.flags=t.flags&-4097|2,en=!1,Sr=t}}}function xh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function wl(t){if(t!==Sr)return!1;if(!en)return xh(t),en=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Yc(t.type,t.memoizedProps)),s&&(s=br)){if(tu(t))throw yh(),Error(a(418));for(;s;)gh(t,s),s=Ji(s.nextSibling)}if(xh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var f=t.data;if(f==="/$"){if(s===0){br=Ji(t.nextSibling);break e}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++}t=t.nextSibling}br=null}}else br=Sr?Ji(t.stateNode.nextSibling):null;return!0}function yh(){for(var t=br;t;)t=Ji(t.nextSibling)}function mo(){br=Sr=null,en=!1}function ru(t){Kr===null?Kr=[t]:Kr.push(t)}var lx=J.ReactCurrentBatchConfig;function la(t,s,f){if(t=f.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(a(309));var g=f.stateNode}if(!g)throw Error(a(147,t));var C=g,b=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===b?s.ref:(s=function(M){var W=C.refs;M===null?delete W[b]:W[b]=M},s._stringRef=b,s)}if(typeof t!="string")throw Error(a(284));if(!f._owner)throw Error(a(290,t))}return t}function vl(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function wh(t){var s=t._init;return s(t._payload)}function vh(t){function s(re,Z){if(t){var ie=re.deletions;ie===null?(re.deletions=[Z],re.flags|=16):ie.push(Z)}}function f(re,Z){if(!t)return null;for(;Z!==null;)s(re,Z),Z=Z.sibling;return null}function g(re,Z){for(re=new Map;Z!==null;)Z.key!==null?re.set(Z.key,Z):re.set(Z.index,Z),Z=Z.sibling;return re}function C(re,Z){return re=us(re,Z),re.index=0,re.sibling=null,re}function b(re,Z,ie){return re.index=ie,t?(ie=re.alternate,ie!==null?(ie=ie.index,ie<Z?(re.flags|=2,Z):ie):(re.flags|=2,Z)):(re.flags|=1048576,Z)}function M(re){return t&&re.alternate===null&&(re.flags|=2),re}function W(re,Z,ie,Ie){return Z===null||Z.tag!==6?(Z=Ku(ie,re.mode,Ie),Z.return=re,Z):(Z=C(Z,ie),Z.return=re,Z)}function Y(re,Z,ie,Ie){var Xe=ie.type;return Xe===$?ye(re,Z,ie.props.children,Ie,ie.key):Z!==null&&(Z.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===je&&wh(Xe)===Z.type)?(Ie=C(Z,ie.props),Ie.ref=la(re,Z,ie),Ie.return=re,Ie):(Ie=Hl(ie.type,ie.key,ie.props,null,re.mode,Ie),Ie.ref=la(re,Z,ie),Ie.return=re,Ie)}function ae(re,Z,ie,Ie){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=Zu(ie,re.mode,Ie),Z.return=re,Z):(Z=C(Z,ie.children||[]),Z.return=re,Z)}function ye(re,Z,ie,Ie,Xe){return Z===null||Z.tag!==7?(Z=Hs(ie,re.mode,Ie,Xe),Z.return=re,Z):(Z=C(Z,ie),Z.return=re,Z)}function Ce(re,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Ku(""+Z,re.mode,ie),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case le:return ie=Hl(Z.type,Z.key,Z.props,null,re.mode,ie),ie.ref=la(re,null,Z),ie.return=re,ie;case ue:return Z=Zu(Z,re.mode,ie),Z.return=re,Z;case je:var Ie=Z._init;return Ce(re,Ie(Z._payload),ie)}if(Dn(Z)||Te(Z))return Z=Hs(Z,re.mode,ie,null),Z.return=re,Z;vl(re,Z)}return null}function me(re,Z,ie,Ie){var Xe=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Xe!==null?null:W(re,Z,""+ie,Ie);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case le:return ie.key===Xe?Y(re,Z,ie,Ie):null;case ue:return ie.key===Xe?ae(re,Z,ie,Ie):null;case je:return Xe=ie._init,me(re,Z,Xe(ie._payload),Ie)}if(Dn(ie)||Te(ie))return Xe!==null?null:ye(re,Z,ie,Ie,null);vl(re,ie)}return null}function Be(re,Z,ie,Ie,Xe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return re=re.get(ie)||null,W(Z,re,""+Ie,Xe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case le:return re=re.get(Ie.key===null?ie:Ie.key)||null,Y(Z,re,Ie,Xe);case ue:return re=re.get(Ie.key===null?ie:Ie.key)||null,ae(Z,re,Ie,Xe);case je:var et=Ie._init;return Be(re,Z,ie,et(Ie._payload),Xe)}if(Dn(Ie)||Te(Ie))return re=re.get(ie)||null,ye(Z,re,Ie,Xe,null);vl(Z,Ie)}return null}function We(re,Z,ie,Ie){for(var Xe=null,et=null,tt=Z,ot=Z=0,Fn=null;tt!==null&&ot<ie.length;ot++){tt.index>ot?(Fn=tt,tt=null):Fn=tt.sibling;var Lt=me(re,tt,ie[ot],Ie);if(Lt===null){tt===null&&(tt=Fn);break}t&&tt&&Lt.alternate===null&&s(re,tt),Z=b(Lt,Z,ot),et===null?Xe=Lt:et.sibling=Lt,et=Lt,tt=Fn}if(ot===ie.length)return f(re,tt),en&&Ls(re,ot),Xe;if(tt===null){for(;ot<ie.length;ot++)tt=Ce(re,ie[ot],Ie),tt!==null&&(Z=b(tt,Z,ot),et===null?Xe=tt:et.sibling=tt,et=tt);return en&&Ls(re,ot),Xe}for(tt=g(re,tt);ot<ie.length;ot++)Fn=Be(tt,re,ot,ie[ot],Ie),Fn!==null&&(t&&Fn.alternate!==null&&tt.delete(Fn.key===null?ot:Fn.key),Z=b(Fn,Z,ot),et===null?Xe=Fn:et.sibling=Fn,et=Fn);return t&&tt.forEach(function(fs){return s(re,fs)}),en&&Ls(re,ot),Xe}function He(re,Z,ie,Ie){var Xe=Te(ie);if(typeof Xe!="function")throw Error(a(150));if(ie=Xe.call(ie),ie==null)throw Error(a(151));for(var et=Xe=null,tt=Z,ot=Z=0,Fn=null,Lt=ie.next();tt!==null&&!Lt.done;ot++,Lt=ie.next()){tt.index>ot?(Fn=tt,tt=null):Fn=tt.sibling;var fs=me(re,tt,Lt.value,Ie);if(fs===null){tt===null&&(tt=Fn);break}t&&tt&&fs.alternate===null&&s(re,tt),Z=b(fs,Z,ot),et===null?Xe=fs:et.sibling=fs,et=fs,tt=Fn}if(Lt.done)return f(re,tt),en&&Ls(re,ot),Xe;if(tt===null){for(;!Lt.done;ot++,Lt=ie.next())Lt=Ce(re,Lt.value,Ie),Lt!==null&&(Z=b(Lt,Z,ot),et===null?Xe=Lt:et.sibling=Lt,et=Lt);return en&&Ls(re,ot),Xe}for(tt=g(re,tt);!Lt.done;ot++,Lt=ie.next())Lt=Be(tt,re,ot,Lt.value,Ie),Lt!==null&&(t&&Lt.alternate!==null&&tt.delete(Lt.key===null?ot:Lt.key),Z=b(Lt,Z,ot),et===null?Xe=Lt:et.sibling=Lt,et=Lt);return t&&tt.forEach(function(Ux){return s(re,Ux)}),en&&Ls(re,ot),Xe}function vn(re,Z,ie,Ie){if(typeof ie=="object"&&ie!==null&&ie.type===$&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case le:e:{for(var Xe=ie.key,et=Z;et!==null;){if(et.key===Xe){if(Xe=ie.type,Xe===$){if(et.tag===7){f(re,et.sibling),Z=C(et,ie.props.children),Z.return=re,re=Z;break e}}else if(et.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===je&&wh(Xe)===et.type){f(re,et.sibling),Z=C(et,ie.props),Z.ref=la(re,et,ie),Z.return=re,re=Z;break e}f(re,et);break}else s(re,et);et=et.sibling}ie.type===$?(Z=Hs(ie.props.children,re.mode,Ie,ie.key),Z.return=re,re=Z):(Ie=Hl(ie.type,ie.key,ie.props,null,re.mode,Ie),Ie.ref=la(re,Z,ie),Ie.return=re,re=Ie)}return M(re);case ue:e:{for(et=ie.key;Z!==null;){if(Z.key===et)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){f(re,Z.sibling),Z=C(Z,ie.children||[]),Z.return=re,re=Z;break e}else{f(re,Z);break}else s(re,Z);Z=Z.sibling}Z=Zu(ie,re.mode,Ie),Z.return=re,re=Z}return M(re);case je:return et=ie._init,vn(re,Z,et(ie._payload),Ie)}if(Dn(ie))return We(re,Z,ie,Ie);if(Te(ie))return He(re,Z,ie,Ie);vl(re,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,Z!==null&&Z.tag===6?(f(re,Z.sibling),Z=C(Z,ie),Z.return=re,re=Z):(f(re,Z),Z=Ku(ie,re.mode,Ie),Z.return=re,re=Z),M(re)):f(re,Z)}return vn}var xo=vh(!0),Ch=vh(!1),Cl=es(null),El=null,yo=null,iu=null;function su(){iu=yo=El=null}function ou(t){var s=Cl.current;Qt(Cl),t._currentValue=s}function au(t,s,f){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===f)break;t=t.return}}function wo(t,s){El=t,iu=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(pr=!0),t.firstContext=null)}function Mr(t){var s=t._currentValue;if(iu!==t)if(t={context:t,memoizedValue:s,next:null},yo===null){if(El===null)throw Error(a(308));yo=t,El.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return s}var Bs=null;function lu(t){Bs===null?Bs=[t]:Bs.push(t)}function Eh(t,s,f,g){var C=s.interleaved;return C===null?(f.next=f,lu(s)):(f.next=C.next,C.next=f),s.interleaved=f,Ri(t,g)}function Ri(t,s){t.lanes|=s;var f=t.alternate;for(f!==null&&(f.lanes|=s),f=t,t=t.return;t!==null;)t.childLanes|=s,f=t.alternate,f!==null&&(f.childLanes|=s),f=t,t=t.return;return f.tag===3?f.stateNode:null}var rs=!1;function cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ah(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _i(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function is(t,s,f){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,kt&2){var C=g.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),g.pending=s,Ri(t,f)}return C=g.interleaved,C===null?(s.next=s,lu(g)):(s.next=C.next,C.next=s),g.interleaved=s,Ri(t,f)}function Al(t,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194240)!==0)){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}function Sh(t,s){var f=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var C=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?C=b=M:b=b.next=M,f=f.next}while(f!==null);b===null?C=b=s:b=b.next=s}else C=b=s;f={baseState:g.baseState,firstBaseUpdate:C,lastBaseUpdate:b,shared:g.shared,effects:g.effects},t.updateQueue=f;return}t=f.lastBaseUpdate,t===null?f.firstBaseUpdate=s:t.next=s,f.lastBaseUpdate=s}function Sl(t,s,f,g){var C=t.updateQueue;rs=!1;var b=C.firstBaseUpdate,M=C.lastBaseUpdate,W=C.shared.pending;if(W!==null){C.shared.pending=null;var Y=W,ae=Y.next;Y.next=null,M===null?b=ae:M.next=ae,M=Y;var ye=t.alternate;ye!==null&&(ye=ye.updateQueue,W=ye.lastBaseUpdate,W!==M&&(W===null?ye.firstBaseUpdate=ae:W.next=ae,ye.lastBaseUpdate=Y))}if(b!==null){var Ce=C.baseState;M=0,ye=ae=Y=null,W=b;do{var me=W.lane,Be=W.eventTime;if((g&me)===me){ye!==null&&(ye=ye.next={eventTime:Be,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var We=t,He=W;switch(me=s,Be=f,He.tag){case 1:if(We=He.payload,typeof We=="function"){Ce=We.call(Be,Ce,me);break e}Ce=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=He.payload,me=typeof We=="function"?We.call(Be,Ce,me):We,me==null)break e;Ce=fe({},Ce,me);break e;case 2:rs=!0}}W.callback!==null&&W.lane!==0&&(t.flags|=64,me=C.effects,me===null?C.effects=[W]:me.push(W))}else Be={eventTime:Be,lane:me,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ye===null?(ae=ye=Be,Y=Ce):ye=ye.next=Be,M|=me;if(W=W.next,W===null){if(W=C.shared.pending,W===null)break;me=W,W=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);if(ye===null&&(Y=Ce),C.baseState=Y,C.firstBaseUpdate=ae,C.lastBaseUpdate=ye,s=C.shared.interleaved,s!==null){C=s;do M|=C.lane,C=C.next;while(C!==s)}else b===null&&(C.shared.lanes=0);Vs|=M,t.lanes=M,t.memoizedState=Ce}}function bh(t,s,f){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var g=t[s],C=g.callback;if(C!==null){if(g.callback=null,g=f,typeof C!="function")throw Error(a(191,C));C.call(g)}}}var ca={},li=es(ca),ua=es(ca),fa=es(ca);function Fs(t){if(t===ca)throw Error(a(174));return t}function uu(t,s){switch($t(fa,s),$t(ua,t),$t(li,ca),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:jt(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=jt(s,t)}Qt(li),$t(li,s)}function vo(){Qt(li),Qt(ua),Qt(fa)}function Ih(t){Fs(fa.current);var s=Fs(li.current),f=jt(s,t.type);s!==f&&($t(ua,t),$t(li,f))}function fu(t){ua.current===t&&(Qt(li),Qt(ua))}var an=es(0);function bl(t){for(var s=t;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var du=[];function hu(){for(var t=0;t<du.length;t++)du[t]._workInProgressVersionPrimary=null;du.length=0}var Il=J.ReactCurrentDispatcher,pu=J.ReactCurrentBatchConfig,js=0,ln=null,On=null,Ln=null,Tl=!1,da=!1,ha=0,cx=0;function Jn(){throw Error(a(321))}function gu(t,s){if(s===null)return!1;for(var f=0;f<s.length&&f<t.length;f++)if(!Q(t[f],s[f]))return!1;return!0}function mu(t,s,f,g,C,b){if(js=b,ln=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Il.current=t===null||t.memoizedState===null?hx:px,t=f(g,C),da){b=0;do{if(da=!1,ha=0,25<=b)throw Error(a(301));b+=1,Ln=On=null,s.updateQueue=null,Il.current=gx,t=f(g,C)}while(da)}if(Il.current=_l,s=On!==null&&On.next!==null,js=0,Ln=On=ln=null,Tl=!1,s)throw Error(a(300));return t}function xu(){var t=ha!==0;return ha=0,t}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?ln.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function Dr(){if(On===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var s=Ln===null?ln.memoizedState:Ln.next;if(s!==null)Ln=s,On=t;else{if(t===null)throw Error(a(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Ln===null?ln.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function pa(t,s){return typeof s=="function"?s(t):s}function yu(t){var s=Dr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=On,C=g.baseQueue,b=f.pending;if(b!==null){if(C!==null){var M=C.next;C.next=b.next,b.next=M}g.baseQueue=C=b,f.pending=null}if(C!==null){b=C.next,g=g.baseState;var W=M=null,Y=null,ae=b;do{var ye=ae.lane;if((js&ye)===ye)Y!==null&&(Y=Y.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),g=ae.hasEagerState?ae.eagerState:t(g,ae.action);else{var Ce={lane:ye,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};Y===null?(W=Y=Ce,M=g):Y=Y.next=Ce,ln.lanes|=ye,Vs|=ye}ae=ae.next}while(ae!==null&&ae!==b);Y===null?M=g:Y.next=W,Q(g,s.memoizedState)||(pr=!0),s.memoizedState=g,s.baseState=M,s.baseQueue=Y,f.lastRenderedState=g}if(t=f.interleaved,t!==null){C=t;do b=C.lane,ln.lanes|=b,Vs|=b,C=C.next;while(C!==t)}else C===null&&(f.lanes=0);return[s.memoizedState,f.dispatch]}function wu(t){var s=Dr(),f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=t;var g=f.dispatch,C=f.pending,b=s.memoizedState;if(C!==null){f.pending=null;var M=C=C.next;do b=t(b,M.action),M=M.next;while(M!==C);Q(b,s.memoizedState)||(pr=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),f.lastRenderedState=b}return[b,g]}function Th(){}function Nh(t,s){var f=ln,g=Dr(),C=s(),b=!Q(g.memoizedState,C);if(b&&(g.memoizedState=C,pr=!0),g=g.queue,vu(Oh.bind(null,f,g,t),[t]),g.getSnapshot!==s||b||Ln!==null&&Ln.memoizedState.tag&1){if(f.flags|=2048,ga(9,_h.bind(null,f,g,C,s),void 0,null),Bn===null)throw Error(a(349));js&30||Rh(f,s,C)}return C}function Rh(t,s,f){t.flags|=16384,t={getSnapshot:s,value:f},s=ln.updateQueue,s===null?(s={lastEffect:null,stores:null},ln.updateQueue=s,s.stores=[t]):(f=s.stores,f===null?s.stores=[t]:f.push(t))}function _h(t,s,f,g){s.value=f,s.getSnapshot=g,Ph(s)&&Mh(t)}function Oh(t,s,f){return f(function(){Ph(s)&&Mh(t)})}function Ph(t){var s=t.getSnapshot;t=t.value;try{var f=s();return!Q(t,f)}catch{return!0}}function Mh(t){var s=Ri(t,1);s!==null&&Qr(s,t,1,-1)}function Dh(t){var s=ci();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:t},s.queue=t,t=t.dispatch=dx.bind(null,ln,t),[s.memoizedState,t]}function ga(t,s,f,g){return t={tag:t,create:s,destroy:f,deps:g,next:null},s=ln.updateQueue,s===null?(s={lastEffect:null,stores:null},ln.updateQueue=s,s.lastEffect=t.next=t):(f=s.lastEffect,f===null?s.lastEffect=t.next=t:(g=f.next,f.next=t,t.next=g,s.lastEffect=t)),t}function kh(){return Dr().memoizedState}function Nl(t,s,f,g){var C=ci();ln.flags|=t,C.memoizedState=ga(1|s,f,void 0,g===void 0?null:g)}function Rl(t,s,f,g){var C=Dr();g=g===void 0?null:g;var b=void 0;if(On!==null){var M=On.memoizedState;if(b=M.destroy,g!==null&&gu(g,M.deps)){C.memoizedState=ga(s,f,b,g);return}}ln.flags|=t,C.memoizedState=ga(1|s,f,b,g)}function Lh(t,s){return Nl(8390656,8,t,s)}function vu(t,s){return Rl(2048,8,t,s)}function Bh(t,s){return Rl(4,2,t,s)}function Fh(t,s){return Rl(4,4,t,s)}function jh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Vh(t,s,f){return f=f!=null?f.concat([t]):null,Rl(4,4,jh.bind(null,s,t),f)}function Cu(){}function Uh(t,s){var f=Dr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(f.memoizedState=[t,s],t)}function zh(t,s){var f=Dr();s=s===void 0?null:s;var g=f.memoizedState;return g!==null&&s!==null&&gu(s,g[1])?g[0]:(t=t(),f.memoizedState=[t,s],t)}function Wh(t,s,f){return js&21?(Q(f,s)||(f=Tn(),ln.lanes|=f,Vs|=f,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,pr=!0),t.memoizedState=f)}function ux(t,s){var f=xt;xt=f!==0&&4>f?f:4,t(!0);var g=pu.transition;pu.transition={};try{t(!1),s()}finally{xt=f,pu.transition=g}}function Hh(){return Dr().memoizedState}function fx(t,s,f){var g=ls(t);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Gh(t))Xh(s,f);else if(f=Eh(t,s,f,g),f!==null){var C=lr();Qr(f,t,g,C),Yh(f,s,g)}}function dx(t,s,f){var g=ls(t),C={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Gh(t))Xh(s,C);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var M=s.lastRenderedState,W=b(M,f);if(C.hasEagerState=!0,C.eagerState=W,Q(W,M)){var Y=s.interleaved;Y===null?(C.next=C,lu(s)):(C.next=Y.next,Y.next=C),s.interleaved=C;return}}catch{}finally{}f=Eh(t,s,C,g),f!==null&&(C=lr(),Qr(f,t,g,C),Yh(f,s,g))}}function Gh(t){var s=t.alternate;return t===ln||s!==null&&s===ln}function Xh(t,s){da=Tl=!0;var f=t.pending;f===null?s.next=s:(s.next=f.next,f.next=s),t.pending=s}function Yh(t,s,f){if(f&4194240){var g=s.lanes;g&=t.pendingLanes,f|=g,s.lanes=f,dn(t,f)}}var _l={readContext:Mr,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},hx={readContext:Mr,useCallback:function(t,s){return ci().memoizedState=[t,s===void 0?null:s],t},useContext:Mr,useEffect:Lh,useImperativeHandle:function(t,s,f){return f=f!=null?f.concat([t]):null,Nl(4194308,4,jh.bind(null,s,t),f)},useLayoutEffect:function(t,s){return Nl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Nl(4,2,t,s)},useMemo:function(t,s){var f=ci();return s=s===void 0?null:s,t=t(),f.memoizedState=[t,s],t},useReducer:function(t,s,f){var g=ci();return s=f!==void 0?f(s):s,g.memoizedState=g.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},g.queue=t,t=t.dispatch=fx.bind(null,ln,t),[g.memoizedState,t]},useRef:function(t){var s=ci();return t={current:t},s.memoizedState=t},useState:Dh,useDebugValue:Cu,useDeferredValue:function(t){return ci().memoizedState=t},useTransition:function(){var t=Dh(!1),s=t[0];return t=ux.bind(null,t[1]),ci().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,f){var g=ln,C=ci();if(en){if(f===void 0)throw Error(a(407));f=f()}else{if(f=s(),Bn===null)throw Error(a(349));js&30||Rh(g,s,f)}C.memoizedState=f;var b={value:f,getSnapshot:s};return C.queue=b,Lh(Oh.bind(null,g,b,t),[t]),g.flags|=2048,ga(9,_h.bind(null,g,b,f,s),void 0,null),f},useId:function(){var t=ci(),s=Bn.identifierPrefix;if(en){var f=Ni,g=Ti;f=(g&~(1<<32-or(g)-1)).toString(32)+f,s=":"+s+"R"+f,f=ha++,0<f&&(s+="H"+f.toString(32)),s+=":"}else f=cx++,s=":"+s+"r"+f.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},px={readContext:Mr,useCallback:Uh,useContext:Mr,useEffect:vu,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:Fh,useMemo:zh,useReducer:yu,useRef:kh,useState:function(){return yu(pa)},useDebugValue:Cu,useDeferredValue:function(t){var s=Dr();return Wh(s,On.memoizedState,t)},useTransition:function(){var t=yu(pa)[0],s=Dr().memoizedState;return[t,s]},useMutableSource:Th,useSyncExternalStore:Nh,useId:Hh,unstable_isNewReconciler:!1},gx={readContext:Mr,useCallback:Uh,useContext:Mr,useEffect:vu,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:Fh,useMemo:zh,useReducer:wu,useRef:kh,useState:function(){return wu(pa)},useDebugValue:Cu,useDeferredValue:function(t){var s=Dr();return On===null?s.memoizedState=t:Wh(s,On.memoizedState,t)},useTransition:function(){var t=wu(pa)[0],s=Dr().memoizedState;return[t,s]},useMutableSource:Th,useSyncExternalStore:Nh,useId:Hh,unstable_isNewReconciler:!1};function Zr(t,s){if(t&&t.defaultProps){s=fe({},s),t=t.defaultProps;for(var f in t)s[f]===void 0&&(s[f]=t[f]);return s}return s}function Eu(t,s,f,g){s=t.memoizedState,f=f(g,s),f=f==null?s:fe({},s,f),t.memoizedState=f,t.lanes===0&&(t.updateQueue.baseState=f)}var Ol={isMounted:function(t){return(t=t._reactInternals)?Zn(t)===t:!1},enqueueSetState:function(t,s,f){t=t._reactInternals;var g=lr(),C=ls(t),b=_i(g,C);b.payload=s,f!=null&&(b.callback=f),s=is(t,b,C),s!==null&&(Qr(s,t,C,g),Al(s,t,C))},enqueueReplaceState:function(t,s,f){t=t._reactInternals;var g=lr(),C=ls(t),b=_i(g,C);b.tag=1,b.payload=s,f!=null&&(b.callback=f),s=is(t,b,C),s!==null&&(Qr(s,t,C,g),Al(s,t,C))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var f=lr(),g=ls(t),C=_i(f,g);C.tag=2,s!=null&&(C.callback=s),s=is(t,C,g),s!==null&&(Qr(s,t,g,f),Al(s,t,g))}};function Kh(t,s,f,g,C,b,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,b,M):s.prototype&&s.prototype.isPureReactComponent?!se(f,g)||!se(C,b):!0}function Zh(t,s,f){var g=!1,C=ts,b=s.contextType;return typeof b=="object"&&b!==null?b=Mr(b):(C=hr(s)?Ds:Qn.current,g=s.contextTypes,b=(g=g!=null)?ho(t,C):ts),s=new s(f,b),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ol,t.stateNode=s,s._reactInternals=t,g&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=b),s}function $h(t,s,f,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,g),s.state!==t&&Ol.enqueueReplaceState(s,s.state,null)}function Au(t,s,f,g){var C=t.stateNode;C.props=f,C.state=t.memoizedState,C.refs={},cu(t);var b=s.contextType;typeof b=="object"&&b!==null?C.context=Mr(b):(b=hr(s)?Ds:Qn.current,C.context=ho(t,b)),C.state=t.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Eu(t,s,b,f),C.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(s=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),s!==C.state&&Ol.enqueueReplaceState(C,C.state,null),Sl(t,f,C,g),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,s){try{var f="",g=s;do f+=st(g),g=g.return;while(g);var C=f}catch(b){C=`
Error generating stack: `+b.message+`
`+b.stack}return{value:t,source:s,stack:C,digest:null}}function Su(t,s,f){return{value:t,source:null,stack:f??null,digest:s??null}}function bu(t,s){try{console.error(s.value)}catch(f){setTimeout(function(){throw f})}}var mx=typeof WeakMap=="function"?WeakMap:Map;function qh(t,s,f){f=_i(-1,f),f.tag=3,f.payload={element:null};var g=s.value;return f.callback=function(){Fl||(Fl=!0,Vu=g),bu(t,s)},f}function Qh(t,s,f){f=_i(-1,f),f.tag=3;var g=t.type.getDerivedStateFromError;if(typeof g=="function"){var C=s.value;f.payload=function(){return g(C)},f.callback=function(){bu(t,s)}}var b=t.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){bu(t,s),typeof g!="function"&&(os===null?os=new Set([this]):os.add(this));var M=s.stack;this.componentDidCatch(s.value,{componentStack:M!==null?M:""})}),f}function Jh(t,s,f){var g=t.pingCache;if(g===null){g=t.pingCache=new mx;var C=new Set;g.set(s,C)}else C=g.get(s),C===void 0&&(C=new Set,g.set(s,C));C.has(f)||(C.add(f),t=_x.bind(null,t,s,f),s.then(t,t))}function e0(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function t0(t,s,f,g,C){return t.mode&1?(t.flags|=65536,t.lanes=C,t):(t===s?t.flags|=65536:(t.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(s=_i(-1,1),s.tag=2,is(f,s,1))),f.lanes|=1),t)}var xx=J.ReactCurrentOwner,pr=!1;function ar(t,s,f,g){s.child=t===null?Ch(s,null,f,g):xo(s,t.child,f,g)}function n0(t,s,f,g,C){f=f.render;var b=s.ref;return wo(s,C),g=mu(t,s,f,g,b,C),f=xu(),t!==null&&!pr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Oi(t,s,C)):(en&&f&&Jc(s),s.flags|=1,ar(t,s,g,C),s.child)}function r0(t,s,f,g,C){if(t===null){var b=f.type;return typeof b=="function"&&!Yu(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(s.tag=15,s.type=b,i0(t,s,b,g,C)):(t=Hl(f.type,null,g,s,s.mode,C),t.ref=s.ref,t.return=s,s.child=t)}if(b=t.child,!(t.lanes&C)){var M=b.memoizedProps;if(f=f.compare,f=f!==null?f:se,f(M,g)&&t.ref===s.ref)return Oi(t,s,C)}return s.flags|=1,t=us(b,g),t.ref=s.ref,t.return=s,s.child=t}function i0(t,s,f,g,C){if(t!==null){var b=t.memoizedProps;if(se(b,g)&&t.ref===s.ref)if(pr=!1,s.pendingProps=g=b,(t.lanes&C)!==0)t.flags&131072&&(pr=!0);else return s.lanes=t.lanes,Oi(t,s,C)}return Iu(t,s,f,g,C)}function s0(t,s,f){var g=s.pendingProps,C=g.children,b=t!==null?t.memoizedState:null;if(g.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Ao,Ir),Ir|=f;else{if(!(f&1073741824))return t=b!==null?b.baseLanes|f:f,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,$t(Ao,Ir),Ir|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:f,$t(Ao,Ir),Ir|=g}else b!==null?(g=b.baseLanes|f,s.memoizedState=null):g=f,$t(Ao,Ir),Ir|=g;return ar(t,s,C,f),s.child}function o0(t,s){var f=s.ref;(t===null&&f!==null||t!==null&&t.ref!==f)&&(s.flags|=512,s.flags|=2097152)}function Iu(t,s,f,g,C){var b=hr(f)?Ds:Qn.current;return b=ho(s,b),wo(s,C),f=mu(t,s,f,g,b,C),g=xu(),t!==null&&!pr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,Oi(t,s,C)):(en&&g&&Jc(s),s.flags|=1,ar(t,s,f,C),s.child)}function a0(t,s,f,g,C){if(hr(f)){var b=!0;gl(s)}else b=!1;if(wo(s,C),s.stateNode===null)Ml(t,s),Zh(s,f,g),Au(s,f,g,C),g=!0;else if(t===null){var M=s.stateNode,W=s.memoizedProps;M.props=W;var Y=M.context,ae=f.contextType;typeof ae=="object"&&ae!==null?ae=Mr(ae):(ae=hr(f)?Ds:Qn.current,ae=ho(s,ae));var ye=f.getDerivedStateFromProps,Ce=typeof ye=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ce||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==g||Y!==ae)&&$h(s,M,g,ae),rs=!1;var me=s.memoizedState;M.state=me,Sl(s,g,M,C),Y=s.memoizedState,W!==g||me!==Y||dr.current||rs?(typeof ye=="function"&&(Eu(s,f,ye,g),Y=s.memoizedState),(W=rs||Kh(s,f,W,g,me,Y,ae))?(Ce||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(s.flags|=4194308)):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=Y),M.props=g,M.state=Y,M.context=ae,g=W):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{M=s.stateNode,Ah(t,s),W=s.memoizedProps,ae=s.type===s.elementType?W:Zr(s.type,W),M.props=ae,Ce=s.pendingProps,me=M.context,Y=f.contextType,typeof Y=="object"&&Y!==null?Y=Mr(Y):(Y=hr(f)?Ds:Qn.current,Y=ho(s,Y));var Be=f.getDerivedStateFromProps;(ye=typeof Be=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==Ce||me!==Y)&&$h(s,M,g,Y),rs=!1,me=s.memoizedState,M.state=me,Sl(s,g,M,C);var We=s.memoizedState;W!==Ce||me!==We||dr.current||rs?(typeof Be=="function"&&(Eu(s,f,Be,g),We=s.memoizedState),(ae=rs||Kh(s,f,ae,g,me,We,Y)||!1)?(ye||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,We,Y),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,We,Y)),typeof M.componentDidUpdate=="function"&&(s.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof M.componentDidUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=We),M.props=g,M.state=We,M.context=Y,g=ae):(typeof M.componentDidUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),g=!1)}return Tu(t,s,f,g,b,C)}function Tu(t,s,f,g,C,b){o0(t,s);var M=(s.flags&128)!==0;if(!g&&!M)return C&&dh(s,f,!1),Oi(t,s,b);g=s.stateNode,xx.current=s;var W=M&&typeof f.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,t!==null&&M?(s.child=xo(s,t.child,null,b),s.child=xo(s,null,W,b)):ar(t,s,W,b),s.memoizedState=g.state,C&&dh(s,f,!0),s.child}function l0(t){var s=t.stateNode;s.pendingContext?uh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&uh(t,s.context,!1),uu(t,s.containerInfo)}function c0(t,s,f,g,C){return mo(),ru(C),s.flags|=256,ar(t,s,f,g),s.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Ru(t){return{baseLanes:t,cachePool:null,transitions:null}}function u0(t,s,f){var g=s.pendingProps,C=an.current,b=!1,M=(s.flags&128)!==0,W;if((W=M)||(W=t!==null&&t.memoizedState===null?!1:(C&2)!==0),W?(b=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),$t(an,C&1),t===null)return nu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(M=g.children,t=g.fallback,b?(g=s.mode,b=s.child,M={mode:"hidden",children:M},!(g&1)&&b!==null?(b.childLanes=0,b.pendingProps=M):b=Gl(M,g,0,null),t=Hs(t,g,f,null),b.return=s,t.return=s,b.sibling=t,s.child=b,s.child.memoizedState=Ru(f),s.memoizedState=Nu,t):_u(s,M));if(C=t.memoizedState,C!==null&&(W=C.dehydrated,W!==null))return yx(t,s,M,g,W,C,f);if(b){b=g.fallback,M=s.mode,C=t.child,W=C.sibling;var Y={mode:"hidden",children:g.children};return!(M&1)&&s.child!==C?(g=s.child,g.childLanes=0,g.pendingProps=Y,s.deletions=null):(g=us(C,Y),g.subtreeFlags=C.subtreeFlags&14680064),W!==null?b=us(W,b):(b=Hs(b,M,f,null),b.flags|=2),b.return=s,g.return=s,g.sibling=b,s.child=g,g=b,b=s.child,M=t.child.memoizedState,M=M===null?Ru(f):{baseLanes:M.baseLanes|f,cachePool:null,transitions:M.transitions},b.memoizedState=M,b.childLanes=t.childLanes&~f,s.memoizedState=Nu,g}return b=t.child,t=b.sibling,g=us(b,{mode:"visible",children:g.children}),!(s.mode&1)&&(g.lanes=f),g.return=s,g.sibling=null,t!==null&&(f=s.deletions,f===null?(s.deletions=[t],s.flags|=16):f.push(t)),s.child=g,s.memoizedState=null,g}function _u(t,s){return s=Gl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Pl(t,s,f,g){return g!==null&&ru(g),xo(s,t.child,null,f),t=_u(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function yx(t,s,f,g,C,b,M){if(f)return s.flags&256?(s.flags&=-257,g=Su(Error(a(422))),Pl(t,s,M,g)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(b=g.fallback,C=s.mode,g=Gl({mode:"visible",children:g.children},C,0,null),b=Hs(b,C,M,null),b.flags|=2,g.return=s,b.return=s,g.sibling=b,s.child=g,s.mode&1&&xo(s,t.child,null,M),s.child.memoizedState=Ru(M),s.memoizedState=Nu,b);if(!(s.mode&1))return Pl(t,s,M,null);if(C.data==="$!"){if(g=C.nextSibling&&C.nextSibling.dataset,g)var W=g.dgst;return g=W,b=Error(a(419)),g=Su(b,g,void 0),Pl(t,s,M,g)}if(W=(M&t.childLanes)!==0,pr||W){if(g=Bn,g!==null){switch(M&-M){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(g.suspendedLanes|M)?0:C,C!==0&&C!==b.retryLane&&(b.retryLane=C,Ri(t,C),Qr(g,t,C,-1))}return Xu(),g=Su(Error(a(421))),Pl(t,s,M,g)}return C.data==="$?"?(s.flags|=128,s.child=t.child,s=Ox.bind(null,t),C._reactRetry=s,null):(t=b.treeContext,br=Ji(C.nextSibling),Sr=s,en=!0,Kr=null,t!==null&&(Or[Pr++]=Ti,Or[Pr++]=Ni,Or[Pr++]=ks,Ti=t.id,Ni=t.overflow,ks=s),s=_u(s,g.children),s.flags|=4096,s)}function f0(t,s,f){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),au(t.return,s,f)}function Ou(t,s,f,g,C){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:C}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=f,b.tailMode=C)}function d0(t,s,f){var g=s.pendingProps,C=g.revealOrder,b=g.tail;if(ar(t,s,g.children,f),g=an.current,g&2)g=g&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,f,s);else if(t.tag===19)f0(t,f,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}g&=1}if($t(an,g),!(s.mode&1))s.memoizedState=null;else switch(C){case"forwards":for(f=s.child,C=null;f!==null;)t=f.alternate,t!==null&&bl(t)===null&&(C=f),f=f.sibling;f=C,f===null?(C=s.child,s.child=null):(C=f.sibling,f.sibling=null),Ou(s,!1,C,f,b);break;case"backwards":for(f=null,C=s.child,s.child=null;C!==null;){if(t=C.alternate,t!==null&&bl(t)===null){s.child=C;break}t=C.sibling,C.sibling=f,f=C,C=t}Ou(s,!0,f,null,b);break;case"together":Ou(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ml(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Oi(t,s,f){if(t!==null&&(s.dependencies=t.dependencies),Vs|=s.lanes,!(f&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,f=us(t,t.pendingProps),s.child=f,f.return=s;t.sibling!==null;)t=t.sibling,f=f.sibling=us(t,t.pendingProps),f.return=s;f.sibling=null}return s.child}function wx(t,s,f){switch(s.tag){case 3:l0(s),mo();break;case 5:Ih(s);break;case 1:hr(s.type)&&gl(s);break;case 4:uu(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,C=s.memoizedProps.value;$t(Cl,g._currentValue),g._currentValue=C;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?($t(an,an.current&1),s.flags|=128,null):f&s.child.childLanes?u0(t,s,f):($t(an,an.current&1),t=Oi(t,s,f),t!==null?t.sibling:null);$t(an,an.current&1);break;case 19:if(g=(f&s.childLanes)!==0,t.flags&128){if(g)return d0(t,s,f);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),$t(an,an.current),g)break;return null;case 22:case 23:return s.lanes=0,s0(t,s,f)}return Oi(t,s,f)}var h0,Pu,p0,g0;h0=function(t,s){for(var f=s.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Pu=function(){},p0=function(t,s,f,g){var C=t.memoizedProps;if(C!==g){t=s.stateNode,Fs(li.current);var b=null;switch(f){case"input":C=At(t,C),g=At(t,g),b=[];break;case"select":C=fe({},C,{value:void 0}),g=fe({},g,{value:void 0}),b=[];break;case"textarea":C=Xn(t,C),g=Xn(t,g),b=[];break;default:typeof C.onClick!="function"&&typeof g.onClick=="function"&&(t.onclick=dl)}Tt(f,g);var M;f=null;for(ae in C)if(!g.hasOwnProperty(ae)&&C.hasOwnProperty(ae)&&C[ae]!=null)if(ae==="style"){var W=C[ae];for(M in W)W.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(p.hasOwnProperty(ae)?b||(b=[]):(b=b||[]).push(ae,null));for(ae in g){var Y=g[ae];if(W=C!=null?C[ae]:void 0,g.hasOwnProperty(ae)&&Y!==W&&(Y!=null||W!=null))if(ae==="style")if(W){for(M in W)!W.hasOwnProperty(M)||Y&&Y.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in Y)Y.hasOwnProperty(M)&&W[M]!==Y[M]&&(f||(f={}),f[M]=Y[M])}else f||(b||(b=[]),b.push(ae,f)),f=Y;else ae==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,W=W?W.__html:void 0,Y!=null&&W!==Y&&(b=b||[]).push(ae,Y)):ae==="children"?typeof Y!="string"&&typeof Y!="number"||(b=b||[]).push(ae,""+Y):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(p.hasOwnProperty(ae)?(Y!=null&&ae==="onScroll"&&qt("scroll",t),b||W===Y||(b=[])):(b=b||[]).push(ae,Y))}f&&(b=b||[]).push("style",f);var ae=b;(s.updateQueue=ae)&&(s.flags|=4)}},g0=function(t,s,f,g){f!==g&&(s.flags|=4)};function ma(t,s){if(!en)switch(t.tailMode){case"hidden":s=t.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?t.tail=null:f.sibling=null;break;case"collapsed":f=t.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function er(t){var s=t.alternate!==null&&t.alternate.child===t.child,f=0,g=0;if(s)for(var C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags&14680064,g|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags,g|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=g,t.childLanes=f,s}function vx(t,s,f){var g=s.pendingProps;switch(eu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(s),null;case 1:return hr(s.type)&&pl(),er(s),null;case 3:return g=s.stateNode,vo(),Qt(dr),Qt(Qn),hu(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(t===null||t.child===null)&&(wl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Kr!==null&&(Wu(Kr),Kr=null))),Pu(t,s),er(s),null;case 5:fu(s);var C=Fs(fa.current);if(f=s.type,t!==null&&s.stateNode!=null)p0(t,s,f,g,C),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(a(166));return er(s),null}if(t=Fs(li.current),wl(s)){g=s.stateNode,f=s.type;var b=s.memoizedProps;switch(g[ai]=s,g[oa]=b,t=(s.mode&1)!==0,f){case"dialog":qt("cancel",g),qt("close",g);break;case"iframe":case"object":case"embed":qt("load",g);break;case"video":case"audio":for(C=0;C<ra.length;C++)qt(ra[C],g);break;case"source":qt("error",g);break;case"img":case"image":case"link":qt("error",g),qt("load",g);break;case"details":qt("toggle",g);break;case"input":Bt(g,b),qt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},qt("invalid",g);break;case"textarea":wt(g,b),qt("invalid",g)}Tt(f,b),C=null;for(var M in b)if(b.hasOwnProperty(M)){var W=b[M];M==="children"?typeof W=="string"?g.textContent!==W&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,W,t),C=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(b.suppressHydrationWarning!==!0&&fl(g.textContent,W,t),C=["children",""+W]):p.hasOwnProperty(M)&&W!=null&&M==="onScroll"&&qt("scroll",g)}switch(f){case"input":ct(g),bt(g,b,!0);break;case"textarea":ct(g),Pe(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=dl)}g=C,s.updateQueue=g,g!==null&&(s.flags|=4)}else{M=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qe(f)),t==="http://www.w3.org/1999/xhtml"?f==="script"?(t=M.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof g.is=="string"?t=M.createElement(f,{is:g.is}):(t=M.createElement(f),f==="select"&&(M=t,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):t=M.createElementNS(t,f),t[ai]=s,t[oa]=g,h0(t,s,!1,!1),s.stateNode=t;e:{switch(M=Xt(f,g),f){case"dialog":qt("cancel",t),qt("close",t),C=g;break;case"iframe":case"object":case"embed":qt("load",t),C=g;break;case"video":case"audio":for(C=0;C<ra.length;C++)qt(ra[C],t);C=g;break;case"source":qt("error",t),C=g;break;case"img":case"image":case"link":qt("error",t),qt("load",t),C=g;break;case"details":qt("toggle",t),C=g;break;case"input":Bt(t,g),C=At(t,g),qt("invalid",t);break;case"option":C=g;break;case"select":t._wrapperState={wasMultiple:!!g.multiple},C=fe({},g,{value:void 0}),qt("invalid",t);break;case"textarea":wt(t,g),C=Xn(t,g),qt("invalid",t);break;default:C=g}Tt(f,C),W=C;for(b in W)if(W.hasOwnProperty(b)){var Y=W[b];b==="style"?be(t,Y):b==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&pt(t,Y)):b==="children"?typeof Y=="string"?(f!=="textarea"||Y!=="")&&rn(t,Y):typeof Y=="number"&&rn(t,""+Y):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(p.hasOwnProperty(b)?Y!=null&&b==="onScroll"&&qt("scroll",t):Y!=null&&z(t,b,Y,M))}switch(f){case"input":ct(t),bt(t,g,!1);break;case"textarea":ct(t),Pe(t);break;case"option":g.value!=null&&t.setAttribute("value",""+ze(g.value));break;case"select":t.multiple=!!g.multiple,b=g.value,b!=null?Ne(t,!!g.multiple,b,!1):g.defaultValue!=null&&Ne(t,!!g.multiple,g.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=dl)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return er(s),null;case 6:if(t&&s.stateNode!=null)g0(t,s,t.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(f=Fs(fa.current),Fs(li.current),wl(s)){if(g=s.stateNode,f=s.memoizedProps,g[ai]=s,(b=g.nodeValue!==f)&&(t=Sr,t!==null))switch(t.tag){case 3:fl(g.nodeValue,f,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(g.nodeValue,f,(t.mode&1)!==0)}b&&(s.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[ai]=s,s.stateNode=g}return er(s),null;case 13:if(Qt(an),g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&br!==null&&s.mode&1&&!(s.flags&128))yh(),mo(),s.flags|=98560,b=!1;else if(b=wl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!b)throw Error(a(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(a(317));b[ai]=s}else mo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;er(s),b=!1}else Kr!==null&&(Wu(Kr),Kr=null),b=!0;if(!b)return s.flags&65536?s:null}return s.flags&128?(s.lanes=f,s):(g=g!==null,g!==(t!==null&&t.memoizedState!==null)&&g&&(s.child.flags|=8192,s.mode&1&&(t===null||an.current&1?Pn===0&&(Pn=3):Xu())),s.updateQueue!==null&&(s.flags|=4),er(s),null);case 4:return vo(),Pu(t,s),t===null&&ia(s.stateNode.containerInfo),er(s),null;case 10:return ou(s.type._context),er(s),null;case 17:return hr(s.type)&&pl(),er(s),null;case 19:if(Qt(an),b=s.memoizedState,b===null)return er(s),null;if(g=(s.flags&128)!==0,M=b.rendering,M===null)if(g)ma(b,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(M=bl(t),M!==null){for(s.flags|=128,ma(b,!1),g=M.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=f,f=s.child;f!==null;)b=f,t=g,b.flags&=14680066,M=b.alternate,M===null?(b.childLanes=0,b.lanes=t,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=M.childLanes,b.lanes=M.lanes,b.child=M.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=M.memoizedProps,b.memoizedState=M.memoizedState,b.updateQueue=M.updateQueue,b.type=M.type,t=M.dependencies,b.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),f=f.sibling;return $t(an,an.current&1|2),s.child}t=t.sibling}b.tail!==null&&gt()>So&&(s.flags|=128,g=!0,ma(b,!1),s.lanes=4194304)}else{if(!g)if(t=bl(M),t!==null){if(s.flags|=128,g=!0,f=t.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),ma(b,!0),b.tail===null&&b.tailMode==="hidden"&&!M.alternate&&!en)return er(s),null}else 2*gt()-b.renderingStartTime>So&&f!==1073741824&&(s.flags|=128,g=!0,ma(b,!1),s.lanes=4194304);b.isBackwards?(M.sibling=s.child,s.child=M):(f=b.last,f!==null?f.sibling=M:s.child=M,b.last=M)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=gt(),s.sibling=null,f=an.current,$t(an,g?f&1|2:f&1),s):(er(s),null);case 22:case 23:return Gu(),g=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==g&&(s.flags|=8192),g&&s.mode&1?Ir&1073741824&&(er(s),s.subtreeFlags&6&&(s.flags|=8192)):er(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Cx(t,s){switch(eu(s),s.tag){case 1:return hr(s.type)&&pl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return vo(),Qt(dr),Qt(Qn),hu(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return fu(s),null;case 13:if(Qt(an),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));mo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Qt(an),null;case 4:return vo(),null;case 10:return ou(s.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var Dl=!1,tr=!1,Ex=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Eo(t,s){var f=t.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){pn(t,s,g)}else f.current=null}function Mu(t,s,f){try{f()}catch(g){pn(t,s,g)}}var m0=!1;function Ax(t,s){if(Gc=si,t=Et(),lt(t)){if("selectionStart"in t)var f={start:t.selectionStart,end:t.selectionEnd};else e:{f=(f=t.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var C=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var M=0,W=-1,Y=-1,ae=0,ye=0,Ce=t,me=null;t:for(;;){for(var Be;Ce!==f||C!==0&&Ce.nodeType!==3||(W=M+C),Ce!==b||g!==0&&Ce.nodeType!==3||(Y=M+g),Ce.nodeType===3&&(M+=Ce.nodeValue.length),(Be=Ce.firstChild)!==null;)me=Ce,Ce=Be;for(;;){if(Ce===t)break t;if(me===f&&++ae===C&&(W=M),me===b&&++ye===g&&(Y=M),(Be=Ce.nextSibling)!==null)break;Ce=me,me=Ce.parentNode}Ce=Be}f=W===-1||Y===-1?null:{start:W,end:Y}}else f=null}f=f||{start:0,end:0}}else f=null;for(Xc={focusedElem:t,selectionRange:f},si=!1,Ue=s;Ue!==null;)if(s=Ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ue=t;else for(;Ue!==null;){s=Ue;try{var We=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var He=We.memoizedProps,vn=We.memoizedState,re=s.stateNode,Z=re.getSnapshotBeforeUpdate(s.elementType===s.type?He:Zr(s.type,He),vn);re.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ie=s.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ie){pn(s,s.return,Ie)}if(t=s.sibling,t!==null){t.return=s.return,Ue=t;break}Ue=s.return}return We=m0,m0=!1,We}function xa(t,s,f){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&t)===t){var b=C.destroy;C.destroy=void 0,b!==void 0&&Mu(s,f,b)}C=C.next}while(C!==g)}}function kl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var f=s=s.next;do{if((f.tag&t)===t){var g=f.create;f.destroy=g()}f=f.next}while(f!==s)}}function Du(t){var s=t.ref;if(s!==null){var f=t.stateNode;switch(t.tag){case 5:t=f;break;default:t=f}typeof s=="function"?s(t):s.current=t}}function x0(t){var s=t.alternate;s!==null&&(t.alternate=null,x0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ai],delete s[oa],delete s[$c],delete s[sx],delete s[ox])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y0(t){return t.tag===5||t.tag===3||t.tag===4}function w0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ku(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.nodeType===8?f.parentNode.insertBefore(t,s):f.insertBefore(t,s):(f.nodeType===8?(s=f.parentNode,s.insertBefore(t,f)):(s=f,s.appendChild(t)),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=dl));else if(g!==4&&(t=t.child,t!==null))for(ku(t,s,f),t=t.sibling;t!==null;)ku(t,s,f),t=t.sibling}function Lu(t,s,f){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?f.insertBefore(t,s):f.appendChild(t);else if(g!==4&&(t=t.child,t!==null))for(Lu(t,s,f),t=t.sibling;t!==null;)Lu(t,s,f),t=t.sibling}var zn=null,$r=!1;function ss(t,s,f){for(f=f.child;f!==null;)v0(t,s,f),f=f.sibling}function v0(t,s,f){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Ct,f)}catch{}switch(f.tag){case 5:tr||Eo(f,s);case 6:var g=zn,C=$r;zn=null,ss(t,s,f),zn=g,$r=C,zn!==null&&($r?(t=zn,f=f.stateNode,t.nodeType===8?t.parentNode.removeChild(f):t.removeChild(f)):zn.removeChild(f.stateNode));break;case 18:zn!==null&&($r?(t=zn,f=f.stateNode,t.nodeType===8?Zc(t.parentNode,f):t.nodeType===1&&Zc(t,f),Gr(t)):Zc(zn,f.stateNode));break;case 4:g=zn,C=$r,zn=f.stateNode.containerInfo,$r=!0,ss(t,s,f),zn=g,$r=C;break;case 0:case 11:case 14:case 15:if(!tr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){C=g=g.next;do{var b=C,M=b.destroy;b=b.tag,M!==void 0&&(b&2||b&4)&&Mu(f,s,M),C=C.next}while(C!==g)}ss(t,s,f);break;case 1:if(!tr&&(Eo(f,s),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(W){pn(f,s,W)}ss(t,s,f);break;case 21:ss(t,s,f);break;case 22:f.mode&1?(tr=(g=tr)||f.memoizedState!==null,ss(t,s,f),tr=g):ss(t,s,f);break;default:ss(t,s,f)}}function C0(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var f=t.stateNode;f===null&&(f=t.stateNode=new Ex),s.forEach(function(g){var C=Px.bind(null,t,g);f.has(g)||(f.add(g),g.then(C,C))})}}function qr(t,s){var f=s.deletions;if(f!==null)for(var g=0;g<f.length;g++){var C=f[g];try{var b=t,M=s,W=M;e:for(;W!==null;){switch(W.tag){case 5:zn=W.stateNode,$r=!1;break e;case 3:zn=W.stateNode.containerInfo,$r=!0;break e;case 4:zn=W.stateNode.containerInfo,$r=!0;break e}W=W.return}if(zn===null)throw Error(a(160));v0(b,M,C),zn=null,$r=!1;var Y=C.alternate;Y!==null&&(Y.return=null),C.return=null}catch(ae){pn(C,s,ae)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)E0(s,t),s=s.sibling}function E0(t,s){var f=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qr(s,t),ui(t),g&4){try{xa(3,t,t.return),kl(3,t)}catch(He){pn(t,t.return,He)}try{xa(5,t,t.return)}catch(He){pn(t,t.return,He)}}break;case 1:qr(s,t),ui(t),g&512&&f!==null&&Eo(f,f.return);break;case 5:if(qr(s,t),ui(t),g&512&&f!==null&&Eo(f,f.return),t.flags&32){var C=t.stateNode;try{rn(C,"")}catch(He){pn(t,t.return,He)}}if(g&4&&(C=t.stateNode,C!=null)){var b=t.memoizedProps,M=f!==null?f.memoizedProps:b,W=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{W==="input"&&b.type==="radio"&&b.name!=null&&Gt(C,b),Xt(W,M);var ae=Xt(W,b);for(M=0;M<Y.length;M+=2){var ye=Y[M],Ce=Y[M+1];ye==="style"?be(C,Ce):ye==="dangerouslySetInnerHTML"?pt(C,Ce):ye==="children"?rn(C,Ce):z(C,ye,Ce,ae)}switch(W){case"input":Pt(C,b);break;case"textarea":ve(C,b);break;case"select":var me=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!b.multiple;var Be=b.value;Be!=null?Ne(C,!!b.multiple,Be,!1):me!==!!b.multiple&&(b.defaultValue!=null?Ne(C,!!b.multiple,b.defaultValue,!0):Ne(C,!!b.multiple,b.multiple?[]:"",!1))}C[oa]=b}catch(He){pn(t,t.return,He)}}break;case 6:if(qr(s,t),ui(t),g&4){if(t.stateNode===null)throw Error(a(162));C=t.stateNode,b=t.memoizedProps;try{C.nodeValue=b}catch(He){pn(t,t.return,He)}}break;case 3:if(qr(s,t),ui(t),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Gr(s.containerInfo)}catch(He){pn(t,t.return,He)}break;case 4:qr(s,t),ui(t);break;case 13:qr(s,t),ui(t),C=t.child,C.flags&8192&&(b=C.memoizedState!==null,C.stateNode.isHidden=b,!b||C.alternate!==null&&C.alternate.memoizedState!==null||(ju=gt())),g&4&&C0(t);break;case 22:if(ye=f!==null&&f.memoizedState!==null,t.mode&1?(tr=(ae=tr)||ye,qr(s,t),tr=ae):qr(s,t),ui(t),g&8192){if(ae=t.memoizedState!==null,(t.stateNode.isHidden=ae)&&!ye&&t.mode&1)for(Ue=t,ye=t.child;ye!==null;){for(Ce=Ue=ye;Ue!==null;){switch(me=Ue,Be=me.child,me.tag){case 0:case 11:case 14:case 15:xa(4,me,me.return);break;case 1:Eo(me,me.return);var We=me.stateNode;if(typeof We.componentWillUnmount=="function"){g=me,f=me.return;try{s=g,We.props=s.memoizedProps,We.state=s.memoizedState,We.componentWillUnmount()}catch(He){pn(g,f,He)}}break;case 5:Eo(me,me.return);break;case 22:if(me.memoizedState!==null){b0(Ce);continue}}Be!==null?(Be.return=me,Ue=Be):b0(Ce)}ye=ye.sibling}e:for(ye=null,Ce=t;;){if(Ce.tag===5){if(ye===null){ye=Ce;try{C=Ce.stateNode,ae?(b=C.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(W=Ce.stateNode,Y=Ce.memoizedProps.style,M=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,W.style.display=It("display",M))}catch(He){pn(t,t.return,He)}}}else if(Ce.tag===6){if(ye===null)try{Ce.stateNode.nodeValue=ae?"":Ce.memoizedProps}catch(He){pn(t,t.return,He)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===t)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===t)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===t)break e;ye===Ce&&(ye=null),Ce=Ce.return}ye===Ce&&(ye=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:qr(s,t),ui(t),g&4&&C0(t);break;case 21:break;default:qr(s,t),ui(t)}}function ui(t){var s=t.flags;if(s&2){try{e:{for(var f=t.return;f!==null;){if(y0(f)){var g=f;break e}f=f.return}throw Error(a(160))}switch(g.tag){case 5:var C=g.stateNode;g.flags&32&&(rn(C,""),g.flags&=-33);var b=w0(t);Lu(t,b,C);break;case 3:case 4:var M=g.stateNode.containerInfo,W=w0(t);ku(t,W,M);break;default:throw Error(a(161))}}catch(Y){pn(t,t.return,Y)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Sx(t,s,f){Ue=t,A0(t)}function A0(t,s,f){for(var g=(t.mode&1)!==0;Ue!==null;){var C=Ue,b=C.child;if(C.tag===22&&g){var M=C.memoizedState!==null||Dl;if(!M){var W=C.alternate,Y=W!==null&&W.memoizedState!==null||tr;W=Dl;var ae=tr;if(Dl=M,(tr=Y)&&!ae)for(Ue=C;Ue!==null;)M=Ue,Y=M.child,M.tag===22&&M.memoizedState!==null?I0(C):Y!==null?(Y.return=M,Ue=Y):I0(C);for(;b!==null;)Ue=b,A0(b),b=b.sibling;Ue=C,Dl=W,tr=ae}S0(t)}else C.subtreeFlags&8772&&b!==null?(b.return=C,Ue=b):S0(t)}}function S0(t){for(;Ue!==null;){var s=Ue;if(s.flags&8772){var f=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:tr||kl(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!tr)if(f===null)g.componentDidMount();else{var C=s.elementType===s.type?f.memoizedProps:Zr(s.type,f.memoizedProps);g.componentDidUpdate(C,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=s.updateQueue;b!==null&&bh(s,b,g);break;case 3:var M=s.updateQueue;if(M!==null){if(f=null,s.child!==null)switch(s.child.tag){case 5:f=s.child.stateNode;break;case 1:f=s.child.stateNode}bh(s,M,f)}break;case 5:var W=s.stateNode;if(f===null&&s.flags&4){f=W;var Y=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&f.focus();break;case"img":Y.src&&(f.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ae=s.alternate;if(ae!==null){var ye=ae.memoizedState;if(ye!==null){var Ce=ye.dehydrated;Ce!==null&&Gr(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}tr||s.flags&512&&Du(s)}catch(me){pn(s,s.return,me)}}if(s===t){Ue=null;break}if(f=s.sibling,f!==null){f.return=s.return,Ue=f;break}Ue=s.return}}function b0(t){for(;Ue!==null;){var s=Ue;if(s===t){Ue=null;break}var f=s.sibling;if(f!==null){f.return=s.return,Ue=f;break}Ue=s.return}}function I0(t){for(;Ue!==null;){var s=Ue;try{switch(s.tag){case 0:case 11:case 15:var f=s.return;try{kl(4,s)}catch(Y){pn(s,f,Y)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var C=s.return;try{g.componentDidMount()}catch(Y){pn(s,C,Y)}}var b=s.return;try{Du(s)}catch(Y){pn(s,b,Y)}break;case 5:var M=s.return;try{Du(s)}catch(Y){pn(s,M,Y)}}}catch(Y){pn(s,s.return,Y)}if(s===t){Ue=null;break}var W=s.sibling;if(W!==null){W.return=s.return,Ue=W;break}Ue=s.return}}var bx=Math.ceil,Ll=J.ReactCurrentDispatcher,Bu=J.ReactCurrentOwner,kr=J.ReactCurrentBatchConfig,kt=0,Bn=null,An=null,Wn=0,Ir=0,Ao=es(0),Pn=0,ya=null,Vs=0,Bl=0,Fu=0,wa=null,gr=null,ju=0,So=1/0,Pi=null,Fl=!1,Vu=null,os=null,jl=!1,as=null,Vl=0,va=0,Uu=null,Ul=-1,zl=0;function lr(){return kt&6?gt():Ul!==-1?Ul:Ul=gt()}function ls(t){return t.mode&1?kt&2&&Wn!==0?Wn&-Wn:lx.transition!==null?(zl===0&&(zl=Tn()),zl):(t=xt,t!==0||(t=window.event,t=t===void 0?16:Yo(t.type)),t):1}function Qr(t,s,f,g){if(50<va)throw va=0,Uu=null,Error(a(185));F(t,f,g),(!(kt&2)||t!==Bn)&&(t===Bn&&(!(kt&2)&&(Bl|=f),Pn===4&&cs(t,Wn)),mr(t,g),f===1&&kt===0&&!(s.mode&1)&&(So=gt()+500,ml&&ns()))}function mr(t,s){var f=t.callbackNode;Wi(t,s);var g=vr(t,t===Bn?Wn:0);if(g===0)f!==null&&Ge(f),t.callbackNode=null,t.callbackPriority=0;else if(s=g&-g,t.callbackPriority!==s){if(f!=null&&Ge(f),s===1)t.tag===0?ax(N0.bind(null,t)):hh(N0.bind(null,t)),rx(function(){!(kt&6)&&ns()}),f=null;else{switch(qa(g)){case 1:f=pe;break;case 4:f=As;break;case 16:f=Nt;break;case 536870912:f=Uo;break;default:f=Nt}f=L0(f,T0.bind(null,t))}t.callbackPriority=s,t.callbackNode=f}}function T0(t,s){if(Ul=-1,zl=0,kt&6)throw Error(a(327));var f=t.callbackNode;if(bo()&&t.callbackNode!==f)return null;var g=vr(t,t===Bn?Wn:0);if(g===0)return null;if(g&30||g&t.expiredLanes||s)s=Wl(t,g);else{s=g;var C=kt;kt|=2;var b=_0();(Bn!==t||Wn!==s)&&(Pi=null,So=gt()+500,zs(t,s));do try{Nx();break}catch(W){R0(t,W)}while(!0);su(),Ll.current=b,kt=C,An!==null?s=0:(Bn=null,Wn=0,s=Pn)}if(s!==0){if(s===2&&(C=Ut(t),C!==0&&(g=C,s=zu(t,C))),s===1)throw f=ya,zs(t,0),cs(t,g),mr(t,gt()),f;if(s===6)cs(t,g);else{if(C=t.current.alternate,!(g&30)&&!Ix(C)&&(s=Wl(t,g),s===2&&(b=Ut(t),b!==0&&(g=b,s=zu(t,b))),s===1))throw f=ya,zs(t,0),cs(t,g),mr(t,gt()),f;switch(t.finishedWork=C,t.finishedLanes=g,s){case 0:case 1:throw Error(a(345));case 2:Ws(t,gr,Pi);break;case 3:if(cs(t,g),(g&130023424)===g&&(s=ju+500-gt(),10<s)){if(vr(t,0)!==0)break;if(C=t.suspendedLanes,(C&g)!==g){lr(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=Kc(Ws.bind(null,t,gr,Pi),s);break}Ws(t,gr,Pi);break;case 4:if(cs(t,g),(g&4194240)===g)break;for(s=t.eventTimes,C=-1;0<g;){var M=31-or(g);b=1<<M,M=s[M],M>C&&(C=M),g&=~b}if(g=C,g=gt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*bx(g/1960))-g,10<g){t.timeoutHandle=Kc(Ws.bind(null,t,gr,Pi),g);break}Ws(t,gr,Pi);break;case 5:Ws(t,gr,Pi);break;default:throw Error(a(329))}}}return mr(t,gt()),t.callbackNode===f?T0.bind(null,t):null}function zu(t,s){var f=wa;return t.current.memoizedState.isDehydrated&&(zs(t,s).flags|=256),t=Wl(t,s),t!==2&&(s=gr,gr=f,s!==null&&Wu(s)),t}function Wu(t){gr===null?gr=t:gr.push.apply(gr,t)}function Ix(t){for(var s=t;;){if(s.flags&16384){var f=s.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var C=f[g],b=C.getSnapshot;C=C.value;try{if(!Q(b(),C))return!1}catch{return!1}}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cs(t,s){for(s&=~Fu,s&=~Bl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var f=31-or(s),g=1<<f;t[f]=-1,s&=~g}}function N0(t){if(kt&6)throw Error(a(327));bo();var s=vr(t,0);if(!(s&1))return mr(t,gt()),null;var f=Wl(t,s);if(t.tag!==0&&f===2){var g=Ut(t);g!==0&&(s=g,f=zu(t,g))}if(f===1)throw f=ya,zs(t,0),cs(t,s),mr(t,gt()),f;if(f===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ws(t,gr,Pi),mr(t,gt()),null}function Hu(t,s){var f=kt;kt|=1;try{return t(s)}finally{kt=f,kt===0&&(So=gt()+500,ml&&ns())}}function Us(t){as!==null&&as.tag===0&&!(kt&6)&&bo();var s=kt;kt|=1;var f=kr.transition,g=xt;try{if(kr.transition=null,xt=1,t)return t()}finally{xt=g,kr.transition=f,kt=s,!(kt&6)&&ns()}}function Gu(){Ir=Ao.current,Qt(Ao)}function zs(t,s){t.finishedWork=null,t.finishedLanes=0;var f=t.timeoutHandle;if(f!==-1&&(t.timeoutHandle=-1,nx(f)),An!==null)for(f=An.return;f!==null;){var g=f;switch(eu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pl();break;case 3:vo(),Qt(dr),Qt(Qn),hu();break;case 5:fu(g);break;case 4:vo();break;case 13:Qt(an);break;case 19:Qt(an);break;case 10:ou(g.type._context);break;case 22:case 23:Gu()}f=f.return}if(Bn=t,An=t=us(t.current,null),Wn=Ir=s,Pn=0,ya=null,Fu=Bl=Vs=0,gr=wa=null,Bs!==null){for(s=0;s<Bs.length;s++)if(f=Bs[s],g=f.interleaved,g!==null){f.interleaved=null;var C=g.next,b=f.pending;if(b!==null){var M=b.next;b.next=C,g.next=M}f.pending=g}Bs=null}return t}function R0(t,s){do{var f=An;try{if(su(),Il.current=_l,Tl){for(var g=ln.memoizedState;g!==null;){var C=g.queue;C!==null&&(C.pending=null),g=g.next}Tl=!1}if(js=0,Ln=On=ln=null,da=!1,ha=0,Bu.current=null,f===null||f.return===null){Pn=1,ya=s,An=null;break}e:{var b=t,M=f.return,W=f,Y=s;if(s=Wn,W.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ae=Y,ye=W,Ce=ye.tag;if(!(ye.mode&1)&&(Ce===0||Ce===11||Ce===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Be=e0(M);if(Be!==null){Be.flags&=-257,t0(Be,M,W,b,s),Be.mode&1&&Jh(b,ae,s),s=Be,Y=ae;var We=s.updateQueue;if(We===null){var He=new Set;He.add(Y),s.updateQueue=He}else We.add(Y);break e}else{if(!(s&1)){Jh(b,ae,s),Xu();break e}Y=Error(a(426))}}else if(en&&W.mode&1){var vn=e0(M);if(vn!==null){!(vn.flags&65536)&&(vn.flags|=256),t0(vn,M,W,b,s),ru(Co(Y,W));break e}}b=Y=Co(Y,W),Pn!==4&&(Pn=2),wa===null?wa=[b]:wa.push(b),b=M;do{switch(b.tag){case 3:b.flags|=65536,s&=-s,b.lanes|=s;var re=qh(b,Y,s);Sh(b,re);break e;case 1:W=Y;var Z=b.type,ie=b.stateNode;if(!(b.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(os===null||!os.has(ie)))){b.flags|=65536,s&=-s,b.lanes|=s;var Ie=Qh(b,W,s);Sh(b,Ie);break e}}b=b.return}while(b!==null)}P0(f)}catch(Xe){s=Xe,An===f&&f!==null&&(An=f=f.return);continue}break}while(!0)}function _0(){var t=Ll.current;return Ll.current=_l,t===null?_l:t}function Xu(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Bn===null||!(Vs&268435455)&&!(Bl&268435455)||cs(Bn,Wn)}function Wl(t,s){var f=kt;kt|=2;var g=_0();(Bn!==t||Wn!==s)&&(Pi=null,zs(t,s));do try{Tx();break}catch(C){R0(t,C)}while(!0);if(su(),kt=f,Ll.current=g,An!==null)throw Error(a(261));return Bn=null,Wn=0,Pn}function Tx(){for(;An!==null;)O0(An)}function Nx(){for(;An!==null&&!rt();)O0(An)}function O0(t){var s=k0(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,s===null?P0(t):An=s,Bu.current=null}function P0(t){var s=t;do{var f=s.alternate;if(t=s.return,s.flags&32768){if(f=Cx(f,s),f!==null){f.flags&=32767,An=f;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,An=null;return}}else if(f=vx(f,s,Ir),f!==null){An=f;return}if(s=s.sibling,s!==null){An=s;return}An=s=t}while(s!==null);Pn===0&&(Pn=5)}function Ws(t,s,f){var g=xt,C=kr.transition;try{kr.transition=null,xt=1,Rx(t,s,f,g)}finally{kr.transition=C,xt=g}return null}function Rx(t,s,f,g){do bo();while(as!==null);if(kt&6)throw Error(a(327));f=t.finishedWork;var C=t.finishedLanes;if(f===null)return null;if(t.finishedWork=null,t.finishedLanes=0,f===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var b=f.lanes|f.childLanes;if(Ye(t,b),t===Bn&&(An=Bn=null,Wn=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||jl||(jl=!0,L0(Nt,function(){return bo(),null})),b=(f.flags&15990)!==0,f.subtreeFlags&15990||b){b=kr.transition,kr.transition=null;var M=xt;xt=1;var W=kt;kt|=4,Bu.current=null,Ax(t,f),E0(f,t),qn(Xc),si=!!Gc,Xc=Gc=null,t.current=f,Sx(f),Ke(),kt=W,xt=M,kr.transition=b}else t.current=f;if(jl&&(jl=!1,as=t,Vl=C),b=t.pendingLanes,b===0&&(os=null),Rt(f.stateNode),mr(t,gt()),s!==null)for(g=t.onRecoverableError,f=0;f<s.length;f++)C=s[f],g(C.value,{componentStack:C.stack,digest:C.digest});if(Fl)throw Fl=!1,t=Vu,Vu=null,t;return Vl&1&&t.tag!==0&&bo(),b=t.pendingLanes,b&1?t===Uu?va++:(va=0,Uu=t):va=0,ns(),null}function bo(){if(as!==null){var t=qa(Vl),s=kr.transition,f=xt;try{if(kr.transition=null,xt=16>t?16:t,as===null)var g=!1;else{if(t=as,as=null,Vl=0,kt&6)throw Error(a(331));var C=kt;for(kt|=4,Ue=t.current;Ue!==null;){var b=Ue,M=b.child;if(Ue.flags&16){var W=b.deletions;if(W!==null){for(var Y=0;Y<W.length;Y++){var ae=W[Y];for(Ue=ae;Ue!==null;){var ye=Ue;switch(ye.tag){case 0:case 11:case 15:xa(8,ye,b)}var Ce=ye.child;if(Ce!==null)Ce.return=ye,Ue=Ce;else for(;Ue!==null;){ye=Ue;var me=ye.sibling,Be=ye.return;if(x0(ye),ye===ae){Ue=null;break}if(me!==null){me.return=Be,Ue=me;break}Ue=Be}}}var We=b.alternate;if(We!==null){var He=We.child;if(He!==null){We.child=null;do{var vn=He.sibling;He.sibling=null,He=vn}while(He!==null)}}Ue=b}}if(b.subtreeFlags&2064&&M!==null)M.return=b,Ue=M;else e:for(;Ue!==null;){if(b=Ue,b.flags&2048)switch(b.tag){case 0:case 11:case 15:xa(9,b,b.return)}var re=b.sibling;if(re!==null){re.return=b.return,Ue=re;break e}Ue=b.return}}var Z=t.current;for(Ue=Z;Ue!==null;){M=Ue;var ie=M.child;if(M.subtreeFlags&2064&&ie!==null)ie.return=M,Ue=ie;else e:for(M=Z;Ue!==null;){if(W=Ue,W.flags&2048)try{switch(W.tag){case 0:case 11:case 15:kl(9,W)}}catch(Xe){pn(W,W.return,Xe)}if(W===M){Ue=null;break e}var Ie=W.sibling;if(Ie!==null){Ie.return=W.return,Ue=Ie;break e}Ue=W.return}}if(kt=C,ns(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Ct,t)}catch{}g=!0}return g}finally{xt=f,kr.transition=s}}return!1}function M0(t,s,f){s=Co(f,s),s=qh(t,s,1),t=is(t,s,1),s=lr(),t!==null&&(F(t,1,s),mr(t,s))}function pn(t,s,f){if(t.tag===3)M0(t,t,f);else for(;s!==null;){if(s.tag===3){M0(s,t,f);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(os===null||!os.has(g))){t=Co(f,t),t=Qh(s,t,1),s=is(s,t,1),t=lr(),s!==null&&(F(s,1,t),mr(s,t));break}}s=s.return}}function _x(t,s,f){var g=t.pingCache;g!==null&&g.delete(s),s=lr(),t.pingedLanes|=t.suspendedLanes&f,Bn===t&&(Wn&f)===f&&(Pn===4||Pn===3&&(Wn&130023424)===Wn&&500>gt()-ju?zs(t,0):Fu|=f),mr(t,s)}function D0(t,s){s===0&&(t.mode&1?(s=eo,eo<<=1,!(eo&130023424)&&(eo=4194304)):s=1);var f=lr();t=Ri(t,s),t!==null&&(F(t,s,f),mr(t,f))}function Ox(t){var s=t.memoizedState,f=0;s!==null&&(f=s.retryLane),D0(t,f)}function Px(t,s){var f=0;switch(t.tag){case 13:var g=t.stateNode,C=t.memoizedState;C!==null&&(f=C.retryLane);break;case 19:g=t.stateNode;break;default:throw Error(a(314))}g!==null&&g.delete(s),D0(t,f)}var k0;k0=function(t,s,f){if(t!==null)if(t.memoizedProps!==s.pendingProps||dr.current)pr=!0;else{if(!(t.lanes&f)&&!(s.flags&128))return pr=!1,wx(t,s,f);pr=!!(t.flags&131072)}else pr=!1,en&&s.flags&1048576&&ph(s,yl,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Ml(t,s),t=s.pendingProps;var C=ho(s,Qn.current);wo(s,f),C=mu(null,s,g,t,C,f);var b=xu();return s.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,hr(g)?(b=!0,gl(s)):b=!1,s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,cu(s),C.updater=Ol,s.stateNode=C,C._reactInternals=s,Au(s,g,t,f),s=Tu(null,s,g,!0,b,f)):(s.tag=0,en&&b&&Jc(s),ar(null,s,C,f),s=s.child),s;case 16:g=s.elementType;e:{switch(Ml(t,s),t=s.pendingProps,C=g._init,g=C(g._payload),s.type=g,C=s.tag=Dx(g),t=Zr(g,t),C){case 0:s=Iu(null,s,g,t,f);break e;case 1:s=a0(null,s,g,t,f);break e;case 11:s=n0(null,s,g,t,f);break e;case 14:s=r0(null,s,g,Zr(g.type,t),f);break e}throw Error(a(306,g,""))}return s;case 0:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),Iu(t,s,g,C,f);case 1:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),a0(t,s,g,C,f);case 3:e:{if(l0(s),t===null)throw Error(a(387));g=s.pendingProps,b=s.memoizedState,C=b.element,Ah(t,s),Sl(s,g,null,f);var M=s.memoizedState;if(g=M.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){C=Co(Error(a(423)),s),s=c0(t,s,g,f,C);break e}else if(g!==C){C=Co(Error(a(424)),s),s=c0(t,s,g,f,C);break e}else for(br=Ji(s.stateNode.containerInfo.firstChild),Sr=s,en=!0,Kr=null,f=Ch(s,null,g,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(mo(),g===C){s=Oi(t,s,f);break e}ar(t,s,g,f)}s=s.child}return s;case 5:return Ih(s),t===null&&nu(s),g=s.type,C=s.pendingProps,b=t!==null?t.memoizedProps:null,M=C.children,Yc(g,C)?M=null:b!==null&&Yc(g,b)&&(s.flags|=32),o0(t,s),ar(t,s,M,f),s.child;case 6:return t===null&&nu(s),null;case 13:return u0(t,s,f);case 4:return uu(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=xo(s,null,g,f):ar(t,s,g,f),s.child;case 11:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),n0(t,s,g,C,f);case 7:return ar(t,s,s.pendingProps,f),s.child;case 8:return ar(t,s,s.pendingProps.children,f),s.child;case 12:return ar(t,s,s.pendingProps.children,f),s.child;case 10:e:{if(g=s.type._context,C=s.pendingProps,b=s.memoizedProps,M=C.value,$t(Cl,g._currentValue),g._currentValue=M,b!==null)if(Q(b.value,M)){if(b.children===C.children&&!dr.current){s=Oi(t,s,f);break e}}else for(b=s.child,b!==null&&(b.return=s);b!==null;){var W=b.dependencies;if(W!==null){M=b.child;for(var Y=W.firstContext;Y!==null;){if(Y.context===g){if(b.tag===1){Y=_i(-1,f&-f),Y.tag=2;var ae=b.updateQueue;if(ae!==null){ae=ae.shared;var ye=ae.pending;ye===null?Y.next=Y:(Y.next=ye.next,ye.next=Y),ae.pending=Y}}b.lanes|=f,Y=b.alternate,Y!==null&&(Y.lanes|=f),au(b.return,f,s),W.lanes|=f;break}Y=Y.next}}else if(b.tag===10)M=b.type===s.type?null:b.child;else if(b.tag===18){if(M=b.return,M===null)throw Error(a(341));M.lanes|=f,W=M.alternate,W!==null&&(W.lanes|=f),au(M,f,s),M=b.sibling}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===s){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}ar(t,s,C.children,f),s=s.child}return s;case 9:return C=s.type,g=s.pendingProps.children,wo(s,f),C=Mr(C),g=g(C),s.flags|=1,ar(t,s,g,f),s.child;case 14:return g=s.type,C=Zr(g,s.pendingProps),C=Zr(g.type,C),r0(t,s,g,C,f);case 15:return i0(t,s,s.type,s.pendingProps,f);case 17:return g=s.type,C=s.pendingProps,C=s.elementType===g?C:Zr(g,C),Ml(t,s),s.tag=1,hr(g)?(t=!0,gl(s)):t=!1,wo(s,f),Zh(s,g,C),Au(s,g,C,f),Tu(null,s,g,!0,t,f);case 19:return d0(t,s,f);case 22:return s0(t,s,f)}throw Error(a(156,s.tag))};function L0(t,s){return qe(t,s)}function Mx(t,s,f,g){this.tag=t,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(t,s,f,g){return new Mx(t,s,f,g)}function Yu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dx(t){if(typeof t=="function")return Yu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Re)return 11;if(t===ee)return 14}return 2}function us(t,s){var f=t.alternate;return f===null?(f=Lr(t.tag,s,t.key,t.mode),f.elementType=t.elementType,f.type=t.type,f.stateNode=t.stateNode,f.alternate=t,t.alternate=f):(f.pendingProps=s,f.type=t.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=t.flags&14680064,f.childLanes=t.childLanes,f.lanes=t.lanes,f.child=t.child,f.memoizedProps=t.memoizedProps,f.memoizedState=t.memoizedState,f.updateQueue=t.updateQueue,s=t.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=t.sibling,f.index=t.index,f.ref=t.ref,f}function Hl(t,s,f,g,C,b){var M=2;if(g=t,typeof t=="function")Yu(t)&&(M=1);else if(typeof t=="string")M=5;else e:switch(t){case $:return Hs(f.children,C,b,s);case ce:M=8,C|=8;break;case q:return t=Lr(12,f,s,C|2),t.elementType=q,t.lanes=b,t;case Oe:return t=Lr(13,f,s,C),t.elementType=Oe,t.lanes=b,t;case ke:return t=Lr(19,f,s,C),t.elementType=ke,t.lanes=b,t;case he:return Gl(f,C,b,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:M=10;break e;case Fe:M=9;break e;case Re:M=11;break e;case ee:M=14;break e;case je:M=16,g=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=Lr(M,f,s,C),s.elementType=t,s.type=g,s.lanes=b,s}function Hs(t,s,f,g){return t=Lr(7,t,g,s),t.lanes=f,t}function Gl(t,s,f,g){return t=Lr(22,t,g,s),t.elementType=he,t.lanes=f,t.stateNode={isHidden:!1},t}function Ku(t,s,f){return t=Lr(6,t,null,s),t.lanes=f,t}function Zu(t,s,f){return s=Lr(4,t.children!==null?t.children:[],t.key,s),s.lanes=f,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function kx(t,s,f,g,C){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ne(0),this.expirationTimes=ne(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ne(0),this.identifierPrefix=g,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function $u(t,s,f,g,C,b,M,W,Y){return t=new kx(t,s,f,W,Y),s===1?(s=1,b===!0&&(s|=8)):s=0,b=Lr(3,null,null,s),t.current=b,b.stateNode=t,b.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(b),t}function Lx(t,s,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:g==null?null:""+g,children:t,containerInfo:s,implementation:f}}function B0(t){if(!t)return ts;t=t._reactInternals;e:{if(Zn(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(hr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var f=t.type;if(hr(f))return fh(t,f,s)}return s}function F0(t,s,f,g,C,b,M,W,Y){return t=$u(f,g,!0,t,C,b,M,W,Y),t.context=B0(null),f=t.current,g=lr(),C=ls(f),b=_i(g,C),b.callback=s??null,is(f,b,C),t.current.lanes=C,F(t,C,g),mr(t,g),t}function Xl(t,s,f,g){var C=s.current,b=lr(),M=ls(C);return f=B0(f),s.context===null?s.context=f:s.pendingContext=f,s=_i(b,M),s.payload={element:t},g=g===void 0?null:g,g!==null&&(s.callback=g),t=is(C,s,M),t!==null&&(Qr(t,C,M,b),Al(t,C,M)),M}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var f=t.retryLane;t.retryLane=f!==0&&f<s?f:s}}function qu(t,s){j0(t,s),(t=t.alternate)&&j0(t,s)}function Bx(){return null}var V0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qu(t){this._internalRoot=t}Kl.prototype.render=Qu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));Xl(t,s,null,null)},Kl.prototype.unmount=Qu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Us(function(){Xl(null,t,null,null)}),s[bi]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Kt();t={blockedOn:null,target:t,priority:s};for(var f=0;f<jn.length&&s!==0&&s<jn[f].priority;f++);jn.splice(f,0,t),f===0&&Ja(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U0(){}function Fx(t,s,f,g,C){if(C){if(typeof g=="function"){var b=g;g=function(){var ae=Yl(M);b.call(ae)}}var M=F0(s,g,t,0,null,!1,!1,"",U0);return t._reactRootContainer=M,t[bi]=M.current,ia(t.nodeType===8?t.parentNode:t),Us(),M}for(;C=t.lastChild;)t.removeChild(C);if(typeof g=="function"){var W=g;g=function(){var ae=Yl(Y);W.call(ae)}}var Y=$u(t,0,!1,null,null,!1,!1,"",U0);return t._reactRootContainer=Y,t[bi]=Y.current,ia(t.nodeType===8?t.parentNode:t),Us(function(){Xl(s,Y,f,g)}),Y}function $l(t,s,f,g,C){var b=f._reactRootContainer;if(b){var M=b;if(typeof C=="function"){var W=C;C=function(){var Y=Yl(M);W.call(Y)}}Xl(s,M,t,C)}else M=Fx(f,s,t,C,g);return Yl(M)}to=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var f=Yt(s.pendingLanes);f!==0&&(dn(s,f|1),mr(s,gt()),!(kt&6)&&(So=gt()+500,ns()))}break;case 13:Us(function(){var g=Ri(t,1);if(g!==null){var C=lr();Qr(g,t,1,C)}}),qu(t,1)}},$n=function(t){if(t.tag===13){var s=Ri(t,134217728);if(s!==null){var f=lr();Qr(s,t,134217728,f)}qu(t,134217728)}},Ze=function(t){if(t.tag===13){var s=ls(t),f=Ri(t,s);if(f!==null){var g=lr();Qr(f,t,s,g)}qu(t,s)}},Kt=function(){return xt},Ho=function(t,s){var f=xt;try{return xt=t,s()}finally{xt=f}},ji=function(t,s,f){switch(s){case"input":if(Pt(t,f),s=f.name,f.type==="radio"&&s!=null){for(f=t;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<f.length;s++){var g=f[s];if(g!==t&&g.form===t.form){var C=hl(g);if(!C)throw Error(a(90));dt(g),Pt(g,C)}}}break;case"textarea":ve(t,f);break;case"select":s=f.value,s!=null&&Ne(t,!!f.multiple,s,!1)}},Ui=Hu,sn=Us;var jx={usingClientEntryPoint:!1,Events:[aa,uo,hl,Vi,Kn,Hu]},Ca={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cs(t),t===null?null:t.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Ct=ql.inject(Vx),ut=ql}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx,xr.createPortal=function(t,s){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(s))throw Error(a(200));return Lx(t,s,null,f)},xr.createRoot=function(t,s){if(!Ju(t))throw Error(a(299));var f=!1,g="",C=V0;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=$u(t,1,!1,null,null,f,!1,g,C),t[bi]=s.current,ia(t.nodeType===8?t.parentNode:t),new Qu(s)},xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=Cs(s),t=t===null?null:t.stateNode,t},xr.flushSync=function(t){return Us(t)},xr.hydrate=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!0,f)},xr.hydrateRoot=function(t,s,f){if(!Ju(t))throw Error(a(405));var g=f!=null&&f.hydratedSources||null,C=!1,b="",M=V0;if(f!=null&&(f.unstable_strictMode===!0&&(C=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),s=F0(s,null,t,1,f??null,C,!1,b,M),t[bi]=s.current,ia(t),g)for(t=0;t<g.length;t++)f=g[t],C=f._getVersion,C=C(f._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[f,C]:s.mutableSourceEagerHydrationData.push(f,C);return new Kl(s)},xr.render=function(t,s,f){if(!Zl(s))throw Error(a(200));return $l(null,t,s,!1,f)},xr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(a(40));return t._reactRootContainer?(Us(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1},xr.unstable_batchedUpdates=Hu,xr.unstable_renderSubtreeIntoContainer=function(t,s,f,g){if(!Zl(f))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return $l(t,s,f,!1,g)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var Z0;function Kx(){if(Z0)return nf.exports;Z0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),nf.exports=Yx(),nf.exports}var $0;function Zx(){if($0)return Jl;$0=1;var r=Kx();return Jl.createRoot=r.createRoot,Jl.hydrateRoot=r.hydrateRoot,Jl}var $x=Zx();const Vr=P.createContext(null),qx=({children:r})=>{const[o,a]=P.useState(null),[d,p]=P.useState(null),[x,y]=P.useState(null),[A,w]=P.useState(null),[E,S]=P.useState(!1),[N,R]=P.useState(null),k=async()=>{const U=localStorage.getItem("access_token");if(U)try{const H=await fetch(window.server_url+"/load_user",{headers:{Authorization:`Bearer ${U}`}});if(H.ok){S(!0);const z=await H.json();console.log("USER DATA:",z),a(z.username),p(z.profile),R(z.permissions),console.log("PERMISSIONS:",z.permissions)}else console.log("TOKEN INVALID"),localStorage.removeItem("access_token"),a(null),p(null),y(null),w(null),S(!1)}catch(H){console.log("ERROR:",H)}};P.useEffect(()=>{k()},[]);const L=U=>{a(U.username),y(U.access_token),w(U.refresh_token),R(U.permissions),console.log("PRE SAVE USERNAME:",U.username),localStorage.setItem("user",U.username),localStorage.setItem("access_token",U.access_token),localStorage.setItem("refresh_token",U.refresh_token)},B=async(U,H)=>{const z=await fetch(window.server_url+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:U,password:H})});if(z.ok){const J=await z.json();console.log("SIGNED UP, userData:",J)}},j=()=>{a(null),p(null),y(null),w(null),S(!1)};return I.jsx(Vr.Provider,{value:{user:o,login:L,signup:B,logout:j,userProfile:d,checkAuth:k,permissions:N},children:r})};var Nf=function(r,o){return Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])},Nf(r,o)};function Qx(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Nf(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var Hn=function(){return Hn=Object.assign||function(o){for(var a,d=1,p=arguments.length;d<p;d++){a=arguments[d];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(o[x]=a[x])}return o},Hn.apply(this,arguments)};var of,q0;function Jx(){if(q0)return of;q0=1;var r=!1,o,a,d,p,x,y,A,w,E,S,N,R,k,L,B;function j(){if(!r){r=!0;var H=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(H),J=/(Mac OS X)|(Windows)|(Linux)/.exec(H);if(R=/\b(iPhone|iP[ao]d)/.exec(H),k=/\b(iP[ao]d)/.exec(H),S=/Android/i.exec(H),L=/FBAN\/\w+;/i.exec(H),B=/Mobile/i.exec(H),N=!!/Win64/.exec(H),z){o=z[1]?parseFloat(z[1]):z[5]?parseFloat(z[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var le=/(?:Trident\/(\d+.\d+))/.exec(H);y=le?parseFloat(le[1])+4:o,a=z[2]?parseFloat(z[2]):NaN,d=z[3]?parseFloat(z[3]):NaN,p=z[4]?parseFloat(z[4]):NaN,p?(z=/(?:Chrome\/(\d+\.\d+))/.exec(H),x=z&&z[1]?parseFloat(z[1]):NaN):x=NaN}else o=a=d=x=p=NaN;if(J){if(J[1]){var ue=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(H);A=ue?parseFloat(ue[1].replace("_",".")):!0}else A=!1;w=!!J[2],E=!!J[3]}else A=w=E=!1}}var U={ie:function(){return j()||o},ieCompatibilityMode:function(){return j()||y>o},ie64:function(){return U.ie()&&N},firefox:function(){return j()||a},opera:function(){return j()||d},webkit:function(){return j()||p},safari:function(){return U.webkit()},chrome:function(){return j()||x},windows:function(){return j()||w},osx:function(){return j()||A},linux:function(){return j()||E},iphone:function(){return j()||R},mobile:function(){return j()||R||k||S||B},nativeApp:function(){return j()||L},android:function(){return j()||S},ipad:function(){return j()||k}};return of=U,of}var af,Q0;function e2(){if(Q0)return af;Q0=1;var r=!!(typeof window<"u"&&window.document&&window.document.createElement),o={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};return af=o,af}var lf,J0;function t2(){if(J0)return lf;J0=1;var r=e2(),o;r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function a(d,p){if(!r.canUseDOM||p&&!("addEventListener"in document))return!1;var x="on"+d,y=x in document;if(!y){var A=document.createElement("div");A.setAttribute(x,"return;"),y=typeof A[x]=="function"}return!y&&o&&d==="wheel"&&(y=document.implementation.hasFeature("Events.wheel","3.0")),y}return lf=a,lf}var cf,e1;function n2(){if(e1)return cf;e1=1;var r=Jx(),o=t2(),a=10,d=40,p=800;function x(y){var A=0,w=0,E=0,S=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(A=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(A=w,w=0),E=A*a,S=w*a,"deltaY"in y&&(S=y.deltaY),"deltaX"in y&&(E=y.deltaX),(E||S)&&y.deltaMode&&(y.deltaMode==1?(E*=d,S*=d):(E*=p,S*=p)),E&&!A&&(A=E<1?-1:1),S&&!w&&(w=S<1?-1:1),{spinX:A,spinY:w,pixelX:E,pixelY:S}}return x.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},cf=x,cf}var uf,t1;function r2(){return t1||(t1=1,uf=n2()),uf}var i2=r2();const s2=Bp(i2);function o2(r,o,a,d,p,x){x===void 0&&(x=0);var y=Mo(r,o,x),A=y.width,w=y.height,E=Math.min(A,a),S=Math.min(w,d);return E>S*p?{width:S*p,height:S}:{width:E,height:E/p}}function a2(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Aa(r,o,a,d,p){p===void 0&&(p=0);var x=Mo(o.width,o.height,p),y=x.width,A=x.height;return{x:n1(r.x,y,a.width,d),y:n1(r.y,A,a.height,d)}}function n1(r,o,a,d){var p=o*d/2-a/2;return Ic(r,-p,p)}function r1(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function i1(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function l2(r,o,a,d,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0);var A=y?c2:u2,w=Mo(o.width,o.height,x),E=Mo(o.naturalWidth,o.naturalHeight,x),S={x:A(100,((w.width-a.width/p)/2-r.x/p)/w.width*100),y:A(100,((w.height-a.height/p)/2-r.y/p)/w.height*100),width:A(100,a.width/w.width*100/p),height:A(100,a.height/w.height*100/p)},N=Math.round(A(E.width,S.width*E.width/100)),R=Math.round(A(E.height,S.height*E.height/100)),k=E.width>=E.height*d,L=k?{width:Math.round(R*d),height:R}:{width:N,height:Math.round(N/d)},B=Hn(Hn({},L),{x:Math.round(A(E.width-L.width,S.x*E.width/100)),y:Math.round(A(E.height-L.height,S.y*E.height/100))});return{croppedAreaPercentages:S,croppedAreaPixels:B}}function c2(r,o){return Math.min(r,Math.max(0,o))}function u2(r,o){return o}function f2(r,o,a,d,p,x){var y=Mo(o.width,o.height,a),A=Ic(d.width/y.width*(100/r.width),p,x),w={x:A*y.width/2-d.width/2-y.width*A*(r.x/100),y:A*y.height/2-d.height/2-y.height*A*(r.y/100)};return{crop:w,zoom:A}}function d2(r,o,a){var d=a2(o);return a.height>a.width?a.height/(r.height*d):a.width/(r.width*d)}function h2(r,o,a,d,p,x){a===void 0&&(a=0);var y=Mo(o.naturalWidth,o.naturalHeight,a),A=Ic(d2(r,o,d),p,x),w=d.height>d.width?d.height/r.height:d.width/r.width,E={x:((y.width-r.width)/2-r.x)*w,y:((y.height-r.height)/2-r.y)*w};return{crop:E,zoom:A}}function s1(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function p2(r){return r*Math.PI/180}function Mo(r,o,a){var d=p2(a);return{width:Math.abs(Math.cos(d)*r)+Math.abs(Math.sin(d)*o),height:Math.abs(Math.sin(d)*r)+Math.abs(Math.cos(d)*o)}}function Ic(r,o,a){return Math.min(Math.max(r,o),a)}function ec(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var g2=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,m2=1,x2=3,y2=1,rd=function(r){Qx(o,r);function o(){var a=r!==null&&r.apply(this,arguments)||this;return a.imageRef=P.createRef(),a.videoRef=P.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var d=!0;a.resizeObserver=new window.ResizeObserver(function(p){if(d){d=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(d){return d.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturemove",a.onGestureMove),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var d=a.computeSizes();d&&(a.emitCropData(),a.setInitialCrop(d)),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(d){if(a.props.initialCroppedAreaPercentages){var p=f2(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=p.crop,y=p.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}else if(a.props.initialCroppedAreaPixels){var A=h2(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,d,a.props.minZoom,a.props.maxZoom),x=A.crop,y=A.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(y)}},a.computeSizes=function(){var d,p,x,y,A,w,E=a.imageRef.current||a.videoRef.current;if(E&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var S=a.containerRect.width/a.containerRect.height,N=((d=a.imageRef.current)===null||d===void 0?void 0:d.naturalWidth)||((p=a.videoRef.current)===null||p===void 0?void 0:p.videoWidth)||0,R=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoHeight)||0,k=E.offsetWidth<N||E.offsetHeight<R,L=N/R,B=void 0;if(k)switch(a.state.mediaObjectFit){default:case"contain":B=S>L?{width:a.containerRect.height*L,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/L};break;case"horizontal-cover":B={width:a.containerRect.width,height:a.containerRect.width/L};break;case"vertical-cover":B={width:a.containerRect.height*L,height:a.containerRect.height};break}else B={width:E.offsetWidth,height:E.offsetHeight};a.mediaSize=Hn(Hn({},B),{naturalWidth:N,naturalHeight:R}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var j=a.props.cropSize?a.props.cropSize:o2(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((A=a.state.cropSize)===null||A===void 0?void 0:A.height)!==j.height||((w=a.state.cropSize)===null||w===void 0?void 0:w.width)!==j.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(j),a.setState({cropSize:j},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(j),j}},a.saveContainerPosition=function(){if(a.containerRef){var d=a.containerRef.getBoundingClientRect();a.containerPosition={x:d.left,y:d.top}}},a.onMouseDown=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(o.getMousePoint(d)))},a.onMouseMove=function(d){return a.onDrag(o.getMousePoint(d))},a.onScroll=function(d){a.currentDoc&&(d.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(d){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(d))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),d.touches.length===2?a.onPinchStart(d):d.touches.length===1&&a.onDragStart(o.getTouchPoint(d.touches[0]))))},a.onTouchMove=function(d){d.preventDefault(),d.touches.length===2?a.onPinchMove(d):d.touches.length===1&&a.onDrag(o.getTouchPoint(d.touches[0]))},a.onGestureStart=function(d){a.currentDoc&&(d.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureMove),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureMove=function(d){if(d.preventDefault(),!a.isTouching){var p=o.getMousePoint(d),x=a.gestureZoomStart-1+d.scale;if(a.setNewZoom(x,p,{shouldUpdatePosition:!0}),a.props.onRotationChange){var y=a.gestureRotationStart+d.rotation;a.props.onRotationChange(y)}}},a.onGestureEnd=function(d){a.cleanEvents()},a.onDragStart=function(d){var p,x,y=d.x,A=d.y;a.dragStartPosition={x:y,y:A},a.dragStartCrop=Hn({},a.props.crop),(x=(p=a.props).onInteractionStart)===null||x===void 0||x.call(p)},a.onDrag=function(d){var p=d.x,x=d.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(p===void 0||x===void 0)){var y=p-a.dragStartPosition.x,A=x-a.dragStartPosition.y,w={x:a.dragStartCrop.x+y,y:a.dragStartCrop.y+A},E=a.props.restrictPosition?Aa(w,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):w;a.props.onCropChange(E)}}))},a.onDragStopped=function(){var d,p;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(p=(d=a.props).onInteractionEnd)===null||p===void 0||p.call(d)},a.onWheel=function(d){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(d))){d.preventDefault();var p=o.getMousePoint(d),x=s2(d).pixelY,y=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(y,p,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var A,w;return(w=(A=a.props).onInteractionStart)===null||w===void 0?void 0:w.call(A)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var A,w;return(w=(A=a.props).onInteractionEnd)===null||w===void 0?void 0:w.call(A)})},250)}},a.getPointOnContainer=function(d,p){var x=d.x,y=d.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-p.x),y:a.containerRect.height/2-(y-p.y)}},a.getPointOnMedia=function(d){var p=d.x,x=d.y,y=a.props,A=y.crop,w=y.zoom;return{x:(p+A.x)/w,y:(x+A.y)/w}},a.setNewZoom=function(d,p,x){var y=x===void 0?{}:x,A=y.shouldUpdatePosition,w=A===void 0?!0:A;if(!(!a.state.cropSize||!a.props.onZoomChange)){var E=Ic(d,a.props.minZoom,a.props.maxZoom);if(w){var S=a.getPointOnContainer(p,a.containerPosition),N=a.getPointOnMedia(S),R={x:N.x*E-S.x,y:N.y*E-S.y},k=a.props.restrictPosition?Aa(R,a.mediaSize,a.state.cropSize,E,a.props.rotation):R;a.props.onCropChange(k)}a.props.onZoomChange(E)}},a.getCropData=function(){if(!a.state.cropSize)return null;var d=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return l2(d,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(p,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.emitCropAreaChange=function(){var d=a.getCropData();if(d){var p=d.croppedAreaPercentages,x=d.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(p,x)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var d=a.props.restrictPosition?Aa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;a.props.onCropChange(d),a.emitCropData()}},a.onKeyDown=function(d){var p=a.props,x=p.crop,y=p.onCropChange,A=p.keyboardStep,w=p.zoom,E=p.rotation,S=A;if(a.state.cropSize){d.shiftKey&&(S*=.2);var N=Hn({},x);switch(d.key){case"ArrowUp":N.y-=S,d.preventDefault();break;case"ArrowDown":N.y+=S,d.preventDefault();break;case"ArrowLeft":N.x-=S,d.preventDefault();break;case"ArrowRight":N.x+=S,d.preventDefault();break;default:return}a.props.restrictPosition&&(N=Aa(N,a.mediaSize,a.state.cropSize,w,E)),y(N)}},a}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=g2,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var a,d;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((d=this.styleRef.parentNode)===null||d===void 0||d.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(a){var d,p,x,y,A,w,E,S,N;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((d=a.cropSize)===null||d===void 0?void 0:d.height)!==((p=this.props.cropSize)===null||p===void 0?void 0:p.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.width)?this.computeSizes():(((A=a.crop)===null||A===void 0?void 0:A.x)!==((w=this.props.crop)===null||w===void 0?void 0:w.x)||((E=a.crop)===null||E===void 0?void 0:E.y)!==((S=this.props.crop)===null||S===void 0?void 0:S.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((N=this.videoRef.current)===null||N===void 0||N.load());var R=this.getObjectFit();R!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:R},this.computeSizes)},o.prototype.getAspect=function(){var a=this.props,d=a.cropSize,p=a.aspect;return d?d.width/d.height:p},o.prototype.getObjectFit=function(){var a,d,p,x;if(this.props.objectFit==="cover"){var y=this.imageRef.current||this.videoRef.current;if(y&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var A=this.containerRect.width/this.containerRect.height,w=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((d=this.videoRef.current)===null||d===void 0?void 0:d.videoWidth)||0,E=((p=this.imageRef.current)===null||p===void 0?void 0:p.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,S=w/E;return S<A?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(a){var d=o.getTouchPoint(a.touches[0]),p=o.getTouchPoint(a.touches[1]);this.lastPinchDistance=r1(d,p),this.lastPinchRotation=i1(d,p),this.onDragStart(s1(d,p))},o.prototype.onPinchMove=function(a){var d=this;if(!(!this.currentDoc||!this.currentWindow)){var p=o.getTouchPoint(a.touches[0]),x=o.getTouchPoint(a.touches[1]),y=s1(p,x);this.onDrag(y),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var A=r1(p,x),w=d.props.zoom*(A/d.lastPinchDistance);d.setNewZoom(w,y,{shouldUpdatePosition:!1}),d.lastPinchDistance=A;var E=i1(p,x),S=d.props.rotation+(E-d.lastPinchRotation);d.props.onRotationChange&&d.props.onRotationChange(S),d.lastPinchRotation=E})}},o.prototype.render=function(){var a=this,d,p=this.props,x=p.image,y=p.video,A=p.mediaProps,w=p.transform,E=p.crop,S=E.x,N=E.y,R=p.rotation,k=p.zoom,L=p.cropShape,B=p.showGrid,j=p.style,U=j.containerStyle,H=j.cropAreaStyle,z=j.mediaStyle,J=p.classes,le=J.containerClassName,ue=J.cropAreaClassName,$=J.mediaClassName,ce=(d=this.state.mediaObjectFit)!==null&&d!==void 0?d:this.getObjectFit();return P.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(_e){return a.containerRef=_e},"data-testid":"container",style:U,className:ec("reactEasyCrop_Container",le)},x?P.createElement("img",Hn({alt:"",className:ec("reactEasyCrop_Image",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",$)},A,{src:x,ref:this.imageRef,style:Hn(Hn({},z),{transform:w||"translate(".concat(S,"px, ").concat(N,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),onLoad:this.onMediaLoad})):y&&P.createElement("video",Hn({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ec("reactEasyCrop_Video",ce==="contain"&&"reactEasyCrop_Contain",ce==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",ce==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",$)},A,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Hn(Hn({},z),{transform:w||"translate(".concat(S,"px, ").concat(N,"px) rotate(").concat(R,"deg) scale(").concat(k,")")}),controls:!1}),(Array.isArray(y)?y:[{src:y}]).map(function(q){return P.createElement("source",Hn({key:q.src},q))})),this.state.cropSize&&P.createElement("div",{style:Hn(Hn({},H),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:ec("reactEasyCrop_CropArea",L==="round"&&"reactEasyCrop_CropAreaRound",B&&"reactEasyCrop_CropAreaGrid",ue)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:x2,minZoom:m2,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:y2},o.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},o}(P.Component),Sa={},o1;function w2(){return o1||(o1=1,Sa.createCanvas=function(r,o){return Object.assign(document.createElement("canvas"),{width:r,height:o})},Sa.createImageData=function(r,o,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,o);default:return new ImageData(r,o,a)}},Sa.loadImage=function(r,o){return new Promise(function(a,d){const p=Object.assign(document.createElement("img"),o);function x(){p.onload=null,p.onerror=null}p.onload=function(){x(),a(p)},p.onerror=function(){x(),d(new Error('Failed to load the image "'+r+'"'))},p.src=r})}),Sa}w2();async function id(r,o){return console.log("Image source being cropped:",r),new Promise((a,d)=>{const p=new Image;p.onload=()=>{const x=document.createElement("canvas"),y=x.getContext("2d");x.width=o.width,x.height=o.height,y.drawImage(p,o.x,o.y,o.width,o.height,0,0,o.width,o.height);try{const A=x.toDataURL("image/jpeg");a(A)}catch{d(new Error("Error converting canvas to base64"))}},p.onerror=x=>d(new Error(`Image load error: ${x.message}`)),p.src=r})}const v2=({onSubmit:r,onClose:o,existingProfile:a})=>{const{user:d,userProfile:p,checkAuth:x}=P.useContext(Vr),[y,A]=P.useState({name:(p==null?void 0:p.name)||"",image:null,imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",croppedImage:null}),[w,E]=P.useState({x:0,y:0}),[S,N]=P.useState(1),[R,k]=P.useState(null),[L,B]=P.useState(!1),[j,U]=P.useState(!1),H=le=>{const ue=le.target.files[0];if(ue){const $=new FileReader;$.onload=ce=>{A(q=>({...q,image:ue,imagePreview:ce.target.result})),B(!0)},$.readAsDataURL(ue)}},z=(le,ue)=>{console.log("Cropped Area Pixels:",ue),k(ue)};async function J(le){le.preventDefault();let ue;if(y.croppedImage)ue=y.croppedImage.split(",")[1];else if(y.image instanceof File){const q=await y.image.arrayBuffer();ue=btoa(new Uint8Array(q).reduce((_e,Fe)=>_e+String.fromCharCode(Fe),""))}else if(p!=null&&p.image_data)ue=p.image_data;else{console.error("No valid image provided");return}const $={name:y.name,image_data:ue};console.log("Image data (first 100 chars):",ue.substring(0,100));const ce=localStorage.getItem("access_token");try{const q=await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"},body:JSON.stringify($)});if(!q.ok)throw new Error("Failed to update profile");const _e=await q.json();await x(),console.log("Profile updated successfully:",_e),o()}catch(q){console.error("Error updating profile:",q)}}return I.jsx("div",{className:"profile-creation-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:I.jsxs("div",{className:"profile-creation-modal",style:{width:"70%",maxWidth:"500px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",boxShadow:"0 10px 30px rgba(20,77,255,0.15)",position:"relative",border:"1px solid rgba(20,77,255,0.1)"},children:[I.jsx("button",{onClick:o,style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#144dff",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.1)"}},children:"×"}),I.jsx("h2",{style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",color:"#144dff",textAlign:"center",marginBottom:"2rem",fontWeight:"600"},children:"Your Profile"}),I.jsxs("form",{onSubmit:J,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[I.jsx("label",{style:{color:"#144dff",fontWeight:"500",fontSize:"1rem"},children:"Your Name"}),I.jsx("input",{type:"text",value:y.name,onChange:le=>A({...y,name:le.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid #e0e0e0",fontSize:"0.9rem",transition:"all 0.3s ease",backgroundColor:"rgba(255,255,255,0.9)","&:focus":{borderColor:"#144dff",outline:"none",boxShadow:"0 0 0 3px rgba(20,77,255,0.1)"}}})]}),!L&&I.jsx("div",{style:{width:"250px",height:"250px",margin:"0 auto",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:I.jsx("img",{src:y.croppedImage?y.croppedImage:y.imagePreview?y.imagePreview:p!=null&&p.image_data?`data:image/jpeg;base64,${p.image_data}`:"/assets/fakeprofile.png",alt:"Profile preview",style:{width:"100%",height:"100%",objectFit:"cover"}})}),I.jsxs("div",{style:{textAlign:"center"},children:[I.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:H,style:{display:"none"}}),I.jsx("label",{htmlFor:"image-upload",style:{padding:"0.8rem 1.2rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",borderRadius:"25px",cursor:"pointer",display:"inline-block",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Upload New Image"})]}),L&&I.jsxs("div",{style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2rem"},children:[I.jsx("div",{style:{position:"relative",width:"250px",height:"250px",borderRadius:"20%",overflow:"hidden",border:"7px solid #144dff",boxShadow:"0 8px 25px rgba(20,77,255,0.2)"},children:I.jsx(rd,{image:y.imagePreview,crop:w,zoom:S,aspect:1,onCropComplete:z,onCropChange:E,onZoomChange:N})}),I.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[I.jsx("button",{type:"button",onClick:()=>{B(!1),y.croppedImage||A(le=>({...le,imagePreview:null}))},style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"2px solid #144dff",background:"white",color:"#144dff",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"rgba(20,77,255,0.1)"}},children:"Cancel"}),I.jsx("button",{type:"button",onClick:async()=>{try{const le=await id(y.imagePreview,R);A(ue=>({...ue,croppedImage:le,imagePreview:le})),B(!1),U(!0),setTimeout(()=>U(!1),1e4)}catch(le){console.error("Error cropping image:",le)}},className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"0.8rem 1.2rem",borderRadius:"25px",border:"none",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(20,77,255,0.2)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Cropped Image"})]})]}),I.jsx("button",{type:"submit",className:`save-profile-button ${j?"glow-bounce":""}`,style:{padding:"1rem",background:"linear-gradient(45deg, #144dff, #2979ff)",color:"white",border:"none",borderRadius:"25px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",marginTop:"1rem",boxShadow:"0 4px 15px rgba(20,77,255,0.2)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(20,77,255,0.3)"}},children:"Save Profile"})]})]})})};var ba={},a1;function C2(){if(a1)return ba;a1=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.parse=y,ba.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,x=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function y(R,k){const L=new x,B=R.length;if(B<2)return L;const j=(k==null?void 0:k.decode)||S;let U=0;do{const H=R.indexOf("=",U);if(H===-1)break;const z=R.indexOf(";",U),J=z===-1?B:z;if(H>J){U=R.lastIndexOf(";",H-1)+1;continue}const le=A(R,U,H),ue=w(R,H,le),$=R.slice(le,ue);if(L[$]===void 0){let ce=A(R,H+1,J),q=w(R,J,ce);const _e=j(R.slice(ce,q));L[$]=_e}U=J+1}while(U<B);return L}function A(R,k,L){do{const B=R.charCodeAt(k);if(B!==32&&B!==9)return k}while(++k<L);return L}function w(R,k,L){for(;k>L;){const B=R.charCodeAt(--k);if(B!==32&&B!==9)return k+1}return L}function E(R,k,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const j=B(k);if(!o.test(j))throw new TypeError(`argument val is invalid: ${k}`);let U=R+"="+j;if(!L)return U;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);U+="; Max-Age="+L.maxAge}if(L.domain){if(!a.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);U+="; Domain="+L.domain}if(L.path){if(!d.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);U+="; Path="+L.path}if(L.expires){if(!N(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);U+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(U+="; HttpOnly"),L.secure&&(U+="; Secure"),L.partitioned&&(U+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return U}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function N(R){return p.call(R)==="[object Date]"}return ba}C2();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var l1="popstate";function E2(r={}){function o(d,p){let{pathname:x,search:y,hash:A}=d.location;return Rf("",{pathname:x,search:y,hash:A},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(d,p){return typeof p=="string"?p:La(p)}return S2(o,a,null,r)}function un(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}function gi(r,o){if(!r){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function A2(){return Math.random().toString(36).substring(2,10)}function c1(r,o){return{usr:r.state,key:r.key,idx:o}}function Rf(r,o,a=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof o=="string"?Lo(o):o,state:a,key:o&&o.key||d||A2()}}function La({pathname:r="/",search:o="",hash:a=""}){return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Lo(r){let o={};if(r){let a=r.indexOf("#");a>=0&&(o.hash=r.substring(a),r=r.substring(0,a));let d=r.indexOf("?");d>=0&&(o.search=r.substring(d),r=r.substring(0,d)),r&&(o.pathname=r)}return o}function S2(r,o,a,d={}){let{window:p=document.defaultView,v5Compat:x=!1}=d,y=p.history,A="POP",w=null,E=S();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function S(){return(y.state||{idx:null}).idx}function N(){A="POP";let j=S(),U=j==null?null:j-E;E=j,w&&w({action:A,location:B.location,delta:U})}function R(j,U){A="PUSH";let H=Rf(B.location,j,U);E=S()+1;let z=c1(H,E),J=B.createHref(H);try{y.pushState(z,"",J)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;p.location.assign(J)}x&&w&&w({action:A,location:B.location,delta:1})}function k(j,U){A="REPLACE";let H=Rf(B.location,j,U);E=S();let z=c1(H,E),J=B.createHref(H);y.replaceState(z,"",J),x&&w&&w({action:A,location:B.location,delta:0})}function L(j){let U=p.location.origin!=="null"?p.location.origin:p.location.href,H=typeof j=="string"?j:La(j);return H=H.replace(/ $/,"%20"),un(U,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,U)}let B={get action(){return A},get location(){return r(p,y)},listen(j){if(w)throw new Error("A history only accepts one active listener");return p.addEventListener(l1,N),w=j,()=>{p.removeEventListener(l1,N),w=null}},createHref(j){return o(p,j)},createURL:L,encodeLocation(j){let U=L(j);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:R,replace:k,go(j){return y.go(j)}};return B}function Fp(r,o,a="/"){return b2(r,o,a,!1)}function b2(r,o,a,d){let p=typeof o=="string"?Lo(o):o,x=ps(p.pathname||"/",a);if(x==null)return null;let y=jp(r);I2(y);let A=null;for(let w=0;A==null&&w<y.length;++w){let E=B2(x);A=k2(y[w],E,d)}return A}function jp(r,o=[],a=[],d=""){let p=(x,y,A)=>{let w={relativePath:A===void 0?x.path||"":A,caseSensitive:x.caseSensitive===!0,childrenIndex:y,route:x};w.relativePath.startsWith("/")&&(un(w.relativePath.startsWith(d),`Absolute route path "${w.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(d.length));let E=ki([d,w.relativePath]),S=a.concat(w);x.children&&x.children.length>0&&(un(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),jp(x.children,o,S,E)),!(x.path==null&&!x.index)&&o.push({path:E,score:M2(E,x.index),routesMeta:S})};return r.forEach((x,y)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))p(x,y);else for(let w of Vp(x.path))p(x,y,w)}),o}function Vp(r){let o=r.split("/");if(o.length===0)return[];let[a,...d]=o,p=a.endsWith("?"),x=a.replace(/\?$/,"");if(d.length===0)return p?[x,""]:[x];let y=Vp(d.join("/")),A=[];return A.push(...y.map(w=>w===""?x:[x,w].join("/"))),p&&A.push(...y),A.map(w=>r.startsWith("/")&&w===""?"/":w)}function I2(r){r.sort((o,a)=>o.score!==a.score?a.score-o.score:D2(o.routesMeta.map(d=>d.childrenIndex),a.routesMeta.map(d=>d.childrenIndex)))}var T2=/^:[\w-]+$/,N2=3,R2=2,_2=1,O2=10,P2=-2,u1=r=>r==="*";function M2(r,o){let a=r.split("/"),d=a.length;return a.some(u1)&&(d+=P2),o&&(d+=R2),a.filter(p=>!u1(p)).reduce((p,x)=>p+(T2.test(x)?N2:x===""?_2:O2),d)}function D2(r,o){return r.length===o.length&&r.slice(0,-1).every((d,p)=>d===o[p])?r[r.length-1]-o[o.length-1]:0}function k2(r,o,a=!1){let{routesMeta:d}=r,p={},x="/",y=[];for(let A=0;A<d.length;++A){let w=d[A],E=A===d.length-1,S=x==="/"?o:o.slice(x.length)||"/",N=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},S),R=w.route;if(!N&&E&&a&&!d[d.length-1].route.index&&(N=mc({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!N)return null;Object.assign(p,N.params),y.push({params:p,pathname:ki([x,N.pathname]),pathnameBase:U2(ki([x,N.pathnameBase])),route:R}),N.pathnameBase!=="/"&&(x=ki([x,N.pathnameBase]))}return y}function mc(r,o){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,d]=L2(r.path,r.caseSensitive,r.end),p=o.match(a);if(!p)return null;let x=p[0],y=x.replace(/(.)\/+$/,"$1"),A=p.slice(1);return{params:d.reduce((E,{paramName:S,isOptional:N},R)=>{if(S==="*"){let L=A[R]||"";y=x.slice(0,x.length-L.length).replace(/(.)\/+$/,"$1")}const k=A[R];return N&&!k?E[S]=void 0:E[S]=(k||"").replace(/%2F/g,"/"),E},{}),pathname:x,pathnameBase:y,pattern:r}}function L2(r,o=!1,a=!0){gi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,w)=>(d.push({paramName:A,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(d.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,o?void 0:"i"),d]}function B2(r){try{return r.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return gi(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),r}}function ps(r,o){if(o==="/")return r;if(!r.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,d=r.charAt(a);return d&&d!=="/"?null:r.slice(a)||"/"}function F2(r,o="/"){let{pathname:a,search:d="",hash:p=""}=typeof r=="string"?Lo(r):r;return{pathname:a?a.startsWith("/")?a:j2(a,o):o,search:z2(d),hash:W2(p)}}function j2(r,o){let a=o.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?a.length>1&&a.pop():p!=="."&&a.push(p)}),a.length>1?a.join("/"):"/"}function ff(r,o,a,d){return`Cannot include a '${r}' character in a manually specified \`to.${o}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function V2(r){return r.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Up(r){let o=V2(r);return o.map((a,d)=>d===o.length-1?a.pathname:a.pathnameBase)}function zp(r,o,a,d=!1){let p;typeof r=="string"?p=Lo(r):(p={...r},un(!p.pathname||!p.pathname.includes("?"),ff("?","pathname","search",p)),un(!p.pathname||!p.pathname.includes("#"),ff("#","pathname","hash",p)),un(!p.search||!p.search.includes("#"),ff("#","search","hash",p)));let x=r===""||p.pathname==="",y=x?"/":p.pathname,A;if(y==null)A=a;else{let N=o.length-1;if(!d&&y.startsWith("..")){let R=y.split("/");for(;R[0]==="..";)R.shift(),N-=1;p.pathname=R.join("/")}A=N>=0?o[N]:"/"}let w=F2(p,A),E=y&&y!=="/"&&y.endsWith("/"),S=(x||y===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(E||S)&&(w.pathname+="/"),w}var ki=r=>r.join("/").replace(/\/\/+/g,"/"),U2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),z2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,W2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function H2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Wp=["POST","PUT","PATCH","DELETE"];new Set(Wp);var G2=["GET",...Wp];new Set(G2);var Bo=P.createContext(null);Bo.displayName="DataRouter";var Tc=P.createContext(null);Tc.displayName="DataRouterState";var Hp=P.createContext({isTransitioning:!1});Hp.displayName="ViewTransition";var X2=P.createContext(new Map);X2.displayName="Fetchers";var Y2=P.createContext(null);Y2.displayName="Await";var mi=P.createContext(null);mi.displayName="Navigation";var Wa=P.createContext(null);Wa.displayName="Location";var xi=P.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var sd=P.createContext(null);sd.displayName="RouteError";function K2(r,{relative:o}={}){un(Ha(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:d}=P.useContext(mi),{hash:p,pathname:x,search:y}=Ga(r,{relative:o}),A=x;return a!=="/"&&(A=x==="/"?a:ki([a,x])),d.createHref({pathname:A,search:y,hash:p})}function Ha(){return P.useContext(Wa)!=null}function yi(){return un(Ha(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Wa).location}var Gp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xp(r){P.useContext(mi).static||P.useLayoutEffect(r)}function Ur(){let{isDataRoute:r}=P.useContext(xi);return r?ly():Z2()}function Z2(){un(Ha(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(Bo),{basename:o,navigator:a}=P.useContext(mi),{matches:d}=P.useContext(xi),{pathname:p}=yi(),x=JSON.stringify(Up(d)),y=P.useRef(!1);return Xp(()=>{y.current=!0}),P.useCallback((w,E={})=>{if(gi(y.current,Gp),!y.current)return;if(typeof w=="number"){a.go(w);return}let S=zp(w,JSON.parse(x),p,E.relative==="path");r==null&&o!=="/"&&(S.pathname=S.pathname==="/"?o:ki([o,S.pathname])),(E.replace?a.replace:a.push)(S,E.state,E)},[o,a,x,p,r])}P.createContext(null);function $2(){let{matches:r}=P.useContext(xi),o=r[r.length-1];return o?o.params:{}}function Ga(r,{relative:o}={}){let{matches:a}=P.useContext(xi),{pathname:d}=yi(),p=JSON.stringify(Up(a));return P.useMemo(()=>zp(r,JSON.parse(p),d,o==="path"),[r,p,d,o])}function q2(r,o){return Yp(r,o)}function Yp(r,o,a,d){var U;un(Ha(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=P.useContext(mi),{matches:x}=P.useContext(xi),y=x[x.length-1],A=y?y.params:{},w=y?y.pathname:"/",E=y?y.pathnameBase:"/",S=y&&y.route;{let H=S&&S.path||"";Kp(w,!S||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let N=yi(),R;if(o){let H=typeof o=="string"?Lo(o):o;un(E==="/"||((U=H.pathname)==null?void 0:U.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${H.pathname}" was given in the \`location\` prop.`),R=H}else R=N;let k=R.pathname||"/",L=k;if(E!=="/"){let H=E.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let B=Fp(r,{pathname:L});gi(S||B!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),gi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=ny(B&&B.map(H=>Object.assign({},H,{params:Object.assign({},A,H.params),pathname:ki([E,p.encodeLocation?p.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?E:ki([E,p.encodeLocation?p.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),x,a,d);return o&&j?P.createElement(Wa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},j):j}function Q2(){let r=ay(),o=H2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:d},x={padding:"2px 4px",backgroundColor:d},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:x},"ErrorBoundary")," or"," ",P.createElement("code",{style:x},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},o),a?P.createElement("pre",{style:p},a):null,y)}var J2=P.createElement(Q2,null),ey=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?P.createElement(xi.Provider,{value:this.props.routeContext},P.createElement(sd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ty({routeContext:r,match:o,children:a}){let d=P.useContext(Bo);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),P.createElement(xi.Provider,{value:r},a)}function ny(r,o=[],a=null,d=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let p=r,x=a==null?void 0:a.errors;if(x!=null){let w=p.findIndex(E=>E.route.id&&(x==null?void 0:x[E.route.id])!==void 0);un(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,w+1))}let y=!1,A=-1;if(a)for(let w=0;w<p.length;w++){let E=p[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(A=w),E.route.id){let{loaderData:S,errors:N}=a,R=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||R){y=!0,A>=0?p=p.slice(0,A+1):p=[p[0]];break}}}return p.reduceRight((w,E,S)=>{let N,R=!1,k=null,L=null;a&&(N=x&&E.route.id?x[E.route.id]:void 0,k=E.route.errorElement||J2,y&&(A<0&&S===0?(Kp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,L=null):A===S&&(R=!0,L=E.route.hydrateFallbackElement||null)));let B=o.concat(p.slice(0,S+1)),j=()=>{let U;return N?U=k:R?U=L:E.route.Component?U=P.createElement(E.route.Component,null):E.route.element?U=E.route.element:U=w,P.createElement(ty,{match:E,routeContext:{outlet:w,matches:B,isDataRoute:a!=null},children:U})};return a&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?P.createElement(ey,{location:a.location,revalidation:a.revalidation,component:k,error:N,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function od(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ry(r){let o=P.useContext(Bo);return un(o,od(r)),o}function iy(r){let o=P.useContext(Tc);return un(o,od(r)),o}function sy(r){let o=P.useContext(xi);return un(o,od(r)),o}function ad(r){let o=sy(r),a=o.matches[o.matches.length-1];return un(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function oy(){return ad("useRouteId")}function ay(){var d;let r=P.useContext(sd),o=iy("useRouteError"),a=ad("useRouteError");return r!==void 0?r:(d=o.errors)==null?void 0:d[a]}function ly(){let{router:r}=ry("useNavigate"),o=ad("useNavigate"),a=P.useRef(!1);return Xp(()=>{a.current=!0}),P.useCallback(async(p,x={})=>{gi(a.current,Gp),a.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:o,...x}))},[r,o])}var f1={};function Kp(r,o,a){!o&&!f1[r]&&(f1[r]=!0,gi(!1,a))}P.memo(cy);function cy({routes:r,future:o,state:a}){return Yp(r,void 0,a,o)}function fi(r){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uy({basename:r="/",children:o=null,location:a,navigationType:d="POP",navigator:p,static:x=!1}){un(!Ha(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),A=P.useMemo(()=>({basename:y,navigator:p,static:x,future:{}}),[y,p,x]);typeof a=="string"&&(a=Lo(a));let{pathname:w="/",search:E="",hash:S="",state:N=null,key:R="default"}=a,k=P.useMemo(()=>{let L=ps(w,y);return L==null?null:{location:{pathname:L,search:E,hash:S,state:N,key:R},navigationType:d}},[y,w,E,S,N,R,d]);return gi(k!=null,`<Router basename="${y}"> is not able to match the URL "${w}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:P.createElement(mi.Provider,{value:A},P.createElement(Wa.Provider,{children:o,value:k}))}function fy({children:r,location:o}){return q2(_f(r),o)}function _f(r,o=[]){let a=[];return P.Children.forEach(r,(d,p)=>{if(!P.isValidElement(d))return;let x=[...o,p];if(d.type===P.Fragment){a.push.apply(a,_f(d.props.children,x));return}un(d.type===fi,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!d.props.index||!d.props.children,"An index route cannot have child routes.");let y={id:d.props.id||x.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(y.children=_f(d.props.children,x)),a.push(y)}),a}var lc="get",cc="application/x-www-form-urlencoded";function Nc(r){return r!=null&&typeof r.tagName=="string"}function dy(r){return Nc(r)&&r.tagName.toLowerCase()==="button"}function hy(r){return Nc(r)&&r.tagName.toLowerCase()==="form"}function py(r){return Nc(r)&&r.tagName.toLowerCase()==="input"}function gy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function my(r,o){return r.button===0&&(!o||o==="_self")&&!gy(r)}var tc=null;function xy(){if(tc===null)try{new FormData(document.createElement("form"),0),tc=!1}catch{tc=!0}return tc}var yy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function df(r){return r!=null&&!yy.has(r)?(gi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cc}"`),null):r}function wy(r,o){let a,d,p,x,y;if(hy(r)){let A=r.getAttribute("action");d=A?ps(A,o):null,a=r.getAttribute("method")||lc,p=df(r.getAttribute("enctype"))||cc,x=new FormData(r)}else if(dy(r)||py(r)&&(r.type==="submit"||r.type==="image")){let A=r.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=r.getAttribute("formaction")||A.getAttribute("action");if(d=w?ps(w,o):null,a=r.getAttribute("formmethod")||A.getAttribute("method")||lc,p=df(r.getAttribute("formenctype"))||df(A.getAttribute("enctype"))||cc,x=new FormData(A,r),!xy()){let{name:E,type:S,value:N}=r;if(S==="image"){let R=E?`${E}.`:"";x.append(`${R}x`,"0"),x.append(`${R}y`,"0")}else E&&x.append(E,N)}}else{if(Nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=lc,d=null,p=cc,y=r}return x&&p==="text/plain"&&(y=x,x=void 0),{action:d,method:a.toLowerCase(),encType:p,formData:x,body:y}}function ld(r,o){if(r===!1||r===null||typeof r>"u")throw new Error(o)}async function vy(r,o){if(r.id in o)return o[r.id];try{let a=await import(r.module);return o[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Ey(r,o,a){let d=await Promise.all(r.map(async p=>{let x=o.routes[p.route.id];if(x){let y=await vy(x,a);return y.links?y.links():[]}return[]}));return Iy(d.flat(1).filter(Cy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function d1(r,o,a,d,p,x){let y=(w,E)=>a[E]?w.route.id!==a[E].route.id:!0,A=(w,E)=>{var S;return a[E].pathname!==w.pathname||((S=a[E].route.path)==null?void 0:S.endsWith("*"))&&a[E].params["*"]!==w.params["*"]};return x==="assets"?o.filter((w,E)=>y(w,E)||A(w,E)):x==="data"?o.filter((w,E)=>{var N;let S=d.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(y(w,E)||A(w,E))return!0;if(w.route.shouldRevalidate){let R=w.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((N=a[0])==null?void 0:N.params)||{},nextUrl:new URL(r,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function Ay(r,o){return Sy(r.map(a=>{let d=o.routes[a.route.id];if(!d)return[];let p=[d.module];return d.imports&&(p=p.concat(d.imports)),p}).flat(1))}function Sy(r){return[...new Set(r)]}function by(r){let o={},a=Object.keys(r).sort();for(let d of a)o[d]=r[d];return o}function Iy(r,o){let a=new Set;return new Set(o),r.reduce((d,p)=>{let x=JSON.stringify(by(p));return a.has(x)||(a.add(x),d.push({key:x,link:p})),d},[])}function Ty(r){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname="_root.data":o.pathname=`${o.pathname.replace(/\/$/,"")}.data`,o}function Ny(){let r=P.useContext(Bo);return ld(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ry(){let r=P.useContext(Tc);return ld(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cd=P.createContext(void 0);cd.displayName="FrameworkContext";function Zp(){let r=P.useContext(cd);return ld(r,"You must render this element inside a <HydratedRouter> element"),r}function _y(r,o){let a=P.useContext(cd),[d,p]=P.useState(!1),[x,y]=P.useState(!1),{onFocus:A,onBlur:w,onMouseEnter:E,onMouseLeave:S,onTouchStart:N}=o,R=P.useRef(null);P.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let B=U=>{U.forEach(H=>{y(H.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[r]),P.useEffect(()=>{if(d){let B=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(B)}}},[d]);let k=()=>{p(!0)},L=()=>{p(!1),y(!1)};return a?r!=="intent"?[x,R,{}]:[x,R,{onFocus:Ia(A,k),onBlur:Ia(w,L),onMouseEnter:Ia(E,k),onMouseLeave:Ia(S,L),onTouchStart:Ia(N,k)}]:[!1,R,{}]}function Ia(r,o){return a=>{r&&r(a),a.defaultPrevented||o(a)}}function Oy({page:r,...o}){let{router:a}=Ny(),d=P.useMemo(()=>Fp(a.routes,r,a.basename),[a.routes,r,a.basename]);return d?P.createElement(My,{page:r,matches:d,...o}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function Py(r){let{manifest:o,routeModules:a}=Zp(),[d,p]=P.useState([]);return P.useEffect(()=>{let x=!1;return Ey(r,o,a).then(y=>{x||p(y)}),()=>{x=!0}},[r,o,a]),d}function My({page:r,matches:o,...a}){let d=yi(),{manifest:p,routeModules:x}=Zp(),{loaderData:y,matches:A}=Ry(),w=P.useMemo(()=>d1(r,o,A,p,d,"data"),[r,o,A,p,d]),E=P.useMemo(()=>d1(r,o,A,p,d,"assets"),[r,o,A,p,d]),S=P.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let k=new Set,L=!1;if(o.forEach(j=>{var H;let U=p.routes[j.route.id];!U||!U.hasLoader||(!w.some(z=>z.route.id===j.route.id)&&j.route.id in y&&((H=x[j.route.id])!=null&&H.shouldRevalidate)||U.hasClientLoader?L=!0:k.add(j.route.id))}),k.size===0)return[];let B=Ty(r);return L&&k.size>0&&B.searchParams.set("_routes",o.filter(j=>k.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[y,d,p,w,o,r,x]),N=P.useMemo(()=>Ay(E,p),[E,p]),R=Py(E);return P.createElement(P.Fragment,null,S.map(k=>P.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...a})),N.map(k=>P.createElement("link",{key:k,rel:"modulepreload",href:k,...a})),R.map(({key:k,link:L})=>P.createElement("link",{key:k,...L})))}function Dy(...r){return o=>{r.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var $p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$p&&(window.__reactRouterVersion="7.0.2")}catch{}function ky({basename:r,children:o,window:a}){let d=P.useRef();d.current==null&&(d.current=E2({window:a,v5Compat:!0}));let p=d.current,[x,y]=P.useState({action:p.action,location:p.location}),A=P.useCallback(w=>{P.startTransition(()=>y(w))},[y]);return P.useLayoutEffect(()=>p.listen(A),[p,A]),P.createElement(uy,{basename:r,children:o,location:x.location,navigationType:x.action,navigator:p})}var qp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qp=P.forwardRef(function({onClick:o,discover:a="render",prefetch:d="none",relative:p,reloadDocument:x,replace:y,state:A,target:w,to:E,preventScrollReset:S,viewTransition:N,...R},k){let{basename:L}=P.useContext(mi),B=typeof E=="string"&&qp.test(E),j,U=!1;if(typeof E=="string"&&B&&(j=E,$p))try{let q=new URL(window.location.href),_e=E.startsWith("//")?new URL(q.protocol+E):new URL(E),Fe=ps(_e.pathname,L);_e.origin===q.origin&&Fe!=null?E=Fe+_e.search+_e.hash:U=!0}catch{gi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=K2(E,{relative:p}),[z,J,le]=_y(d,R),ue=jy(E,{replace:y,state:A,target:w,preventScrollReset:S,relative:p,viewTransition:N});function $(q){o&&o(q),q.defaultPrevented||ue(q)}let ce=P.createElement("a",{...R,...le,href:j||H,onClick:U||x?o:$,ref:Dy(k,J),target:w,"data-discover":!B&&a==="render"?"true":void 0});return z&&!B?P.createElement(P.Fragment,null,ce,P.createElement(Oy,{page:H})):ce});Qp.displayName="Link";var Ly=P.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:d="",end:p=!1,style:x,to:y,viewTransition:A,children:w,...E},S){let N=Ga(y,{relative:E.relative}),R=yi(),k=P.useContext(Tc),{navigator:L,basename:B}=P.useContext(mi),j=k!=null&&Hy(N)&&A===!0,U=L.encodeLocation?L.encodeLocation(N).pathname:N.pathname,H=R.pathname,z=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(H=H.toLowerCase(),z=z?z.toLowerCase():null,U=U.toLowerCase()),z&&B&&(z=ps(z,B)||z);const J=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let le=H===U||!p&&H.startsWith(U)&&H.charAt(J)==="/",ue=z!=null&&(z===U||!p&&z.startsWith(U)&&z.charAt(U.length)==="/"),$={isActive:le,isPending:ue,isTransitioning:j},ce=le?o:void 0,q;typeof d=="function"?q=d($):q=[d,le?"active":null,ue?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let _e=typeof x=="function"?x($):x;return P.createElement(Qp,{...E,"aria-current":ce,className:q,ref:S,style:_e,to:y,viewTransition:A},typeof w=="function"?w($):w)});Ly.displayName="NavLink";var By=P.forwardRef(({discover:r="render",fetcherKey:o,navigate:a,reloadDocument:d,replace:p,state:x,method:y=lc,action:A,onSubmit:w,relative:E,preventScrollReset:S,viewTransition:N,...R},k)=>{let L=zy(),B=Wy(A,{relative:E}),j=y.toLowerCase()==="get"?"get":"post",U=typeof A=="string"&&qp.test(A),H=z=>{if(w&&w(z),z.defaultPrevented)return;z.preventDefault();let J=z.nativeEvent.submitter,le=(J==null?void 0:J.getAttribute("formmethod"))||y;L(J||z.currentTarget,{fetcherKey:o,method:le,navigate:a,replace:p,state:x,relative:E,preventScrollReset:S,viewTransition:N})};return P.createElement("form",{ref:k,method:j,action:B,onSubmit:d?w:H,...R,"data-discover":!U&&r==="render"?"true":void 0})});By.displayName="Form";function Fy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jp(r){let o=P.useContext(Bo);return un(o,Fy(r)),o}function jy(r,{target:o,replace:a,state:d,preventScrollReset:p,relative:x,viewTransition:y}={}){let A=Ur(),w=yi(),E=Ga(r,{relative:x});return P.useCallback(S=>{if(my(S,o)){S.preventDefault();let N=a!==void 0?a:La(w)===La(E);A(r,{replace:N,state:d,preventScrollReset:p,relative:x,viewTransition:y})}},[w,A,E,a,d,o,r,p,x,y])}var Vy=0,Uy=()=>`__${String(++Vy)}__`;function zy(){let{router:r}=Jp("useSubmit"),{basename:o}=P.useContext(mi),a=oy();return P.useCallback(async(d,p={})=>{let{action:x,method:y,encType:A,formData:w,body:E}=wy(d,o);if(p.navigate===!1){let S=p.fetcherKey||Uy();await r.fetch(S,a,p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,flushSync:p.flushSync})}else await r.navigate(p.action||x,{preventScrollReset:p.preventScrollReset,formData:w,body:E,formMethod:p.method||y,formEncType:p.encType||A,replace:p.replace,state:p.state,fromRouteId:a,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,o,a])}function Wy(r,{relative:o}={}){let{basename:a}=P.useContext(mi),d=P.useContext(xi);un(d,"useFormAction must be used inside a RouteContext");let[p]=d.matches.slice(-1),x={...Ga(r||".",{relative:o})},y=yi();if(r==null){x.search=y.search;let A=new URLSearchParams(x.search),w=A.getAll("index");if(w.some(S=>S==="")){A.delete("index"),w.filter(N=>N).forEach(N=>A.append("index",N));let S=A.toString();x.search=S?`?${S}`:""}}return(!r||r===".")&&p.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:ki([a,x.pathname])),La(x)}function Hy(r,o={}){let a=P.useContext(Hp);un(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Jp("useViewTransitionState"),p=Ga(r,{relative:o.relative});if(!a.isTransitioning)return!1;let x=ps(a.currentLocation.pathname,d)||a.currentLocation.pathname,y=ps(a.nextLocation.pathname,d)||a.nextLocation.pathname;return mc(p.pathname,y)!=null||mc(p.pathname,x)!=null}new TextEncoder;function eg(){const r="./assets",o="/sounds/new_elevator_combined.mp3";Ur();const a=P.useRef(new Audio(r+o)),[d,p]=P.useState(!1),[x,y]=P.useState(!1),[A,w]=P.useState(null),[E,S]=P.useState(!1),[N,R]=P.useState(!1);P.useEffect(()=>{const H=a.current,z=()=>{H.pause(),H.currentTime=0,y(!1),j()};return H.addEventListener("ended",z),()=>H.removeEventListener("ended",z)},[N]);function k(){w(null),a.current.load(),a.current.play().then(()=>{a.current.pause(),a.current.currentTime=0,p(!0),y(!0),S(!0),B()}).catch(H=>{console.error("Error loading audio:",H),w("Failed to load audio. Please check the file path and format."),S(!1)})}function L(){return!!(a.current&&!a.current.paused)}function B(){a.current.paused?a.current.play().catch(H=>{console.error("Error playing audio:",H),w("Failed to play audio. Please try again.")}):a.current.currentTime=0}function j(){a.current&&(a.current.pause(),a.current.currentTime=0,a.current.src="",a.current=null)}function U(H){a.current.currentTime=H,console.log(a.current.duration)}return{audioRef:a,error:A,playSound:B,loadSound:k,seekTo:U,cancelSound:j,checkSound:L,soundEnabled:E,setSoundEnabled:S,isPlaying:x}}var Mn;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Mn||(Mn={}));Mn.QR_CODE,Mn.AZTEC,Mn.CODABAR,Mn.CODE_39,Mn.CODE_93,Mn.CODE_128,Mn.DATA_MATRIX,Mn.MAXICODE,Mn.ITF,Mn.EAN_13,Mn.EAN_8,Mn.PDF_417,Mn.RSS_14,Mn.RSS_EXPANDED,Mn.UPC_A,Mn.UPC_E,Mn.UPC_EAN_EXTENSION;var h1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(h1||(h1={}));var xc;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xc||(xc={}));var Gy=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[xc.SCAN_TYPE_CAMERA,xc.SCAN_TYPE_FILE],r}(),p1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(p1||(p1={}));var Na={exports:{}},Xy=Na.exports,g1;function Yy(){return g1||(g1=1,function(r,o){(function(a,d){d(o)})(Xy,function(a){function d(_){return _==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,e){_.__proto__=e}||function(_,e){for(var n in e)e.hasOwnProperty(n)&&(_[n]=e[n])};function x(_,e){p(_,e);function n(){this.constructor=_}_.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(_,e){var n=Object.setPrototypeOf;n?n(_,e):_.__proto__=e}function A(_,e){e===void 0&&(e=_.constructor);var n=Error.captureStackTrace;n&&n(_,e)}var w=function(_){x(e,_);function e(n){var i=this.constructor,l=_.call(this,n)||this;return Object.defineProperty(l,"name",{value:i.name,enumerable:!1}),y(l,i.prototype),A(l),l}return e}(Error);class E extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,l){const c=this.binarizer.getLuminanceSource().crop(e,n,i,l);return new R(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends E{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class L{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,n,i,l,c){for(;c--;)i[l++]=e[n++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class U extends j{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}U.kind="ArrayIndexOutOfBoundsException";class H{static fill(e,n){for(let i=0,l=e.length;i<l;i++)e[i]=n}static fillWithin(e,n,i,l){H.rangeCheck(e.length,n,i);for(let c=n;c<i;c++)e[c]=l}static rangeCheck(e,n,i){if(n>i)throw new N("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new U(n);if(i>e)throw new U(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(c=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(c=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,l=e.length;i<l;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const l=i-n,c=new Int32Array(l);return B.arraycopy(e,n,c,0,l),c}static binarySearch(e,n,i){i===void 0&&(i=H.numberComparator);let l=0,c=e.length-1;for(;l<=c;){const u=c+l>>1,h=i(n,e[u]);if(h>0)l=u+1;else if(h<0)c=u-1;else return u}return-l-1}static numberComparator(e,n){return e-n}}class z{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}z.MIN_VALUE_32_BITS=-2147483648,z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=J.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=J.makeArray(e);B.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let l=Math.floor(e/32),c=~i[l];c&=~((1<<(e&31))-1);const u=i.length;for(;c===0;){if(++l===u)return n;c=~i[l]}const h=l*32+z.numberOfTrailingZeros(c);return h>n?n:h}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new N;if(n===e)return;n--;const i=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,v=(2<<(u<l?31:n&31))-(1<<h);c[u]|=v}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new N;if(n===e)return!0;n--;const l=Math.floor(e/32),c=Math.floor(n/32),u=this.bits;for(let h=l;h<=c;h++){const m=h>l?0:e&31,T=(2<<(h<c?31:n&31))-(1<<m)&4294967295;if((u[h]&T)!==(i?T:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const n=this.bits;for(let i=0,l=n.length;i<l;i++)n[i]^=e.bits[i]}toBytes(e,n,i,l){for(let c=0;c<l;c++){let u=0;for(let h=0;h<8;h++)this.get(e)&&(u|=1<<7-h),e++;n[i+c]=u}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,l=this.bits;for(let c=0;c<i;c++){let u=l[c];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[n-c]=u}if(this.size!==i*32){const c=i*32-this.size;let u=e[0]>>>c;for(let h=1;h<i;h++){const m=e[h];u|=m<<32-c,e[h-1]=u,u=m>>>c}e[i-1]=u}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const n=e;return this.size===n.size&&H.equals(this.bits,n.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var le;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(le||(le={}));var ue=le;class $ extends E{static getFormatInstance(){return new $}}$.kind="FormatException";var ce;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(ce||(ce={}));class q{constructor(e,n,i,...l){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=l,q.VALUE_IDENTIFIER_TO_ECI.set(e,this),q.NAME_TO_ECI.set(i,this);const c=this.values;for(let u=0,h=c.length;u!==h;u++){const m=c[u];q.VALUES_TO_ECI.set(m,this)}for(const u of l)q.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new $("incorect value");const n=q.VALUES_TO_ECI.get(e);if(n===void 0)throw new $("incorect value");return n}static getCharacterSetECIByName(e){const n=q.NAME_TO_ECI.get(e);if(n===void 0)throw new $("incorect value");return n}equals(e){if(!(e instanceof q))return!1;const n=e;return this.getName()===n.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(ce.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(ce.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(ce.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(ce.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(ce.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(ce.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(ce.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(ce.Big5,28,"Big5"),q.GB18030=new q(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(ce.EUC_KR,30,"EUC_KR","EUC-KR");class _e extends E{}_e.kind="UnsupportedOperationException";class Fe{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!Fe.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof q?e:q.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(Fe.isDecodeFallbackSupported(i)){let l="";for(let c=0,u=e.length;c<u;c++){let h=e[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(i.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new _e(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(q.UTF8)||e.equals(q.ISO8859_1)||e.equals(q.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),l=[];for(let c=0;c<i.length;c++)l.push(i[c].charCodeAt(0));return new Uint8Array(l)}}class Re{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return Fe.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(ue.CHARACTER_SET)!==void 0)return n.get(ue.CHARACTER_SET).toString();const i=e.length;let l=!0,c=!0,u=!0,h=0,m=0,v=0,T=0,O=0,D=0,V=0,G=0,K=0,Q=0,se=0;const Ae=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Se=0;Se<i&&(l||c||u);Se++){const xe=e[Se]&255;u&&(h>0?xe&128?h--:u=!1:xe&128&&(xe&64?(h++,xe&32?(h++,xe&16?(h++,xe&8?u=!1:T++):v++):m++):u=!1)),l&&(xe>127&&xe<160?l=!1:xe>159&&(xe<192||xe===215||xe===247)&&se++),c&&(O>0?xe<64||xe===127||xe>252?c=!1:O--:xe===128||xe===160||xe>239?c=!1:xe>160&&xe<224?(D++,G=0,V++,V>K&&(K=V)):xe>127?(O++,V=0,G++,G>Q&&(Q=G)):(V=0,G=0))}return u&&h>0&&(u=!1),c&&O>0&&(c=!1),u&&(Ae||m+v+T>0)?Re.UTF8:c&&(Re.ASSUME_SHIFT_JIS||K>=3||Q>=3)?Re.SHIFT_JIS:l&&c?K===2&&D===2||se*10>=i?Re.SHIFT_JIS:Re.ISO88591:l?Re.ISO88591:c?Re.SHIFT_JIS:u?Re.UTF8:Re.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function l(u,h,m,v,T,O){if(u==="%%")return"%";if(n[++i]===void 0)return;u=v?parseInt(v.substr(1)):void 0;let D=T?parseInt(T.substr(1)):void 0,V;switch(O){case"s":V=n[i];break;case"c":V=n[i][0];break;case"f":V=parseFloat(n[i]).toFixed(u);break;case"p":V=parseFloat(n[i]).toPrecision(u);break;case"e":V=parseFloat(n[i]).toExponential(u);break;case"x":V=parseInt(n[i]).toString(D||16);break;case"d":V=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(D);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;V.length<G;)V=h!==void 0?V+K:K+V;return V}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}static getBytes(e,n){return Fe.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}Re.SHIFT_JIS=q.SJIS.getName(),Re.GB2312="GB2312",Re.ISO88591=q.ISO8859_1.getName(),Re.EUC_JP="EUC_JP",Re.UTF8=q.UTF8.getName(),Re.PLATFORM_DEFAULT_ENCODING=Re.UTF8,Re.ASSUME_SHIFT_JIS=!1;class Oe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Re.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let l=n;n<n+i;l++)this.append(e[l]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class ke{constructor(e,n,i,l){if(this.width=e,this.height=n,this.rowSize=i,this.bits=l,n==null&&(n=e),this.height=n,e<1||n<1)throw new N("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,l=new ke(i,n);for(let c=0;c<n;c++){const u=e[c];for(let h=0;h<i;h++)u[h]&&l.set(h,c)}return l}static parseFromString(e,n,i){if(e===null)throw new N("stringRepresentation cannot be null");const l=new Array(e.length);let c=0,u=0,h=-1,m=0,v=0;for(;v<e.length;)if(e.charAt(v)===`
`||e.charAt(v)==="\r"){if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new N("row lengths do not match");u=c,m++}v++}else if(e.substring(v,v+n.length)===n)v+=n.length,l[c]=!0,c++;else if(e.substring(v,v+i.length)===i)v+=i.length,l[c]=!1,c++;else throw new N("illegal character encountered: "+e.substring(v));if(c>u){if(h===-1)h=c-u;else if(c-u!==h)throw new N("row lengths do not match");m++}const T=new ke(h,m);for(let O=0;O<c;O++)l[O]&&T.set(Math.floor(O%h),Math.floor(O/h));return T}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const n=new J(Math.floor(this.width/32)+1),i=this.rowSize,l=this.bits;for(let c=0,u=this.height;c<u;c++){const h=c*i,m=e.getRow(c,n).getBitArray();for(let v=0;v<i;v++)l[h+v]^=m[v]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,l){if(n<0||e<0)throw new N("Left and top must be nonnegative");if(l<1||i<1)throw new N("Height and width must be at least 1");const c=e+i,u=n+l;if(u>this.height||c>this.width)throw new N("The region must fit inside the matrix");const h=this.rowSize,m=this.bits;for(let v=n;v<u;v++){const T=v*h;for(let O=e;O<c;O++)m[T+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new J(this.width):n.clear();const i=this.rowSize,l=this.bits,c=e*i;for(let u=0;u<i;u++)n.setBulk(u*32,l[c+u]);return n}setRow(e,n){B.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new J(e),l=new J(e);for(let c=0,u=Math.floor((n+1)/2);c<u;c++)i=this.getRow(c,i),l=this.getRow(n-1-c,l),i.reverse(),l.reverse(),this.setRow(c,l),this.setRow(n-1-c,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,l=this.bits;let c=e,u=n,h=-1,m=-1;for(let v=0;v<n;v++)for(let T=0;T<i;T++){const O=l[v*i+T];if(O!==0){if(v<u&&(u=v),v>m&&(m=v),T*32<c){let D=0;for(;!(O<<31-D&4294967295);)D++;T*32+D<c&&(c=T*32+D)}if(T*32+31>h){let D=31;for(;!(O>>>D);)D--;T*32+D>h&&(h=T*32+D)}}}return h<c||m<u?null:Int32Array.from([c,u,h-c+1,m-u+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const l=i/e;let c=i%e*32;const u=n[i];let h=0;for(;!(u<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const l=Math.floor(i/e);let c=Math.floor(i%e)*32;const u=n[i];let h=31;for(;!(u>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof ke))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&H.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+H.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let l=new Oe;for(let c=0,u=this.height;c<u;c++){for(let h=0,m=this.width;h<m;h++)l.append(this.get(h,c)?e:n);l.append(i)}return l.toString()}clone(){return new ke(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends E{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class je extends L{constructor(e){super(e),this.luminances=je.EMPTY,this.buckets=new Int32Array(je.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),l=i.getWidth();n==null||n.getSize()<l?n=new J(l):n.clear(),this.initArrays(l);const c=i.getRow(e,this.luminances),u=this.buckets;for(let m=0;m<l;m++)u[(c[m]&255)>>je.LUMINANCE_SHIFT]++;const h=je.estimateBlackPoint(u);if(l<3)for(let m=0;m<l;m++)(c[m]&255)<h&&n.set(m);else{let m=c[0]&255,v=c[1]&255;for(let T=1;T<l-1;T++){const O=c[T+1]&255;(v*4-m-O)/2<h&&n.set(T),m=v,v=O}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),l=new ke(n,i);this.initArrays(n);const c=this.buckets;for(let m=1;m<5;m++){const v=Math.floor(i*m/5),T=e.getRow(v,this.luminances),O=Math.floor(n*4/5);for(let D=Math.floor(n/5);D<O;D++){const V=T[D]&255;c[V>>je.LUMINANCE_SHIFT]++}}const u=je.estimateBlackPoint(c),h=e.getMatrix();for(let m=0;m<i;m++){const v=m*n;for(let T=0;T<n;T++)(h[v+T]&255)<u&&l.set(T,m)}return l}createBinarizer(e){return new je(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<je.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,l=0,c=0;for(let T=0;T<n;T++)e[T]>c&&(l=T,c=e[T]),e[T]>i&&(i=e[T]);let u=0,h=0;for(let T=0;T<n;T++){const O=T-l,D=e[T]*O*O;D>h&&(u=T,h=D)}if(l>u){const T=l;l=u,u=T}if(u-l<=n/16)throw new ee;let m=u-1,v=-1;for(let T=u-1;T>l;T--){const O=T-l,D=O*O*(u-T)*(i-e[T]);D>v&&(m=T,v=D)}return m<<je.LUMINANCE_SHIFT}}je.LUMINANCE_BITS=5,je.LUMINANCE_SHIFT=8-je.LUMINANCE_BITS,je.LUMINANCE_BUCKETS=1<<je.LUMINANCE_BITS,je.EMPTY=Uint8ClampedArray.from([0]);class he extends je{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=he.MINIMUM_DIMENSION&&i>=he.MINIMUM_DIMENSION){const l=e.getMatrix();let c=n>>he.BLOCK_SIZE_POWER;n&he.BLOCK_SIZE_MASK&&c++;let u=i>>he.BLOCK_SIZE_POWER;i&he.BLOCK_SIZE_MASK&&u++;const h=he.calculateBlackPoints(l,c,u,n,i),m=new ke(n,i);he.calculateThresholdForBlock(l,c,u,n,i,h,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new he(e)}static calculateThresholdForBlock(e,n,i,l,c,u,h){const m=c-he.BLOCK_SIZE,v=l-he.BLOCK_SIZE;for(let T=0;T<i;T++){let O=T<<he.BLOCK_SIZE_POWER;O>m&&(O=m);const D=he.cap(T,2,i-3);for(let V=0;V<n;V++){let G=V<<he.BLOCK_SIZE_POWER;G>v&&(G=v);const K=he.cap(V,2,n-3);let Q=0;for(let Ae=-2;Ae<=2;Ae++){const Se=u[D+Ae];Q+=Se[K-2]+Se[K-1]+Se[K]+Se[K+1]+Se[K+2]}const se=Q/25;he.thresholdBlock(e,G,O,se,l,h)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,l,c,u){for(let h=0,m=i*c+n;h<he.BLOCK_SIZE;h++,m+=c)for(let v=0;v<he.BLOCK_SIZE;v++)(e[m+v]&255)<=l&&u.set(n+v,i+h)}static calculateBlackPoints(e,n,i,l,c){const u=c-he.BLOCK_SIZE,h=l-he.BLOCK_SIZE,m=new Array(i);for(let v=0;v<i;v++){m[v]=new Int32Array(n);let T=v<<he.BLOCK_SIZE_POWER;T>u&&(T=u);for(let O=0;O<n;O++){let D=O<<he.BLOCK_SIZE_POWER;D>h&&(D=h);let V=0,G=255,K=0;for(let se=0,Ae=T*l+D;se<he.BLOCK_SIZE;se++,Ae+=l){for(let Se=0;Se<he.BLOCK_SIZE;Se++){const xe=e[Ae+Se]&255;V+=xe,xe<G&&(G=xe),xe>K&&(K=xe)}if(K-G>he.MIN_DYNAMIC_RANGE)for(se++,Ae+=l;se<he.BLOCK_SIZE;se++,Ae+=l)for(let Se=0;Se<he.BLOCK_SIZE;Se++)V+=e[Ae+Se]&255}let Q=V>>he.BLOCK_SIZE_POWER*2;if(K-G<=he.MIN_DYNAMIC_RANGE&&(Q=G/2,v>0&&O>0)){const se=(m[v-1][O]+2*m[v][O-1]+m[v-1][O-1])/4;G<se&&(Q=se)}m[v][O]=Q}}return m}}he.BLOCK_SIZE_POWER=3,he.BLOCK_SIZE=1<<he.BLOCK_SIZE_POWER,he.BLOCK_SIZE_MASK=he.BLOCK_SIZE-1,he.MINIMUM_DIMENSION=he.BLOCK_SIZE*5,he.MIN_DYNAMIC_RANGE=24;class de{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,l){throw new _e("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new _e("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new _e("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Oe;for(let i=0;i<this.height;i++){const l=this.getRow(i,e);for(let c=0;c<this.width;c++){const u=l[c]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",n.append(h)}n.append(`
`)}return n.toString()}}class Te extends de{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),l=this.getWidth();for(let c=0;c<l;c++)i[c]=255-(i[c]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let l=0;l<n;l++)i[l]=255-(e[l]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,l){return new Te(this.delegate.crop(e,n,i,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class fe extends de{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return fe.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const l=new Uint8ClampedArray(n*i);for(let c=0,u=0,h=e.length;c<h;c+=4,u++){let m;if(e[c+3]===0)m=255;else{const T=e[c],O=e[c+1],D=e[c+2];m=306*T+601*O+117*D+512>>10}l[u]=m}return l}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth(),l=e*i;return n===null?n=this.buffer.slice(l,l+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(l,l+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,l){return super.crop(e,n,i,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),l=e*fe.DEGREE_TO_RADIANS,c=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*u),m=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*u);return n.width=h,n.height=m,i.translate(h/2,m/2),i.rotate(l),i.drawImage(this.canvas,c/-2,u/-2),this.buffer=fe.makeBufferFromCanvasImageData(n),this}invert(){return new Te(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var te=(globalThis||Ql||self||window||void 0)&&(globalThis||Ql||self||window||void 0).__awaiter||function(_,e,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(T){try{v(i.next(T))}catch(O){u(O)}}function m(T){try{v(i.throw(T))}catch(O){u(O)}}function v(T){T.done?c(T.value):l(T.value).then(h,m)}v((i=i.apply(_,e||[])).next())})};class Ee{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const l=i.kind==="video"?"videoinput":i.kind;if(l!=="videoinput")continue;const c=i.deviceId||i.id,u=i.label||`Video device ${n.length+1}`,h=i.groupId,m={deviceId:c,label:u,kind:l,groupId:h};n.push(m)}return n})}getVideoInputDevices(){return te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new X(n.deviceId,n.label))})}findDeviceById(e){return te(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return te(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeOnceFromConstraints(l,n)})}decodeOnceFromConstraints(e,n){return te(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return te(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return te(this,void 0,void 0,function*(){let l;e?l={deviceId:{exact:e}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,n,i)})}decodeFromConstraints(e,n,i){return te(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(l,n,i)})}decodeFromStream(e,n,i){return te(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(l,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return te(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return te(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new S(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new S("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new S("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(i,n);return i.src=e,l}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const l=(c,u)=>{if(this._stopAsyncDecode){u(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);c(h)}catch(h){const m=n&&h instanceof ee,T=(h instanceof k||h instanceof $)&&i;if(m||T)return setTimeout(l,this._timeBetweenDecodingAttempts,c,u);u(h)}};return new Promise((c,u)=>l(c,u))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(e);n(l,null),setTimeout(i,this.timeBetweenScansMillis)}catch(l){n(null,l);const c=l instanceof k||l instanceof $,u=l instanceof ee;(c||u)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new fe(n),l=new he(i);return new R(l)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,l;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,l=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,l=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=l+"px",n.width=i,n.height=l,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(e,n,i=n==null?0:8*n.length,l,c,u=B.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=l,this.format=c,this.timestamp=u,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=l,this.format=c,this.resultMetadata=null,u==null?this.timestamp=B.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);B.arraycopy(n,0,i,0,n.length),B.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var st;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(st||(st={}));var we=st,$e;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($e||($e={}));var ze=$e;class mt{constructor(e,n,i,l,c=-1,u=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ge{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class ct{constructor(e,n){if(n.length===0)throw new N;this.field=e;const i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let u=0,h=n.length;u!==h;u++){const m=n[u];i=ge.addOrSubtract(i,m)}return i}i=n[0];const l=n.length,c=this.field;for(let u=1;u<l;u++)i=ge.addOrSubtract(c.multiply(e,i),n[u]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const u=n;n=i,i=u}let l=new Int32Array(i.length);const c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=ge.addOrSubtract(n[u-c],i[u]);return new ct(this.field,l)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1),h=this.field;for(let m=0;m<i;m++){const v=n[m];for(let T=0;T<c;T++)u[m+T]=ge.addOrSubtract(u[m+T],h.multiply(v,l[T]))}return new ct(h,u)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,l=new Int32Array(n),c=this.coefficients;for(let u=0;u<n;u++)l[u]=i.multiply(c[u],e);return new ct(i,l)}multiplyByMonomial(e,n){if(e<0)throw new N;if(n===0)return this.field.getZero();const i=this.coefficients,l=i.length,c=new Int32Array(l+e),u=this.field;for(let h=0;h<l;h++)c[h]=u.multiply(i[h],n);return new ct(u,c)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const n=this.field;let i=n.getZero(),l=this;const c=e.getCoefficient(e.getDegree()),u=n.inverse(c);for(;l.getDegree()>=e.getDegree()&&!l.isZero();){const h=l.getDegree()-e.getDegree(),m=n.multiply(l.getCoefficient(l.getDegree()),u),v=e.multiplyByMonomial(h,m),T=n.buildMonomial(h,m);i=i.addOrSubtract(T),l=l.addOrSubtract(v)}return[i,l]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const l=this.field.log(i);l===0?e+="1":l===1?e+="a":(e+="a^",e+=l)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class dt extends E{}dt.kind="ArithmeticException";class Me extends ge{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const l=new Int32Array(n);let c=1;for(let h=0;h<n;h++)l[h]=c,c*=2,c>=n&&(c^=e,c&=n-1);this.expTable=l;const u=new Int32Array(n);for(let h=0;h<n-1;h++)u[l[h]]=h;this.logTable=u,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new N;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new ct(this,i)}inverse(e){if(e===0)throw new dt;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+z.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class At extends E{}At.kind="ReedSolomonException";class Bt extends E{}Bt.kind="IllegalStateException";class Gt{constructor(e){this.field=e}decode(e,n){const i=this.field,l=new ct(i,e),c=new Int32Array(n);let u=!0;for(let V=0;V<n;V++){const G=l.evaluateAt(i.exp(V+i.getGeneratorBase()));c[c.length-1-V]=G,G!==0&&(u=!1)}if(u)return;const h=new ct(i,c),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),h,n),v=m[0],T=m[1],O=this.findErrorLocations(v),D=this.findErrorMagnitudes(T,O);for(let V=0;V<O.length;V++){const G=e.length-1-i.log(O[V]);if(G<0)throw new At("Bad error location");e[G]=Me.addOrSubtract(e[G],D[V])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const V=e;e=n,n=V}const l=this.field;let c=e,u=n,h=l.getZero(),m=l.getOne();for(;u.getDegree()>=(i/2|0);){let V=c,G=h;if(c=u,h=m,c.isZero())throw new At("r_{i-1} was zero");u=V;let K=l.getZero();const Q=c.getCoefficient(c.getDegree()),se=l.inverse(Q);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){const Ae=u.getDegree()-c.getDegree(),Se=l.multiply(u.getCoefficient(u.getDegree()),se);K=K.addOrSubtract(l.buildMonomial(Ae,Se)),u=u.addOrSubtract(c.multiplyByMonomial(Ae,Se))}if(m=K.multiply(h).addOrSubtract(G),u.getDegree()>=c.getDegree())throw new Bt("Division algorithm failed to reduce polynomial?")}const v=m.getCoefficient(0);if(v===0)throw new At("sigmaTilde(0) was zero");const T=l.inverse(v),O=m.multiplyScalar(T),D=u.multiplyScalar(T);return[O,D]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let l=0;const c=this.field;for(let u=1;u<c.getSize()&&l<n;u++)e.evaluateAt(u)===0&&(i[l]=c.inverse(u),l++);if(l!==n)throw new At("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,l=new Int32Array(i),c=this.field;for(let u=0;u<i;u++){const h=c.inverse(n[u]);let m=1;for(let v=0;v<i;v++)if(u!==v){const T=c.multiply(n[v],h),O=T&1?T&-2:T|1;m=c.multiply(m,O)}l[u]=c.multiply(e.evaluateAt(h),c.inverse(m)),c.getGeneratorBase()!==0&&(l[u]=c.multiply(l[u],h))}return l}}var Pt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Pt||(Pt={}));class bt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),l=this.correctBits(i),c=bt.convertBoolArrayToByteArray(l),u=bt.getEncodedData(l),h=new mt(c,u,null,null);return h.setNumBits(l.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=Pt.UPPER,l=Pt.UPPER,c="",u=0;for(;u<n;)if(l===Pt.BINARY){if(n-u<5)break;let h=bt.readCode(e,u,5);if(u+=5,h===0){if(n-u<11)break;h=bt.readCode(e,u,11)+31,u+=11}for(let m=0;m<h;m++){if(n-u<8){u=n;break}const v=bt.readCode(e,u,8);c+=Re.castAsNonUtf8Char(v),u+=8}l=i}else{let h=l===Pt.DIGIT?4:5;if(n-u<h)break;let m=bt.readCode(e,u,h);u+=h;let v=bt.getCharacter(l,m);v.startsWith("CTRL_")?(i=l,l=bt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(i=l)):(c+=v,l=i)}return c}static getTable(e){switch(e){case"L":return Pt.LOWER;case"P":return Pt.PUNCT;case"M":return Pt.MIXED;case"D":return Pt.DIGIT;case"B":return Pt.BINARY;case"U":default:return Pt.UPPER}}static getCharacter(e,n){switch(e){case Pt.UPPER:return bt.UPPER_TABLE[n];case Pt.LOWER:return bt.LOWER_TABLE[n];case Pt.MIXED:return bt.MIXED_TABLE[n];case Pt.PUNCT:return bt.PUNCT_TABLE[n];case Pt.DIGIT:return bt.DIGIT_TABLE[n];default:throw new Bt("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=Me.AZTEC_DATA_10):(i=12,n=Me.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=e.length/i;if(c<l)throw new $;let u=e.length%i,h=new Int32Array(c);for(let D=0;D<c;D++,u+=i)h[D]=bt.readCode(e,u,i);try{new Gt(n).decode(h,c-l)}catch(D){throw new $(D)}let m=(1<<i)-1,v=0;for(let D=0;D<l;D++){let V=h[D];if(V===0||V===m)throw new $;(V===1||V===m-1)&&v++}let T=new Array(l*i-v),O=0;for(let D=0;D<l;D++){let V=h[D];if(V===1||V===m-1)T.fill(V>1,O,O+i-1),O+=i-1;else for(let G=i-1;G>=0;--G)T[O++]=(V&1<<G)!==0}return T}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),l=(n?11:14)+i*4,c=new Int32Array(l),u=new Array(this.totalBitsInLayer(i,n));if(n)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*z.truncDivision(z.truncDivision(l,2)-1,15),m=l/2,v=z.truncDivision(h,2);for(let T=0;T<m;T++){let O=T+z.truncDivision(T,15);c[m-T-1]=v-O-1,c[m+T]=v+O+1}}for(let h=0,m=0;h<i;h++){let v=(i-h)*4+(n?9:12),T=h*2,O=l-1-T;for(let D=0;D<v;D++){let V=D*2;for(let G=0;G<2;G++)u[m+V+G]=e.get(c[T+G],c[T+D]),u[m+2*v+V+G]=e.get(c[T+D],c[O-G]),u[m+4*v+V+G]=e.get(c[O-G],c[O-D]),u[m+6*v+V+G]=e.get(c[O-D],c[T+G])}m+=v*8}return u}static readCode(e,n,i){let l=0;for(let c=n;c<n+i;c++)l<<=1,e[c]&&(l|=1);return l}static readByte(e,n){let i=e.length-n;return i>=8?bt.readCode(e,n,8):bt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=bt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}bt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],bt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],bt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],bt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],bt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,l){const c=e-i,u=n-l;return Math.sqrt(c*c+u*u)}static sum(e){let n=0;for(let i=0,l=e.length;i!==l;i++){const c=e[i];n+=c}return n}}class Dn{static floatToIntBits(e){return e}}Dn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ne{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ne){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Dn.floatToIntBits(this.x)+Dn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),l=this.distance(e[0],e[2]);let c,u,h;if(i>=n&&i>=l?(u=e[0],c=e[1],h=e[2]):l>=i&&l>=n?(u=e[1],c=e[0],h=e[2]):(u=e[2],c=e[0],h=e[1]),this.crossProductZ(c,u,h)<0){const m=c;c=h,h=m}e[0]=c,e[1]=u,e[2]=h}static distance(e,n){return ht.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const l=n.x,c=n.y;return(i.x-l)*(e.y-c)-(i.y-c)*(e.x-l)}}class Xn{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class wt extends Xn{constructor(e,n,i,l,c){super(e,n),this.compact=i,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ve{constructor(e,n,i,l){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=ve.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),l==null&&(l=e.getHeight()/2|0);const c=n/2|0;if(this.leftInit=i-c,this.rightInit=i+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,l=this.downInit,c=!1,u=!0,h=!1,m=!1,v=!1,T=!1,O=!1;const D=this.width,V=this.height;for(;u;){u=!1;let G=!0;for(;(G||!m)&&n<D;)G=this.containsBlackPoint(i,l,n,!1),G?(n++,u=!0,m=!0):m||n++;if(n>=D){c=!0;break}let K=!0;for(;(K||!v)&&l<V;)K=this.containsBlackPoint(e,n,l,!0),K?(l++,u=!0,v=!0):v||l++;if(l>=V){c=!0;break}let Q=!0;for(;(Q||!T)&&e>=0;)Q=this.containsBlackPoint(i,l,e,!1),Q?(e--,u=!0,T=!0):T||e--;if(e<0){c=!0;break}let se=!0;for(;(se||!O)&&i>=0;)se=this.containsBlackPoint(e,n,i,!0),se?(i--,u=!0,O=!0):O||i--;if(i<0){c=!0;break}u&&(h=!0)}if(!c&&h){const G=n-e;let K=null;for(let Se=1;K===null&&Se<G;Se++)K=this.getBlackPointOnSegment(e,l-Se,e+Se,l);if(K==null)throw new ee;let Q=null;for(let Se=1;Q===null&&Se<G;Se++)Q=this.getBlackPointOnSegment(e,i+Se,e+Se,i);if(Q==null)throw new ee;let se=null;for(let Se=1;se===null&&Se<G;Se++)se=this.getBlackPointOnSegment(n,i+Se,n-Se,i);if(se==null)throw new ee;let Ae=null;for(let Se=1;Ae===null&&Se<G;Se++)Ae=this.getBlackPointOnSegment(n,l-Se,n-Se,l);if(Ae==null)throw new ee;return this.centerEdges(Ae,K,se,Q)}else throw new ee}getBlackPointOnSegment(e,n,i,l){const c=ht.round(ht.distance(e,n,i,l)),u=(i-e)/c,h=(l-n)/c,m=this.image;for(let v=0;v<c;v++){const T=ht.round(e+v*u),O=ht.round(n+v*h);if(m.get(T,O))return new Ne(T,O)}return null}centerEdges(e,n,i,l){const c=e.getX(),u=e.getY(),h=n.getX(),m=n.getY(),v=i.getX(),T=i.getY(),O=l.getX(),D=l.getY(),V=ve.CORR;return c<this.width/2?[new Ne(O-V,D+V),new Ne(h+V,m+V),new Ne(v-V,T-V),new Ne(c+V,u-V)]:[new Ne(O+V,D+V),new Ne(h+V,m-V),new Ne(v-V,T+V),new Ne(c-V,u-V)]}containsBlackPoint(e,n,i,l){const c=this.image;if(l){for(let u=e;u<=n;u++)if(c.get(u,i))return!0}else for(let u=e;u<=n;u++)if(c.get(i,u))return!0;return!1}}ve.INIT_SIZE=10,ve.CORR=1;class Pe{static checkAndNudgePoints(e,n){const i=e.getWidth(),l=e.getHeight();let c=!0;for(let u=0;u<n.length&&c;u+=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}c=!0;for(let u=n.length-2;u>=0&&c;u-=2){const h=Math.floor(n[u]),m=Math.floor(n[u+1]);if(h<-1||h>i||m<-1||m>l)throw new ee;c=!1,h===-1?(n[u]=0,c=!0):h===i&&(n[u]=i-1,c=!0),m===-1?(n[u+1]=0,c=!0):m===l&&(n[u+1]=l-1,c=!0)}}}class Qe{constructor(e,n,i,l,c,u,h,m,v){this.a11=e,this.a21=n,this.a31=i,this.a12=l,this.a22=c,this.a32=u,this.a13=h,this.a23=m,this.a33=v}static quadrilateralToQuadrilateral(e,n,i,l,c,u,h,m,v,T,O,D,V,G,K,Q){const se=Qe.quadrilateralToSquare(e,n,i,l,c,u,h,m);return Qe.squareToQuadrilateral(v,T,O,D,V,G,K,Q).times(se)}transformPoints(e){const n=e.length,i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,v=this.a31,T=this.a32,O=this.a33;for(let D=0;D<n;D+=2){const V=e[D],G=e[D+1],K=c*V+m*G+O;e[D]=(i*V+u*G+v)/K,e[D+1]=(l*V+h*G+T)/K}}transformPointsWithValues(e,n){const i=this.a11,l=this.a12,c=this.a13,u=this.a21,h=this.a22,m=this.a23,v=this.a31,T=this.a32,O=this.a33,D=e.length;for(let V=0;V<D;V++){const G=e[V],K=n[V],Q=c*G+m*K+O;e[V]=(i*G+u*K+v)/Q,n[V]=(l*G+h*K+T)/Q}}static squareToQuadrilateral(e,n,i,l,c,u,h,m){const v=e-i+c-h,T=n-l+u-m;if(v===0&&T===0)return new Qe(i-e,c-i,e,l-n,u-l,n,0,0,1);{const O=i-c,D=h-c,V=l-u,G=m-u,K=O*G-D*V,Q=(v*G-D*T)/K,se=(O*T-v*V)/K;return new Qe(i-e+Q*i,h-e+se*h,e,l-n+Q*l,m-n+se*m,n,Q,se,1)}}static quadrilateralToSquare(e,n,i,l,c,u,h,m){return Qe.squareToQuadrilateral(e,n,i,l,c,u,h,m).buildAdjoint()}buildAdjoint(){return new Qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Qe(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class jt extends Pe{sampleGrid(e,n,i,l,c,u,h,m,v,T,O,D,V,G,K,Q,se,Ae,Se){const xe=Qe.quadrilateralToQuadrilateral(l,c,u,h,m,v,T,O,D,V,G,K,Q,se,Ae,Se);return this.sampleGridWithTransform(e,n,i,xe)}sampleGridWithTransform(e,n,i,l){if(n<=0||i<=0)throw new ee;const c=new ke(n,i),u=new Float32Array(2*n);for(let h=0;h<i;h++){const m=u.length,v=h+.5;for(let T=0;T<m;T+=2)u[T]=T/2+.5,u[T+1]=v;l.transformPoints(u),Pe.checkAndNudgePoints(e,u);try{for(let T=0;T<m;T+=2)e.get(Math.floor(u[T]),Math.floor(u[T+1]))&&c.set(T/2,h)}catch{throw new ee}}return c}}class yt{static setGridSampler(e){yt.gridSampler=e}static getInstance(){return yt.gridSampler}}yt.gridSampler=new jt;class pt{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Ne(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class rn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let u=i[0];i[0]=i[2],i[2]=u}this.extractParameters(i);let l=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),c=this.getMatrixCornerPoints(i);return new wt(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let l=0;for(let u=0;u<4;u++){let h=i[(this.shift+u)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,n){let i=0;e.forEach((l,c,u)=>{let h=(l>>n-2<<1)+(l&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let l=0;l<4;l++)if(z.bitCount(i^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new ee}getCorrectedParameterData(e,n){let i,l;n?(i=7,l=2):(i=10,l=4);let c=i-l,u=new Int32Array(i);for(let m=i-1;m>=0;--m)u[m]=e&15,e>>=4;try{new Gt(Me.AZTEC_PARAM).decode(u,c)}catch{throw new ee}let h=0;for(let m=0;m<l;m++)h=(h<<4)+u[m];return h}getBullsEyeCorners(e){let n=e,i=e,l=e,c=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(n,u,1,-1),D=this.getFirstDifferent(i,u,1,1),V=this.getFirstDifferent(l,u,-1,1),G=this.getFirstDifferent(c,u,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(G,O)*this.nbCenterLayers/(this.distancePoint(c,n)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(O,D,V,G))break}n=O,i=D,l=V,c=G,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let h=new Ne(n.getX()+.5,n.getY()-.5),m=new Ne(i.getX()+.5,i.getY()+.5),v=new Ne(l.getX()-.5,l.getY()+.5),T=new Ne(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,m,v,T],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,l;try{let h=new ve(this.image).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{let m=this.image.getWidth()/2,v=this.image.getHeight()/2;e=this.getFirstDifferent(new pt(m+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new pt(m+7,v+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new pt(m-7,v+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new pt(m-7,v-7),!1,-1,-1).toResultPoint()}let c=ht.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=ht.round((e.getY()+l.getY()+n.getY()+i.getY())/4);try{let h=new ve(this.image,15,c,u).detect();e=h[0],n=h[1],i=h[2],l=h[3]}catch{e=this.getFirstDifferent(new pt(c+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new pt(c+7,u+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new pt(c-7,u+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new pt(c-7,u-7),!1,-1,-1).toResultPoint()}return c=ht.round((e.getX()+l.getX()+n.getX()+i.getX())/4),u=ht.round((e.getY()+l.getY()+n.getY()+i.getY())/4),new pt(c,u)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,l,c){let u=yt.getInstance(),h=this.getDimension(),m=h/2-this.nbCenterLayers,v=h/2+this.nbCenterLayers;return u.sampleGrid(e,h,h,m,m,v,m,v,v,m,v,n.getX(),n.getY(),i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(e,n,i){let l=0,c=this.distanceResultPoint(e,n),u=c/i,h=e.getX(),m=e.getY(),v=u*(n.getX()-e.getX())/c,T=u*(n.getY()-e.getY())/c;for(let O=0;O<i;O++)this.image.get(ht.round(h+O*v),ht.round(m+O*T))&&(l|=1<<i-O-1);return l}isWhiteOrBlackRectangle(e,n,i,l){let c=3;e=new pt(e.getX()-c,e.getY()+c),n=new pt(n.getX()-c,n.getY()-c),i=new pt(i.getX()+c,i.getY()-c),l=new pt(l.getX()+c,l.getY()+c);let u=this.getColor(l,e);if(u===0)return!1;let h=this.getColor(e,n);return h!==u||(h=this.getColor(n,i),h!==u)?!1:(h=this.getColor(i,l),h===u)}getColor(e,n){let i=this.distancePoint(e,n),l=(n.getX()-e.getX())/i,c=(n.getY()-e.getY())/i,u=0,h=e.getX(),m=e.getY(),v=this.image.get(e.getX(),e.getY()),T=Math.ceil(i);for(let D=0;D<T;D++)h+=l,m+=c,this.image.get(ht.round(h),ht.round(m))!==v&&u++;let O=u/i;return O>.1&&O<.9?0:O<=.1===v?1:-1}getFirstDifferent(e,n,i,l){let c=e.getX()+i,u=e.getY()+l;for(;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i,u+=l;for(c-=i,u-=l;this.isValid(c,u)&&this.image.get(c,u)===n;)c+=i;for(c-=i;this.isValid(c,u)&&this.image.get(c,u)===n;)u+=l;return u-=l,new pt(c,u)}expandSquare(e,n,i){let l=i/(2*n),c=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,v=new Ne(h+l*c,m+l*u),T=new Ne(h-l*c,m-l*u);c=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let O=new Ne(h+l*c,m+l*u),D=new Ne(h-l*c,m-l*u);return[v,O,T,D]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ht.round(e.getX()),i=ht.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return ht.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ht.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(z.truncDivision(this.nbLayers-4,8)+1)+15}}class Mt{decode(e,n=null){let i=null,l=new rn(e.getBlackMatrix()),c=null,u=null;try{let T=l.detectMirror(!1);c=T.getPoints(),this.reportFoundResultPoints(n,c),u=new bt().decode(T)}catch(T){i=T}if(u==null)try{let T=l.detectMirror(!0);c=T.getPoints(),this.reportFoundResultPoints(n,c),u=new bt().decode(T)}catch(T){throw i??T}let h=new Ve(u.getText(),u.getRawBytes(),u.getNumBits(),c,we.AZTEC,B.currentTimeMillis()),m=u.getByteSegments();m!=null&&h.putMetadata(ze.BYTE_SEGMENTS,m);let v=u.getECLevel();return v!=null&&h.putMetadata(ze.ERROR_CORRECTION_LEVEL,v),h}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(ue.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((l,c,u)=>{i.foundPossibleResultPoint(l)})}}reset(){}}class zt extends Ee{constructor(e=500){super(new Mt,e)}}class It{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(ue.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),u=this.doDecode(c,n),h=u.getResultMetadata();let m=270;h!==null&&h.get(ze.ORIENTATION)===!0&&(m=m+h.get(ze.ORIENTATION)%360),u.putMetadata(ze.ORIENTATION,m);const v=u.getResultPoints();if(v!==null){const T=c.getHeight();for(let O=0;O<v.length;O++)v[O]=new Ne(T-v[O].getY()-1,v[O].getX())}return u}else throw new ee}}reset(){}doDecode(e,n){const i=e.getWidth(),l=e.getHeight();let c=new J(i);const u=n&&n.get(ue.TRY_HARDER)===!0,h=Math.max(1,l>>(u?8:5));let m;u?m=l:m=15;const v=Math.trunc(l/2);for(let T=0;T<m;T++){const O=Math.trunc((T+1)/2),D=(T&1)===0,V=v+h*(D?O:-O);if(V<0||V>=l)break;try{c=e.getBlackRow(V,c)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(c.reverse(),n&&n.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;n.forEach((Q,se)=>K.set(se,Q)),K.delete(ue.NEED_RESULT_POINT_CALLBACK),n=K}try{const K=this.decodeRow(V,c,n);if(G===1){K.putMetadata(ze.ORIENTATION,180);const Q=K.getResultPoints();Q!==null&&(Q[0]=new Ne(i-Q[0].getX()-1,Q[0].getY()),Q[1]=new Ne(i-Q[1].getX()-1,Q[1].getY()))}return K}catch{}}}throw new ee}static recordPattern(e,n,i){const l=i.length;for(let v=0;v<l;v++)i[v]=0;const c=e.getSize();if(n>=c)throw new ee;let u=!e.get(n),h=0,m=n;for(;m<c;){if(e.get(m)!==u)i[h]++;else{if(++h===l)break;i[h]=1,u=!u}m++}if(!(h===l||h===l-1&&m===c))throw new ee}static recordPatternInReverse(e,n,i){let l=i.length,c=e.get(n);for(;n>0&&l>=0;)e.get(--n)!==c&&(l--,c=!c);if(l>=0)throw new ee;It.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const l=e.length;let c=0,u=0;for(let v=0;v<l;v++)c+=e[v],u+=n[v];if(c<u)return Number.POSITIVE_INFINITY;const h=c/u;i*=h;let m=0;for(let v=0;v<l;v++){const T=e[v],O=n[v]*h,D=T>O?T-O:O-T;if(D>i)return Number.POSITIVE_INFINITY;m+=D}return m/c}}class be extends It{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),u=i,h=!1;const m=6;for(let v=i;v<n;v++)if(e.get(v)!==h)c[l]++;else{if(l===m-1){let T=be.MAX_AVG_VARIANCE,O=-1;for(let D=be.CODE_START_A;D<=be.CODE_START_C;D++){const V=It.patternMatchVariance(c,be.CODE_PATTERNS[D],be.MAX_INDIVIDUAL_VARIANCE);V<T&&(T=V,O=D)}if(O>=0&&e.isRange(Math.max(0,u-(v-u)/2),u,!1))return Int32Array.from([u,v,O]);u+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new ee}static decodeCode(e,n,i){It.recordPattern(e,i,n);let l=be.MAX_AVG_VARIANCE,c=-1;for(let u=0;u<be.CODE_PATTERNS.length;u++){const h=be.CODE_PATTERNS[u],m=this.patternMatchVariance(n,h,be.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=u)}if(c>=0)return c;throw new ee}decodeRow(e,n,i){const l=i&&i.get(ue.ASSUME_GS1)===!0,c=be.findStartPattern(n),u=c[2];let h=0;const m=new Uint8Array(20);m[h++]=u;let v;switch(u){case be.CODE_START_A:v=be.CODE_CODE_A;break;case be.CODE_START_B:v=be.CODE_CODE_B;break;case be.CODE_START_C:v=be.CODE_CODE_C;break;default:throw new $}let T=!1,O=!1,D="",V=c[0],G=c[1];const K=Int32Array.from([0,0,0,0,0,0]);let Q=0,se=0,Ae=u,Se=0,xe=!0,Et=!1,lt=!1;for(;!T;){const Yr=O;switch(O=!1,Q=se,se=be.decodeCode(n,K,G),m[h++]=se,se!==be.CODE_STOP&&(xe=!0),se!==be.CODE_STOP&&(Se++,Ae+=Se*se),V=G,G+=K.reduce((qi,na)=>qi+na,0),se){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new $}switch(v){case be.CODE_CODE_A:if(se<64)lt===Et?D+=String.fromCharCode(32+se):D+=String.fromCharCode(32+se+128),lt=!1;else if(se<96)lt===Et?D+=String.fromCharCode(se-64):D+=String.fromCharCode(se+64),lt=!1;else switch(se!==be.CODE_STOP&&(xe=!1),se){case be.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!Et&&lt?(Et=!0,lt=!1):Et&&lt?(Et=!1,lt=!1):lt=!0;break;case be.CODE_SHIFT:O=!0,v=be.CODE_CODE_B;break;case be.CODE_CODE_B:v=be.CODE_CODE_B;break;case be.CODE_CODE_C:v=be.CODE_CODE_C;break;case be.CODE_STOP:T=!0;break}break;case be.CODE_CODE_B:if(se<96)lt===Et?D+=String.fromCharCode(32+se):D+=String.fromCharCode(32+se+128),lt=!1;else switch(se!==be.CODE_STOP&&(xe=!1),se){case be.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!Et&&lt?(Et=!0,lt=!1):Et&&lt?(Et=!1,lt=!1):lt=!0;break;case be.CODE_SHIFT:O=!0,v=be.CODE_CODE_A;break;case be.CODE_CODE_A:v=be.CODE_CODE_A;break;case be.CODE_CODE_C:v=be.CODE_CODE_C;break;case be.CODE_STOP:T=!0;break}break;case be.CODE_CODE_C:if(se<100)se<10&&(D+="0"),D+=se;else switch(se!==be.CODE_STOP&&(xe=!1),se){case be.CODE_FNC_1:l&&(D.length===0?D+="]C1":D+="");break;case be.CODE_CODE_A:v=be.CODE_CODE_A;break;case be.CODE_CODE_B:v=be.CODE_CODE_B;break;case be.CODE_STOP:T=!0;break}break}Yr&&(v=v===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const qn=G-V;if(G=n.getNextUnset(G),!n.isRange(G,Math.min(n.getSize(),G+(G-V)/2),!1))throw new ee;if(Ae-=Se*Q,Ae%103!==Q)throw new k;const Ar=D.length;if(Ar===0)throw new ee;Ar>0&&xe&&(v===be.CODE_CODE_C?D=D.substring(0,Ar-2):D=D.substring(0,Ar-1));const wn=(c[1]+c[0])/2,Ft=V+qn/2,on=m.length,Un=new Uint8Array(on);for(let Yr=0;Yr<on;Yr++)Un[Yr]=m[Yr];const Si=[new Ne(wn,e),new Ne(Ft,e)];return new Ve(D,Un,0,Si,we.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class Vt extends It{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=Vt.findAsteriskPattern(n,l),u=n.getNextSet(c[1]),h=n.getSize(),m,v;do{Vt.recordPattern(n,u,l);let K=Vt.toNarrowWidePattern(l);if(K<0)throw new ee;m=Vt.patternToChar(K),this.decodeRowResult+=m,v=u;for(let Q of l)u+=Q;u=n.getNextSet(u)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let T=0;for(let K of l)T+=K;let O=u-v-T;if(u!==h&&O*2<T)throw new ee;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,Q=0;for(let se=0;se<K;se++)Q+=Vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(K)!==Vt.ALPHABET_STRING.charAt(Q%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new ee;let D;this.extendedMode?D=Vt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let V=(c[1]+c[0])/2,G=v+T/2;return new Ve(D,null,0,[new Ne(V,e),new Ne(G,e)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),l=e.getNextSet(0),c=0,u=l,h=!1,m=n.length;for(let v=l;v<i;v++)if(e.get(v)!==h)n[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(n)===Vt.ASTERISK_ENCODING&&e.isRange(Math.max(0,u-Math.floor((v-u)/2)),u,!1))return[u,v];u+=n[0]+n[1],n.copyWithin(0,2,2+c-1),n[c-1]=0,n[c]=0,c--}else c++;n[c]=1,h=!h}throw new ee}static toNarrowWidePattern(e){let n=e.length,i=0,l;do{let c=2147483647;for(let m of e)m<c&&m>i&&(c=m);i=c,l=0;let u=0,h=0;for(let m=0;m<n;m++){let v=e[m];v>i&&(h|=1<<n-1-m,l++,u+=v)}if(l===3){for(let m=0;m<n&&l>0;m++){let v=e[m];if(v>i&&(l--,v*2>=u))return-1}return h}}while(l>3);return-1}static patternToChar(e){for(let n=0;n<Vt.CHARACTER_ENCODINGS.length;n++)if(Vt.CHARACTER_ENCODINGS[n]===e)return Vt.ALPHABET_STRING.charAt(n);if(e===Vt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(e){let n=e.length,i="";for(let l=0;l<n;l++){let c=e.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let u=e.charAt(l+1),h="\0";switch(c){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new $;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new $;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new $;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new $;break}i+=h,l++}else i+=c}return i}}Vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Vt.ASTERISK_ENCODING=148;class Tt extends It{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let l=this.decodeStart(n),c=this.decodeEnd(n),u=new Oe;Tt.decodeMiddle(n,l[1],c[0],u);let h=u.toString(),m=null;i!=null&&(m=i.get(ue.ALLOWED_LENGTHS)),m==null&&(m=Tt.DEFAULT_ALLOWED_LENGTHS);let v=h.length,T=!1,O=0;for(let G of m){if(v===G){T=!0;break}G>O&&(O=G)}if(!T&&v>O&&(T=!0),!T)throw new $;const D=[new Ne(l[1],e),new Ne(c[0],e)];return new Ve(h,null,0,D,we.ITF,new Date().getTime())}static decodeMiddle(e,n,i,l){let c=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),u.fill(0),h.fill(0);n<i;){It.recordPattern(e,n,c);for(let v=0;v<5;v++){let T=2*v;u[v]=c[T],h[v]=c[T+1]}let m=Tt.decodeDigit(u);l.append(m.toString()),m=this.decodeDigit(h),l.append(m.toString()),c.forEach(function(v){n+=v})}}decodeStart(e){let n=Tt.skipWhiteSpace(e),i=Tt.findGuardPattern(e,n,Tt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let l=n-1;i>0&&l>=0&&!e.get(l);l--)i--;if(i!==0)throw new ee}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new ee;return i}decodeEnd(e){e.reverse();try{let n=Tt.skipWhiteSpace(e),i;try{i=Tt.findGuardPattern(e,n,Tt.END_PATTERN_REVERSED[0])}catch(c){c instanceof ee&&(i=Tt.findGuardPattern(e,n,Tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let l=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-l,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let l=i.length,c=new Int32Array(l),u=e.getSize(),h=!1,m=0,v=n;c.fill(0);for(let T=n;T<u;T++)if(e.get(T)!==h)c[m]++;else{if(m===l-1){if(It.patternMatchVariance(c,i,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return[v,T];v+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,h=!h}throw new ee}static decodeDigit(e){let n=Tt.MAX_AVG_VARIANCE,i=-1,l=Tt.PATTERNS.length;for(let c=0;c<l;c++){let u=Tt.PATTERNS[c],h=It.patternMatchVariance(e,u,Tt.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,i=c):h===n&&(i=-1)}if(i>=0)return i%10;throw new ee}}Tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Tt.MAX_AVG_VARIANCE=.38,Tt.MAX_INDIVIDUAL_VARIANCE=.5,Tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Tt.START_PATTERN=Int32Array.from([1,1,1,1]),Tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Xt extends It{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,l=0,c=Int32Array.from([0,0,0]);for(;!n;){c=Int32Array.from([0,0,0]),i=Xt.findGuardPattern(e,l,!1,this.START_END_PATTERN,c);let u=i[0];l=i[1];let h=u-(l-u);h>=0&&(n=e.isRange(h,u,!1))}return i}static checkChecksum(e){return Xt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return Xt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new $;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new $;i+=c}return(1e3-i)%10}static decodeEnd(e,n){return Xt.findGuardPattern(e,n,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,l){return this.findGuardPattern(e,n,i,l,new Int32Array(l.length))}static findGuardPattern(e,n,i,l,c){let u=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let h=0,m=n,v=l.length,T=i;for(let O=n;O<u;O++)if(e.get(O)!==T)c[h]++;else{if(h===v-1){if(It.patternMatchVariance(c,l,Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return Int32Array.from([m,O]);m+=c[0]+c[1];let D=c.slice(2,c.length-1);for(let V=0;V<h-1;V++)c[V]=D[V];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,T=!T}throw new ee}static decodeDigit(e,n,i,l){this.recordPattern(e,i,n);let c=this.MAX_AVG_VARIANCE,u=-1,h=l.length;for(let m=0;m<h;m++){let v=l[m],T=It.patternMatchVariance(n,v,Xt.MAX_INDIVIDUAL_VARIANCE);T<c&&(c=T,u=m)}if(u>=0)return u;throw new ee}}Xt.MAX_AVG_VARIANCE=.48,Xt.MAX_INDIVIDUAL_VARIANCE=.7,Xt.START_END_PATTERN=Int32Array.from([1,1,1]),Xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class zr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=zr.parseExtensionString(u),m=[new Ne((i[0]+i[1])/2,e),new Ne(c,e)],v=new Ve(u,null,0,m,we.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let v=0;v<5&&u<c;v++){let T=Xt.decodeDigit(e,l,u,Xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+T%10);for(let O of l)u+=O;T>=10&&(h|=1<<4-v),v!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==5)throw new ee;let m=this.determineCheckDigit(h);if(zr.extensionChecksum(i.toString())!==m)throw new ee;return u}static extensionChecksum(e){let n=e.length,i=0;for(let l=n-2;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;i*=3;for(let l=n-1;l>=0;l-=2)i+=e.charAt(l).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new ee}static parseExtensionString(e){if(e.length!==5)return null;let n=zr.parseExtension5String(e);return n==null?null:new Map([[ze.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),l=(i/100).toString(),c=i%100,u=c<10?"0"+c:c.toString();return n+l+"."+u}}class ei{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(n,i,l),u=l.toString(),h=ei.parseExtensionString(u),m=[new Ne((i[0]+i[1])/2,e),new Ne(c,e)],v=new Ve(u,null,0,m,we.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&v.putAllMetadata(h),v}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let m=0;m<2&&u<c;m++){let v=Xt.decodeDigit(e,l,u,Xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let T of l)u+=T;v>=10&&(h|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(i.length!==2)throw new ee;if(parseInt(i.toString())%4!==h)throw new ee;return u}static parseExtensionString(e){return e.length!==2?null:new Map([[ze.ISSUE_NUMBER,parseInt(e)]])}}class ji{static decodeRow(e,n,i){let l=Xt.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new zr().decodeRow(e,n,l)}catch{return new ei().decodeRow(e,n,l)}}}ji.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class vt extends Xt{constructor(){super(),this.decodeRowStringBuffer="",vt.L_AND_G_PATTERNS=vt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=vt.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let l=0;l<n.length;l++)i[l]=n[n.length-l-1];vt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let l=vt.findStartGuardPattern(n),c=i==null?null:i.get(ue.NEED_RESULT_POINT_CALLBACK);if(c!=null){const xe=new Ne((l[0]+l[1])/2,e);c.foundPossibleResultPoint(xe)}let u=this.decodeMiddle(n,l,this.decodeRowStringBuffer),h=u.rowOffset,m=u.resultString;if(c!=null){const xe=new Ne(h,e);c.foundPossibleResultPoint(xe)}let v=this.decodeEnd(n,h);if(c!=null){const xe=new Ne((v[0]+v[1])/2,e);c.foundPossibleResultPoint(xe)}let T=v[1],O=T+(T-v[0]);if(O>=n.getSize()||!n.isRange(T,O,!1))throw new ee;let D=m.toString();if(D.length<8)throw new $;if(!vt.checkChecksum(D))throw new k;let V=(l[1]+l[0])/2,G=(v[1]+v[0])/2,K=this.getBarcodeFormat(),Q=[new Ne(V,e),new Ne(G,e)],se=new Ve(D,null,0,Q,K,new Date().getTime()),Ae=0;try{let xe=ji.decodeRow(e,n,v[1]);se.putMetadata(ze.UPC_EAN_EXTENSION,xe.getText()),se.putAllMetadata(xe.getResultMetadata()),se.addResultPoints(xe.getResultPoints()),Ae=xe.getText().length}catch{}let Se=i==null?null:i.get(ue.ALLOWED_EAN_EXTENSIONS);if(Se!=null){let xe=!1;for(let Et in Se)if(Ae.toString()===Et){xe=!0;break}if(!xe)throw new ee}return se}decodeEnd(e,n){return vt.findGuardPattern(e,n,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return vt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return vt.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let l=n-1;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new $;i+=c}i*=3;for(let l=n-2;l>=0;l-=2){let c=e.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new $;i+=c}return(1e3-i)%10}}class Yn extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1],h=0;for(let v=0;v<6&&u<c;v++){let T=vt.decodeDigit(e,l,u,vt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+T%10);for(let O of l)u+=O;T>=10&&(h|=1<<5-v)}i=Yn.determineFirstDigit(i,h),u=vt.findGuardPattern(e,u,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&u<c;v++){let T=vt.decodeDigit(e,l,u,vt.L_PATTERNS);i+=String.fromCharCode(48+T);for(let O of l)u+=O}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ee}}Yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ws extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u=n[1];for(let m=0;m<4&&u<c;m++){let v=vt.decodeDigit(e,l,u,vt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let T of l)u+=T}u=vt.findGuardPattern(e,u,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&u<c;m++){let v=vt.decodeDigit(e,l,u,vt.L_PATTERNS);i+=String.fromCharCode(48+v);for(let T of l)u+=T}return{rowOffset:u,resultString:i}}getBarcodeFormat(){return we.EAN_8}}class Vi extends vt{constructor(){super(...arguments),this.ean13Reader=new Yn}getBarcodeFormat(){return we.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new Ve(n.substring(1),null,null,e.getResultPoints(),we.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ee}reset(){this.ean13Reader.reset()}}class Kn extends vt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const l=this.decodeMiddleCounters.map(v=>v);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=e.getSize();let u=n[1],h=0;for(let v=0;v<6&&u<c;v++){const T=Kn.decodeDigit(e,l,u,Kn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+T%10);for(let O of l)u+=O;T>=10&&(h|=1<<5-v)}let m=Kn.determineNumSysAndCheckDigit(i,h);return{rowOffset:u,resultString:m}}decodeEnd(e,n){return Kn.findGuardPatternWithoutCounters(e,n,!0,Kn.MIDDLE_END_PATTERN)}checkChecksum(e){return vt.checkChecksum(Kn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let l=0;l<10;l++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][l]){let c=String.fromCharCode(48+i),u=String.fromCharCode(48+l);return c+e+u}throw ee.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),i=new Oe;i.append(e.charAt(0));let l=n[5];switch(l){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(l),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(l);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ui extends It{constructor(e){super();let n=e==null?null:e.get(ue.POSSIBLE_FORMATS),i=[];d(n)?(i.push(new Yn),i.push(new Vi),i.push(new ws),i.push(new Kn)):(n.indexOf(we.EAN_13)>-1&&i.push(new Yn),n.indexOf(we.UPC_A)>-1&&i.push(new Vi),n.indexOf(we.EAN_8)>-1&&i.push(new ws),n.indexOf(we.UPC_E)>-1&&i.push(new Kn)),this.readers=i}decodeRow(e,n,i){for(let l of this.readers)try{const c=l.decodeRow(e,n,i),u=c.getBarcodeFormat()===we.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(ue.POSSIBLE_FORMATS),m=h==null||h.includes(we.UPC_A);if(u&&m){const v=c.getRawBytes(),T=new Ve(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),we.UPC_A);return T.putAllMetadata(c.getResultMetadata()),T}return c}catch{}throw new ee}reset(){for(let e of this.readers)e.reset()}}class sn extends It{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(It.patternMatchVariance(e,n[i],sn.MAX_INDIVIDUAL_VARIANCE)<sn.MAX_AVG_VARIANCE)return i;throw new ee}static count(e){return ht.sum(new Int32Array(e))}static increment(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]>l&&(l=n[c],i=c);e[i]++}static decrement(e,n){let i=0,l=n[0];for(let c=1;c<e.length;c++)n[c]<l&&(l=n[c],i=c);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],l=n/i;if(l>=sn.MIN_FINDER_PATTERN_RATIO&&l<=sn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of e)h>u&&(u=h),h<c&&(c=h);return u<10*c}return!1}}sn.MAX_AVG_VARIANCE=.2,sn.MAX_INDIVIDUAL_VARIANCE=.45,sn.MIN_FINDER_PATTERN_RATIO=9.5/12,sn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Tr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Tr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ti{constructor(e,n,i,l,c){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Ne(i,c)),this.resultPoints.push(new Ne(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof ti))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class En{constructor(){}static getRSSvalue(e,n,i){let l=0;for(let m of e)l+=m;let c=0,u=0,h=e.length;for(let m=0;m<h-1;m++){let v;for(v=1,u|=1<<m;v<e[m];v++,u&=~(1<<m)){let T=En.combins(l-v-1,h-m-2);if(i&&u===0&&l-v-(h-m-1)>=h-m-1&&(T-=En.combins(l-v-(h-m),h-m-2)),h-m-1>1){let O=0;for(let D=l-v-(h-m-2);D>n;D--)O+=En.combins(l-v-D-1,h-m-3);T-=O*(h-1-m)}else l-v>n&&T--;c+=T}l-=v}return c}static combins(e,n){let i,l;e-n>n?(l=n,i=e-n):(l=e-n,i=n);let c=1,u=1;for(let h=e;h>i;h--)c*=h,u<=l&&(c/=u,u++);for(;u<=l;)c/=u,u++;return c}}class zi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,l=new J(i),c=0,h=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)h&1<<m&&l.set(c),c++;for(let m=1;m<e.length;++m){let v=e[m],T=v.getLeftChar().getValue();for(let O=11;O>=0;--O)T&1<<O&&l.set(c),c++;if(v.getRightChar()!=null){let O=v.getRightChar().getValue();for(let D=11;D>=0;--D)O&1<<D&&l.set(c),c++}}return l}}class rr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ni{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class fn extends ni{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===fn.FNC1}}fn.FNC1="$";class ir extends ni{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class bn extends ni{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new $;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===bn.FNC1}isSecondDigitFNC1(){return this.secondDigit===bn.FNC1}isAnyFNC1(){return this.firstDigit===bn.FNC1||this.secondDigit===bn.FNC1}}bn.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ee;let n=e.substring(0,2);for(let c of De.TWO_DIGIT_DATA_LENGTH)if(c[0]===n)return c[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,c[2],e):De.processFixedAI(2,c[1],e);if(e.length<3)throw new ee;let i=e.substring(0,3);for(let c of De.THREE_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,c[2],e):De.processFixedAI(3,c[1],e);for(let c of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,c[2],e):De.processFixedAI(4,c[1],e);if(e.length<4)throw new ee;let l=e.substring(0,4);for(let c of De.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,c[2],e):De.processFixedAI(4,c[1],e);throw new ee}static processFixedAI(e,n,i){if(i.length<e)throw new ee;let l=i.substring(0,e);if(i.length<e+n)throw new ee;let c=i.substring(e,e+n),u=i.substring(e+n),h="("+l+")"+c,m=De.parseFieldsInGeneralPurpose(u);return m==null?h:h+m}static processVariableAI(e,n,i){let l=i.substring(0,e),c;i.length<e+n?c=i.length:c=e+n;let u=i.substring(e,c),h=i.substring(c),m="("+l+")"+u,v=De.parseFieldsInGeneralPurpose(h);return v==null?m:m+v}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class ri{constructor(e){this.buffer=new Oe,this.information=e}decodeAllCodes(e,n){let i=n,l=null;do{let c=this.decodeGeneralPurposeField(i,l),u=De.parseFieldsInGeneralPurpose(c.getNewString());if(u!=null&&e.append(u),c.isRemaining()?l=""+c.getRemainingValue():l=null,i===c.getNewPosition())break;i=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new bn(this.information.getSize(),bn.FNC1,bn.FNC1):new bn(this.information.getSize(),c-1,bn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,l=(n-8)%11;return new bn(e+7,i,l)}extractNumericValueFromBitArray(e,n){return ri.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let l=0;for(let c=0;c<i;++c)e.get(n+c)&&(l|=1<<i-c-1);return l}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new ir(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new ir(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new ir(this.current.getPosition(),this.buffer.toString()):n=new ir(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new rr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new ir(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ir(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ir(this.current.getPosition(),this.buffer.toString());return new rr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(e,8);return l>=232&&l<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new fn(e+7,""+(i+1));if(i>=90&&i<116)return new fn(e+7,""+(i+7));let l=this.extractNumericValueFromBitArray(e,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new $}return new fn(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new fn(e+5,fn.FNC1);if(n>=5&&n<15)return new fn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new fn(e+6,""+(i+33));let l;switch(i){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Bt("Decoding invalid alphanumeric value: "+i)}return new fn(e+6,l)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class vs{constructor(e){this.information=e,this.generalDecoder=new ri(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class In extends vs{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*l,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}In.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let l=0;l<13;l++){let c=e.charAt(l+n).charCodeAt(0)-48;i+=l&1?c:3*c}i=10-i%10,i===10&&(i=0),e.append(i)}}In.GTIN_SIZE=40;class Zn extends In{constructor(e){super(e)}parseInformation(){let e=new Oe;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Zn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Zn.HEADER_SIZE+44)}}Zn.HEADER_SIZE=4;class wi extends vs{constructor(e){super(e)}parseInformation(){let e=new Oe;return this.getGeneralDecoder().decodeAllCodes(e,wi.HEADER_SIZE)}}wi.HEADER_SIZE=5;class Wr extends In{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,l);let c=this.checkWeight(l),u=1e5;for(let h=0;h<5;++h)c/u===0&&e.append("0"),u/=10;e.append(c)}}class fr extends Wr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=fr.HEADER_SIZE+Wr.GTIN_SIZE+fr.WEIGHT_SIZE)throw new ee;let e=new Oe;return this.encodeCompressedGtin(e,fr.HEADER_SIZE),this.encodeCompressedWeight(e,fr.HEADER_SIZE+Wr.GTIN_SIZE,fr.WEIGHT_SIZE),e.toString()}}fr.HEADER_SIZE=5,fr.WEIGHT_SIZE=15;class Cs extends fr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Le extends fr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class qe extends In{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<qe.HEADER_SIZE+In.GTIN_SIZE)throw new ee;let e=new Oe;this.encodeCompressedGtin(e,qe.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(qe.HEADER_SIZE+In.GTIN_SIZE,qe.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(qe.HEADER_SIZE+In.GTIN_SIZE+qe.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}qe.HEADER_SIZE=8,qe.LAST_DIGIT_SIZE=2;class Ge extends In{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ge.HEADER_SIZE+In.GTIN_SIZE)throw new ee;let e=new Oe;this.encodeCompressedGtin(e,Ge.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ge.HEADER_SIZE+In.GTIN_SIZE,Ge.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Ge.HEADER_SIZE+In.GTIN_SIZE+Ge.LAST_DIGIT_SIZE,Ge.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ge.HEADER_SIZE+In.GTIN_SIZE+Ge.LAST_DIGIT_SIZE+Ge.FIRST_THREE_DIGITS_SIZE,null);return e.append(l.getNewString()),e.toString()}}Ge.HEADER_SIZE=8,Ge.LAST_DIGIT_SIZE=2,Ge.FIRST_THREE_DIGITS_SIZE=10;class rt extends Wr{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=rt.HEADER_SIZE+rt.GTIN_SIZE+rt.WEIGHT_SIZE+rt.DATE_SIZE)throw new ee;let e=new Oe;return this.encodeCompressedGtin(e,rt.HEADER_SIZE),this.encodeCompressedWeight(e,rt.HEADER_SIZE+rt.GTIN_SIZE,rt.WEIGHT_SIZE),this.encodeCompressedDate(e,rt.HEADER_SIZE+rt.GTIN_SIZE+rt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,rt.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let l=i%32;i/=32;let c=i%12+1;i/=12;let u=i;u/10==0&&e.append("0"),e.append(u),c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}rt.HEADER_SIZE=8,rt.WEIGHT_SIZE=20,rt.DATE_SIZE=16;function Ke(_){try{if(_.get(1))return new Zn(_);if(!_.get(2))return new wi(_);switch(ri.extractNumericValueFromBitArray(_,1,4)){case 4:return new Cs(_);case 5:return new Le(_)}switch(ri.extractNumericValueFromBitArray(_,1,5)){case 12:return new qe(_);case 13:return new Ge(_)}switch(ri.extractNumericValueFromBitArray(_,1,7)){case 56:return new rt(_,"310","11");case 57:return new rt(_,"320","11");case 58:return new rt(_,"310","13");case 59:return new rt(_,"320","13");case 60:return new rt(_,"310","15");case 61:return new rt(_,"320","15");case 62:return new rt(_,"310","17");case 63:return new rt(_,"320","17")}}catch(e){throw console.log(e),new Bt("unknown decoder: "+_)}}class gt{constructor(e,n,i,l){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof gt?gt.equalsOrNull(e.leftchar,n.leftchar)&&gt.equalsOrNull(e.rightchar,n.rightchar)&&gt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:gt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Es{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Es?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((l,c)=>{n.forEach(u=>{l.getLeftChar().getValue()===u.getLeftChar().getValue()&&l.getRightChar().getValue()===u.getRightChar().getValue()&&l.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(i=!0)})}),i}}class pe extends sn{constructor(e){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(e,n))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;i=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(e,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ee}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let l=this.rows[i];this.pairs.length=0;for(let u of e)this.pairs.push(u.getPairs());if(this.pairs.push(l.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(l);try{return this.checkRows(c,i+1)}catch(u){this.verbose&&console.log(u)}}throw new ee}static isValidSequence(e){for(let n of pe.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!=n[l]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,l=!1,c=!1;for(;i<this.rows.length;){let u=this.rows[i];if(u.getRowNumber()>e){c=u.isEquivalent(this.pairs);break}l=u.isEquivalent(this.pairs),i++}c||l||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Es(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let l of i.getPairs())for(let c of e)if(gt.equals(l,c))break}}static isPartialRow(e,n){for(let i of n){let l=!0;for(let c of e){let u=!1;for(let h of i.getPairs())if(c.equals(h)){u=!0;break}if(!u){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=zi.buildBitArray(e),l=Ke(n).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),u=e[e.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],u[0],u[1]];return new Ve(l,null,null,h,we.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let l=i.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let m=this.pairs.get(h);l+=m.getLeftChar().getChecksumPortion(),c++;let v=m.getRightChar();v!=null&&(l+=v.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let l=n.length%2==0;this.startFromEven&&(l=!l);let c,u=!0,h=-1;do this.findNextPair(e,n,h),c=this.parseFoundFinderPattern(e,i,l),c==null?h=pe.getNextSecondBar(e,this.startEnd[0]):u=!1;while(u);let m=this.decodeDataCharacter(e,c,l,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ee;let v;try{v=this.decodeDataCharacter(e,c,l,!1)}catch(T){v=null,this.verbose&&console.log(T)}return new gt(m,v,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=e.getSize(),u;i>=0?u=i:this.isEmptyPair(n)?u=0:u=n[n.length-1].getFinderPattern().getStartEnd()[1];let h=n.length%2!=0;this.startFromEven&&(h=!h);let m=!1;for(;u<c&&(m=!e.get(u),!!m);)u++;let v=0,T=u;for(let O=u;O<c;O++)if(e.get(O)!=m)l[v]++;else{if(v==3){if(h&&pe.reverseCounters(l),pe.isFinderPattern(l)){this.startEnd[0]=T,this.startEnd[1]=O;return}h&&pe.reverseCounters(l),T+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,v--}else v++;l[v]=1,m=!m}throw new ee}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let l=e[i];e[i]=e[n-i-1],e[n-i-1]=l}}parseFoundFinderPattern(e,n,i){let l,c,u;if(i){let v=this.startEnd[0]-1;for(;v>=0&&!e.get(v);)v--;v++,l=this.startEnd[0]-v,c=v,u=this.startEnd[1]}else c=this.startEnd[0],u=e.getNextUnset(this.startEnd[1]+1),l=u-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=l;let m;try{m=this.parseFinderValue(h,pe.FINDER_PATTERNS)}catch{return null}return new ti(m,[c,u],c,u,n)}decodeDataCharacter(e,n,i,l){let c=this.getDataCharacterCounters();for(let Ft=0;Ft<c.length;Ft++)c[Ft]=0;if(l)pe.recordPatternInReverse(e,n.getStartEnd()[0],c);else{pe.recordPattern(e,n.getStartEnd()[1],c);for(let Ft=0,on=c.length-1;Ft<on;Ft++,on--){let Un=c[Ft];c[Ft]=c[on],c[on]=Un}}let u=17,h=ht.sum(new Int32Array(c))/u,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new ee;let v=this.getOddCounts(),T=this.getEvenCounts(),O=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Ft=0;Ft<c.length;Ft++){let on=1*c[Ft]/h,Un=on+.5;if(Un<1){if(on<.3)throw new ee;Un=1}else if(Un>8){if(on>8.7)throw new ee;Un=8}let Si=Ft/2;Ft&1?(T[Si]=Un,D[Si]=on-Un):(v[Si]=Un,O[Si]=on-Un)}this.adjustOddEvenCounts(u);let V=4*n.getValue()+(i?0:2)+(l?0:1)-1,G=0,K=0;for(let Ft=v.length-1;Ft>=0;Ft--){if(pe.isNotA1left(n,i,l)){let on=pe.WEIGHTS[V][2*Ft];K+=v[Ft]*on}G+=v[Ft]}let Q=0;for(let Ft=T.length-1;Ft>=0;Ft--)if(pe.isNotA1left(n,i,l)){let on=pe.WEIGHTS[V][2*Ft+1];Q+=T[Ft]*on}let se=K+Q;if(G&1||G>13||G<4)throw new ee;let Ae=(13-G)/2,Se=pe.SYMBOL_WIDEST[Ae],xe=9-Se,Et=En.getRSSvalue(v,Se,!0),lt=En.getRSSvalue(T,xe,!1),qn=pe.EVEN_TOTAL_SUBSET[Ae],Ar=pe.GSUM[Ae],wn=Et*qn+lt+Ar;return new Tr(wn,se)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=ht.sum(new Int32Array(this.getOddCounts())),i=ht.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;n>13?c=!0:n<4&&(l=!0);let u=!1,h=!1;i>13?h=!0:i<4&&(u=!0);let m=n+i-e,v=(n&1)==1,T=(i&1)==0;if(m==1)if(v){if(T)throw new ee;c=!0}else{if(!T)throw new ee;h=!0}else if(m==-1)if(v){if(T)throw new ee;l=!0}else{if(!T)throw new ee;u=!0}else if(m==0){if(v){if(!T)throw new ee;n<i?(l=!0,h=!0):(c=!0,u=!0)}else if(T)throw new ee}else throw new ee;if(l){if(c)throw new ee;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new ee;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class As extends Tr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends sn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const l=this.decodePair(n,!1,e,i);Nt.addOrTally(this.possibleLeftPairs,l),n.reverse();let c=this.decodePair(n,!0,e,i);Nt.addOrTally(this.possibleRightPairs,c),n.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Nt.checkChecksum(u,h))return Nt.constructResult(u,h)}throw new ee}static addOrTally(e,n){if(n==null)return;let i=!1;for(let l of e)if(l.getValue()===n.getValue()){l.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),l=new String(i).toString(),c=new Oe;for(let v=13-l.length;v>0;v--)c.append("0");c.append(l);let u=0;for(let v=0;v<13;v++){let T=c.charAt(v).charCodeAt(0)-48;u+=v&1?T:3*T}u=10-u%10,u===10&&(u=0),c.append(u.toString());let h=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new Ve(c.toString(),null,0,[h[0],h[1],m[0],m[1]],we.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,l=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,i===l}decodePair(e,n,i,l){try{let c=this.findFinderPattern(e,n),u=this.parseFoundFinderPattern(e,i,n,c),h=l==null?null:l.get(ue.NEED_RESULT_POINT_CALLBACK);if(h!=null){let T=(c[0]+c[1])/2;n&&(T=e.getSize()-1-T),h.foundPossibleResultPoint(new Ne(T,i))}let m=this.decodeDataCharacter(e,u,!0),v=this.decodeDataCharacter(e,u,!1);return new As(1597*m.getValue()+v.getValue(),m.getChecksumPortion()+4*v.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(e,n,i){let l=this.getDataCharacterCounters();for(let Q=0;Q<l.length;Q++)l[Q]=0;if(i)It.recordPatternInReverse(e,n.getStartEnd()[0],l);else{It.recordPattern(e,n.getStartEnd()[1]+1,l);for(let Q=0,se=l.length-1;Q<se;Q++,se--){let Ae=l[Q];l[Q]=l[se],l[se]=Ae}}let c=i?16:15,u=ht.sum(new Int32Array(l))/c,h=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let Q=0;Q<l.length;Q++){let se=l[Q]/u,Ae=Math.floor(se+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let Se=Math.floor(Q/2);Q&1?(m[Se]=Ae,T[Se]=se-Ae):(h[Se]=Ae,v[Se]=se-Ae)}this.adjustOddEvenCounts(i,c);let O=0,D=0;for(let Q=h.length-1;Q>=0;Q--)D*=9,D+=h[Q],O+=h[Q];let V=0,G=0;for(let Q=m.length-1;Q>=0;Q--)V*=9,V+=m[Q],G+=m[Q];let K=D+3*V;if(i){if(O&1||O>12||O<4)throw new ee;let Q=(12-O)/2,se=Nt.OUTSIDE_ODD_WIDEST[Q],Ae=9-se,Se=En.getRSSvalue(h,se,!1),xe=En.getRSSvalue(m,Ae,!0),Et=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[Q],lt=Nt.OUTSIDE_GSUM[Q];return new Tr(Se*Et+xe+lt,K)}else{if(G&1||G>10||G<4)throw new ee;let Q=(10-G)/2,se=Nt.INSIDE_ODD_WIDEST[Q],Ae=9-se,Se=En.getRSSvalue(h,se,!0),xe=En.getRSSvalue(m,Ae,!1),Et=Nt.INSIDE_ODD_TOTAL_SUBSET[Q],lt=Nt.INSIDE_GSUM[Q];return new Tr(xe*Et+Se+lt,K)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),c=!1,u=0;for(;u<l&&(c=!e.get(u),n!==c);)u++;let h=0,m=u;for(let v=u;v<l;v++)if(e.get(v)!==c)i[h]++;else{if(h===3){if(sn.isFinderPattern(i))return[m,v];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,c=!c}throw new ee}parseFoundFinderPattern(e,n,i,l){let c=e.get(l[0]),u=l[0]-1;for(;u>=0&&c!==e.get(u);)u--;u++;const h=l[0]-u,m=this.getDecodeFinderCounters(),v=new Int32Array(m.length);B.arraycopy(m,0,v,1,m.length-1),v[0]=h;const T=this.parseFinderValue(v,Nt.FINDER_PATTERNS);let O=u,D=l[1];return i&&(O=e.getSize()-1-O,D=e.getSize()-1-D),new ti(T,[u,l[1]],O,D,n)}adjustOddEvenCounts(e,n){let i=ht.sum(new Int32Array(this.getOddCounts())),l=ht.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1,h=!1,m=!1;e?(i>12?u=!0:i<4&&(c=!0),l>12?m=!0:l<4&&(h=!0)):(i>11?u=!0:i<5&&(c=!0),l>10?m=!0:l<4&&(h=!0));let v=i+l-n,T=(i&1)===(e?1:0),O=(l&1)===1;if(v===1)if(T){if(O)throw new ee;u=!0}else{if(!O)throw new ee;m=!0}else if(v===-1)if(T){if(O)throw new ee;c=!0}else{if(!O)throw new ee;h=!0}else if(v===0){if(T){if(!O)throw new ee;i<l?(c=!0,m=!0):(u=!0,h=!0)}else if(O)throw new ee}else throw new ee;if(c){if(u)throw new ee;sn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&sn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new ee;sn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&sn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class sr extends It{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(ue.POSSIBLE_FORMATS):null,l=e&&e.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(we.EAN_13)||i.includes(we.UPC_A)||i.includes(we.EAN_8)||i.includes(we.UPC_E))&&this.readers.push(new Ui(e)),i.includes(we.CODE_39)&&this.readers.push(new Vt(l)),i.includes(we.CODE_128)&&this.readers.push(new be),i.includes(we.ITF)&&this.readers.push(new Tt),i.includes(we.RSS_14)&&this.readers.push(new Nt),i.includes(we.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new Ui(e)),this.readers.push(new Vt),this.readers.push(new Ui(e)),this.readers.push(new be),this.readers.push(new Tt),this.readers.push(new Nt),this.readers.push(new pe(this.verbose)))}decodeRow(e,n,i){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(e,n,i)}catch{}throw new ee}reset(){this.readers.forEach(e=>e.reset())}}class Uo extends Ee{constructor(e=500,n){super(new sr(n),e,n)}}class Ct{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Rt{constructor(e,n,i,l,c,u){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=u;let h=0;const m=u.getECCodewords(),v=u.getECBlocks();for(let T of v)h+=T.getCount()*(T.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new $;for(let i of Rt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new Rt(1,10,10,8,8,new Ct(5,new ut(1,3))),new Rt(2,12,12,10,10,new Ct(7,new ut(1,5))),new Rt(3,14,14,12,12,new Ct(10,new ut(1,8))),new Rt(4,16,16,14,14,new Ct(12,new ut(1,12))),new Rt(5,18,18,16,16,new Ct(14,new ut(1,18))),new Rt(6,20,20,18,18,new Ct(18,new ut(1,22))),new Rt(7,22,22,20,20,new Ct(20,new ut(1,30))),new Rt(8,24,24,22,22,new Ct(24,new ut(1,36))),new Rt(9,26,26,24,24,new Ct(28,new ut(1,44))),new Rt(10,32,32,14,14,new Ct(36,new ut(1,62))),new Rt(11,36,36,16,16,new Ct(42,new ut(1,86))),new Rt(12,40,40,18,18,new Ct(48,new ut(1,114))),new Rt(13,44,44,20,20,new Ct(56,new ut(1,144))),new Rt(14,48,48,22,22,new Ct(68,new ut(1,174))),new Rt(15,52,52,24,24,new Ct(42,new ut(2,102))),new Rt(16,64,64,14,14,new Ct(56,new ut(2,140))),new Rt(17,72,72,16,16,new Ct(36,new ut(4,92))),new Rt(18,80,80,18,18,new Ct(48,new ut(4,114))),new Rt(19,88,88,20,20,new Ct(56,new ut(4,144))),new Rt(20,96,96,22,22,new Ct(68,new ut(4,174))),new Rt(21,104,104,24,24,new Ct(56,new ut(6,136))),new Rt(22,120,120,18,18,new Ct(68,new ut(6,175))),new Rt(23,132,132,20,20,new Ct(62,new ut(8,163))),new Rt(24,144,144,22,22,new Ct(62,new ut(8,156),new ut(2,155))),new Rt(25,8,18,6,16,new Ct(7,new ut(1,5))),new Rt(26,8,32,6,14,new Ct(11,new ut(1,10))),new Rt(27,12,26,10,24,new Ct(14,new ut(1,16))),new Rt(28,12,36,10,16,new Ct(18,new ut(1,22))),new Rt(29,16,36,14,16,new Ct(24,new ut(1,32))),new Rt(30,16,48,14,22,new Ct(28,new ut(1,49)))]}}Rt.VERSIONS=Rt.buildVersions();class or{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new $;this.version=or.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ke(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return Rt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,l=0;const c=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,m=!1,v=!1,T=!1;do if(i===c&&l===0&&!h)e[n++]=this.readCorner1(c,u)&255,i-=2,l+=2,h=!0;else if(i===c-2&&l===0&&u&3&&!m)e[n++]=this.readCorner2(c,u)&255,i-=2,l+=2,m=!0;else if(i===c+4&&l===2&&!(u&7)&&!v)e[n++]=this.readCorner3(c,u)&255,i-=2,l+=2,v=!0;else if(i===c-2&&l===0&&(u&7)===4&&!T)e[n++]=this.readCorner4(c,u)&255,i-=2,l+=2,T=!0;else{do i<c&&l>=0&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i-=2,l+=2;while(i>=0&&l<u);i+=1,l+=3;do i>=0&&l<u&&!this.readMappingMatrix.get(l,i)&&(e[n++]=this.readUtah(i,l,c,u)&255),i+=2,l-=2;while(i<c&&l>=0);i+=3,l+=1}while(i<c||l<u);if(n!==this.version.getTotalCodewords())throw new $;return e}readModule(e,n,i,l){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=l,e+=4-(l+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,l){let c=0;return this.readModule(e-2,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-2,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e-1,n,i,l)&&(c|=1),c<<=1,this.readModule(e,n-2,i,l)&&(c|=1),c<<=1,this.readModule(e,n-1,i,l)&&(c|=1),c<<=1,this.readModule(e,n,i,l)&&(c|=1),c}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new N("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),u=n/l|0,h=i/c|0,m=u*l,v=h*c,T=new ke(v,m);for(let O=0;O<u;++O){const D=O*l;for(let V=0;V<h;++V){const G=V*c;for(let K=0;K<l;++K){const Q=O*(l+2)+1+K,se=D+K;for(let Ae=0;Ae<c;++Ae){const Se=V*(c+2)+1+Ae;if(e.get(Se,Q)){const xe=G+Ae;T.set(xe,se)}}}}}return T}}class zo{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let l=0;const c=i.getECBlocks();for(let K of c)l+=K.getCount();const u=new Array(l);let h=0;for(let K of c)for(let Q=0;Q<K.getCount();Q++){const se=K.getDataCodewords(),Ae=i.getECCodewords()+se;u[h++]=new zo(se,new Uint8Array(Ae))}const v=u[0].codewords.length-i.getECCodewords(),T=v-1;let O=0;for(let K=0;K<T;K++)for(let Q=0;Q<h;Q++)u[Q].codewords[K]=e[O++];const D=n.getVersionNumber()===24,V=D?8:h;for(let K=0;K<V;K++)u[K].codewords[v-1]=e[O++];const G=u[0].codewords.length;for(let K=v;K<G;K++)for(let Q=0;Q<h;Q++){const se=D?(Q+8)%h:Q,Ae=D&&se>7?K-1:K;u[se].codewords[Ae]=e[O++]}if(O!==e.length)throw new N;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wo{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let n=0,i=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(i>0){const u=8-i,h=e<u?e:u,m=u-h,v=255>>8-h<<m;n=(c[l]&v)>>m,e-=h,i+=h,i===8&&(i=0,l++)}if(e>0){for(;e>=8;)n=n<<8|c[l]&255,l++,e-=8;if(e>0){const u=8-e,h=255>>u<<u;n=n<<e|(c[l]&h)>>u,i+=e}}return this.bitOffset=i,this.byteOffset=l,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xn;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(xn||(xn={}));class wr{static decode(e){const n=new Wo(e),i=new Oe,l=new Oe,c=new Array;let u=xn.ASCII_ENCODE;do if(u===xn.ASCII_ENCODE)u=this.decodeAsciiSegment(n,i,l);else{switch(u){case xn.C40_ENCODE:this.decodeC40Segment(n,i);break;case xn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case xn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case xn.BASE256_ENCODE:this.decodeBase256Segment(n,i,c);break;default:throw new $}u=xn.ASCII_ENCODE}while(u!==xn.PAD_ENCODE&&n.available()>0);return l.length()>0&&i.append(l.toString()),new mt(e,i.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,n,i){let l=!1;do{let c=e.readBits(8);if(c===0)throw new $;if(c<=128)return l&&(c+=128),n.append(String.fromCharCode(c-1)),xn.ASCII_ENCODE;if(c===129)return xn.PAD_ENCODE;if(c<=229){const u=c-130;u<10&&n.append("0"),n.append(""+u)}else switch(c){case 230:return xn.C40_ENCODE;case 231:return xn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return xn.ANSIX12_ENCODE;case 239:return xn.TEXT_ENCODE;case 240:return xn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new $;break}}while(e.available()>0);return xn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const l=[];let c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new $;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new $}c=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),c=0;break;default:throw new $}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,l=[],c=0;do{if(e.available()===8)return;const u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),l);for(let h=0;h<3;h++){const m=l[h];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else throw new $;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new $}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),i=!1):n.append(v),c=0}else throw new $;break;default:throw new $}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(let c=0;c<3;c++){const u=i[c];switch(u){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(u<14)n.append(String.fromCharCode(u+44));else if(u<40)n.append(String.fromCharCode(u+51));else throw new $;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let l=(e<<8)+n-1,c=Math.floor(l/1600);i[0]=c,l-=c*1600,c=Math.floor(l/40),i[1]=c,i[2]=l-c*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let l=e.readBits(6);if(l===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}l&32||(l|=64),n.append(String.fromCharCode(l))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let l=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),l++);let u;if(c===0?u=e.available()/8|0:c<250?u=c:u=250*(c-249)+this.unrandomize255State(e.readBits(8),l++),u<0)throw new $;const h=new Uint8Array(u);for(let m=0;m<u;m++){if(e.available()<8)throw new $;h[m]=this.unrandomize255State(e.readBits(8),l++)}i.push(h);try{n.append(Fe.decode(h,Re.ISO88591))}catch(m){throw new Bt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,l=e-i;return l>=0?l:l+256}}wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wr.TEXT_SHIFT2_SET_CHARS=wr.C40_SHIFT2_SET_CHARS,wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class eo{constructor(){this.rsDecoder=new Gt(Me.DATA_MATRIX_FIELD_256)}decode(e){const n=new or(e),i=n.getVersion(),l=n.readCodewords(),c=zo.getDataBlocks(l,i);let u=0;for(let v of c)u+=v.getNumDataCodewords();const h=new Uint8Array(u),m=c.length;for(let v=0;v<m;v++){const T=c[v],O=T.getCodewords(),D=T.getNumDataCodewords();this.correctErrors(O,D);for(let V=0;V<D;V++)h[V*m+v]=O[V]}return wr.decode(h)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class Yt{constructor(e){this.image=e,this.rectangleDetector=new ve(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new ee;n=this.shiftToModuleCenter(n);const i=n[0],l=n[1],c=n[2],u=n[3];let h=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1;(h&1)===1&&(h+=1),(m&1)===1&&(m+=1),4*h<7*m&&4*m<7*h&&(h=m=Math.max(h,m));let v=Yt.sampleGrid(this.image,i,l,c,u,h,m);return new Xn(v,[i,l,c,u])}static shiftPoint(e,n,i){let l=(n.getX()-e.getX())/(i+1),c=(n.getY()-e.getY())/(i+1);return new Ne(e.getX()+l,e.getY()+c)}static moveAway(e,n,i){let l=e.getX(),c=e.getY();return l<n?l-=1:l+=1,c<i?c-=1:c+=1,new Ne(l,c)}detectSolid1(e){let n=e[0],i=e[1],l=e[3],c=e[2],u=this.transitionsBetween(n,i),h=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),v=this.transitionsBetween(c,n),T=u,O=[c,n,i,l];return T>h&&(T=h,O[0]=n,O[1]=i,O[2]=l,O[3]=c),T>m&&(T=m,O[0]=i,O[1]=l,O[2]=c,O[3]=n),T>v&&(O[0]=l,O[1]=c,O[2]=n,O[3]=i),O}detectSolid2(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=Yt.shiftPoint(i,l,(u+1)*4),m=Yt.shiftPoint(l,i,(u+1)*4),v=this.transitionsBetween(h,n),T=this.transitionsBetween(m,c);return v<T?(e[0]=n,e[1]=i,e[2]=l,e[3]=c):(e[0]=i,e[1]=l,e[2]=c,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c),h=this.transitionsBetween(i,c),m=Yt.shiftPoint(n,i,(h+1)*4),v=Yt.shiftPoint(l,i,(u+1)*4);u=this.transitionsBetween(m,c),h=this.transitionsBetween(v,c);let T=new Ne(c.getX()+(l.getX()-i.getX())/(u+1),c.getY()+(l.getY()-i.getY())/(u+1)),O=new Ne(c.getX()+(n.getX()-i.getX())/(h+1),c.getY()+(n.getY()-i.getY())/(h+1));if(!this.isValid(T))return this.isValid(O)?O:null;if(!this.isValid(O))return T;let D=this.transitionsBetween(m,T)+this.transitionsBetween(v,T),V=this.transitionsBetween(m,O)+this.transitionsBetween(v,O);return D>V?T:O}shiftToModuleCenter(e){let n=e[0],i=e[1],l=e[2],c=e[3],u=this.transitionsBetween(n,c)+1,h=this.transitionsBetween(l,c)+1,m=Yt.shiftPoint(n,i,h*4),v=Yt.shiftPoint(l,i,u*4);u=this.transitionsBetween(m,c)+1,h=this.transitionsBetween(v,c)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let T=(n.getX()+i.getX()+l.getX()+c.getX())/4,O=(n.getY()+i.getY()+l.getY()+c.getY())/4;n=Yt.moveAway(n,T,O),i=Yt.moveAway(i,T,O),l=Yt.moveAway(l,T,O),c=Yt.moveAway(c,T,O);let D,V;return m=Yt.shiftPoint(n,i,h*4),m=Yt.shiftPoint(m,c,u*4),D=Yt.shiftPoint(i,n,h*4),D=Yt.shiftPoint(D,l,u*4),v=Yt.shiftPoint(l,c,h*4),v=Yt.shiftPoint(v,i,u*4),V=Yt.shiftPoint(c,l,h*4),V=Yt.shiftPoint(V,n,u*4),[m,D,v,V]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,l,c,u,h){return yt.getInstance().sampleGrid(e,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,n.getX(),n.getY(),c.getX(),c.getY(),l.getX(),l.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),l=Math.trunc(e.getY()),c=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.abs(u-l)>Math.abs(c-i);if(h){let K=i;i=l,l=K,K=c,c=u,u=K}let m=Math.abs(c-i),v=Math.abs(u-l),T=-m/2,O=l<u?1:-1,D=i<c?1:-1,V=0,G=this.image.get(h?l:i,h?i:l);for(let K=i,Q=l;K!==c;K+=D){let se=this.image.get(h?Q:K,h?K:Q);if(se!==G&&(V++,G=se),T+=v,T>0){if(Q===u)break;Q+=O,T-=m}}return V}}class vr{constructor(){this.decoder=new eo}decode(e,n=null){let i,l;if(n!=null&&n.has(ue.PURE_BARCODE)){const v=vr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(v),l=vr.NO_POINTS}else{const v=new Yt(e.getBlackMatrix()).detect();i=this.decoder.decode(v.getBits()),l=v.getPoints()}const c=i.getRawBytes(),u=new Ve(i.getText(),c,8*c.length,l,we.DATA_MATRIX,B.currentTimeMillis()),h=i.getByteSegments();h!=null&&u.putMetadata(ze.BYTE_SEGMENTS,h);const m=i.getECLevel();return m!=null&&u.putMetadata(ze.ERROR_CORRECTION_LEVEL,m),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new ee;const l=this.moduleSize(n,e);let c=n[1];const u=i[1];let h=n[0];const v=(i[0]-h+1)/l,T=(u-c+1)/l;if(v<=0||T<=0)throw new ee;const O=l/2;c+=O,h+=O;const D=new ke(v,T);for(let V=0;V<T;V++){const G=c+V*l;for(let K=0;K<v;K++)e.get(h+K*l,G)&&D.set(K,V)}return D}static moduleSize(e,n){const i=n.getWidth();let l=e[0];const c=e[1];for(;l<i&&n.get(l,c);)l++;if(l===i)throw new ee;const u=l-e[0];if(u===0)throw new ee;return u}}vr.NO_POINTS=[];class Dc extends Ee{constructor(e=500){super(new vr,e)}}var Wi;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(Wi||(Wi={}));class Ut{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,Ut.FOR_BITS.set(i,this),Ut.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ut.L;case"M":return Ut.M;case"Q":return Ut.Q;case"H":return Ut.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ut))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=Ut.FOR_BITS.size)throw new N;return Ut.FOR_BITS.get(e)}}Ut.FOR_BITS=new Map,Ut.FOR_VALUE=new Map,Ut.L=new Ut(Wi.L,"L",1),Ut.M=new Ut(Wi.M,"M",0),Ut.Q=new Ut(Wi.Q,"Q",3),Ut.H=new Ut(Wi.H,"H",2);class Tn{constructor(e){this.errorCorrectionLevel=Ut.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return z.bitCount(e^n)}static decodeFormatInformation(e,n){const i=Tn.doDecodeFormatInformation(e,n);return i!==null?i:Tn.doDecodeFormatInformation(e^Tn.FORMAT_INFO_MASK_QR,n^Tn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,l=0;for(const c of Tn.FORMAT_INFO_DECODE_LOOKUP){const u=c[0];if(u===e||u===n)return new Tn(c[1]);let h=Tn.numBitsDiffering(e,u);h<i&&(l=c[1],i=h),e!==n&&(h=Tn.numBitsDiffering(n,u),h<i&&(l=c[1],i=h))}return i<=3?new Tn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Tn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Tn.FORMAT_INFO_MASK_QR=21522,Tn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ne{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let l=0;const c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();for(const h of u)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new $;try{return this.getVersionForNumber((e-17)/4)}catch{throw new $}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return Ye.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let l=0;l<Ye.VERSION_DECODE_INFO.length;l++){const c=Ye.VERSION_DECODE_INFO[l];if(c===e)return Ye.getVersionForNumber(l+7);const u=Tn.numBitsDiffering(e,c);u<n&&(i=l+7,n=u)}return n<=3?Ye.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new ke(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let l=0;l<i;l++){const c=this.alignmentPatternCenters[l]-2;for(let u=0;u<i;u++)l===0&&(u===0||u===i-1)||l===i-1&&u===0||n.setRegion(this.alignmentPatternCenters[u]-2,c,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new ne(7,new F(1,19)),new ne(10,new F(1,16)),new ne(13,new F(1,13)),new ne(17,new F(1,9))),new Ye(2,Int32Array.from([6,18]),new ne(10,new F(1,34)),new ne(16,new F(1,28)),new ne(22,new F(1,22)),new ne(28,new F(1,16))),new Ye(3,Int32Array.from([6,22]),new ne(15,new F(1,55)),new ne(26,new F(1,44)),new ne(18,new F(2,17)),new ne(22,new F(2,13))),new Ye(4,Int32Array.from([6,26]),new ne(20,new F(1,80)),new ne(18,new F(2,32)),new ne(26,new F(2,24)),new ne(16,new F(4,9))),new Ye(5,Int32Array.from([6,30]),new ne(26,new F(1,108)),new ne(24,new F(2,43)),new ne(18,new F(2,15),new F(2,16)),new ne(22,new F(2,11),new F(2,12))),new Ye(6,Int32Array.from([6,34]),new ne(18,new F(2,68)),new ne(16,new F(4,27)),new ne(24,new F(4,19)),new ne(28,new F(4,15))),new Ye(7,Int32Array.from([6,22,38]),new ne(20,new F(2,78)),new ne(18,new F(4,31)),new ne(18,new F(2,14),new F(4,15)),new ne(26,new F(4,13),new F(1,14))),new Ye(8,Int32Array.from([6,24,42]),new ne(24,new F(2,97)),new ne(22,new F(2,38),new F(2,39)),new ne(22,new F(4,18),new F(2,19)),new ne(26,new F(4,14),new F(2,15))),new Ye(9,Int32Array.from([6,26,46]),new ne(30,new F(2,116)),new ne(22,new F(3,36),new F(2,37)),new ne(20,new F(4,16),new F(4,17)),new ne(24,new F(4,12),new F(4,13))),new Ye(10,Int32Array.from([6,28,50]),new ne(18,new F(2,68),new F(2,69)),new ne(26,new F(4,43),new F(1,44)),new ne(24,new F(6,19),new F(2,20)),new ne(28,new F(6,15),new F(2,16))),new Ye(11,Int32Array.from([6,30,54]),new ne(20,new F(4,81)),new ne(30,new F(1,50),new F(4,51)),new ne(28,new F(4,22),new F(4,23)),new ne(24,new F(3,12),new F(8,13))),new Ye(12,Int32Array.from([6,32,58]),new ne(24,new F(2,92),new F(2,93)),new ne(22,new F(6,36),new F(2,37)),new ne(26,new F(4,20),new F(6,21)),new ne(28,new F(7,14),new F(4,15))),new Ye(13,Int32Array.from([6,34,62]),new ne(26,new F(4,107)),new ne(22,new F(8,37),new F(1,38)),new ne(24,new F(8,20),new F(4,21)),new ne(22,new F(12,11),new F(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new ne(30,new F(3,115),new F(1,116)),new ne(24,new F(4,40),new F(5,41)),new ne(20,new F(11,16),new F(5,17)),new ne(24,new F(11,12),new F(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new ne(22,new F(5,87),new F(1,88)),new ne(24,new F(5,41),new F(5,42)),new ne(30,new F(5,24),new F(7,25)),new ne(24,new F(11,12),new F(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new ne(24,new F(5,98),new F(1,99)),new ne(28,new F(7,45),new F(3,46)),new ne(24,new F(15,19),new F(2,20)),new ne(30,new F(3,15),new F(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new ne(28,new F(1,107),new F(5,108)),new ne(28,new F(10,46),new F(1,47)),new ne(28,new F(1,22),new F(15,23)),new ne(28,new F(2,14),new F(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new ne(30,new F(5,120),new F(1,121)),new ne(26,new F(9,43),new F(4,44)),new ne(28,new F(17,22),new F(1,23)),new ne(28,new F(2,14),new F(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new ne(28,new F(3,113),new F(4,114)),new ne(26,new F(3,44),new F(11,45)),new ne(26,new F(17,21),new F(4,22)),new ne(26,new F(9,13),new F(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new ne(28,new F(3,107),new F(5,108)),new ne(26,new F(3,41),new F(13,42)),new ne(30,new F(15,24),new F(5,25)),new ne(28,new F(15,15),new F(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new ne(28,new F(4,116),new F(4,117)),new ne(26,new F(17,42)),new ne(28,new F(17,22),new F(6,23)),new ne(30,new F(19,16),new F(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new ne(28,new F(2,111),new F(7,112)),new ne(28,new F(17,46)),new ne(30,new F(7,24),new F(16,25)),new ne(24,new F(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new ne(30,new F(4,121),new F(5,122)),new ne(28,new F(4,47),new F(14,48)),new ne(30,new F(11,24),new F(14,25)),new ne(30,new F(16,15),new F(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new ne(30,new F(6,117),new F(4,118)),new ne(28,new F(6,45),new F(14,46)),new ne(30,new F(11,24),new F(16,25)),new ne(30,new F(30,16),new F(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new ne(26,new F(8,106),new F(4,107)),new ne(28,new F(8,47),new F(13,48)),new ne(30,new F(7,24),new F(22,25)),new ne(30,new F(22,15),new F(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new ne(28,new F(10,114),new F(2,115)),new ne(28,new F(19,46),new F(4,47)),new ne(28,new F(28,22),new F(6,23)),new ne(30,new F(33,16),new F(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new ne(30,new F(8,122),new F(4,123)),new ne(28,new F(22,45),new F(3,46)),new ne(30,new F(8,23),new F(26,24)),new ne(30,new F(12,15),new F(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new ne(30,new F(3,117),new F(10,118)),new ne(28,new F(3,45),new F(23,46)),new ne(30,new F(4,24),new F(31,25)),new ne(30,new F(11,15),new F(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new ne(30,new F(7,116),new F(7,117)),new ne(28,new F(21,45),new F(7,46)),new ne(30,new F(1,23),new F(37,24)),new ne(30,new F(19,15),new F(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new ne(30,new F(5,115),new F(10,116)),new ne(28,new F(19,47),new F(10,48)),new ne(30,new F(15,24),new F(25,25)),new ne(30,new F(23,15),new F(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new ne(30,new F(13,115),new F(3,116)),new ne(28,new F(2,46),new F(29,47)),new ne(30,new F(42,24),new F(1,25)),new ne(30,new F(23,15),new F(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new ne(30,new F(17,115)),new ne(28,new F(10,46),new F(23,47)),new ne(30,new F(10,24),new F(35,25)),new ne(30,new F(19,15),new F(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new ne(30,new F(17,115),new F(1,116)),new ne(28,new F(14,46),new F(21,47)),new ne(30,new F(29,24),new F(19,25)),new ne(30,new F(11,15),new F(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new ne(30,new F(13,115),new F(6,116)),new ne(28,new F(14,46),new F(23,47)),new ne(30,new F(44,24),new F(7,25)),new ne(30,new F(59,16),new F(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ne(30,new F(12,121),new F(7,122)),new ne(28,new F(12,47),new F(26,48)),new ne(30,new F(39,24),new F(14,25)),new ne(30,new F(22,15),new F(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ne(30,new F(6,121),new F(14,122)),new ne(28,new F(6,47),new F(34,48)),new ne(30,new F(46,24),new F(10,25)),new ne(30,new F(2,15),new F(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ne(30,new F(17,122),new F(4,123)),new ne(28,new F(29,46),new F(14,47)),new ne(30,new F(49,24),new F(10,25)),new ne(30,new F(24,15),new F(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ne(30,new F(4,122),new F(18,123)),new ne(28,new F(13,46),new F(32,47)),new ne(30,new F(48,24),new F(14,25)),new ne(30,new F(42,15),new F(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ne(30,new F(20,117),new F(4,118)),new ne(28,new F(40,47),new F(7,48)),new ne(30,new F(43,24),new F(22,25)),new ne(30,new F(10,15),new F(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ne(30,new F(19,118),new F(6,119)),new ne(28,new F(18,47),new F(31,48)),new ne(30,new F(34,24),new F(34,25)),new ne(30,new F(20,15),new F(61,16)))];var dn;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(dn||(dn={}));class xt{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let l=0;l<n;l++)this.isMasked(i,l)&&e.flip(l,i)}}xt.values=new Map([[dn.DATA_MASK_000,new xt(dn.DATA_MASK_000,(_,e)=>(_+e&1)===0)],[dn.DATA_MASK_001,new xt(dn.DATA_MASK_001,(_,e)=>(_&1)===0)],[dn.DATA_MASK_010,new xt(dn.DATA_MASK_010,(_,e)=>e%3===0)],[dn.DATA_MASK_011,new xt(dn.DATA_MASK_011,(_,e)=>(_+e)%3===0)],[dn.DATA_MASK_100,new xt(dn.DATA_MASK_100,(_,e)=>(Math.floor(_/2)+Math.floor(e/3)&1)===0)],[dn.DATA_MASK_101,new xt(dn.DATA_MASK_101,(_,e)=>_*e%6===0)],[dn.DATA_MASK_110,new xt(dn.DATA_MASK_110,(_,e)=>_*e%6<3)],[dn.DATA_MASK_111,new xt(dn.DATA_MASK_111,(_,e)=>(_+e+_*e%3&1)===0)]]);class qa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new $;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const n=this.bitMatrix.getHeight();let i=0;const l=n-7;for(let c=n-1;c>=l;c--)i=this.copyBit(8,c,i);for(let c=n-8;c<n;c++)i=this.copyBit(c,8,i);if(this.parsedFormatInfo=Tn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ye.getVersionForNumber(n);let i=0;const l=e-11;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(h,u,i);let c=Ye.decodeVersionInformation(i);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;i=0;for(let u=5;u>=0;u--)for(let h=e-9;h>=l;h--)i=this.copyBit(u,h,i);if(c=Ye.decodeVersionInformation(i),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new $}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=xt.values.get(e.getDataMask()),l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l);const c=n.buildFunctionPattern();let u=!0;const h=new Uint8Array(n.getTotalCodewords());let m=0,v=0,T=0;for(let O=l-1;O>0;O-=2){O===6&&O--;for(let D=0;D<l;D++){const V=u?l-1-D:D;for(let G=0;G<2;G++)c.get(O-G,V)||(T++,v<<=1,this.bitMatrix.get(O-G,V)&&(v|=1),T===8&&(h[m++]=v,T=0,v=0))}u=!u}if(m!==n.getTotalCodewords())throw new $;return h}remask(){if(this.parsedFormatInfo===null)return;const e=xt.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let l=n+1,c=e.getHeight();l<c;l++)e.get(n,l)!==e.get(l,n)&&(e.flip(l,n),e.flip(n,l))}}class to{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new N;const l=n.getECBlocksForLevel(i);let c=0;const u=l.getECBlocks();for(const G of u)c+=G.getCount();const h=new Array(c);let m=0;for(const G of u)for(let K=0;K<G.getCount();K++){const Q=G.getDataCodewords(),se=l.getECCodewordsPerBlock()+Q;h[m++]=new to(Q,new Uint8Array(se))}const v=h[0].codewords.length;let T=h.length-1;for(;T>=0&&h[T].codewords.length!==v;)T--;T++;const O=v-l.getECCodewordsPerBlock();let D=0;for(let G=0;G<O;G++)for(let K=0;K<m;K++)h[K].codewords[G]=e[D++];for(let G=T;G<m;G++)h[G].codewords[O]=e[D++];const V=h[0].codewords.length;for(let G=O;G<V;G++)for(let K=0;K<m;K++){const Q=K<T?G:G+1;h[K].codewords[Q]=e[D++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var $n;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})($n||($n={}));class Ze{constructor(e,n,i,l){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=l,Ze.FOR_BITS.set(l,this),Ze.FOR_VALUE.set(e,this)}static forBits(e){const n=Ze.FOR_BITS.get(e);if(n===void 0)throw new N;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ze))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze($n.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze($n.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze($n.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze($n.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze($n.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze($n.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze($n.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze($n.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze($n.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze($n.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(e,n,i,l){const c=new Wo(e);let u=new Oe;const h=new Array;let m=-1,v=-1;try{let T=null,O=!1,D;do{if(c.available()<4)D=Ze.TERMINATOR;else{const V=c.readBits(4);D=Ze.forBits(V)}switch(D){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:O=!0;break;case Ze.STRUCTURED_APPEND:if(c.available()<16)throw new $;m=c.readBits(8),v=c.readBits(8);break;case Ze.ECI:const V=Kt.parseECIValue(c);if(T=q.getCharacterSetECIByValue(V),T===null)throw new $;break;case Ze.HANZI:const G=c.readBits(4),K=c.readBits(D.getCharacterCountBits(n));G===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(c,u,K);break;default:const Q=c.readBits(D.getCharacterCountBits(n));switch(D){case Ze.NUMERIC:Kt.decodeNumericSegment(c,u,Q);break;case Ze.ALPHANUMERIC:Kt.decodeAlphanumericSegment(c,u,Q,O);break;case Ze.BYTE:Kt.decodeByteSegment(c,u,Q,T,h,l);break;case Ze.KANJI:Kt.decodeKanjiSegment(c,u,Q);break;default:throw new $}break}}while(D!==Ze.TERMINATOR)}catch{throw new $}return new mt(e,u.toString(),h.length===0?null:h,i===null?null:i.toString(),m,v)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new $;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,i--}try{n.append(Fe.decode(l,Re.GB2312))}catch(u){throw new $(u)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new $;const l=new Uint8Array(2*i);let c=0;for(;i>0;){const u=e.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,i--}try{n.append(Fe.decode(l,Re.SHIFT_JIS))}catch(u){throw new $(u)}}static decodeByteSegment(e,n,i,l,c,u){if(8*i>e.available())throw new $;const h=new Uint8Array(i);for(let v=0;v<i;v++)h[v]=e.readBits(8);let m;l===null?m=Re.guessEncoding(h,u):m=l.getName();try{n.append(Fe.decode(h,m))}catch(v){throw new $(v)}c.push(h)}static toAlphaNumericChar(e){if(e>=Kt.ALPHANUMERIC_CHARS.length)throw new $;return Kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,l){const c=n.length();for(;i>1;){if(e.available()<11)throw new $;const u=e.readBits(11);n.append(Kt.toAlphaNumericChar(Math.floor(u/45))),n.append(Kt.toAlphaNumericChar(u%45)),i-=2}if(i===1){if(e.available()<6)throw new $;n.append(Kt.toAlphaNumericChar(e.readBits(6)))}if(l)for(let u=c;u<n.length();u++)n.charAt(u)==="%"&&(u<n.length()-1&&n.charAt(u+1)==="%"?n.deleteCharAt(u+1):n.setCharAt(u,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new $;const l=e.readBits(10);if(l>=1e3)throw new $;n.append(Kt.toAlphaNumericChar(Math.floor(l/100))),n.append(Kt.toAlphaNumericChar(Math.floor(l/10)%10)),n.append(Kt.toAlphaNumericChar(l%10)),i-=3}if(i===2){if(e.available()<7)throw new $;const l=e.readBits(7);if(l>=100)throw new $;n.append(Kt.toAlphaNumericChar(Math.floor(l/10))),n.append(Kt.toAlphaNumericChar(l%10))}else if(i===1){if(e.available()<4)throw new $;const l=e.readBits(4);if(l>=10)throw new $;n.append(Kt.toAlphaNumericChar(l))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new $}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Ho{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Go{constructor(){this.rsDecoder=new Gt(Me.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(ke.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new qa(e);let l=null;try{return this.decodeBitMatrixParser(i,n)}catch(c){l=c}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const c=this.decodeBitMatrixParser(i,n);return c.setOther(new Ho(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(e,n){const i=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=to.getDataBlocks(c,i,l);let h=0;for(const T of u)h+=T.getNumDataCodewords();const m=new Uint8Array(h);let v=0;for(const T of u){const O=T.getCodewords(),D=T.getNumDataCodewords();this.correctErrors(O,D);for(let V=0;V<D;V++)m[v++]=O[V]}return Kt.decode(m,i,l,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new k}for(let l=0;l<n;l++)e[l]=i[l]}}class Hi extends Ne{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=(this.getX()+n)/2,c=(this.getY()+e)/2,u=(this.estimatedModuleSize+i)/2;return new Hi(l,c,u)}}class Cr{constructor(e,n,i,l,c,u,h){this.image=e,this.startX=n,this.startY=i,this.width=l,this.height=c,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,l=e+i,c=this.startY+n/2,u=new Int32Array(3),h=this.image;for(let m=0;m<n;m++){const v=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));u[0]=0,u[1]=0,u[2]=0;let T=e;for(;T<l&&!h.get(T,v);)T++;let O=0;for(;T<l;){if(h.get(T,v))if(O===1)u[1]++;else if(O===2){if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,v,T);if(D!==null)return D}u[0]=u[2],u[1]=1,u[2]=0,O=1}else u[++O]++;else O===1&&O++,u[O]++;T++}if(this.foundPatternCross(u)){const D=this.handlePossibleCenter(u,v,l);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let l=0;l<3;l++)if(Math.abs(n-e[l])>=i)return!1;return!0}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let m=e;for(;m>=0&&c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&!c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m)&&h[1]<=i;)h[1]++,m++;if(m===u||h[1]>i)return NaN;for(;m<u&&!c.get(n,m)&&h[2]<=i;)h[2]++,m++;if(h[2]>i)return NaN;const v=h[0]+h[1]+h[2];return 5*Math.abs(v-l)>=2*l?NaN:this.foundPatternCross(h)?Cr.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i){const l=e[0]+e[1]+e[2],c=Cr.centerFromEnd(e,i),u=this.crossCheckVertical(n,c,2*e[1],l);if(!isNaN(u)){const h=(e[0]+e[1]+e[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(h,u,c))return v.combineEstimate(u,c,h);const m=new Hi(c,u,h);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Nr extends Ne{constructor(e,n,i,l){super(e,n),this.estimatedModuleSize=i,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const l=Math.abs(e-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const l=this.count+1,c=(this.count*this.getX()+n)/l,u=(this.count*this.getY()+e)/l,h=(this.count*this.estimatedModuleSize+i)/l;return new Nr(c,u,h,l)}}class ii{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(ue.TRY_HARDER)!==void 0,i=e!=null&&e.get(ue.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),u=l.getWidth();let h=Math.floor(3*c/(4*Jt.MAX_MODULES));(h<Jt.MIN_SKIP||n)&&(h=Jt.MIN_SKIP);let m=!1;const v=new Int32Array(5);for(let O=h-1;O<c&&!m;O+=h){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let D=0;for(let V=0;V<u;V++)if(l.get(V,O))(D&1)===1&&D++,v[D]++;else if(D&1)v[D]++;else if(D===4)if(Jt.foundPatternCross(v)){if(this.handlePossibleCenter(v,O,V,i)===!0)if(h=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>v[2]&&(O+=K-v[2]-h,V=u-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;continue}D=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,D=3;else v[++D]++;Jt.foundPatternCross(v)&&this.handlePossibleCenter(v,O,u,i)===!0&&(h=v[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const T=this.selectBestPatterns();return Ne.orderBestPatterns(T),new ii(T)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let c=0;c<5;c++){const u=e[c];if(u===0)return!1;n+=u}if(n<7)return!1;const i=n/7,l=i/2;return Math.abs(i-e[0])<l&&Math.abs(i-e[1])<l&&Math.abs(3*i-e[2])<3*l&&Math.abs(i-e[3])<l&&Math.abs(i-e[4])<l}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,l){const c=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;e>=u&&n>=u&&h.get(n-u,e-u);)c[2]++,u++;if(e<u||n<u)return!1;for(;e>=u&&n>=u&&!h.get(n-u,e-u)&&c[1]<=i;)c[1]++,u++;if(e<u||n<u||c[1]>i)return!1;for(;e>=u&&n>=u&&h.get(n-u,e-u)&&c[0]<=i;)c[0]++,u++;if(c[0]>i)return!1;const m=h.getHeight(),v=h.getWidth();for(u=1;e+u<m&&n+u<v&&h.get(n+u,e+u);)c[2]++,u++;if(e+u>=m||n+u>=v)return!1;for(;e+u<m&&n+u<v&&!h.get(n+u,e+u)&&c[3]<i;)c[3]++,u++;if(e+u>=m||n+u>=v||c[3]>=i)return!1;for(;e+u<m&&n+u<v&&h.get(n+u,e+u)&&c[4]<i;)c[4]++,u++;if(c[4]>=i)return!1;const T=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(T-l)<2*l&&Jt.foundPatternCross(c)}crossCheckVertical(e,n,i,l){const c=this.image,u=c.getHeight(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(n,m);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(n,m)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(n,m)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(n,m);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(n,m)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(n,m)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=2*l?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,m):NaN}crossCheckHorizontal(e,n,i,l){const c=this.image,u=c.getWidth(),h=this.getCrossCheckStateCount();let m=e;for(;m>=0&&c.get(m,n);)h[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,n)&&h[1]<=i;)h[1]++,m--;if(m<0||h[1]>i)return NaN;for(;m>=0&&c.get(m,n)&&h[0]<=i;)h[0]++,m--;if(h[0]>i)return NaN;for(m=e+1;m<u&&c.get(m,n);)h[2]++,m++;if(m===u)return NaN;for(;m<u&&!c.get(m,n)&&h[3]<i;)h[3]++,m++;if(m===u||h[3]>=i)return NaN;for(;m<u&&c.get(m,n)&&h[4]<i;)h[4]++,m++;if(h[4]>=i)return NaN;const v=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(v-l)>=l?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,m):NaN}handlePossibleCenter(e,n,i,l){const c=e[0]+e[1]+e[2]+e[3]+e[4];let u=Jt.centerFromEnd(e,i),h=this.crossCheckVertical(n,Math.floor(u),e[2],c);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),e[2],c),!isNaN(u)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),e[2],c)))){const m=c/7;let v=!1;const T=this.possibleCenters;for(let O=0,D=T.length;O<D;O++){const V=T[O];if(V.aboutEquals(m,h,u)){T[O]=V.combineEstimate(h,u,m),v=!0;break}}if(!v){const O=new Nr(u,h,m);T.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Jt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=Jt.CENTER_QUORUM&&(e++,n+=u.getEstimatedModuleSize());if(e<3)return!1;const l=n/i;let c=0;for(const u of this.possibleCenters)c+=Math.abs(u.getEstimatedModuleSize()-l);return c<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ee;const n=this.possibleCenters;let i;if(e>3){let l=0,c=0;for(const m of this.possibleCenters){const v=m.getEstimatedModuleSize();l+=v,c+=v*v}i=l/e;let u=Math.sqrt(c/e-i*i);n.sort((m,v)=>{const T=Math.abs(v.getEstimatedModuleSize()-i),O=Math.abs(m.getEstimatedModuleSize()-i);return T<O?-1:T>O?1:0});const h=Math.max(.2*i,u);for(let m=0;m<n.length&&n.length>3;m++){const v=n[m];Math.abs(v.getEstimatedModuleSize()-i)>h&&(n.splice(m,1),m--)}}if(n.length>3){let l=0;for(const c of n)l+=c.getEstimatedModuleSize();i=l/n.length,n.sort((c,u)=>{if(u.getCount()===c.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-i),m=Math.abs(c.getEstimatedModuleSize()-i);return h<m?1:h>m?-1:0}else return u.getCount()-c.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Jt.CENTER_QUORUM=2,Jt.MIN_SKIP=3,Jt.MAX_MODULES=57;class Hr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ue.NEED_RESULT_POINT_CALLBACK);const i=new Jt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),l=e.getBottomLeft(),c=this.calculateModuleSize(n,i,l);if(c<1)throw new ee("No pattern found in proccess finder.");const u=Hr.computeDimension(n,i,l,c),h=Ye.getProvisionalVersionForDimension(u),m=h.getDimensionForVersion()-7;let v=null;if(h.getAlignmentPatternCenters().length>0){const V=i.getX()-n.getX()+l.getX(),G=i.getY()-n.getY()+l.getY(),K=1-3/m,Q=Math.floor(n.getX()+K*(V-n.getX())),se=Math.floor(n.getY()+K*(G-n.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{v=this.findAlignmentInRegion(c,Q,se,Ae);break}catch(Se){if(!(Se instanceof ee))throw Se}}const T=Hr.createTransform(n,i,l,v,u),O=Hr.sampleGrid(this.image,T,u);let D;return v===null?D=[l,n,i]:D=[l,n,i,v],new Xn(O,D)}static createTransform(e,n,i,l,c){const u=c-3.5;let h,m,v,T;return l!==null?(h=l.getX(),m=l.getY(),v=u-3,T=v):(h=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),v=u,T=u),Qe.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,v,T,3.5,u,e.getX(),e.getY(),n.getX(),n.getY(),h,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return yt.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,l){const c=ht.round(Ne.distance(e,n)/l),u=ht.round(Ne.distance(e,i)/l);let h=Math.floor((c+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new ee("Dimensions could be not found.")}return h}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?l/7:isNaN(l)?i/7:(i+l)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,l){let c=this.sizeOfBlackWhiteBlackRun(e,n,i,l),u=1,h=e-(i-e);h<0?(u=e/(e-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let m=Math.floor(n-(l-n)*u);return u=1,m<0?(u=n/(n-m),m=0):m>=this.image.getHeight()&&(u=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),h=Math.floor(e+(h-e)*u),c+=this.sizeOfBlackWhiteBlackRun(e,n,h,m),c-1}sizeOfBlackWhiteBlackRun(e,n,i,l){const c=Math.abs(l-n)>Math.abs(i-e);if(c){let V=e;e=n,n=V,V=i,i=l,l=V}const u=Math.abs(i-e),h=Math.abs(l-n);let m=-u/2;const v=e<i?1:-1,T=n<l?1:-1;let O=0;const D=i+v;for(let V=e,G=n;V!==D;V+=v){const K=c?G:V,Q=c?V:G;if(O===1===this.image.get(K,Q)){if(O===2)return ht.distance(V,G,e,n);O++}if(m+=h,m>0){if(G===l)break;G+=T,m-=u}}return O===2?ht.distance(i+v,l,e,n):NaN}findAlignmentInRegion(e,n,i,l){const c=Math.floor(l*e),u=Math.max(0,n-c),h=Math.min(this.image.getWidth()-1,n+c);if(h-u<e*3)throw new ee("Alignment top exceeds estimated module size.");const m=Math.max(0,i-c),v=Math.min(this.image.getHeight()-1,i+c);if(v-m<e*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Cr(this.image,u,m,h-u,v-m,e,this.resultPointCallback).find()}}class jn{constructor(){this.decoder=new Go}getDecoder(){return this.decoder}decode(e,n){let i,l;if(n!=null&&n.get(ue.PURE_BARCODE)!==void 0){const m=jn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),l=jn.NO_POINTS}else{const m=new Hr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),l=m.getPoints()}i.getOther()instanceof Ho&&i.getOther().applyMirroredCorrection(l);const c=new Ve(i.getText(),i.getRawBytes(),void 0,l,we.QR_CODE,void 0),u=i.getByteSegments();u!==null&&c.putMetadata(ze.BYTE_SEGMENTS,u);const h=i.getECLevel();return h!==null&&c.putMetadata(ze.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(c.putMetadata(ze.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),c.putMetadata(ze.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new ee;const l=this.moduleSize(n,e);let c=n[1],u=i[1],h=n[0],m=i[0];if(h>=m||c>=u)throw new ee;if(u-c!==m-h&&(m=h+(u-c),m>=e.getWidth()))throw new ee;const v=Math.round((m-h+1)/l),T=Math.round((u-c+1)/l);if(v<=0||T<=0)throw new ee;if(T!==v)throw new ee;const O=Math.floor(l/2);c+=O,h+=O;const D=h+Math.floor((v-1)*l)-m;if(D>0){if(D>O)throw new ee;h-=D}const V=c+Math.floor((T-1)*l)-u;if(V>0){if(V>O)throw new ee;c-=V}const G=new ke(v,T);for(let K=0;K<T;K++){const Q=c+Math.floor(K*l);for(let se=0;se<v;se++)e.get(h+Math.floor(se*l),Q)&&G.set(se,K)}return G}static moduleSize(e,n){const i=n.getHeight(),l=n.getWidth();let c=e[0],u=e[1],h=!0,m=0;for(;c<l&&u<i;){if(h!==n.get(c,u)){if(++m===5)break;h=!h}c++,u++}if(c===l||u===i)throw new ee;return(c-e[0])/7}}jn.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(e){return ht.sum(e)}static toIntArray(e){if(e==null||!e.length)return nt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const l of e)n[i++]=l;return n}static getCodeword(e){const n=H.binarySearch(nt.SYMBOL_TABLE,e&262143);return n<0?-1:(nt.CODEWORD_TABLE[n]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Qa{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class at{static detectMultiple(e,n,i){let l=e.getBlackMatrix(),c=at.detect(i,l);return c.length||(l=l.clone(),l.rotate180(),c=at.detect(i,l)),new Qa(l,c)}static detect(e,n){const i=new Array;let l=0,c=0,u=!1;for(;l<n.getHeight();){const h=at.findVertices(n,l,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;for(const m of i)m[1]!=null&&(l=Math.trunc(Math.max(l,m[1].getY()))),m[3]!=null&&(l=Math.max(l,Math.trunc(m[3].getY())));l+=at.ROW_STEP;continue}if(u=!0,i.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return i}static findVertices(e,n,i){const l=e.getHeight(),c=e.getWidth(),u=new Array(8);return at.copyToResult(u,at.findRowsWithPattern(e,l,c,n,i,at.START_PATTERN),at.INDEXES_START_PATTERN),u[4]!=null&&(i=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY())),at.copyToResult(u,at.findRowsWithPattern(e,l,c,n,i,at.STOP_PATTERN),at.INDEXES_STOP_PATTERN),u}static copyToResult(e,n,i){for(let l=0;l<i.length;l++)e[i[l]]=n[l]}static findRowsWithPattern(e,n,i,l,c,u){const h=new Array(4);let m=!1;const v=new Int32Array(u.length);for(;l<n;l+=at.ROW_STEP){let O=at.findGuardPattern(e,c,l,i,!1,u,v);if(O!=null){for(;l>0;){const D=at.findGuardPattern(e,c,--l,i,!1,u,v);if(D!=null)O=D;else{l++;break}}h[0]=new Ne(O[0],l),h[1]=new Ne(O[1],l),m=!0;break}}let T=l+1;if(m){let O=0,D=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;T<n;T++){const V=at.findGuardPattern(e,D[0],T,i,!1,u,v);if(V!=null&&Math.abs(D[0]-V[0])<at.MAX_PATTERN_DRIFT&&Math.abs(D[1]-V[1])<at.MAX_PATTERN_DRIFT)D=V,O=0;else{if(O>at.SKIPPED_ROW_COUNT_MAX)break;O++}}T-=O+1,h[2]=new Ne(D[0],T),h[3]=new Ne(D[1],T)}return T-l<at.BARCODE_MIN_HEIGHT&&H.fill(h,null),h}static findGuardPattern(e,n,i,l,c,u,h){H.fillWithin(h,0,h.length,0);let m=n,v=0;for(;e.get(m,i)&&m>0&&v++<at.MAX_PIXEL_DRIFT;)m--;let T=m,O=0,D=u.length;for(let V=c;T<l;T++)if(e.get(T,i)!==V)h[O]++;else{if(O===D-1){if(at.patternMatchVariance(h,u,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return new Int32Array([m,T]);m+=h[0]+h[1],B.arraycopy(h,2,h,0,O-1),h[O-1]=0,h[O]=0,O--}else O++;h[O]=1,V=!V}return O===D-1&&at.patternMatchVariance(h,u,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE?new Int32Array([m,T-1]):null}static patternMatchVariance(e,n,i){let l=e.length,c=0,u=0;for(let v=0;v<l;v++)c+=e[v],u+=n[v];if(c<u)return 1/0;let h=c/u;i*=h;let m=0;for(let v=0;v<l;v++){let T=e[v],O=n[v]*h,D=T>O?T-O:O-T;if(D>i)return 1/0;m+=D}return m/c}}at.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),at.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),at.MAX_AVG_VARIANCE=.42,at.MAX_INDIVIDUAL_VARIANCE=.8,at.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),at.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),at.MAX_PIXEL_DRIFT=3,at.MAX_PATTERN_DRIFT=5,at.SKIPPED_ROW_COUNT_MAX=25,at.ROW_STEP=5,at.BARCODE_MIN_HEIGHT=10;class Nn{constructor(e,n){if(n.length===0)throw new N;this.field=e;let i=n.length;if(i>1&&n[0]===0){let l=1;for(;l<i&&n[l]===0;)l++;l===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-l),B.arraycopy(n,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let n=this.coefficients[0],i=this.coefficients.length;for(let l=1;l<i;l++)n=this.field.add(this.field.multiply(e,n),this.coefficients[l]);return n}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let u=n;n=i,i=u}let l=new Int32Array(i.length),c=i.length-n.length;B.arraycopy(i,0,l,0,c);for(let u=c;u<i.length;u++)l[u]=this.field.add(n[u-c],i[u]);return new Nn(this.field,l)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Nn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Nn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,l=e.coefficients,c=l.length,u=new Int32Array(i+c-1);for(let h=0;h<i;h++){let m=n[h];for(let v=0;v<c;v++)u[h+v]=this.field.add(u[h+v],this.field.multiply(m,l[v]))}return new Nn(this.field,u)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new Nn(this.field,n)}multiplyScalar(e){if(e===0)return new Nn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let l=0;l<n;l++)i[l]=this.field.multiply(this.coefficients[l],e);return new Nn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new N;if(n===0)return new Nn(this.field,new Int32Array([0]));let i=this.coefficients.length,l=new Int32Array(i+e);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Nn(this.field,l)}toString(){let e=new Oe;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Ja{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new dt;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gi extends Ja{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let l=0;l<e;l++)this.expTable[l]=i,i=i*n%e;for(let l=0;l<e-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Nn(this,new Int32Array([0])),this.one=new Nn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new N;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new Nn(this,i)}}Gi.PDF417_GF=new Gi(nt.NUMBER_OF_CODEWORDS,3);class Xo{constructor(){this.field=Gi.PDF417_GF}decode(e,n,i){let l=new Nn(this.field,e),c=new Int32Array(n),u=!1;for(let G=n;G>0;G--){let K=l.evaluateAt(this.field.exp(G));c[n-G]=K,K!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(i!=null)for(const G of i){let K=this.field.exp(e.length-1-G),Q=new Nn(this.field,new Int32Array([this.field.subtract(0,K),1]));h=h.multiply(Q)}let m=new Nn(this.field,c),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),T=v[0],O=v[1],D=this.findErrorLocations(T),V=this.findErrorMagnitudes(O,T,D);for(let G=0;G<D.length;G++){let K=e.length-1-this.field.log(D[G]);if(K<0)throw k.getChecksumInstance();e[K]=this.field.subtract(e[K],V[G])}return D.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let D=e;e=n,n=D}let l=e,c=n,u=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(i/2);){let D=l,V=u;if(l=c,u=h,l.isZero())throw k.getChecksumInstance();c=D;let G=this.field.getZero(),K=l.getCoefficient(l.getDegree()),Q=this.field.inverse(K);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let se=c.getDegree()-l.getDegree(),Ae=this.field.multiply(c.getCoefficient(c.getDegree()),Q);G=G.add(this.field.buildMonomial(se,Ae)),c=c.subtract(l.multiplyByMonomial(se,Ae))}h=G.multiply(u).subtract(V).negative()}let m=h.getCoefficient(0);if(m===0)throw k.getChecksumInstance();let v=this.field.inverse(m),T=h.multiply(v),O=c.multiply(v);return[T,O]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),l=0;for(let c=1;c<this.field.getSize()&&l<n;c++)e.evaluateAt(c)===0&&(i[l]=this.field.inverse(c),l++);if(l!==n)throw k.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let l=n.getDegree(),c=new Int32Array(l);for(let v=1;v<=l;v++)c[l-v]=this.field.multiply(v,n.getCoefficient(v));let u=new Nn(this.field,c),h=i.length,m=new Int32Array(h);for(let v=0;v<h;v++){let T=this.field.inverse(i[v]),O=this.field.subtract(0,e.evaluateAt(T)),D=this.field.inverse(u.evaluateAt(T));m[v]=this.field.multiply(O,D)}return m}}class vi{constructor(e,n,i,l,c){e instanceof vi?this.constructor_2(e):this.constructor_1(e,n,i,l,c)}constructor_1(e,n,i,l,c){const u=n==null||i==null,h=l==null||c==null;if(u&&h)throw new ee;u?(n=new Ne(0,l.getY()),i=new Ne(0,c.getY())):h&&(l=new Ne(e.getWidth()-1,n.getY()),c=new Ne(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(n.getY(),l.getY())),this.maxY=Math.trunc(Math.max(i.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new vi(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let l=this.topLeft,c=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,v=Math.trunc(m.getY()-e);v<0&&(v=0);let T=new Ne(m.getX(),v);i?l=T:u=T}if(n>0){let m=i?this.bottomLeft:this.bottomRight,v=Math.trunc(m.getY()+n);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let T=new Ne(m.getX(),v);i?c=T:h=T}return new vi(this.image,l,c,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ss{constructor(e,n,i,l){this.columnCount=e,this.errorCorrectionLevel=l,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Gr{constructor(){this.buffer=""}static form(e,n){let i=-1;function l(u,h,m,v,T,O){if(u==="%%")return"%";if(n[++i]===void 0)return;u=v?parseInt(v.substr(1)):void 0;let D=T?parseInt(T.substr(1)):void 0,V;switch(O){case"s":V=n[i];break;case"c":V=n[i][0];break;case"f":V=parseFloat(n[i]).toFixed(u);break;case"p":V=parseFloat(n[i]).toPrecision(u);break;case"e":V=parseFloat(n[i]).toExponential(u);break;case"x":V=parseInt(n[i]).toString(D||16);break;case"d":V=parseFloat(parseInt(n[i],D||10).toPrecision(u)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(D);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;V.length<G;)V=h!==void 0?V+K:K+V;return V}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,l)}format(e,...n){this.buffer+=Gr.form(e,n)}toString(){return this.buffer}}class Rr{constructor(e){this.boundingBox=new vi(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<Rr.MAX_NEARBY_DISTANCE;i++){let l=this.imageRowToCodewordIndex(e)-i;if(l>=0&&(n=this.codewords[l],n!=null)||(l=this.imageRowToCodewordIndex(e)+i,l<this.codewords.length&&(n=this.codewords[l],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Gr;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}Rr.MAX_NEARBY_DISTANCE=5;class si{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,l]of this.values.entries()){const c={getKey:()=>i,getValue:()=>l};c.getValue()>e?(e=c.getValue(),n=[],n.push(c.getKey())):c.getValue()===e&&n.push(c.getKey())}return nt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class el extends Rr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,v=1,T=0;for(let O=u;O<h;O++){if(n[O]==null)continue;let D=n[O],V=D.getRowNumber()-m;if(V===0)T++;else if(V===1)v=Math.max(v,T),T=1,m=D.getRowNumber();else if(V<0||D.getRowNumber()>=e.getRowCount()||V>O)n[O]=null;else{let G;v>2?G=(v-2)*V:G=V;let K=G>=O;for(let Q=1;Q<=G&&!K;Q++)K=n[O-Q]!=null;K?n[O]=null:(m=D.getRowNumber(),T=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let l=i.getRowNumber();if(l>=n.length)continue;n[l]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),m=-1;for(let v=c;v<u;v++){if(h[v]==null)continue;let T=h[v];T.setRowNumberAsRowIndicatorColumn();let O=T.getRowNumber()-m;O===0||(O===1?m=T.getRowNumber():T.getRowNumber()>=e.getRowCount()?h[v]=null:m=T.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new si,i=new si,l=new si,c=new si;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let m=h.getValue()%30,v=h.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:i.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let u=new Ss(n.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,u),u}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let l=e[i];if(e[i]==null)continue;let c=l.getValue()%30,u=l.getRowNumber();if(u>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:c*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(c/3)!==n.getErrorCorrectionLevel()||c%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:c+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class bs{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=nt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let l=0;l<i.length;l++)i[l]!=null&&(i[l].hasValidRowNumber()||this.adjustRowNumbers(n,l,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[i];c!=null&&(c.setRowNumber(e[i].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=this.barcodeColumnCount+1;u>0&&c<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=bs.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let l=n[i].getRowNumber(),c=0;for(let u=1;u<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[i];h!=null&&(c=bs.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let l=i[n],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=c[n],h[3]=u[n],n>0&&(h[0]=i[n-1],h[4]=c[n-1],h[5]=u[n-1]),n>1&&(h[8]=i[n-2],h[10]=c[n-2],h[11]=u[n-2]),n<i.length-1&&(h[1]=i[n+1],h[6]=c[n+1],h[7]=u[n+1]),n<i.length-2&&(h[9]=i[n+2],h[12]=c[n+2],h[13]=u[n+2]);for(let m of h)if(bs.adjustRowNumber(l,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Gr;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){n.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[i];if(c==null){n.format("    |   ");continue}n.format(" %3d|%3d",c.getRowNumber(),c.getValue())}n.format("%n")}return n.toString()}}class Ci{constructor(e,n,i,l){this.rowNumber=Ci.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ci.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ci.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let e=0;e<nt.SYMBOL_TABLE.length;e++){let n=nt.SYMBOL_TABLE[e],i=n&1;for(let l=0;l<nt.BARS_IN_MODULE;l++){let c=0;for(;(n&1)===i;)c+=1,n>>=1;i=n&1,Rn.RATIOS_TABLE[e]||(Rn.RATIOS_TABLE[e]=new Array(nt.BARS_IN_MODULE)),Rn.RATIOS_TABLE[e][nt.BARS_IN_MODULE-l-1]=Math.fround(c/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(e));return n!==-1?n:Rn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ht.sum(e),i=new Int32Array(nt.BARS_IN_MODULE),l=0,c=0;for(let u=0;u<nt.MODULES_IN_CODEWORD;u++){let h=n/(2*nt.MODULES_IN_CODEWORD)+u*n/nt.MODULES_IN_CODEWORD;c+e[l]<=h&&(c+=e[l],l++),i[l]++}return i}static getDecodedCodewordValue(e){let n=Rn.getBitValue(e);return nt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let l=0;l<e[i];l++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ht.sum(e),i=new Array(nt.BARS_IN_MODULE);if(n>1)for(let u=0;u<i.length;u++)i[u]=Math.fround(e[u]/n);let l=Dn.MAX_VALUE,c=-1;this.bSymbolTableReady||Rn.initialize();for(let u=0;u<Rn.RATIOS_TABLE.length;u++){let h=0,m=Rn.RATIOS_TABLE[u];for(let v=0;v<nt.BARS_IN_MODULE;v++){let T=Math.fround(m[v]-i[v]);if(h+=Math.fround(T*T),h>=l)break}h<l&&(l=h,c=nt.SYMBOL_TABLE[u])}return c}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(_=>new Array(nt.BARS_IN_MODULE));class no{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Yo{static parseLong(e,n=void 0){return parseInt(e,n)}}class Xr extends E{}Xr.kind="NullPointerException";class Ko{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Xr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new j;if(i===0)return;for(let l=0;l<i;l++)this.write(e[n+l])}flush(){}close(){}}class ro extends E{}class tl extends Ko{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new ro;i=z.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),B.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Dt;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Dt||(Dt={}));function Is(){if(typeof window<"u")return window.BigInt||null;if(typeof Ql<"u")return Ql.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ts;function hn(_){if(typeof Ts>"u"&&(Ts=Is()),Ts===null)throw new Error("BigInt is not supported!");return Ts(_)}function Xi(){let _=[];_[0]=hn(1);let e=hn(900);_[1]=e;for(let n=2;n<16;n++)_[n]=_[n-1]*e;return _}class oe{static decode(e,n){let i=new Oe(""),l=q.ISO8859_1;i.enableDecoding(l);let c=1,u=e[c++],h=new no;for(;c<e[0];){switch(u){case oe.TEXT_COMPACTION_MODE_LATCH:c=oe.textCompaction(e,c,i);break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:c=oe.byteCompaction(u,e,l,c,i);break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[c++]);break;case oe.NUMERIC_COMPACTION_MODE_LATCH:c=oe.numericCompaction(e,c,i);break;case oe.ECI_CHARSET:q.getCharacterSetECIByValue(e[c++]);break;case oe.ECI_GENERAL_PURPOSE:c+=2;break;case oe.ECI_USER_DEFINED:c++;break;case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=oe.decodeMacroBlock(e,c,h);break;case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:throw new $;default:c--,c=oe.textCompaction(e,c,i);break}if(c<e.length)u=e[c++];else throw $.getFormatInstance()}if(i.length()===0)throw $.getFormatInstance();let m=new mt(null,i.toString(),null,n);return m.setOther(h),m}static decodeMacroBlock(e,n,i){if(n+oe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw $.getFormatInstance();let l=new Int32Array(oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<oe.NUMBER_OF_SEQUENCE_CODEWORDS;h++,n++)l[h]=e[n];i.setSegmentIndex(z.parseInt(oe.decodeBase900toBase10(l,oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new Oe;n=oe.textCompaction(e,n,c),i.setFileId(c.toString());let u=-1;for(e[n]===oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<e[0];)switch(e[n]){case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Oe;n=oe.textCompaction(e,n+1,h),i.setFileName(h.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Oe;n=oe.textCompaction(e,n+1,m),i.setSender(m.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Oe;n=oe.textCompaction(e,n+1,v),i.setAddressee(v.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let T=new Oe;n=oe.numericCompaction(e,n+1,T),i.setSegmentCount(z.parseInt(T.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new Oe;n=oe.numericCompaction(e,n+1,O),i.setTimestamp(Yo.parseLong(O.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Oe;n=oe.numericCompaction(e,n+1,D),i.setChecksum(z.parseInt(D.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new Oe;n=oe.numericCompaction(e,n+1,V),i.setFileSize(Yo.parseLong(V.toString()));break;default:throw $.getFormatInstance()}break;case oe.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(u!==-1){let h=n-u;i.isLastSegment()&&h--,i.setOptionalData(H.copyOfRange(e,u,u+h))}return n}static textCompaction(e,n,i){let l=new Int32Array((e[0]-n)*2),c=new Int32Array((e[0]-n)*2),u=0,h=!1;for(;n<e[0]&&!h;){let m=e[n++];if(m<oe.TEXT_COMPACTION_MODE_LATCH)l[u]=m/30,l[u+1]=m%30,u+=2;else switch(m){case oe.TEXT_COMPACTION_MODE_LATCH:l[u++]=oe.TEXT_COMPACTION_MODE_LATCH;break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:n--,h=!0;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[u]=oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],c[u]=m,u++;break}}return oe.decodeTextCompaction(l,c,u,i),n}static decodeTextCompaction(e,n,i,l){let c=Dt.ALPHA,u=Dt.ALPHA,h=0;for(;h<i;){let m=e[h],v="";switch(c){case Dt.ALPHA:if(m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case oe.LL:c=Dt.LOWER;break;case oe.ML:c=Dt.MIXED;break;case oe.PS:u=c,c=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.LOWER:if(m<26)v=String.fromCharCode(97+m);else switch(m){case 26:v=" ";break;case oe.AS:u=c,c=Dt.ALPHA_SHIFT;break;case oe.ML:c=Dt.MIXED;break;case oe.PS:u=c,c=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.MIXED:if(m<oe.PL)v=oe.MIXED_CHARS[m];else switch(m){case oe.PL:c=Dt.PUNCT;break;case 26:v=" ";break;case oe.LL:c=Dt.LOWER;break;case oe.AL:c=Dt.ALPHA;break;case oe.PS:u=c,c=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.PUNCT:if(m<oe.PAL)v=oe.PUNCT_CHARS[m];else switch(m){case oe.PAL:c=Dt.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.ALPHA_SHIFT:if(c=u,m<26)v=String.fromCharCode(65+m);else switch(m){case 26:v=" ";break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break;case Dt.PUNCT_SHIFT:if(c=u,m<oe.PAL)v=oe.PUNCT_CHARS[m];else switch(m){case oe.PAL:c=Dt.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h]);break;case oe.TEXT_COMPACTION_MODE_LATCH:c=Dt.ALPHA;break}break}v!==""&&l.append(v),h++}}static byteCompaction(e,n,i,l,c){let u=new tl,h=0,m=0,v=!1;switch(e){case oe.BYTE_COMPACTION_MODE_LATCH:let T=new Int32Array(6),O=n[l++];for(;l<n[0]&&!v;)switch(T[h++]=O,m=900*m+O,O=n[l++],O){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:l--,v=!0;break;default:if(h%5===0&&h>0){for(let D=0;D<6;++D)u.write(Number(hn(m)>>hn(8*(5-D))));m=0,h=0}break}l===n[0]&&O<oe.TEXT_COMPACTION_MODE_LATCH&&(T[h++]=O);for(let D=0;D<h;D++)u.write(T[D]);break;case oe.BYTE_COMPACTION_MODE_LATCH_6:for(;l<n[0]&&!v;){let D=n[l++];if(D<oe.TEXT_COMPACTION_MODE_LATCH)h++,m=900*m+D;else switch(D){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:l--,v=!0;break}if(h%5===0&&h>0){for(let V=0;V<6;++V)u.write(Number(hn(m)>>hn(8*(5-V))));m=0,h=0}}break}return c.append(Fe.decode(u.toByteArray(),i)),l}static numericCompaction(e,n,i){let l=0,c=!1,u=new Int32Array(oe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!c;){let h=e[n++];if(n===e[0]&&(c=!0),h<oe.TEXT_COMPACTION_MODE_LATCH)u[l]=h,l++;else switch(h){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:n--,c=!0;break}(l%oe.MAX_NUMERIC_CODEWORDS===0||h===oe.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(i.append(oe.decodeBase900toBase10(u,l)),l=0)}return n}static decodeBase900toBase10(e,n){let i=hn(0);for(let c=0;c<n;c++)i+=oe.EXP900[n-c-1]*hn(e[c]);let l=i.toString();if(l.charAt(0)!=="1")throw new $;return l.substring(1)}}oe.TEXT_COMPACTION_MODE_LATCH=900,oe.BYTE_COMPACTION_MODE_LATCH=901,oe.NUMERIC_COMPACTION_MODE_LATCH=902,oe.BYTE_COMPACTION_MODE_LATCH_6=924,oe.ECI_USER_DEFINED=925,oe.ECI_GENERAL_PURPOSE=926,oe.ECI_CHARSET=927,oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,oe.MACRO_PDF417_TERMINATOR=922,oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,oe.MAX_NUMERIC_CODEWORDS=15,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,oe.PL=25,oe.LL=27,oe.AS=27,oe.ML=28,oe.AL=28,oe.PS=29,oe.PAL=29,oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",oe.EXP900=Is()?Xi():[],oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(e,n,i,l,c,u,h){let m=new vi(e,n,i,l,c),v=null,T=null,O;for(let G=!0;;G=!1){if(n!=null&&(v=ft.getRowIndicatorColumn(e,m,n,!0,u,h)),l!=null&&(T=ft.getRowIndicatorColumn(e,m,l,!1,u,h)),O=ft.merge(v,T),O==null)throw ee.getNotFoundInstance();let K=O.getBoundingBox();if(G&&K!=null&&(K.getMinY()<m.getMinY()||K.getMaxY()>m.getMaxY()))m=K;else break}O.setBoundingBox(m);let D=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,v),O.setDetectionResultColumn(D,T);let V=v!=null;for(let G=1;G<=D;G++){let K=V?G:D-G;if(O.getDetectionResultColumn(K)!==void 0)continue;let Q;K===0||K===D?Q=new el(m,K===0):Q=new Rr(m),O.setDetectionResultColumn(K,Q);let se=-1,Ae=se;for(let Se=m.getMinY();Se<=m.getMaxY();Se++){if(se=ft.getStartColumn(O,K,Se,V),se<0||se>m.getMaxX()){if(Ae===-1)continue;se=Ae}let xe=ft.detectCodeword(e,m.getMinX(),m.getMaxX(),V,se,Se,u,h);xe!=null&&(Q.setCodeword(Se,xe),Ae=se,u=Math.min(u,xe.getWidth()),h=Math.max(h,xe.getWidth()))}}return ft.createDecoderResult(O)}static merge(e,n){if(e==null&&n==null)return null;let i=ft.getBarcodeMetadata(e,n);if(i==null)return null;let l=vi.merge(ft.adjustBoundingBox(e),ft.adjustBoundingBox(n));return new bs(i,l)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=ft.getMax(n),l=0;for(let h of n)if(l+=i-h,h>0)break;let c=e.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let u=0;for(let h=n.length-1;h>=0&&(u+=i-n[h],!(n[h]>0));h--);for(let h=c.length-1;u>0&&c[h]==null;h--)u--;return e.getBoundingBox().addMissingRows(l,u,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let l;return n==null||(l=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==l.getColumnCount()&&i.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&i.getRowCount()!==l.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,l,c,u){let h=new el(n,l);for(let m=0;m<2;m++){let v=m===0?1:-1,T=Math.trunc(Math.trunc(i.getX()));for(let O=Math.trunc(Math.trunc(i.getY()));O<=n.getMaxY()&&O>=n.getMinY();O+=v){let D=ft.detectCodeword(e,0,e.getWidth(),l,T,O,c,u);D!=null&&(h.setCodeword(O,D),l?T=D.getStartX():T=D.getEndX())}}return h}static adjustCodewordCount(e,n){let i=n[0][1],l=i.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ft.getNumberOfECCodeWords(e.getBarcodeECLevel());if(l.length===0){if(c<1||c>nt.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();i.setValue(c)}else l[0]!==c&&i.setValue(c)}static createDecoderResult(e){let n=ft.createBarcodeMatrix(e);ft.adjustCodewordCount(e,n);let i=new Array,l=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],u=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let v=0;v<e.getBarcodeColumnCount();v++){let T=n[m][v+1].getValue(),O=m*e.getBarcodeColumnCount()+v;T.length===0?i.push(O):T.length===1?l[O]=T[0]:(u.push(O),c.push(T))}let h=new Array(c.length);for(let m=0;m<h.length;m++)h[m]=c[m];return ft.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),l,nt.toIntArray(i),nt.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(e,n,i,l,c){let u=new Int32Array(l.length),h=100;for(;h-- >0;){for(let m=0;m<u.length;m++)n[l[m]]=c[m][u[m]];try{return ft.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof k))throw m}if(u.length===0)throw k.getChecksumInstance();for(let m=0;m<u.length;m++)if(u[m]<c[m].length-1){u[m]++;break}else if(u[m]=0,m===u.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let l=0;l<n.length;l++)for(let c=0;c<n[l].length;c++)n[l][c]=new si;let i=0;for(let l of e.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=0){if(u>=n.length)continue;n[u][i].setValue(c.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,l){let c=l?1:-1,u=null;if(ft.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodeword(i)),u!=null)return l?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(n).getCodewordNearby(i),u!=null)return l?u.getStartX():u.getEndX();if(ft.isValidBarcodeColumn(e,n-c)&&(u=e.getDetectionResultColumn(n-c).getCodewordNearby(i)),u!=null)return l?u.getEndX():u.getStartX();let h=0;for(;ft.isValidBarcodeColumn(e,n-c);){n-=c;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(l?m.getEndX():m.getStartX())+c*h*(m.getEndX()-m.getStartX());h++}return l?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,l,c,u,h,m){c=ft.adjustCodewordStartColumn(e,n,i,l,c,u);let v=ft.getModuleBitCount(e,n,i,l,c,u);if(v==null)return null;let T,O=ht.sum(v);if(l)T=c+O;else{for(let G=0;G<v.length/2;G++){let K=v[G];v[G]=v[v.length-1-G],v[v.length-1-G]=K}T=c,c=T-O}if(!ft.checkCodewordSkew(O,h,m))return null;let D=Rn.getDecodedValue(v),V=nt.getCodeword(D);return V===-1?null:new Ci(c,T,ft.getCodewordBucketNumber(D),V)}static getModuleBitCount(e,n,i,l,c,u){let h=c,m=new Int32Array(8),v=0,T=l?1:-1,O=l;for(;(l?h<i:h>=n)&&v<m.length;)e.get(h,u)===O?(m[v]++,h+=T):(v++,O=!O);return v===m.length||h===(l?i:n)&&v===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,l,c,u){let h=c,m=l?-1:1;for(let v=0;v<2;v++){for(;(l?h>=n:h<i)&&l===e.get(h,u);){if(Math.abs(c-h)>ft.CODEWORD_SKEW_SIZE)return c;h+=m}m=-m,l=!l}return h}static checkCodewordSkew(e,n,i){return n-ft.CODEWORD_SKEW_SIZE<=e&&e<=i+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw $.getFormatInstance();let l=1<<n+1,c=ft.correctErrors(e,i,l);ft.verifyCodewordCount(e,l);let u=oe.decode(e,""+n);return u.setErrorsCorrected(c),u.setErasures(i.length),u}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+ft.MAX_ERRORS||i<0||i>ft.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return ft.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw $.getFormatInstance();let i=e[0];if(i>e.length)throw $.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw $.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,l=n.length-1;for(;!((e&1)!==i&&(i=e&1,l--,l<0));)n[l]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Gr;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let l=0;l<e[i].length;l++){let c=e[i][l];c.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}n.format("%n")}return n.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new Xo;class _n{decode(e,n=null){let i=_n.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw ee.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return _n.decode(e,n,!0)}catch(i){throw i instanceof $||i instanceof k?ee.getNotFoundInstance():i}}static decode(e,n,i){const l=new Array,c=at.detectMultiple(e,n,i);for(const u of c.getPoints()){const h=ft.decode(c.getBits(),u[4],u[5],u[6],u[7],_n.getMinCodewordWidth(u),_n.getMaxCodewordWidth(u)),m=new Ve(h.getText(),h.getRawBytes(),void 0,u,we.PDF_417);m.putMetadata(ze.ERROR_CORRECTION_LEVEL,h.getECLevel());const v=h.getOther();v!=null&&m.putMetadata(ze.PDF417_EXTRA_METADATA,v),l.push(m)}return l.map(u=>u)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?z.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(_n.getMaxWidth(e[0],e[4]),_n.getMaxWidth(e[6],e[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(e[1],e[5]),_n.getMaxWidth(e[7],e[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(_n.getMinWidth(e[0],e[4]),_n.getMinWidth(e[6],e[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(e[1],e[5]),_n.getMinWidth(e[7],e[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Yi extends E{}Yi.kind="ReaderException";class io{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!d(e)&&e.get(ue.TRY_HARDER)===!0,i=d(e)?null:e.get(ue.POSSIBLE_FORMATS),l=new Array;if(!d(i)){const c=i.some(u=>u===we.UPC_A||u===we.UPC_E||u===we.EAN_13||u===we.EAN_8||u===we.CODABAR||u===we.CODE_39||u===we.CODE_93||u===we.CODE_128||u===we.ITF||u===we.RSS_14||u===we.RSS_EXPANDED);c&&!n&&l.push(new sr(e,this.verbose)),i.includes(we.QR_CODE)&&l.push(new jn),i.includes(we.DATA_MATRIX)&&l.push(new vr),i.includes(we.AZTEC)&&l.push(new Mt),i.includes(we.PDF_417)&&l.push(new _n),c&&n&&l.push(new sr(e,this.verbose))}l.length===0&&(n||l.push(new sr(e,this.verbose)),l.push(new jn),l.push(new vr),l.push(new Mt),l.push(new _n),n&&l.push(new sr(e,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Yi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Yi)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class Ns extends Ee{constructor(e=null,n=500){const i=new io;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class so extends Ee{constructor(e=500){super(new _n,e)}}class nl extends Ee{constructor(e=500){super(new jn,e)}}var Zo;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Zo||(Zo={}));var yn=Zo;class $o{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ct(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const l=this.field;for(let c=n.length;c<=e;c++){const u=i.multiply(new ct(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));n.push(u),i=u}}return n[e]}encode(e,n){if(n===0)throw new N("No error correction bytes");const i=e.length-n;if(i<=0)throw new N("No data bytes provided");const l=this.buildGenerator(n),c=new Int32Array(i);B.arraycopy(e,0,c,0,i);let u=new ct(this.field,c);u=u.multiplyByMonomial(n,1);const m=u.divide(l)[1].getCoefficients(),v=n-m.length;for(let T=0;T<v;T++)e[i+T]=0;B.arraycopy(m,0,e,i+v,m.length)}}class Zt{constructor(){}static applyMaskPenaltyRule1(e){return Zt.applyMaskPenaltyRule1Internal(e,!0)+Zt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c-1;u++){const h=i[u];for(let m=0;m<l-1;m++){const v=h[m];v===h[m+1]&&v===i[u+1][m]&&v===i[u+1][m+1]&&n++}}return Zt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let u=0;u<c;u++)for(let h=0;h<l;h++){const m=i[u];h+6<l&&m[h]===1&&m[h+1]===0&&m[h+2]===1&&m[h+3]===1&&m[h+4]===1&&m[h+5]===0&&m[h+6]===1&&(Zt.isWhiteHorizontal(m,h-4,h)||Zt.isWhiteHorizontal(m,h+7,h+11))&&n++,u+6<c&&i[u][h]===1&&i[u+1][h]===0&&i[u+2][h]===1&&i[u+3][h]===1&&i[u+4][h]===1&&i[u+5][h]===0&&i[u+6][h]===1&&(Zt.isWhiteVertical(i,h,u-4,u)||Zt.isWhiteVertical(i,h,u+7,u+11))&&n++}return n*Zt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let l=n;l<i;l++)if(e[l]===1)return!1;return!0}static isWhiteVertical(e,n,i,l){i=Math.max(i,0),l=Math.min(l,e.length);for(let c=i;c<l;c++)if(e[c][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),l=e.getWidth(),c=e.getHeight();for(let m=0;m<c;m++){const v=i[m];for(let T=0;T<l;T++)v[T]===1&&n++}const u=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-u)*10/u)*Zt.N4}static getDataMaskBit(e,n,i){let l,c;switch(e){case 0:l=i+n&1;break;case 1:l=i&1;break;case 2:l=n%3;break;case 3:l=(i+n)%3;break;case 4:l=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:c=i*n,l=(c&1)+c%3;break;case 6:c=i*n,l=(c&1)+c%3&1;break;case 7:c=i*n,l=c%3+(i+n&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return l===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const l=n?e.getHeight():e.getWidth(),c=n?e.getWidth():e.getHeight(),u=e.getArray();for(let h=0;h<l;h++){let m=0,v=-1;for(let T=0;T<c;T++){const O=n?u[h][T]:u[T][h];O===v?m++:(m>=5&&(i+=Zt.N1+(m-5)),m=1,v=O)}m>=5&&(i+=Zt.N1+(m-5))}return i}}Zt.N1=3,Zt.N2=3,Zt.N3=40,Zt.N4=10;class oo{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let l=0;l!==n;l++)i[l]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)H.fill(n,e)}equals(e){if(!(e instanceof oo))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i],u=n.bytes[i];for(let h=0,m=this.width;h<m;++h)if(c[h]!==u[h])return!1}return!0}toString(){const e=new Oe;for(let n=0,i=this.height;n<i;++n){const l=this.bytes[n];for(let c=0,u=this.width;c<u;++c)switch(l[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ei{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ei.NUM_MASK_PATTERNS}}Ei.NUM_MASK_PATTERNS=8;class Wt extends E{}Wt.kind="WriterException";class Je{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,l,c){Je.clearMatrix(c),Je.embedBasicPatterns(i,c),Je.embedTypeInfo(n,l,c),Je.maybeEmbedVersionInfo(i,c),Je.embedDataBits(e,l,c)}static embedBasicPatterns(e,n){Je.embedPositionDetectionPatternsAndSeparators(n),Je.embedDarkDotAtLeftBottomCorner(n),Je.maybeEmbedPositionAdjustmentPatterns(e,n),Je.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const l=new J;Je.makeTypeInfoBits(e,n,l);for(let c=0,u=l.getSize();c<u;++c){const h=l.get(l.getSize()-1-c),m=Je.TYPE_INFO_COORDINATES[c],v=m[0],T=m[1];if(i.setBoolean(v,T,h),c<8){const O=i.getWidth()-c-1;i.setBoolean(O,8,h)}else{const D=i.getHeight()-7+(c-8);i.setBoolean(8,D,h)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new J;Je.makeVersionInfoBits(e,i);let l=6*3-1;for(let c=0;c<6;++c)for(let u=0;u<3;++u){const h=i.get(l);l--,n.setBoolean(c,n.getHeight()-11+u,h),n.setBoolean(n.getHeight()-11+u,c,h)}}static embedDataBits(e,n,i){let l=0,c=-1,u=i.getWidth()-1,h=i.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<i.getHeight();){for(let m=0;m<2;++m){const v=u-m;if(!Je.isEmpty(i.get(v,h)))continue;let T;l<e.getSize()?(T=e.get(l),++l):T=!1,n!==255&&Zt.getDataMaskBit(n,v,h)&&(T=!T),i.setBoolean(v,h,T)}h+=c}c=-c,h+=c,u-=2}if(l!==e.getSize())throw new Wt("Not all bits consumed: "+l+"/"+e.getSize())}static findMSBSet(e){return 32-z.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new N("0 polynomial");const i=Je.findMSBSet(n);for(e<<=i-1;Je.findMSBSet(e)>=i;)e^=n<<Je.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!Ei.isValidMaskPattern(n))throw new Wt("Invalid mask pattern");const l=e.getBits()<<3|n;i.appendBits(l,5);const c=Je.calculateBCHCode(l,Je.TYPE_INFO_POLY);i.appendBits(c,10);const u=new J;if(u.appendBits(Je.TYPE_INFO_MASK_PATTERN,15),i.xor(u),i.getSize()!==15)throw new Wt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=Je.calculateBCHCode(e.getVersionNumber(),Je.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new Wt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;Je.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),Je.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Wt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let l=0;l<8;++l){if(!Je.isEmpty(i.get(e+l,n)))throw new Wt;i.setNumber(e+l,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let l=0;l<7;++l){if(!Je.isEmpty(i.get(e,n+l)))throw new Wt;i.setNumber(e,n+l,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let l=0;l<5;++l){const c=Je.POSITION_ADJUSTMENT_PATTERN[l];for(let u=0;u<5;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPattern(e,n,i){for(let l=0;l<7;++l){const c=Je.POSITION_DETECTION_PATTERN[l];for(let u=0;u<7;++u)i.setNumber(e+u,n+l,c[u])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Je.POSITION_DETECTION_PATTERN[0].length;Je.embedPositionDetectionPattern(0,0,e),Je.embedPositionDetectionPattern(e.getWidth()-n,0,e),Je.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;Je.embedHorizontalSeparationPattern(0,i-1,e),Je.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Je.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const l=7;Je.embedVerticalSeparationPattern(l,0,e),Je.embedVerticalSeparationPattern(e.getHeight()-l-1,0,e),Je.embedVerticalSeparationPattern(l,e.getHeight()-l,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,l=Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let c=0,u=l.length;c!==u;c++){const h=l[c];if(h>=0)for(let m=0;m!==u;m++){const v=l[m];v>=0&&Je.isEmpty(n.get(v,h))&&Je.embedPositionAdjustmentPattern(v-2,h-2,n)}}}}Je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Je.VERSION_INFO_POLY=7973,Je.TYPE_INFO_POLY=1335,Je.TYPE_INFO_MASK_PATTERN=21522;class kc{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ht{constructor(){}static calculateMaskPenalty(e){return Zt.applyMaskPenaltyRule1(e)+Zt.applyMaskPenaltyRule2(e)+Zt.applyMaskPenaltyRule3(e)+Zt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let l=Ht.DEFAULT_BYTE_MODE_ENCODING;const c=i!==null&&i.get(yn.CHARACTER_SET)!==void 0;c&&(l=i.get(yn.CHARACTER_SET).toString());const u=this.chooseMode(e,l),h=new J;if(u===Ze.BYTE&&(c||Ht.DEFAULT_BYTE_MODE_ENCODING!==l)){const Se=q.getCharacterSetECIByName(l);Se!==void 0&&this.appendECI(Se,h)}this.appendModeInfo(u,h);const m=new J;this.appendBytes(e,u,m,l);let v;if(i!==null&&i.get(yn.QR_VERSION)!==void 0){const Se=Number.parseInt(i.get(yn.QR_VERSION).toString(),10);v=Ye.getVersionForNumber(Se);const xe=this.calculateBitsNeeded(u,h,m,v);if(!this.willFit(xe,v,n))throw new Wt("Data too big for requested version")}else v=this.recommendVersion(n,u,h,m);const T=new J;T.appendBitArray(h);const O=u===Ze.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(O,v,u,T),T.appendBitArray(m);const D=v.getECBlocksForLevel(n),V=v.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(V,T);const G=this.interleaveWithECBytes(T,v.getTotalCodewords(),V,D.getNumBlocks()),K=new Ei;K.setECLevel(n),K.setMode(u),K.setVersion(v);const Q=v.getDimensionForVersion(),se=new oo(Q,Q),Ae=this.chooseMaskPattern(G,n,v,se);return K.setMaskPattern(Ae),Je.buildMatrix(G,n,v,Ae,se),K.setMatrix(se),K}static recommendVersion(e,n,i,l){const c=this.calculateBitsNeeded(n,i,l,Ye.getVersionForNumber(1)),u=this.chooseVersion(c,e),h=this.calculateBitsNeeded(n,i,l,u);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,n,i,l){return n.getSize()+e.getCharacterCountBits(l)+i.getSize()}static getAlphanumericCode(e){return e<Ht.ALPHANUMERIC_TABLE.length?Ht.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(q.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ze.KANJI;let i=!1,l=!1;for(let c=0,u=e.length;c<u;++c){const h=e.charAt(c);if(Ht.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return Ze.BYTE}return l?Ze.ALPHANUMERIC:i?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Fe.encode(e,q.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let l=0;l<i;l+=2){const c=n[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,n,i,l){let c=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Ei.NUM_MASK_PATTERNS;h++){Je.buildMatrix(e,n,i,h,l);let m=this.calculateMaskPenalty(l);m<c&&(c=m,u=h)}return u}static chooseVersion(e,n){for(let i=1;i<=40;i++){const l=Ye.getVersionForNumber(i);if(Ht.willFit(e,l,n))return l}throw new Wt("Data too big")}static willFit(e,n,i){const l=n.getTotalCodewords(),u=n.getECBlocksForLevel(i).getTotalECCodewords(),h=l-u,m=(e+7)/8;return h>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new Wt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let u=0;u<4&&n.getSize()<i;++u)n.appendBit(!1);const l=n.getSize()&7;if(l>0)for(let u=l;u<8;u++)n.appendBit(!1);const c=e-n.getSizeInBytes();for(let u=0;u<c;++u)n.appendBits(u&1?17:236,8);if(n.getSize()!==i)throw new Wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,l,c,u){if(l>=i)throw new Wt("Block ID too large");const h=e%i,m=i-h,v=Math.floor(e/i),T=v+1,O=Math.floor(n/i),D=O+1,V=v-O,G=T-D;if(V!==G)throw new Wt("EC bytes mismatch");if(i!==m+h)throw new Wt("RS blocks mismatch");if(e!==(O+V)*m+(D+G)*h)throw new Wt("Total bytes mismatch");l<m?(c[0]=O,u[0]=V):(c[0]=D,u[0]=G)}static interleaveWithECBytes(e,n,i,l){if(e.getSizeInBytes()!==i)throw new Wt("Number of bits and data bytes does not match");let c=0,u=0,h=0;const m=new Array;for(let T=0;T<l;++T){const O=new Int32Array(1),D=new Int32Array(1);Ht.getNumDataBytesAndNumECBytesForBlockID(n,i,l,T,O,D);const V=O[0],G=new Uint8Array(V);e.toBytes(8*c,G,0,V);const K=Ht.generateECBytes(G,D[0]);m.push(new kc(G,K)),u=Math.max(u,V),h=Math.max(h,K.length),c+=O[0]}if(i!==c)throw new Wt("Data bytes does not match offset");const v=new J;for(let T=0;T<u;++T)for(const O of m){const D=O.getDataBytes();T<D.length&&v.appendBits(D[T],8)}for(let T=0;T<h;++T)for(const O of m){const D=O.getErrorCorrectionBytes();T<D.length&&v.appendBits(D[T],8)}if(n!==v.getSizeInBytes())throw new Wt("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(e,n){const i=e.length,l=new Int32Array(i+n);for(let u=0;u<i;u++)l[u]=e[u]&255;new $o(Me.QR_CODE_FIELD_256).encode(l,n);const c=new Uint8Array(n);for(let u=0;u<n;u++)c[u]=l[i+u];return c}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,l){const c=i.getCharacterCountBits(n);if(e>=1<<c)throw new Wt(e+" is bigger than "+((1<<c)-1));l.appendBits(e,c)}static appendBytes(e,n,i,l){switch(n){case Ze.NUMERIC:Ht.appendNumericBytes(e,i);break;case Ze.ALPHANUMERIC:Ht.appendAlphanumericBytes(e,i);break;case Ze.BYTE:Ht.append8BitBytes(e,i,l);break;case Ze.KANJI:Ht.appendKanjiBytes(e,i);break;default:throw new Wt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Ht.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Ht.getDigit(e.charAt(l));if(l+2<i){const u=Ht.getDigit(e.charAt(l+1)),h=Ht.getDigit(e.charAt(l+2));n.appendBits(c*100+u*10+h,10),l+=3}else if(l+1<i){const u=Ht.getDigit(e.charAt(l+1));n.appendBits(c*10+u,7),l+=2}else n.appendBits(c,4),l++}}static appendAlphanumericBytes(e,n){const i=e.length;let l=0;for(;l<i;){const c=Ht.getAlphanumericCode(e.charCodeAt(l));if(c===-1)throw new Wt;if(l+1<i){const u=Ht.getAlphanumericCode(e.charCodeAt(l+1));if(u===-1)throw new Wt;n.appendBits(c*45+u,11),l+=2}else n.appendBits(c,6),l++}}static append8BitBytes(e,n,i){let l;try{l=Fe.encode(e,i)}catch(c){throw new Wt(c)}for(let c=0,u=l.length;c!==u;c++){const h=l[c];n.appendBits(h,8)}}static appendKanjiBytes(e,n){let i;try{i=Fe.encode(e,q.SJIS)}catch(c){throw new Wt(c)}const l=i.length;for(let c=0;c<l;c+=2){const u=i[c]&255,h=i[c+1]&255,m=u<<8&4294967295|h;let v=-1;if(m>=33088&&m<=40956?v=m-33088:m>=57408&&m<=60351&&(v=m-49472),v===-1)throw new Wt("Invalid byte sequence");const T=(v>>8)*192+(v&255);n.appendBits(T,13)}}static appendECI(e,n){n.appendBits(Ze.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ht.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class Ai{write(e,n,i,l=null){if(e.length===0)throw new N("Found empty contents");if(n<0||i<0)throw new N("Requested dimensions are too small: "+n+"x"+i);let c=Ut.L,u=Ai.QUIET_ZONE_SIZE;l!==null&&(l.get(yn.ERROR_CORRECTION)!==void 0&&(c=Ut.fromString(l.get(yn.ERROR_CORRECTION).toString())),l.get(yn.MARGIN)!==void 0&&(u=Number.parseInt(l.get(yn.MARGIN).toString(),10)));const h=Ht.encode(e,c,l);return this.renderResult(h,n,i,u)}writeToDom(e,n,i,l,c=null){typeof e=="string"&&(e=document.querySelector(e));const u=this.write(n,i,l,c);e&&e.appendChild(u)}renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Bt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,v=h+l*2,T=Math.max(n,m),O=Math.max(i,v),D=Math.min(Math.floor(T/m),Math.floor(O/v)),V=Math.floor((T-u*D)/2),G=Math.floor((O-h*D)/2),K=this.createSVGElement(T,O);for(let Q=0,se=G;Q<h;Q++,se+=D)for(let Ae=0,Se=V;Ae<u;Ae++,Se+=D)if(c.get(Ae,Q)===1){const xe=this.createSvgRectElement(Se,se,D,D);K.appendChild(xe)}return K}createSVGElement(e,n){const i=document.createElementNS(Ai.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,l){const c=document.createElementNS(Ai.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ai.QUIET_ZONE_SIZE=4,Ai.SVG_NS="http://www.w3.org/2000/svg";class Ki{encode(e,n,i,l,c){if(e.length===0)throw new N("Found empty contents");if(n!==we.QR_CODE)throw new N("Can only encode QR_CODE, but got "+n);if(i<0||l<0)throw new N(`Requested dimensions are too small: ${i}x${l}`);let u=Ut.L,h=Ki.QUIET_ZONE_SIZE;c!==null&&(c.get(yn.ERROR_CORRECTION)!==void 0&&(u=Ut.fromString(c.get(yn.ERROR_CORRECTION).toString())),c.get(yn.MARGIN)!==void 0&&(h=Number.parseInt(c.get(yn.MARGIN).toString(),10)));const m=Ht.encode(e,u,c);return Ki.renderResult(m,i,l,h)}static renderResult(e,n,i,l){const c=e.getMatrix();if(c===null)throw new Bt;const u=c.getWidth(),h=c.getHeight(),m=u+l*2,v=h+l*2,T=Math.max(n,m),O=Math.max(i,v),D=Math.min(Math.floor(T/m),Math.floor(O/v)),V=Math.floor((T-u*D)/2),G=Math.floor((O-h*D)/2),K=new ke(T,O);for(let Q=0,se=G;Q<h;Q++,se+=D)for(let Ae=0,Se=V;Ae<u;Ae++,Se+=D)c.get(Ae,Q)===1&&K.setRegion(Se,se,D,D);return K}}Ki.QUIET_ZONE_SIZE=4;class Lc{encode(e,n,i,l,c){let u;switch(n){case we.QR_CODE:u=new Ki;break;default:throw new N("No encoder available for format "+n)}return u.encode(e,n,i,l,c)}}class _r extends de{constructor(e,n,i,l,c,u,h,m){if(super(u,h),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=l,this.top=c,l+u>n||c+h>i)throw new N("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(u,h)}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.yuvData,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new _r(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,l,!1)}renderThumbnail(){const e=this.getWidth()/_r.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/_r.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let u=0;u<n;u++){const h=u*e;for(let m=0;m<e;m++){const v=l[c+m*_r.THUMBNAIL_SCALE_FACTOR]&255;i[h+m]=4278190080|v*65793}c+=this.dataWidth*_r.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/_r.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_r.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<n;l++,c+=this.dataWidth){const u=c+e/2;for(let h=c,m=c+e-1;h<u;h++,m--){const v=i[h];i[h]=i[m],i[m]=v}}}invert(){return new Te(this)}}_r.THUMBNAIL_SCALE_FACTOR=2;class Rs extends de{constructor(e,n,i,l,c,u,h){if(super(n,i),this.dataWidth=l,this.dataHeight=c,this.left=u,this.top=h,e.BYTES_PER_ELEMENT===4){const m=n*i,v=new Uint8ClampedArray(m);for(let T=0;T<m;T++){const O=e[T],D=O>>16&255,V=O>>7&510,G=O&255;v[T]=(D+V+G)/4&255}this.luminances=v}else this.luminances=e;if(l===void 0&&(this.dataWidth=n),c===void 0&&(this.dataHeight=i),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const l=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,l,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,l=new Uint8ClampedArray(i);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,c,l,0,i),l;for(let u=0;u<n;u++){const h=u*e;B.arraycopy(this.luminances,c,l,h,e),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(e,n,i,l){return new Rs(this.luminances,i,l,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Te(this)}}class rl extends q{static forName(e){return this.getCharacterSetECIByName(e)}}class qo{}qo.ISO_8859_1=q.ISO8859_1;class il{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Qo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Bc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Zi extends Bc{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Zi(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zi(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+z.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Jo extends Zi{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Jo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fc(_,e,n){return new Jo(_,e,n)}function _s(_,e,n){return new Zi(_,e,n)}const jc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],oi=0,$i=1,kn=2,sl=3,Er=4,ol=new Zi(null,0,0),ao=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function al(_){for(let e of _)H.fill(e,-1);return _[oi][Er]=0,_[$i][Er]=0,_[$i][oi]=28,_[sl][Er]=0,_[kn][Er]=0,_[kn][oi]=15,_}const ea=al(H.createInt32Array(6,6));class Vn{constructor(e,n,i,l){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,l=this.token;if(e!==this.mode){let u=ao[this.mode][e];l=_s(l,u&65535,u>>16),i+=u>>16}let c=e===kn?4:5;return l=_s(l,n,c),new Vn(l,e,0,i+c)}shiftAndAppend(e,n){let i=this.token,l=this.mode===kn?4:5;return i=_s(i,ea[this.mode][e],l),i=_s(i,n,5),new Vn(i,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,l=this.bitCount;if(this.mode===Er||this.mode===kn){let h=ao[i][oi];n=_s(n,h&65535,h>>16),l+=h>>16,i=oi}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Vn(n,i,this.binaryShiftByteCount+1,l+c);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Fc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(ao[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=Vn.calculateBinaryShiftCost(e)-Vn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let l=this.endBinaryShift(e.length).token;l!==null;l=l.getPrevious())n.unshift(l);let i=new J;for(const l of n)l.appendTo(i,e);return i}toString(){return Re.format("%s bits=%d bytes=%d",jc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Vn.INITIAL_STATE=new Vn(ol,oi,0,0);function Vc(_){const e=Re.getCharCode(" "),n=Re.getCharCode("."),i=Re.getCharCode(",");_[oi][e]=1;const l=Re.getCharCode("Z"),c=Re.getCharCode("A");for(let D=c;D<=l;D++)_[oi][D]=D-c+2;_[$i][e]=1;const u=Re.getCharCode("z"),h=Re.getCharCode("a");for(let D=h;D<=u;D++)_[$i][D]=D-h+2;_[kn][e]=1;const m=Re.getCharCode("9"),v=Re.getCharCode("0");for(let D=v;D<=m;D++)_[kn][D]=D-v+2;_[kn][i]=12,_[kn][n]=13;const T=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<T.length;D++)_[sl][Re.getCharCode(T[D])]=D;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<O.length;D++)Re.getCharCode(O[D])>0&&(_[Er][Re.getCharCode(O[D])]=D);return _}const ta=Vc(H.createInt32Array(5,256));class Os{constructor(e){this.text=e}encode(){const e=Re.getCharCode(" "),n=Re.getCharCode(`
`);let i=Qo.singletonList(Vn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let u,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Re.getCharCode("\r"):u=h===n?2:0;break;case Re.getCharCode("."):u=h===e?3:0;break;case Re.getCharCode(","):u=h===e?4:0;break;case Re.getCharCode(":"):u=h===e?5:0;break;default:u=0}u>0?(i=Os.updateStateListForPair(i,c,u),c++):i=this.updateStateListForChar(i,c)}return Qo.min(i,(c,u)=>c.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let l of e)this.updateStateForChar(l,n,i);return Os.simplifyStates(i)}updateStateForChar(e,n,i){let l=this.text[n]&255,c=ta[e.getMode()][l]>0,u=null;for(let h=0;h<=Er;h++){let m=ta[h][l];if(m>0){if(u==null&&(u=e.endBinaryShift(n)),!c||h===e.getMode()||h===kn){const v=u.latchAndAppend(h,m);i.push(v)}if(!c&&ea[e.getMode()][h]>=0){const v=u.shiftAndAppend(h,m);i.push(v)}}}if(e.getBinaryShiftByteCount()>0||ta[e.getMode()][l]===0){let h=e.addBinaryShiftChar(n);i.push(h)}}static updateStateListForPair(e,n,i){const l=[];for(let c of e)this.updateStateForPair(c,n,i,l);return this.simplifyStates(l)}static updateStateForPair(e,n,i,l){let c=e.endBinaryShift(n);if(l.push(c.latchAndAppend(Er,i)),e.getMode()!==Er&&l.push(c.shiftAndAppend(Er,i)),i===3||i===4){let u=c.latchAndAppend(kn,16-i).latchAndAppend(kn,1);l.push(u)}if(e.getBinaryShiftByteCount()>0){let u=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);l.push(u)}}static simplifyStates(e){let n=[];for(const i of e){let l=!0;for(const c of n){if(c.isBetterThanOrEqualTo(i)){l=!1;break}i.isBetterThanOrEqualTo(c)&&(n=n.filter(u=>u!==c))}l&&n.push(i)}return n}}class Ot{constructor(){}static encodeBytes(e){return Ot.encode(e,Ot.DEFAULT_EC_PERCENT,Ot.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let l=new Os(e).encode(),c=z.truncDivision(l.getSize()*n,100)+11,u=l.getSize()+c,h,m,v,T,O;if(i!==Ot.DEFAULT_AZTEC_LAYERS){if(h=i<0,m=Math.abs(i),m>(h?Ot.MAX_NB_BITS_COMPACT:Ot.MAX_NB_BITS))throw new N(Re.format("Illegal value %s for layers",i));v=Ot.totalBitsInLayer(m,h),T=Ot.WORD_SIZE[m];let xe=v-v%T;if(O=Ot.stuffBits(l,T),O.getSize()+c>xe)throw new N("Data to large for user specified layer");if(h&&O.getSize()>T*64)throw new N("Data to large for user specified layer")}else{T=0,O=null;for(let xe=0;;xe++){if(xe>Ot.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(h=xe<=3,m=h?xe+1:xe,v=Ot.totalBitsInLayer(m,h),u>v)continue;(O==null||T!==Ot.WORD_SIZE[m])&&(T=Ot.WORD_SIZE[m],O=Ot.stuffBits(l,T));let Et=v-v%T;if(!(h&&O.getSize()>T*64)&&O.getSize()+c<=Et)break}}let D=Ot.generateCheckWords(O,v,T),V=O.getSize()/T,G=Ot.generateModeMessage(h,m,V),K=(h?11:14)+m*4,Q=new Int32Array(K),se;if(h){se=K;for(let xe=0;xe<Q.length;xe++)Q[xe]=xe}else{se=K+1+2*z.truncDivision(z.truncDivision(K,2)-1,15);let xe=z.truncDivision(K,2),Et=z.truncDivision(se,2);for(let lt=0;lt<xe;lt++){let qn=lt+z.truncDivision(lt,15);Q[xe-lt-1]=Et-qn-1,Q[xe+lt]=Et+qn+1}}let Ae=new ke(se);for(let xe=0,Et=0;xe<m;xe++){let lt=(m-xe)*4+(h?9:12);for(let qn=0;qn<lt;qn++){let Ar=qn*2;for(let wn=0;wn<2;wn++)D.get(Et+Ar+wn)&&Ae.set(Q[xe*2+wn],Q[xe*2+qn]),D.get(Et+lt*2+Ar+wn)&&Ae.set(Q[xe*2+qn],Q[K-1-xe*2-wn]),D.get(Et+lt*4+Ar+wn)&&Ae.set(Q[K-1-xe*2-wn],Q[K-1-xe*2-qn]),D.get(Et+lt*6+Ar+wn)&&Ae.set(Q[K-1-xe*2-qn],Q[xe*2+wn])}Et+=lt*8}if(Ot.drawModeMessage(Ae,h,se,G),h)Ot.drawBullsEye(Ae,z.truncDivision(se,2),5);else{Ot.drawBullsEye(Ae,z.truncDivision(se,2),7);for(let xe=0,Et=0;xe<z.truncDivision(K,2)-1;xe+=15,Et+=16)for(let lt=z.truncDivision(se,2)&1;lt<se;lt+=2)Ae.set(z.truncDivision(se,2)-Et,lt),Ae.set(z.truncDivision(se,2)+Et,lt),Ae.set(lt,z.truncDivision(se,2)-Et),Ae.set(lt,z.truncDivision(se,2)+Et)}let Se=new il;return Se.setCompact(h),Se.setSize(se),Se.setLayers(m),Se.setCodeWords(V),Se.setMatrix(Ae),Se}static drawBullsEye(e,n,i){for(let l=0;l<i;l+=2)for(let c=n-l;c<=n+l;c++)e.set(c,n-l),e.set(c,n+l),e.set(n-l,c),e.set(n+l,c);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let l=new J;return e?(l.appendBits(n-1,2),l.appendBits(i-1,6),l=Ot.generateCheckWords(l,28,4)):(l.appendBits(n-1,5),l.appendBits(i-1,11),l=Ot.generateCheckWords(l,40,4)),l}static drawModeMessage(e,n,i,l){let c=z.truncDivision(i,2);if(n)for(let u=0;u<7;u++){let h=c-3+u;l.get(u)&&e.set(h,c-5),l.get(u+7)&&e.set(c+5,h),l.get(20-u)&&e.set(h,c+5),l.get(27-u)&&e.set(c-5,h)}else for(let u=0;u<10;u++){let h=c-5+u+z.truncDivision(u,5);l.get(u)&&e.set(h,c-7),l.get(u+10)&&e.set(c+7,h),l.get(29-u)&&e.set(h,c+7),l.get(39-u)&&e.set(c-7,h)}}static generateCheckWords(e,n,i){let l=e.getSize()/i,c=new $o(Ot.getGF(i)),u=z.truncDivision(n,i),h=Ot.bitsToWords(e,i,u);c.encode(h,u-l);let m=n%i,v=new J;v.appendBits(0,m);for(const T of Array.from(h))v.appendBits(T,i);return v}static bitsToWords(e,n,i){let l=new Int32Array(i),c,u;for(c=0,u=e.getSize()/n;c<u;c++){let h=0;for(let m=0;m<n;m++)h|=e.get(c*n+m)?1<<n-m-1:0;l[c]=h}return l}static getGF(e){switch(e){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,n){let i=new J,l=e.getSize(),c=(1<<n)-2;for(let u=0;u<l;u+=n){let h=0;for(let m=0;m<n;m++)(u+m>=l||e.get(u+m))&&(h|=1<<n-1-m);(h&c)===c?(i.appendBits(h&c,n),u--):h&c?i.appendBits(h,n):(i.appendBits(h|1,n),u--)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Ot.DEFAULT_EC_PERCENT=33,Ot.DEFAULT_AZTEC_LAYERS=0,Ot.MAX_NB_BITS=32,Ot.MAX_NB_BITS_COMPACT=4,Ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ps{encode(e,n,i,l){return this.encodeWithHints(e,n,i,l,null)}encodeWithHints(e,n,i,l,c){let u=qo.ISO_8859_1,h=Ot.DEFAULT_EC_PERCENT,m=Ot.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(yn.CHARACTER_SET)&&(u=rl.forName(c.get(yn.CHARACTER_SET).toString())),c.has(yn.ERROR_CORRECTION)&&(h=z.parseInt(c.get(yn.ERROR_CORRECTION).toString())),c.has(yn.AZTEC_LAYERS)&&(m=z.parseInt(c.get(yn.AZTEC_LAYERS).toString()))),Ps.encodeLayers(e,n,i,l,u,h,m)}static encodeLayers(e,n,i,l,c,u,h){if(n!==we.AZTEC)throw new N("Can only encode AZTEC, but got "+n);let m=Ot.encode(Re.getBytes(e,c),u,h);return Ps.renderResult(m,i,l)}static renderResult(e,n,i){let l=e.getMatrix();if(l==null)throw new Bt;let c=l.getWidth(),u=l.getHeight(),h=Math.max(n,c),m=Math.max(i,u),v=Math.min(h/c,m/u),T=(h-c*v)/2,O=(m-u*v)/2,D=new ke(h,m);for(let V=0,G=O;V<u;V++,G+=v)for(let K=0,Q=T;K<c;K++,Q+=v)l.get(K,V)&&D.setRegion(Q,G,v,v);return D}}a.AbstractExpandedDecoder=vs,a.ArgumentException=S,a.ArithmeticException=dt,a.AztecCode=il,a.AztecCodeReader=Mt,a.AztecCodeWriter=Ps,a.AztecDecoder=bt,a.AztecDetector=rn,a.AztecDetectorResult=wt,a.AztecEncoder=Ot,a.AztecHighLevelEncoder=Os,a.AztecPoint=pt,a.BarcodeFormat=we,a.Binarizer=L,a.BinaryBitmap=R,a.BitArray=J,a.BitMatrix=ke,a.BitSource=Wo,a.BrowserAztecCodeReader=zt,a.BrowserBarcodeReader=Uo,a.BrowserCodeReader=Ee,a.BrowserDatamatrixCodeReader=Dc,a.BrowserMultiFormatReader=Ns,a.BrowserPDF417Reader=so,a.BrowserQRCodeReader=nl,a.BrowserQRCodeSvgWriter=Ai,a.CharacterSetECI=q,a.ChecksumException=k,a.Code128Reader=be,a.Code39Reader=Vt,a.DataMatrixDecodedBitStreamParser=wr,a.DataMatrixReader=vr,a.DecodeHintType=ue,a.DecoderResult=mt,a.DefaultGridSampler=jt,a.DetectorResult=Xn,a.EAN13Reader=Yn,a.EncodeHintType=yn,a.Exception=E,a.FormatException=$,a.GenericGF=Me,a.GenericGFPoly=ct,a.GlobalHistogramBinarizer=je,a.GridSampler=Pe,a.GridSamplerInstance=yt,a.HTMLCanvasElementLuminanceSource=fe,a.HybridBinarizer=he,a.ITFReader=Tt,a.IllegalArgumentException=N,a.IllegalStateException=Bt,a.InvertedLuminanceSource=Te,a.LuminanceSource=de,a.MathUtils=ht,a.MultiFormatOneDReader=sr,a.MultiFormatReader=io,a.MultiFormatWriter=Lc,a.NotFoundException=ee,a.OneDReader=It,a.PDF417DecodedBitStreamParser=oe,a.PDF417DecoderErrorCorrection=Xo,a.PDF417Reader=_n,a.PDF417ResultMetadata=no,a.PerspectiveTransform=Qe,a.PlanarYUVLuminanceSource=_r,a.QRCodeByteMatrix=oo,a.QRCodeDataMask=xt,a.QRCodeDecodedBitStreamParser=Kt,a.QRCodeDecoderErrorCorrectionLevel=Ut,a.QRCodeDecoderFormatInformation=Tn,a.QRCodeEncoder=Ht,a.QRCodeEncoderQRCode=Ei,a.QRCodeMaskUtil=Zt,a.QRCodeMatrixUtil=Je,a.QRCodeMode=Ze,a.QRCodeReader=jn,a.QRCodeVersion=Ye,a.QRCodeWriter=Ki,a.RGBLuminanceSource=Rs,a.RSS14Reader=Nt,a.RSSExpandedReader=pe,a.ReaderException=Yi,a.ReedSolomonDecoder=Gt,a.ReedSolomonEncoder=$o,a.ReedSolomonException=At,a.Result=Ve,a.ResultMetadataType=ze,a.ResultPoint=Ne,a.StringUtils=Re,a.UnsupportedOperationException=_e,a.VideoInputDevice=X,a.WhiteRectangleDetector=ve,a.WriterException=Wt,a.ZXingArrays=H,a.ZXingCharset=rl,a.ZXingInteger=z,a.ZXingStandardCharsets=qo,a.ZXingStringBuilder=Oe,a.ZXingStringEncoding=Fe,a.ZXingSystem=B,a.createAbstractExpandedDecoder=Ke,Object.defineProperty(a,"__esModule",{value:!0})})}(Na,Na.exports)),Na.exports}Yy();var ud=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),tg=function(){function r(o,a){this.name=o,this.track=a}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(o){var a={};a[this.name]=o;var d={advanced:[a]};return this.track.applyConstraints(d)},r.prototype.value=function(){var o=this.track.getSettings();if(this.name in o){var a=o[this.name];return a}return null},r}(),Ky=function(r){ud(o,r);function o(a,d){return r.call(this,a,d)||this}return o.prototype.min=function(){return this.getCapabilities().min},o.prototype.max=function(){return this.getCapabilities().max},o.prototype.step=function(){return this.getCapabilities().step},o.prototype.apply=function(a){var d={};d[this.name]=a;var p={advanced:[d]};return this.track.applyConstraints(p)},o.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),d=a[this.name];return{min:d.min,max:d.max,step:d.step}},o.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},o}(tg);(function(r){ud(o,r);function o(a){return r.call(this,"zoom",a)||this}return o})(Ky);(function(r){ud(o,r);function o(a){return r.call(this,"torch",a)||this}return o})(tg);var m1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(m1||(m1={}));var Zy=function(){var r=function(o,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])},r(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(o,a);function d(){this.constructor=o}o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();(function(r){Zy(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o.DEFAULT_WIDTH=300,o.DEFAULT_WIDTH_OFFSET=2,o.FILE_SCAN_MIN_HEIGHT=300,o.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,o.MIN_QR_BOX_SIZE=50,o.SHADED_LEFT=1,o.SHADED_RIGHT=2,o.SHADED_TOP=3,o.SHADED_BOTTOM=4,o.SHADED_REGION_ELEMENT_ID="qr-shaded-region",o.VERBOSE=!1,o.BORDER_SHADER_DEFAULT_COLOR="#ffffff",o.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",o})(Gy);var x1;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(x1||(x1={}));const $y=({user:r,onProfileClick:o})=>{const a=Ur();return I.jsx("div",{children:I.jsx("div",{style:{position:"absolute",top:"45px",display:"flex",alignItems:"center",width:"94%",height:"10px",left:"3%"},children:r==null?I.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[I.jsx("button",{className:"login-button",onClick:()=>a("/login"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Login"})}),I.jsx("button",{className:"login-button",onClick:()=>a("/signup"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Sign up"})})]}):I.jsxs("div",{style:{position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"},children:[I.jsx("button",{className:"login-button",onClick:()=>a("/logout"),style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Logout"})}),I.jsx("button",{className:"login-button",onClick:o,style:{width:"100px",height:"35px",borderRadius:"13px",boxShadow:"0 0 4px rgba(74, 58, 58, 0.5)",outline:"1px solid rgba(252, 240, 240, 0.6)",fontWeight:"900",fontSize:"1rem",padding:"10px 10px",display:"flex",justifyContent:"center",alignItems:"center"},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Profile"})})]})})})},fd=P.createContext({});function dd(r){const o=P.useRef(null);return o.current===null&&(o.current=r()),o.current}const hd=typeof window<"u",ng=hd?P.useLayoutEffect:P.useEffect,Rc=P.createContext(null);function pd(r,o){r.indexOf(o)===-1&&r.push(o)}function gd(r,o){const a=r.indexOf(o);a>-1&&r.splice(a,1)}const Li=(r,o,a)=>a>o?o:a<r?r:a;let md=()=>{};const Bi={},rg=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function ig(r){return typeof r=="object"&&r!==null}const sg=r=>/^0[^.\s]+$/u.test(r);function xd(r){let o;return()=>(o===void 0&&(o=r()),o)}const jr=r=>r,qy=(r,o)=>a=>o(r(a)),Xa=(...r)=>r.reduce(qy),Ba=(r,o,a)=>{const d=o-r;return d===0?1:(a-r)/d};class yd{constructor(){this.subscriptions=[]}add(o){return pd(this.subscriptions,o),()=>gd(this.subscriptions,o)}notify(o,a,d){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](o,a,d);else for(let x=0;x<p;x++){const y=this.subscriptions[x];y&&y(o,a,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const di=r=>r*1e3,hi=r=>r/1e3;function og(r,o){return o?r*(1e3/o):0}const ag=(r,o,a)=>(((1-3*a+3*o)*r+(3*a-6*o))*r+3*o)*r,Qy=1e-7,Jy=12;function ew(r,o,a,d,p){let x,y,A=0;do y=o+(a-o)/2,x=ag(y,d,p)-r,x>0?a=y:o=y;while(Math.abs(x)>Qy&&++A<Jy);return y}function Ya(r,o,a,d){if(r===o&&a===d)return jr;const p=x=>ew(x,0,1,r,a);return x=>x===0||x===1?x:ag(p(x),o,d)}const lg=r=>o=>o<=.5?r(2*o)/2:(2-r(2*(1-o)))/2,cg=r=>o=>1-r(1-o),ug=Ya(.33,1.53,.69,.99),wd=cg(ug),fg=lg(wd),dg=r=>(r*=2)<1?.5*wd(r):.5*(2-Math.pow(2,-10*(r-1))),vd=r=>1-Math.sin(Math.acos(r)),hg=cg(vd),pg=lg(vd),tw=Ya(.42,0,1,1),nw=Ya(0,0,.58,1),gg=Ya(.42,0,.58,1),rw=r=>Array.isArray(r)&&typeof r[0]!="number",mg=r=>Array.isArray(r)&&typeof r[0]=="number",iw={linear:jr,easeIn:tw,easeInOut:gg,easeOut:nw,circIn:vd,circInOut:pg,circOut:hg,backIn:wd,backInOut:fg,backOut:ug,anticipate:dg},sw=r=>typeof r=="string",y1=r=>{if(mg(r)){md(r.length===4);const[o,a,d,p]=r;return Ya(o,a,d,p)}else if(sw(r))return iw[r];return r},nc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ow(r,o){let a=new Set,d=new Set,p=!1,x=!1;const y=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1};function w(S){y.has(S)&&(E.schedule(S),r()),S(A)}const E={schedule:(S,N=!1,R=!1)=>{const L=R&&p?a:d;return N&&y.add(S),L.has(S)||L.add(S),S},cancel:S=>{d.delete(S),y.delete(S)},process:S=>{if(A=S,p){x=!0;return}p=!0,[a,d]=[d,a],a.forEach(w),a.clear(),p=!1,x&&(x=!1,E.process(S))}};return E}const aw=40;function xg(r,o){let a=!1,d=!0;const p={delta:0,timestamp:0,isProcessing:!1},x=()=>a=!0,y=nc.reduce((z,J)=>(z[J]=ow(x),z),{}),{setup:A,read:w,resolveKeyframes:E,preUpdate:S,update:N,preRender:R,render:k,postRender:L}=y,B=()=>{const z=Bi.useManualTiming?p.timestamp:performance.now();a=!1,Bi.useManualTiming||(p.delta=d?1e3/60:Math.max(Math.min(z-p.timestamp,aw),1)),p.timestamp=z,p.isProcessing=!0,A.process(p),w.process(p),E.process(p),S.process(p),N.process(p),R.process(p),k.process(p),L.process(p),p.isProcessing=!1,a&&o&&(d=!1,r(B))},j=()=>{a=!0,d=!0,p.isProcessing||r(B)};return{schedule:nc.reduce((z,J)=>{const le=y[J];return z[J]=(ue,$=!1,ce=!1)=>(a||j(),le.schedule(ue,$,ce)),z},{}),cancel:z=>{for(let J=0;J<nc.length;J++)y[nc[J]].cancel(z)},state:p,steps:y}}const{schedule:nn,cancel:gs,state:Gn,steps:hf}=xg(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let uc;function lw(){uc=void 0}const yr={now:()=>(uc===void 0&&yr.set(Gn.isProcessing||Bi.useManualTiming?Gn.timestamp:performance.now()),uc),set:r=>{uc=r,queueMicrotask(lw)}},yg=r=>o=>typeof o=="string"&&o.startsWith(r),Cd=yg("--"),cw=yg("var(--"),Ed=r=>cw(r)?uw.test(r.split("/*")[0].trim()):!1,uw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fo={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Fa={...Fo,transform:r=>Li(0,1,r)},rc={...Fo,default:1},_a=r=>Math.round(r*1e5)/1e5,Ad=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fw(r){return r==null}const dw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sd=(r,o)=>a=>!!(typeof a=="string"&&dw.test(a)&&a.startsWith(r)||o&&!fw(a)&&Object.prototype.hasOwnProperty.call(a,o)),wg=(r,o,a)=>d=>{if(typeof d!="string")return d;const[p,x,y,A]=d.match(Ad);return{[r]:parseFloat(p),[o]:parseFloat(x),[a]:parseFloat(y),alpha:A!==void 0?parseFloat(A):1}},hw=r=>Li(0,255,r),pf={...Fo,transform:r=>Math.round(hw(r))},Ys={test:Sd("rgb","red"),parse:wg("red","green","blue"),transform:({red:r,green:o,blue:a,alpha:d=1})=>"rgba("+pf.transform(r)+", "+pf.transform(o)+", "+pf.transform(a)+", "+_a(Fa.transform(d))+")"};function pw(r){let o="",a="",d="",p="";return r.length>5?(o=r.substring(1,3),a=r.substring(3,5),d=r.substring(5,7),p=r.substring(7,9)):(o=r.substring(1,2),a=r.substring(2,3),d=r.substring(3,4),p=r.substring(4,5),o+=o,a+=a,d+=d,p+=p),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(d,16),alpha:p?parseInt(p,16)/255:1}}const Of={test:Sd("#"),parse:pw,transform:Ys.transform},Ka=r=>({test:o=>typeof o=="string"&&o.endsWith(r)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${r}`}),ds=Ka("deg"),pi=Ka("%"),it=Ka("px"),gw=Ka("vh"),mw=Ka("vw"),w1={...pi,parse:r=>pi.parse(r)/100,transform:r=>pi.transform(r*100)},Io={test:Sd("hsl","hue"),parse:wg("hue","saturation","lightness"),transform:({hue:r,saturation:o,lightness:a,alpha:d=1})=>"hsla("+Math.round(r)+", "+pi.transform(_a(o))+", "+pi.transform(_a(a))+", "+_a(Fa.transform(d))+")"},Sn={test:r=>Ys.test(r)||Of.test(r)||Io.test(r),parse:r=>Ys.test(r)?Ys.parse(r):Io.test(r)?Io.parse(r):Of.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Ys.transform(r):Io.transform(r),getAnimatableNone:r=>{const o=Sn.parse(r);return o.alpha=0,Sn.transform(o)}},xw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yw(r){var o,a;return isNaN(r)&&typeof r=="string"&&(((o=r.match(Ad))==null?void 0:o.length)||0)+(((a=r.match(xw))==null?void 0:a.length)||0)>0}const vg="number",Cg="color",ww="var",vw="var(",v1="${}",Cw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ja(r){const o=r.toString(),a=[],d={color:[],number:[],var:[]},p=[];let x=0;const A=o.replace(Cw,w=>(Sn.test(w)?(d.color.push(x),p.push(Cg),a.push(Sn.parse(w))):w.startsWith(vw)?(d.var.push(x),p.push(ww),a.push(w)):(d.number.push(x),p.push(vg),a.push(parseFloat(w))),++x,v1)).split(v1);return{values:a,split:A,indexes:d,types:p}}function Eg(r){return ja(r).values}function Ag(r){const{split:o,types:a}=ja(r),d=o.length;return p=>{let x="";for(let y=0;y<d;y++)if(x+=o[y],p[y]!==void 0){const A=a[y];A===vg?x+=_a(p[y]):A===Cg?x+=Sn.transform(p[y]):x+=p[y]}return x}}const Ew=r=>typeof r=="number"?0:Sn.test(r)?Sn.getAnimatableNone(r):r;function Aw(r){const o=Eg(r);return Ag(r)(o.map(Ew))}const ms={test:yw,parse:Eg,createTransformer:Ag,getAnimatableNone:Aw};function gf(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}function Sw({hue:r,saturation:o,lightness:a,alpha:d}){r/=360,o/=100,a/=100;let p=0,x=0,y=0;if(!o)p=x=y=a;else{const A=a<.5?a*(1+o):a+o-a*o,w=2*a-A;p=gf(w,A,r+1/3),x=gf(w,A,r),y=gf(w,A,r-1/3)}return{red:Math.round(p*255),green:Math.round(x*255),blue:Math.round(y*255),alpha:d}}function yc(r,o){return a=>a>0?o:r}const cn=(r,o,a)=>r+(o-r)*a,mf=(r,o,a)=>{const d=r*r,p=a*(o*o-d)+d;return p<0?0:Math.sqrt(p)},bw=[Of,Ys,Io],Iw=r=>bw.find(o=>o.test(r));function C1(r){const o=Iw(r);if(!o)return!1;let a=o.parse(r);return o===Io&&(a=Sw(a)),a}const E1=(r,o)=>{const a=C1(r),d=C1(o);if(!a||!d)return yc(r,o);const p={...a};return x=>(p.red=mf(a.red,d.red,x),p.green=mf(a.green,d.green,x),p.blue=mf(a.blue,d.blue,x),p.alpha=cn(a.alpha,d.alpha,x),Ys.transform(p))},Pf=new Set(["none","hidden"]);function Tw(r,o){return Pf.has(r)?a=>a<=0?r:o:a=>a>=1?o:r}function Nw(r,o){return a=>cn(r,o,a)}function bd(r){return typeof r=="number"?Nw:typeof r=="string"?Ed(r)?yc:Sn.test(r)?E1:Ow:Array.isArray(r)?Sg:typeof r=="object"?Sn.test(r)?E1:Rw:yc}function Sg(r,o){const a=[...r],d=a.length,p=r.map((x,y)=>bd(x)(x,o[y]));return x=>{for(let y=0;y<d;y++)a[y]=p[y](x);return a}}function Rw(r,o){const a={...r,...o},d={};for(const p in a)r[p]!==void 0&&o[p]!==void 0&&(d[p]=bd(r[p])(r[p],o[p]));return p=>{for(const x in d)a[x]=d[x](p);return a}}function _w(r,o){const a=[],d={color:0,var:0,number:0};for(let p=0;p<o.values.length;p++){const x=o.types[p],y=r.indexes[x][d[x]],A=r.values[y]??0;a[p]=A,d[x]++}return a}const Ow=(r,o)=>{const a=ms.createTransformer(o),d=ja(r),p=ja(o);return d.indexes.var.length===p.indexes.var.length&&d.indexes.color.length===p.indexes.color.length&&d.indexes.number.length>=p.indexes.number.length?Pf.has(r)&&!p.values.length||Pf.has(o)&&!d.values.length?Tw(r,o):Xa(Sg(_w(d,p),p.values),a):yc(r,o)};function bg(r,o,a){return typeof r=="number"&&typeof o=="number"&&typeof a=="number"?cn(r,o,a):bd(r)(r,o)}const Pw=r=>{const o=({timestamp:a})=>r(a);return{start:(a=!0)=>nn.update(o,a),stop:()=>gs(o),now:()=>Gn.isProcessing?Gn.timestamp:yr.now()}},Ig=(r,o,a=10)=>{let d="";const p=Math.max(Math.round(o/a),2);for(let x=0;x<p;x++)d+=Math.round(r(x/(p-1))*1e4)/1e4+", ";return`linear(${d.substring(0,d.length-2)})`},wc=2e4;function Id(r){let o=0;const a=50;let d=r.next(o);for(;!d.done&&o<wc;)o+=a,d=r.next(o);return o>=wc?1/0:o}function Mw(r,o=100,a){const d=a({...r,keyframes:[0,o]}),p=Math.min(Id(d),wc);return{type:"keyframes",ease:x=>d.next(p*x).value/o,duration:hi(p)}}const Dw=5;function Tg(r,o,a){const d=Math.max(o-Dw,0);return og(a-r(d),o-d)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A1=.001;function kw({duration:r=mn.duration,bounce:o=mn.bounce,velocity:a=mn.velocity,mass:d=mn.mass}){let p,x,y=1-o;y=Li(mn.minDamping,mn.maxDamping,y),r=Li(mn.minDuration,mn.maxDuration,hi(r)),y<1?(p=E=>{const S=E*y,N=S*r,R=S-a,k=Mf(E,y),L=Math.exp(-N);return A1-R/k*L},x=E=>{const N=E*y*r,R=N*a+a,k=Math.pow(y,2)*Math.pow(E,2)*r,L=Math.exp(-N),B=Mf(Math.pow(E,2),y);return(-p(E)+A1>0?-1:1)*((R-k)*L)/B}):(p=E=>{const S=Math.exp(-E*r),N=(E-a)*r+1;return-.001+S*N},x=E=>{const S=Math.exp(-E*r),N=(a-E)*(r*r);return S*N});const A=5/r,w=Bw(p,x,A);if(r=di(r),isNaN(w))return{stiffness:mn.stiffness,damping:mn.damping,duration:r};{const E=Math.pow(w,2)*d;return{stiffness:E,damping:y*2*Math.sqrt(d*E),duration:r}}}const Lw=12;function Bw(r,o,a){let d=a;for(let p=1;p<Lw;p++)d=d-r(d)/o(d);return d}function Mf(r,o){return r*Math.sqrt(1-o*o)}const Fw=["duration","bounce"],jw=["stiffness","damping","mass"];function S1(r,o){return o.some(a=>r[a]!==void 0)}function Vw(r){let o={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...r};if(!S1(r,jw)&&S1(r,Fw))if(r.visualDuration){const a=r.visualDuration,d=2*Math.PI/(a*1.2),p=d*d,x=2*Li(.05,1,1-(r.bounce||0))*Math.sqrt(p);o={...o,mass:mn.mass,stiffness:p,damping:x}}else{const a=kw(r);o={...o,...a,mass:mn.mass},o.isResolvedFromDuration=!0}return o}function vc(r=mn.visualDuration,o=mn.bounce){const a=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:o}:r;let{restSpeed:d,restDelta:p}=a;const x=a.keyframes[0],y=a.keyframes[a.keyframes.length-1],A={done:!1,value:x},{stiffness:w,damping:E,mass:S,duration:N,velocity:R,isResolvedFromDuration:k}=Vw({...a,velocity:-hi(a.velocity||0)}),L=R||0,B=E/(2*Math.sqrt(w*S)),j=y-x,U=hi(Math.sqrt(w/S)),H=Math.abs(j)<5;d||(d=H?mn.restSpeed.granular:mn.restSpeed.default),p||(p=H?mn.restDelta.granular:mn.restDelta.default);let z;if(B<1){const le=Mf(U,B);z=ue=>{const $=Math.exp(-B*U*ue);return y-$*((L+B*U*j)/le*Math.sin(le*ue)+j*Math.cos(le*ue))}}else if(B===1)z=le=>y-Math.exp(-U*le)*(j+(L+U*j)*le);else{const le=U*Math.sqrt(B*B-1);z=ue=>{const $=Math.exp(-B*U*ue),ce=Math.min(le*ue,300);return y-$*((L+B*U*j)*Math.sinh(ce)+le*j*Math.cosh(ce))/le}}const J={calculatedDuration:k&&N||null,next:le=>{const ue=z(le);if(k)A.done=le>=N;else{let $=le===0?L:0;B<1&&($=le===0?di(L):Tg(z,le,ue));const ce=Math.abs($)<=d,q=Math.abs(y-ue)<=p;A.done=ce&&q}return A.value=A.done?y:ue,A},toString:()=>{const le=Math.min(Id(J),wc),ue=Ig($=>J.next(le*$).value,le,30);return le+"ms "+ue},toTransition:()=>{}};return J}vc.applyToOptions=r=>{const o=Mw(r,100,vc);return r.ease=o.ease,r.duration=di(o.duration),r.type="keyframes",r};function Df({keyframes:r,velocity:o=0,power:a=.8,timeConstant:d=325,bounceDamping:p=10,bounceStiffness:x=500,modifyTarget:y,min:A,max:w,restDelta:E=.5,restSpeed:S}){const N=r[0],R={done:!1,value:N},k=ce=>A!==void 0&&ce<A||w!==void 0&&ce>w,L=ce=>A===void 0?w:w===void 0||Math.abs(A-ce)<Math.abs(w-ce)?A:w;let B=a*o;const j=N+B,U=y===void 0?j:y(j);U!==j&&(B=U-N);const H=ce=>-B*Math.exp(-ce/d),z=ce=>U+H(ce),J=ce=>{const q=H(ce),_e=z(ce);R.done=Math.abs(q)<=E,R.value=R.done?U:_e};let le,ue;const $=ce=>{k(R.value)&&(le=ce,ue=vc({keyframes:[R.value,L(R.value)],velocity:Tg(z,ce,R.value),damping:p,stiffness:x,restDelta:E,restSpeed:S}))};return $(0),{calculatedDuration:null,next:ce=>{let q=!1;return!ue&&le===void 0&&(q=!0,J(ce),$(ce)),le!==void 0&&ce>=le?ue.next(ce-le):(!q&&J(ce),R)}}}function Uw(r,o,a){const d=[],p=a||Bi.mix||bg,x=r.length-1;for(let y=0;y<x;y++){let A=p(r[y],r[y+1]);if(o){const w=Array.isArray(o)?o[y]||jr:o;A=Xa(w,A)}d.push(A)}return d}function zw(r,o,{clamp:a=!0,ease:d,mixer:p}={}){const x=r.length;if(md(x===o.length),x===1)return()=>o[0];if(x===2&&o[0]===o[1])return()=>o[1];const y=r[0]===r[1];r[0]>r[x-1]&&(r=[...r].reverse(),o=[...o].reverse());const A=Uw(o,d,p),w=A.length,E=S=>{if(y&&S<r[0])return o[0];let N=0;if(w>1)for(;N<r.length-2&&!(S<r[N+1]);N++);const R=Ba(r[N],r[N+1],S);return A[N](R)};return a?S=>E(Li(r[0],r[x-1],S)):E}function Ww(r,o){const a=r[r.length-1];for(let d=1;d<=o;d++){const p=Ba(0,o,d);r.push(cn(a,1,p))}}function Hw(r){const o=[0];return Ww(o,r.length-1),o}function Gw(r,o){return r.map(a=>a*o)}function Xw(r,o){return r.map(()=>o||gg).splice(0,r.length-1)}function Oa({duration:r=300,keyframes:o,times:a,ease:d="easeInOut"}){const p=rw(d)?d.map(y1):y1(d),x={done:!1,value:o[0]},y=Gw(a&&a.length===o.length?a:Hw(o),r),A=zw(y,o,{ease:Array.isArray(p)?p:Xw(o,p)});return{calculatedDuration:r,next:w=>(x.value=A(w),x.done=w>=r,x)}}const Yw=r=>r!==null;function Td(r,{repeat:o,repeatType:a="loop"},d,p=1){const x=r.filter(Yw),A=p<0||o&&a!=="loop"&&o%2===1?0:x.length-1;return!A||d===void 0?x[A]:d}const Kw={decay:Df,inertia:Df,tween:Oa,keyframes:Oa,spring:vc};function Ng(r){typeof r.type=="string"&&(r.type=Kw[r.type])}class Nd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(o=>{this.resolve=o})}notifyFinished(){this.resolve()}then(o,a){return this.finished.then(o,a)}}const Zw=r=>r/100;class Rd extends Nd{constructor(o){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var d,p;const{motionValue:a}=this.options;a&&a.updatedAt!==yr.now()&&this.tick(yr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(d=this.options).onStop)==null||p.call(d))},this.options=o,this.initAnimation(),this.play(),o.autoplay===!1&&this.pause()}initAnimation(){const{options:o}=this;Ng(o);const{type:a=Oa,repeat:d=0,repeatDelay:p=0,repeatType:x,velocity:y=0}=o;let{keyframes:A}=o;const w=a||Oa;w!==Oa&&typeof A[0]!="number"&&(this.mixKeyframes=Xa(Zw,bg(A[0],A[1])),A=[0,100]);const E=w({...o,keyframes:A});x==="mirror"&&(this.mirroredGenerator=w({...o,keyframes:[...A].reverse(),velocity:-y})),E.calculatedDuration===null&&(E.calculatedDuration=Id(E));const{calculatedDuration:S}=E;this.calculatedDuration=S,this.resolvedDuration=S+p,this.totalDuration=this.resolvedDuration*(d+1)-p,this.generator=E}updateTime(o){const a=Math.round(o-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(o,a=!1){const{generator:d,totalDuration:p,mixKeyframes:x,mirroredGenerator:y,resolvedDuration:A,calculatedDuration:w}=this;if(this.startTime===null)return d.next(0);const{delay:E=0,keyframes:S,repeat:N,repeatType:R,repeatDelay:k,type:L,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,o):this.speed<0&&(this.startTime=Math.min(o-p/this.speed,this.startTime)),a?this.currentTime=o:this.updateTime(o);const U=this.currentTime-E*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?U<0:U>p;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let z=this.currentTime,J=d;if(N){const ce=Math.min(this.currentTime,p)/A;let q=Math.floor(ce),_e=ce%1;!_e&&ce>=1&&(_e=1),_e===1&&q--,q=Math.min(q,N+1),!!(q%2)&&(R==="reverse"?(_e=1-_e,k&&(_e-=k/A)):R==="mirror"&&(J=y)),z=Li(0,1,_e)*A}const le=H?{done:!1,value:S[0]}:J.next(z);x&&(le.value=x(le.value));let{done:ue}=le;!H&&w!==null&&(ue=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ue);return $&&L!==Df&&(le.value=Td(S,this.options,j,this.speed)),B&&B(le.value),$&&this.finish(),le}then(o,a){return this.finished.then(o,a)}get duration(){return hi(this.calculatedDuration)}get time(){return hi(this.currentTime)}set time(o){var a;o=di(o),this.currentTime=o,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=o:this.driver&&(this.startTime=this.driver.now()-o/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(o){this.updateTime(yr.now());const a=this.playbackSpeed!==o;this.playbackSpeed=o,a&&(this.time=hi(this.currentTime))}play(){var p,x;if(this.isStopped)return;const{driver:o=Pw,startTime:a}=this.options;this.driver||(this.driver=o(y=>this.tick(y))),(x=(p=this.options).onPlay)==null||x.call(p);const d=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=d):this.holdTime!==null?this.startTime=d-this.holdTime:this.startTime||(this.startTime=a??d),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var o,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(o=this.options).onComplete)==null||a.call(o)}cancel(){var o,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(o=this.options).onCancel)==null||a.call(o)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(o){return this.startTime=0,this.tick(o,!0)}attachTimeline(o){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),o.observe(this)}}function $w(r){for(let o=1;o<r.length;o++)r[o]??(r[o]=r[o-1])}const Ks=r=>r*180/Math.PI,kf=r=>{const o=Ks(Math.atan2(r[1],r[0]));return Lf(o)},qw={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:kf,rotateZ:kf,skewX:r=>Ks(Math.atan(r[1])),skewY:r=>Ks(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Lf=r=>(r=r%360,r<0&&(r+=360),r),b1=kf,I1=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),T1=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Qw={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I1,scaleY:T1,scale:r=>(I1(r)+T1(r))/2,rotateX:r=>Lf(Ks(Math.atan2(r[6],r[5]))),rotateY:r=>Lf(Ks(Math.atan2(-r[2],r[0]))),rotateZ:b1,rotate:b1,skewX:r=>Ks(Math.atan(r[4])),skewY:r=>Ks(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Bf(r){return r.includes("scale")?1:0}function Ff(r,o){if(!r||r==="none")return Bf(o);const a=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,p;if(a)d=Qw,p=a;else{const A=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=qw,p=A}if(!p)return Bf(o);const x=d[o],y=p[1].split(",").map(e3);return typeof x=="function"?x(y):y[x]}const Jw=(r,o)=>{const{transform:a="none"}=getComputedStyle(r);return Ff(a,o)};function e3(r){return parseFloat(r.trim())}const jo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(jo),N1=r=>r===Fo||r===it,t3=new Set(["x","y","z"]),n3=jo.filter(r=>!t3.has(r));function r3(r){const o=[];return n3.forEach(a=>{const d=r.getValue(a);d!==void 0&&(o.push([a,d.get()]),d.set(a.startsWith("scale")?1:0))}),o}const $s={width:({x:r},{paddingLeft:o="0",paddingRight:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),height:({y:r},{paddingTop:o="0",paddingBottom:a="0"})=>r.max-r.min-parseFloat(o)-parseFloat(a),top:(r,{top:o})=>parseFloat(o),left:(r,{left:o})=>parseFloat(o),bottom:({y:r},{top:o})=>parseFloat(o)+(r.max-r.min),right:({x:r},{left:o})=>parseFloat(o)+(r.max-r.min),x:(r,{transform:o})=>Ff(o,"x"),y:(r,{transform:o})=>Ff(o,"y")};$s.translateX=$s.x;$s.translateY=$s.y;const qs=new Set;let jf=!1,Vf=!1,Uf=!1;function Rg(){if(Vf){const r=Array.from(qs).filter(d=>d.needsMeasurement),o=new Set(r.map(d=>d.element)),a=new Map;o.forEach(d=>{const p=r3(d);p.length&&(a.set(d,p),d.render())}),r.forEach(d=>d.measureInitialState()),o.forEach(d=>{d.render();const p=a.get(d);p&&p.forEach(([x,y])=>{var A;(A=d.getValue(x))==null||A.set(y)})}),r.forEach(d=>d.measureEndState()),r.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}Vf=!1,jf=!1,qs.forEach(r=>r.complete(Uf)),qs.clear()}function _g(){qs.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Vf=!0)})}function i3(){Uf=!0,_g(),Rg(),Uf=!1}class _d{constructor(o,a,d,p,x,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...o],this.onComplete=a,this.name=d,this.motionValue=p,this.element=x,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(qs.add(this),jf||(jf=!0,nn.read(_g),nn.resolveKeyframes(Rg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:o,name:a,element:d,motionValue:p}=this;if(o[0]===null){const x=p==null?void 0:p.get(),y=o[o.length-1];if(x!==void 0)o[0]=x;else if(d&&a){const A=d.readValue(a,y);A!=null&&(o[0]=A)}o[0]===void 0&&(o[0]=y),p&&x===void 0&&p.set(o[0])}$w(o)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(o=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,o),qs.delete(this)}cancel(){this.state==="scheduled"&&(qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s3=r=>r.startsWith("--");function o3(r,o,a){s3(o)?r.style.setProperty(o,a):r.style[o]=a}const a3=xd(()=>window.ScrollTimeline!==void 0),l3={};function c3(r,o){const a=xd(r);return()=>l3[o]??a()}const Og=c3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ra=([r,o,a,d])=>`cubic-bezier(${r}, ${o}, ${a}, ${d})`,R1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function Pg(r,o){if(r)return typeof r=="function"?Og()?Ig(r,o):"ease-out":mg(r)?Ra(r):Array.isArray(r)?r.map(a=>Pg(a,o)||R1.easeOut):R1[r]}function u3(r,o,a,{delay:d=0,duration:p=300,repeat:x=0,repeatType:y="loop",ease:A="easeOut",times:w}={},E=void 0){const S={[o]:a};w&&(S.offset=w);const N=Pg(A,p);Array.isArray(N)&&(S.easing=N);const R={delay:d,duration:p,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:x+1,direction:y==="reverse"?"alternate":"normal"};return E&&(R.pseudoElement=E),r.animate(S,R)}function Mg(r){return typeof r=="function"&&"applyToOptions"in r}function f3({type:r,...o}){return Mg(r)&&Og()?r.applyToOptions(o):(o.duration??(o.duration=300),o.ease??(o.ease="easeOut"),o)}class d3 extends Nd{constructor(o){if(super(),this.finishedTime=null,this.isStopped=!1,!o)return;const{element:a,name:d,keyframes:p,pseudoElement:x,allowFlatten:y=!1,finalKeyframe:A,onComplete:w}=o;this.isPseudoElement=!!x,this.allowFlatten=y,this.options=o,md(typeof o.type!="string");const E=f3(o);this.animation=u3(a,d,p,E,x),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const S=Td(p,this.options,A,this.speed);this.updateMotionValue?this.updateMotionValue(S):o3(a,d,S),this.animation.cancel()}w==null||w(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var o,a;(a=(o=this.animation).finish)==null||a.call(o)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:o}=this;o==="idle"||o==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var o,a;this.isPseudoElement||(a=(o=this.animation).commitStyles)==null||a.call(o)}get duration(){var a,d;const o=((d=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:d.call(a).duration)||0;return hi(Number(o))}get time(){return hi(Number(this.animation.currentTime)||0)}set time(o){this.finishedTime=null,this.animation.currentTime=di(o)}get speed(){return this.animation.playbackRate}set speed(o){o<0&&(this.finishedTime=null),this.animation.playbackRate=o}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(o){this.animation.startTime=o}attachTimeline({timeline:o,observe:a}){var d;return this.allowFlatten&&((d=this.animation.effect)==null||d.updateTiming({easing:"linear"})),this.animation.onfinish=null,o&&a3()?(this.animation.timeline=o,jr):a(this)}}const Dg={anticipate:dg,backInOut:fg,circInOut:pg};function h3(r){return r in Dg}function p3(r){typeof r.ease=="string"&&h3(r.ease)&&(r.ease=Dg[r.ease])}const _1=10;class g3 extends d3{constructor(o){p3(o),Ng(o),super(o),o.startTime&&(this.startTime=o.startTime),this.options=o}updateMotionValue(o){const{motionValue:a,onUpdate:d,onComplete:p,element:x,...y}=this.options;if(!a)return;if(o!==void 0){a.set(o);return}const A=new Rd({...y,autoplay:!1}),w=di(this.finishedTime??this.time);a.setWithVelocity(A.sample(w-_1).value,A.sample(w).value,_1),A.stop()}}const O1=(r,o)=>o==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ms.test(r)||r==="0")&&!r.startsWith("url("));function m3(r){const o=r[0];if(r.length===1)return!0;for(let a=0;a<r.length;a++)if(r[a]!==o)return!0}function x3(r,o,a,d){const p=r[0];if(p===null)return!1;if(o==="display"||o==="visibility")return!0;const x=r[r.length-1],y=O1(p,o),A=O1(x,o);return!y||!A?!1:m3(r)||(a==="spring"||Mg(a))&&d}function zf(r){r.duration=0,r.type}const y3=new Set(["opacity","clipPath","filter","transform"]),w3=xd(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v3(r){var S;const{motionValue:o,name:a,repeatDelay:d,repeatType:p,damping:x,type:y}=r;if(!(((S=o==null?void 0:o.owner)==null?void 0:S.current)instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=o.owner.getProps();return w3()&&a&&y3.has(a)&&(a!=="transform"||!E)&&!w&&!d&&p!=="mirror"&&x!==0&&y!=="inertia"}const C3=40;class E3 extends Nd{constructor({autoplay:o=!0,delay:a=0,type:d="keyframes",repeat:p=0,repeatDelay:x=0,repeatType:y="loop",keyframes:A,name:w,motionValue:E,element:S,...N}){var L;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=yr.now();const R={autoplay:o,delay:a,type:d,repeat:p,repeatDelay:x,repeatType:y,name:w,motionValue:E,element:S,...N},k=(S==null?void 0:S.KeyframeResolver)||_d;this.keyframeResolver=new k(A,(B,j,U)=>this.onKeyframesResolved(B,j,R,!U),w,E,S),(L=this.keyframeResolver)==null||L.scheduleResolve()}onKeyframesResolved(o,a,d,p){this.keyframeResolver=void 0;const{name:x,type:y,velocity:A,delay:w,isHandoff:E,onUpdate:S}=d;this.resolvedAt=yr.now(),x3(o,x,y,A)||((Bi.instantAnimations||!w)&&(S==null||S(Td(o,d,a))),o[0]=o[o.length-1],zf(d),d.repeat=0);const R={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>C3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...d,keyframes:o},k=!E&&v3(R)?new g3({...R,element:R.motionValue.owner.current}):new Rd(R);k.finished.then(()=>this.notifyFinished()).catch(jr),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(o,a){return this.finished.finally(o).then(()=>{})}get animation(){var o;return this._animation||((o=this.keyframeResolver)==null||o.resume(),i3()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(o){this.animation.time=o}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(o){this.animation.speed=o}get startTime(){return this.animation.startTime}attachTimeline(o){return this._animation?this.stopTimeline=this.animation.attachTimeline(o):this.pendingTimeline=o,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var o;this._animation&&this.animation.cancel(),(o=this.keyframeResolver)==null||o.cancel()}}const A3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S3(r){const o=A3.exec(r);if(!o)return[,];const[,a,d,p]=o;return[`--${a??d}`,p]}function kg(r,o,a=1){const[d,p]=S3(r);if(!d)return;const x=window.getComputedStyle(o).getPropertyValue(d);if(x){const y=x.trim();return rg(y)?parseFloat(y):y}return Ed(p)?kg(p,o,a+1):p}function Od(r,o){return(r==null?void 0:r[o])??(r==null?void 0:r.default)??r}const Lg=new Set(["width","height","top","left","right","bottom",...jo]),b3={test:r=>r==="auto",parse:r=>r},Bg=r=>o=>o.test(r),Fg=[Fo,it,pi,ds,mw,gw,b3],P1=r=>Fg.find(Bg(r));function I3(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||sg(r):!0}const T3=new Set(["brightness","contrast","saturate","opacity"]);function N3(r){const[o,a]=r.slice(0,-1).split("(");if(o==="drop-shadow")return r;const[d]=a.match(Ad)||[];if(!d)return r;const p=a.replace(d,"");let x=T3.has(o)?1:0;return d!==a&&(x*=100),o+"("+x+p+")"}const R3=/\b([a-z-]*)\(.*?\)/gu,Wf={...ms,getAnimatableNone:r=>{const o=r.match(R3);return o?o.map(N3).join(" "):r}},M1={...Fo,transform:Math.round},_3={rotate:ds,rotateX:ds,rotateY:ds,rotateZ:ds,scale:rc,scaleX:rc,scaleY:rc,scaleZ:rc,skew:ds,skewX:ds,skewY:ds,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Fa,originX:w1,originY:w1,originZ:it},Pd={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,backgroundPositionX:it,backgroundPositionY:it,..._3,zIndex:M1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:M1},O3={...Pd,color:Sn,backgroundColor:Sn,outlineColor:Sn,fill:Sn,stroke:Sn,borderColor:Sn,borderTopColor:Sn,borderRightColor:Sn,borderBottomColor:Sn,borderLeftColor:Sn,filter:Wf,WebkitFilter:Wf},jg=r=>O3[r];function Vg(r,o){let a=jg(r);return a!==Wf&&(a=ms),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const P3=new Set(["auto","none","0"]);function M3(r,o,a){let d=0,p;for(;d<r.length&&!p;){const x=r[d];typeof x=="string"&&!P3.has(x)&&ja(x).values.length&&(p=r[d]),d++}if(p&&a)for(const x of o)r[x]=Vg(a,p)}class D3 extends _d{constructor(o,a,d,p,x){super(o,a,d,p,x,!0)}readKeyframes(){const{unresolvedKeyframes:o,element:a,name:d}=this;if(!a||!a.current)return;super.readKeyframes();for(let w=0;w<o.length;w++){let E=o[w];if(typeof E=="string"&&(E=E.trim(),Ed(E))){const S=kg(E,a.current);S!==void 0&&(o[w]=S),w===o.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Lg.has(d)||o.length!==2)return;const[p,x]=o,y=P1(p),A=P1(x);if(y!==A)if(N1(y)&&N1(A))for(let w=0;w<o.length;w++){const E=o[w];typeof E=="string"&&(o[w]=parseFloat(E))}else $s[d]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:o,name:a}=this,d=[];for(let p=0;p<o.length;p++)(o[p]===null||I3(o[p]))&&d.push(p);d.length&&M3(o,d,a)}measureInitialState(){const{element:o,unresolvedKeyframes:a,name:d}=this;if(!o||!o.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$s[d](o.measureViewportBox(),window.getComputedStyle(o.current)),a[0]=this.measuredOrigin;const p=a[a.length-1];p!==void 0&&o.getValue(d,p).jump(p,!1)}measureEndState(){var A;const{element:o,name:a,unresolvedKeyframes:d}=this;if(!o||!o.current)return;const p=o.getValue(a);p&&p.jump(this.measuredOrigin,!1);const x=d.length-1,y=d[x];d[x]=$s[a](o.measureViewportBox(),window.getComputedStyle(o.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([w,E])=>{o.getValue(w).set(E)}),this.resolveNoneKeyframes()}}function k3(r,o,a){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let d=document;const p=(a==null?void 0:a[r])??d.querySelectorAll(r);return p?Array.from(p):[]}return Array.from(r)}const Ug=(r,o)=>o&&typeof r=="number"?o.transform(r):r;function zg(r){return ig(r)&&"offsetHeight"in r}const D1=30,L3=r=>!isNaN(parseFloat(r));class B3{constructor(o,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=d=>{var x;const p=yr.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(o),this.owner=a.owner}setCurrent(o){this.current=o,this.updatedAt=yr.now(),this.canTrackVelocity===null&&o!==void 0&&(this.canTrackVelocity=L3(this.current))}setPrevFrameValue(o=this.current){this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new yd);const d=this.events[o].add(a);return o==="change"?()=>{d(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o){this.passiveEffect?this.passiveEffect(o,this.updateAndNotify):this.updateAndNotify(o)}setWithVelocity(o,a,d){this.set(a),this.prev=void 0,this.prevFrameValue=o,this.prevUpdatedAt=this.updatedAt-d}jump(o,a=!0){this.updateAndNotify(o),this.prev=o,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var o;(o=this.events.change)==null||o.notify(this.current)}addDependent(o){this.dependents||(this.dependents=new Set),this.dependents.add(o)}removeDependent(o){this.dependents&&this.dependents.delete(o)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const o=yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||o-this.updatedAt>D1)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,D1);return og(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var o,a;(o=this.dependents)==null||o.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Do(r,o){return new B3(r,o)}const{schedule:Md}=xg(queueMicrotask,!1),Jr={x:!1,y:!1};function Wg(){return Jr.x||Jr.y}function F3(r){return r==="x"||r==="y"?Jr[r]?null:(Jr[r]=!0,()=>{Jr[r]=!1}):Jr.x||Jr.y?null:(Jr.x=Jr.y=!0,()=>{Jr.x=Jr.y=!1})}function Hg(r,o){const a=k3(r),d=new AbortController,p={passive:!0,...o,signal:d.signal};return[a,p,()=>d.abort()]}function k1(r){return!(r.pointerType==="touch"||Wg())}function j3(r,o,a={}){const[d,p,x]=Hg(r,a),y=A=>{if(!k1(A))return;const{target:w}=A,E=o(w,A);if(typeof E!="function"||!w)return;const S=N=>{k1(N)&&(E(N),w.removeEventListener("pointerleave",S))};w.addEventListener("pointerleave",S,p)};return d.forEach(A=>{A.addEventListener("pointerenter",y,p)}),x}const Gg=(r,o)=>o?r===o?!0:Gg(r,o.parentElement):!1,Dd=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,V3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function U3(r){return V3.has(r.tagName)||r.tabIndex!==-1}const fc=new WeakSet;function L1(r){return o=>{o.key==="Enter"&&r(o)}}function xf(r,o){r.dispatchEvent(new PointerEvent("pointer"+o,{isPrimary:!0,bubbles:!0}))}const z3=(r,o)=>{const a=r.currentTarget;if(!a)return;const d=L1(()=>{if(fc.has(a))return;xf(a,"down");const p=L1(()=>{xf(a,"up")}),x=()=>xf(a,"cancel");a.addEventListener("keyup",p,o),a.addEventListener("blur",x,o)});a.addEventListener("keydown",d,o),a.addEventListener("blur",()=>a.removeEventListener("keydown",d),o)};function B1(r){return Dd(r)&&!Wg()}function W3(r,o,a={}){const[d,p,x]=Hg(r,a),y=A=>{const w=A.currentTarget;if(!B1(A))return;fc.add(w);const E=o(w,A),S=(k,L)=>{window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",R),fc.has(w)&&fc.delete(w),B1(k)&&typeof E=="function"&&E(k,{success:L})},N=k=>{S(k,w===window||w===document||a.useGlobalTarget||Gg(w,k.target))},R=k=>{S(k,!1)};window.addEventListener("pointerup",N,p),window.addEventListener("pointercancel",R,p)};return d.forEach(A=>{(a.useGlobalTarget?window:A).addEventListener("pointerdown",y,p),zg(A)&&(A.addEventListener("focus",E=>z3(E,p)),!U3(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),x}function Xg(r){return ig(r)&&"ownerSVGElement"in r}function H3(r){return Xg(r)&&r.tagName==="svg"}const nr=r=>!!(r&&r.getVelocity),G3=[...Fg,Sn,ms],X3=r=>G3.find(Bg(r)),kd=P.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Y3 extends P.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const d=a.offsetParent,p=zg(d)&&d.offsetWidth||0,x=this.props.sizeRef.current;x.height=a.offsetHeight||0,x.width=a.offsetWidth||0,x.top=a.offsetTop,x.left=a.offsetLeft,x.right=p-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K3({children:r,isPresent:o,anchorX:a,root:d}){const p=P.useId(),x=P.useRef(null),y=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:A}=P.useContext(kd);return P.useInsertionEffect(()=>{const{width:w,height:E,top:S,left:N,right:R}=y.current;if(o||!x.current||!w||!E)return;const k=a==="left"?`left: ${N}`:`right: ${R}`;x.current.dataset.motionPopId=p;const L=document.createElement("style");A&&(L.nonce=A);const B=d??document.head;return B.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${E}px !important;
            ${k}px !important;
            top: ${S}px !important;
          }
        `),()=>{B.contains(L)&&B.removeChild(L)}},[o]),I.jsx(Y3,{isPresent:o,childRef:x,sizeRef:y,children:P.cloneElement(r,{ref:x})})}const Z3=({children:r,initial:o,isPresent:a,onExitComplete:d,custom:p,presenceAffectsLayout:x,mode:y,anchorX:A,root:w})=>{const E=dd($3),S=P.useId();let N=!0,R=P.useMemo(()=>(N=!1,{id:S,initial:o,isPresent:a,custom:p,onExitComplete:k=>{E.set(k,!0);for(const L of E.values())if(!L)return;d&&d()},register:k=>(E.set(k,!1),()=>E.delete(k))}),[a,E,d]);return x&&N&&(R={...R}),P.useMemo(()=>{E.forEach((k,L)=>E.set(L,!1))},[a]),P.useEffect(()=>{!a&&!E.size&&d&&d()},[a]),y==="popLayout"&&(r=I.jsx(K3,{isPresent:a,anchorX:A,root:w,children:r})),I.jsx(Rc.Provider,{value:R,children:r})};function $3(){return new Map}function Yg(r=!0){const o=P.useContext(Rc);if(o===null)return[!0,null];const{isPresent:a,onExitComplete:d,register:p}=o,x=P.useId();P.useEffect(()=>{if(r)return p(x)},[r]);const y=P.useCallback(()=>r&&d&&d(x),[x,d,r]);return!a&&d?[!1,y]:[!0]}const ic=r=>r.key||"";function F1(r){const o=[];return P.Children.forEach(r,a=>{P.isValidElement(a)&&o.push(a)}),o}const j1=({children:r,custom:o,initial:a=!0,onExitComplete:d,presenceAffectsLayout:p=!0,mode:x="sync",propagate:y=!1,anchorX:A="left",root:w})=>{const[E,S]=Yg(y),N=P.useMemo(()=>F1(r),[r]),R=y&&!E?[]:N.map(ic),k=P.useRef(!0),L=P.useRef(N),B=dd(()=>new Map),[j,U]=P.useState(N),[H,z]=P.useState(N);ng(()=>{k.current=!1,L.current=N;for(let ue=0;ue<H.length;ue++){const $=ic(H[ue]);R.includes($)?B.delete($):B.get($)!==!0&&B.set($,!1)}},[H,R.length,R.join("-")]);const J=[];if(N!==j){let ue=[...N];for(let $=0;$<H.length;$++){const ce=H[$],q=ic(ce);R.includes(q)||(ue.splice($,0,ce),J.push(ce))}return x==="wait"&&J.length&&(ue=J),z(F1(ue)),U(N),null}const{forceRender:le}=P.useContext(fd);return I.jsx(I.Fragment,{children:H.map(ue=>{const $=ic(ue),ce=y&&!E?!1:N===H||R.includes($),q=()=>{if(B.has($))B.set($,!0);else return;let _e=!0;B.forEach(Fe=>{Fe||(_e=!1)}),_e&&(le==null||le(),z(L.current),y&&(S==null||S()),d&&d())};return I.jsx(Z3,{isPresent:ce,initial:!k.current||a?void 0:!1,custom:o,presenceAffectsLayout:p,mode:x,root:w,onExitComplete:ce?void 0:q,anchorX:A,children:ue},$)})})},Kg=P.createContext({strict:!1}),V1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ko={};for(const r in V1)ko[r]={isEnabled:o=>V1[r].some(a=>!!o[a])};function q3(r){for(const o in r)ko[o]={...ko[o],...r[o]}}const Q3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Q3.has(r)}let Zg=r=>!Cc(r);function J3(r){typeof r=="function"&&(Zg=o=>o.startsWith("on")?!Cc(o):r(o))}try{J3(require("@emotion/is-prop-valid").default)}catch{}function ev(r,o,a){const d={};for(const p in r)p==="values"&&typeof r.values=="object"||(Zg(p)||a===!0&&Cc(p)||!o&&!Cc(p)||r.draggable&&p.startsWith("onDrag"))&&(d[p]=r[p]);return d}const _c=P.createContext({});function Oc(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Va(r){return typeof r=="string"||Array.isArray(r)}const Ld=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bd=["initial",...Ld];function Pc(r){return Oc(r.animate)||Bd.some(o=>Va(r[o]))}function $g(r){return!!(Pc(r)||r.variants)}function tv(r,o){if(Pc(r)){const{initial:a,animate:d}=r;return{initial:a===!1||Va(a)?a:void 0,animate:Va(d)?d:void 0}}return r.inherit!==!1?o:{}}function nv(r){const{initial:o,animate:a}=tv(r,P.useContext(_c));return P.useMemo(()=>({initial:o,animate:a}),[U1(o),U1(a)])}function U1(r){return Array.isArray(r)?r.join(" "):r}const Ua={};function rv(r){for(const o in r)Ua[o]=r[o],Cd(o)&&(Ua[o].isCSSVariable=!0)}function qg(r,{layout:o,layoutId:a}){return Vo.has(r)||r.startsWith("origin")||(o||a!==void 0)&&(!!Ua[r]||r==="opacity")}const iv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sv=jo.length;function ov(r,o,a){let d="",p=!0;for(let x=0;x<sv;x++){const y=jo[x],A=r[y];if(A===void 0)continue;let w=!0;if(typeof A=="number"?w=A===(y.startsWith("scale")?1:0):w=parseFloat(A)===0,!w||a){const E=Ug(A,Pd[y]);if(!w){p=!1;const S=iv[y]||y;d+=`${S}(${E}) `}a&&(o[y]=E)}}return d=d.trim(),a?d=a(o,p?"":d):p&&(d="none"),d}function Fd(r,o,a){const{style:d,vars:p,transformOrigin:x}=r;let y=!1,A=!1;for(const w in o){const E=o[w];if(Vo.has(w)){y=!0;continue}else if(Cd(w)){p[w]=E;continue}else{const S=Ug(E,Pd[w]);w.startsWith("origin")?(A=!0,x[w]=S):d[w]=S}}if(o.transform||(y||a?d.transform=ov(o,r.transform,a):d.transform&&(d.transform="none")),A){const{originX:w="50%",originY:E="50%",originZ:S=0}=x;d.transformOrigin=`${w} ${E} ${S}`}}const jd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qg(r,o,a){for(const d in o)!nr(o[d])&&!qg(d,a)&&(r[d]=o[d])}function av({transformTemplate:r},o){return P.useMemo(()=>{const a=jd();return Fd(a,o,r),Object.assign({},a.vars,a.style)},[o])}function lv(r,o){const a=r.style||{},d={};return Qg(d,a,r),Object.assign(d,av(r,o)),d}function cv(r,o){const a={},d=lv(r,o);return r.drag&&r.dragListener!==!1&&(a.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(a.tabIndex=0),a.style=d,a}const uv={offset:"stroke-dashoffset",array:"stroke-dasharray"},fv={offset:"strokeDashoffset",array:"strokeDasharray"};function dv(r,o,a=1,d=0,p=!0){r.pathLength=1;const x=p?uv:fv;r[x.offset]=it.transform(-d);const y=it.transform(o),A=it.transform(a);r[x.array]=`${y} ${A}`}function Jg(r,{attrX:o,attrY:a,attrScale:d,pathLength:p,pathSpacing:x=1,pathOffset:y=0,...A},w,E,S){if(Fd(r,A,E),w){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:N,style:R}=r;N.transform&&(R.transform=N.transform,delete N.transform),(R.transform||N.transformOrigin)&&(R.transformOrigin=N.transformOrigin??"50% 50%",delete N.transformOrigin),R.transform&&(R.transformBox=(S==null?void 0:S.transformBox)??"fill-box",delete N.transformBox),o!==void 0&&(N.x=o),a!==void 0&&(N.y=a),d!==void 0&&(N.scale=d),p!==void 0&&dv(N,p,x,y,!1)}const em=()=>({...jd(),attrs:{}}),tm=r=>typeof r=="string"&&r.toLowerCase()==="svg";function hv(r,o,a,d){const p=P.useMemo(()=>{const x=em();return Jg(x,o,tm(d),r.transformTemplate,r.style),{...x.attrs,style:{...x.style}}},[o]);if(r.style){const x={};Qg(x,r.style,r),p.style={...x,...p.style}}return p}const pv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vd(r){return typeof r!="string"||r.includes("-")?!1:!!(pv.indexOf(r)>-1||/[A-Z]/u.test(r))}function gv(r,o,a,{latestValues:d},p,x=!1){const A=(Vd(r)?hv:cv)(o,d,p,r),w=ev(o,typeof r=="string",x),E=r!==P.Fragment?{...w,...A,ref:a}:{},{children:S}=o,N=P.useMemo(()=>nr(S)?S.get():S,[S]);return P.createElement(r,{...E,children:N})}function z1(r){const o=[{},{}];return r==null||r.values.forEach((a,d)=>{o[0][d]=a.get(),o[1][d]=a.getVelocity()}),o}function Ud(r,o,a,d){if(typeof o=="function"){const[p,x]=z1(d);o=o(a!==void 0?a:r.custom,p,x)}if(typeof o=="string"&&(o=r.variants&&r.variants[o]),typeof o=="function"){const[p,x]=z1(d);o=o(a!==void 0?a:r.custom,p,x)}return o}function dc(r){return nr(r)?r.get():r}function mv({scrapeMotionValuesFromProps:r,createRenderState:o},a,d,p){return{latestValues:xv(a,d,p,r),renderState:o()}}function xv(r,o,a,d){const p={},x=d(r,{});for(const R in x)p[R]=dc(x[R]);let{initial:y,animate:A}=r;const w=Pc(r),E=$g(r);o&&E&&!w&&r.inherit!==!1&&(y===void 0&&(y=o.initial),A===void 0&&(A=o.animate));let S=a?a.initial===!1:!1;S=S||y===!1;const N=S?A:y;if(N&&typeof N!="boolean"&&!Oc(N)){const R=Array.isArray(N)?N:[N];for(let k=0;k<R.length;k++){const L=Ud(r,R[k]);if(L){const{transitionEnd:B,transition:j,...U}=L;for(const H in U){let z=U[H];if(Array.isArray(z)){const J=S?z.length-1:0;z=z[J]}z!==null&&(p[H]=z)}for(const H in B)p[H]=B[H]}}}return p}const nm=r=>(o,a)=>{const d=P.useContext(_c),p=P.useContext(Rc),x=()=>mv(r,o,d,p);return a?x():dd(x)};function zd(r,o,a){var x;const{style:d}=r,p={};for(const y in d)(nr(d[y])||o.style&&nr(o.style[y])||qg(y,r)||((x=a==null?void 0:a.getValue(y))==null?void 0:x.liveStyle)!==void 0)&&(p[y]=d[y]);return p}const yv=nm({scrapeMotionValuesFromProps:zd,createRenderState:jd});function rm(r,o,a){const d=zd(r,o,a);for(const p in r)if(nr(r[p])||nr(o[p])){const x=jo.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;d[x]=r[p]}return d}const wv=nm({scrapeMotionValuesFromProps:rm,createRenderState:em}),vv=Symbol.for("motionComponentSymbol");function To(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Cv(r,o,a){return P.useCallback(d=>{d&&r.onMount&&r.onMount(d),o&&(d?o.mount(d):o.unmount()),a&&(typeof a=="function"?a(d):To(a)&&(a.current=d))},[o])}const Wd=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ev="framerAppearId",im="data-"+Wd(Ev),sm=P.createContext({});function Av(r,o,a,d,p){var B,j;const{visualElement:x}=P.useContext(_c),y=P.useContext(Kg),A=P.useContext(Rc),w=P.useContext(kd).reducedMotion,E=P.useRef(null);d=d||y.renderer,!E.current&&d&&(E.current=d(r,{visualState:o,parent:x,props:a,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:w}));const S=E.current,N=P.useContext(sm);S&&!S.projection&&p&&(S.type==="html"||S.type==="svg")&&Sv(E.current,a,p,N);const R=P.useRef(!1);P.useInsertionEffect(()=>{S&&R.current&&S.update(a,A)});const k=a[im],L=P.useRef(!!k&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,k))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,k)));return ng(()=>{S&&(R.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),L.current&&S.animationState&&S.animationState.animateChanges())}),P.useEffect(()=>{S&&(!L.current&&S.animationState&&S.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)==null||U.call(window,k)}),L.current=!1),S.enteringChildren=void 0)}),S}function Sv(r,o,a,d){const{layoutId:p,layout:x,drag:y,dragConstraints:A,layoutScroll:w,layoutRoot:E,layoutCrossfade:S}=o;r.projection=new a(r.latestValues,o["data-framer-portal-id"]?void 0:om(r.parent)),r.projection.setOptions({layoutId:p,layout:x,alwaysMeasureLayout:!!y||A&&To(A),visualElement:r,animationType:typeof x=="string"?x:"both",initialPromotionConfig:d,crossfade:S,layoutScroll:w,layoutRoot:E})}function om(r){if(r)return r.options.allowProjection!==!1?r.projection:om(r.parent)}function yf(r,{forwardMotionProps:o=!1}={},a,d){a&&q3(a);const p=Vd(r)?wv:yv;function x(A,w){let E;const S={...P.useContext(kd),...A,layoutId:bv(A)},{isStatic:N}=S,R=nv(A),k=p(A,N);if(!N&&hd){Iv();const L=Tv(S);E=L.MeasureLayout,R.visualElement=Av(r,k,S,d,L.ProjectionNode)}return I.jsxs(_c.Provider,{value:R,children:[E&&R.visualElement?I.jsx(E,{visualElement:R.visualElement,...S}):null,gv(r,A,Cv(k,R.visualElement,w),k,N,o)]})}x.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const y=P.forwardRef(x);return y[vv]=r,y}function bv({layoutId:r}){const o=P.useContext(fd).id;return o&&r!==void 0?o+"-"+r:r}function Iv(r,o){P.useContext(Kg).strict}function Tv(r){const{drag:o,layout:a}=ko;if(!o&&!a)return{};const d={...o,...a};return{MeasureLayout:o!=null&&o.isEnabled(r)||a!=null&&a.isEnabled(r)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}function Nv(r,o){if(typeof Proxy>"u")return yf;const a=new Map,d=(x,y)=>yf(x,y,r,o),p=(x,y)=>d(x,y);return new Proxy(p,{get:(x,y)=>y==="create"?d:(a.has(y)||a.set(y,yf(y,void 0,r,o)),a.get(y))})}function am({top:r,left:o,right:a,bottom:d}){return{x:{min:o,max:a},y:{min:r,max:d}}}function Rv({x:r,y:o}){return{top:o.min,right:r.max,bottom:o.max,left:r.min}}function _v(r,o){if(!o)return r;const a=o({x:r.left,y:r.top}),d=o({x:r.right,y:r.bottom});return{top:a.y,left:a.x,bottom:d.y,right:d.x}}function wf(r){return r===void 0||r===1}function Hf({scale:r,scaleX:o,scaleY:a}){return!wf(r)||!wf(o)||!wf(a)}function Xs(r){return Hf(r)||lm(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function lm(r){return W1(r.x)||W1(r.y)}function W1(r){return r&&r!=="0%"}function Ec(r,o,a){const d=r-a,p=o*d;return a+p}function H1(r,o,a,d,p){return p!==void 0&&(r=Ec(r,p,d)),Ec(r,a,d)+o}function Gf(r,o=0,a=1,d,p){r.min=H1(r.min,o,a,d,p),r.max=H1(r.max,o,a,d,p)}function cm(r,{x:o,y:a}){Gf(r.x,o.translate,o.scale,o.originPoint),Gf(r.y,a.translate,a.scale,a.originPoint)}const G1=.999999999999,X1=1.0000000000001;function Ov(r,o,a,d=!1){const p=a.length;if(!p)return;o.x=o.y=1;let x,y;for(let A=0;A<p;A++){x=a[A],y=x.projectionDelta;const{visualElement:w}=x.options;w&&w.props.style&&w.props.style.display==="contents"||(d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Ro(r,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),y&&(o.x*=y.x.scale,o.y*=y.y.scale,cm(r,y)),d&&Xs(x.latestValues)&&Ro(r,x.latestValues))}o.x<X1&&o.x>G1&&(o.x=1),o.y<X1&&o.y>G1&&(o.y=1)}function No(r,o){r.min=r.min+o,r.max=r.max+o}function Y1(r,o,a,d,p=.5){const x=cn(r.min,r.max,p);Gf(r,o,a,x,d)}function Ro(r,o){Y1(r.x,o.x,o.scaleX,o.scale,o.originX),Y1(r.y,o.y,o.scaleY,o.scale,o.originY)}function um(r,o){return am(_v(r.getBoundingClientRect(),o))}function Pv(r,o,a){const d=um(r,a),{scroll:p}=o;return p&&(No(d.x,p.offset.x),No(d.y,p.offset.y)),d}const K1=()=>({translate:0,scale:1,origin:0,originPoint:0}),_o=()=>({x:K1(),y:K1()}),Z1=()=>({min:0,max:0}),Cn=()=>({x:Z1(),y:Z1()}),Xf={current:null},fm={current:!1};function Mv(){if(fm.current=!0,!!hd)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),o=()=>Xf.current=r.matches;r.addEventListener("change",o),o()}else Xf.current=!1}const Dv=new WeakMap;function kv(r,o,a){for(const d in o){const p=o[d],x=a[d];if(nr(p))r.addValue(d,p);else if(nr(x))r.addValue(d,Do(p,{owner:r}));else if(x!==p)if(r.hasValue(d)){const y=r.getValue(d);y.liveStyle===!0?y.jump(p):y.hasAnimated||y.set(p)}else{const y=r.getStaticValue(d);r.addValue(d,Do(y!==void 0?y:p,{owner:r}))}}for(const d in a)o[d]===void 0&&r.removeValue(d);return o}const $1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Lv{scrapeMotionValuesFromProps(o,a,d){return{}}constructor({parent:o,props:a,presenceContext:d,reducedMotionConfig:p,blockInitialAnimation:x,visualState:y},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_d,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=yr.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,nn.render(this.render,!1,!0))};const{latestValues:w,renderState:E}=y;this.latestValues=w,this.baseTarget={...w},this.initialValues=a.initial?{...w}:{},this.renderState=E,this.parent=o,this.props=a,this.presenceContext=d,this.depth=o?o.depth+1:0,this.reducedMotionConfig=p,this.options=A,this.blockInitialAnimation=!!x,this.isControllingVariants=Pc(a),this.isVariantNode=$g(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:S,...N}=this.scrapeMotionValuesFromProps(a,{},this);for(const R in N){const k=N[R];w[R]!==void 0&&nr(k)&&k.set(w[R])}}mount(o){var a;this.current=o,Dv.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((d,p)=>this.bindToMotionValue(p,d)),fm.current||Mv(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xf.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var o;this.projection&&this.projection.unmount(),gs(this.notifyUpdate),gs(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(o=this.parent)==null||o.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const d=this.features[a];d&&(d.unmount(),d.isMounted=!1)}this.current=null}addChild(o){this.children.add(o),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(o)}removeChild(o){this.children.delete(o),this.enteringChildren&&this.enteringChildren.delete(o)}bindToMotionValue(o,a){this.valueSubscriptions.has(o)&&this.valueSubscriptions.get(o)();const d=Vo.has(o);d&&this.onBindTransform&&this.onBindTransform();const p=a.on("change",y=>{this.latestValues[o]=y,this.props.onUpdate&&nn.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,o,a)),this.valueSubscriptions.set(o,()=>{p(),x&&x(),a.owner&&a.stop()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}updateFeatures(){let o="animation";for(o in ko){const a=ko[o];if(!a)continue;const{isEnabled:d,Feature:p}=a;if(!this.features[o]&&p&&d(this.props)&&(this.features[o]=new p(this)),this.features[o]){const x=this.features[o];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let d=0;d<$1.length;d++){const p=$1[d];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const x="on"+p,y=o[x];y&&(this.propEventSubscriptions[p]=this.on(p,y))}this.prevMotionValues=kv(this,this.scrapeMotionValuesFromProps(o,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){const d=this.values.get(o);a!==d&&(d&&this.removeValue(o),this.bindToMotionValue(o,a),this.values.set(o,a),this.latestValues[o]=a.get())}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let d=this.values.get(o);return d===void 0&&a!==void 0&&(d=Do(a===null?void 0:a,{owner:this}),this.addValue(o,d)),d}readValue(o,a){let d=this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:this.getBaseTargetFromProps(this.props,o)??this.readValueFromInstance(this.current,o,this.options);return d!=null&&(typeof d=="string"&&(rg(d)||sg(d))?d=parseFloat(d):!X3(d)&&ms.test(a)&&(d=Vg(o,a)),this.setBaseTarget(o,nr(d)?d.get():d)),nr(d)?d.get():d}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var x;const{initial:a}=this.props;let d;if(typeof a=="string"||typeof a=="object"){const y=Ud(this.props,a,(x=this.presenceContext)==null?void 0:x.custom);y&&(d=y[o])}if(a&&d!==void 0)return d;const p=this.getBaseTargetFromProps(this.props,o);return p!==void 0&&!nr(p)?p:this.initialValues[o]!==void 0&&d===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new yd),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}scheduleRenderMicrotask(){Md.render(this.render)}}class dm extends Lv{constructor(){super(...arguments),this.KeyframeResolver=D3}sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:d}){delete a[o],delete d[o]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;nr(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function hm(r,{style:o,vars:a},d,p){const x=r.style;let y;for(y in o)x[y]=o[y];p==null||p.applyProjectionStyles(x,d);for(y in a)x.setProperty(y,a[y])}function Bv(r){return window.getComputedStyle(r)}class Fv extends dm{constructor(){super(...arguments),this.type="html",this.renderInstance=hm}readValueFromInstance(o,a){var d;if(Vo.has(a))return(d=this.projection)!=null&&d.isProjecting?Bf(a):Jw(o,a);{const p=Bv(o),x=(Cd(a)?p.getPropertyValue(a):p[a])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(o,{transformPagePoint:a}){return um(o,a)}build(o,a,d){Fd(o,a,d.transformTemplate)}scrapeMotionValuesFromProps(o,a,d){return zd(o,a,d)}}const pm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jv(r,o,a,d){hm(r,o,void 0,d);for(const p in o.attrs)r.setAttribute(pm.has(p)?p:Wd(p),o.attrs[p])}class Vv extends dm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(Vo.has(a)){const d=jg(a);return d&&d.default||0}return a=pm.has(a)?a:Wd(a),o.getAttribute(a)}scrapeMotionValuesFromProps(o,a,d){return rm(o,a,d)}build(o,a,d){Jg(o,a,this.isSVGTag,d.transformTemplate,d.style)}renderInstance(o,a,d,p){jv(o,a,d,p)}mount(o){this.isSVGTag=tm(o.tagName),super.mount(o)}}const Uv=(r,o)=>Vd(r)?new Vv(o):new Fv(o,{allowProjection:r!==P.Fragment});function Po(r,o,a){const d=r.getProps();return Ud(d,o,a!==void 0?a:d.custom,r)}const Yf=r=>Array.isArray(r);function zv(r,o,a){r.hasValue(o)?r.getValue(o).set(a):r.addValue(o,Do(a))}function Wv(r){return Yf(r)?r[r.length-1]||0:r}function Hv(r,o){const a=Po(r,o);let{transitionEnd:d={},transition:p={},...x}=a||{};x={...x,...d};for(const y in x){const A=Wv(x[y]);zv(r,y,A)}}function Gv(r){return!!(nr(r)&&r.add)}function Kf(r,o){const a=r.getValue("willChange");if(Gv(a))return a.add(o);if(!a&&Bi.WillChange){const d=new Bi.WillChange("auto");r.addValue("willChange",d),d.add(o)}}function gm(r){return r.props[im]}const Xv=r=>r!==null;function Yv(r,{repeat:o,repeatType:a="loop"},d){const p=r.filter(Xv),x=o&&a!=="loop"&&o%2===1?0:p.length-1;return p[x]}const Kv={type:"spring",stiffness:500,damping:25,restSpeed:10},Zv=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),$v={type:"keyframes",duration:.8},qv={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qv=(r,{keyframes:o})=>o.length>2?$v:Vo.has(r)?r.startsWith("scale")?Zv(o[1]):Kv:qv;function Jv({when:r,delay:o,delayChildren:a,staggerChildren:d,staggerDirection:p,repeat:x,repeatType:y,repeatDelay:A,from:w,elapsed:E,...S}){return!!Object.keys(S).length}const Hd=(r,o,a,d={},p,x)=>y=>{const A=Od(d,r)||{},w=A.delay||d.delay||0;let{elapsed:E=0}=d;E=E-di(w);const S={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:o.getVelocity(),...A,delay:-E,onUpdate:R=>{o.set(R),A.onUpdate&&A.onUpdate(R)},onComplete:()=>{y(),A.onComplete&&A.onComplete()},name:r,motionValue:o,element:x?void 0:p};Jv(A)||Object.assign(S,Qv(r,S)),S.duration&&(S.duration=di(S.duration)),S.repeatDelay&&(S.repeatDelay=di(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let N=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(zf(S),S.delay===0&&(N=!0)),(Bi.instantAnimations||Bi.skipAnimations)&&(N=!0,zf(S),S.delay=0),S.allowFlatten=!A.type&&!A.ease,N&&!x&&o.get()!==void 0){const R=Yv(S.keyframes,A);if(R!==void 0){nn.update(()=>{S.onUpdate(R),S.onComplete()});return}}return A.isSync?new Rd(S):new E3(S)};function eC({protectedKeys:r,needsAnimating:o},a){const d=r.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,d}function mm(r,o,{delay:a=0,transitionOverride:d,type:p}={}){let{transition:x=r.getDefaultTransition(),transitionEnd:y,...A}=o;d&&(x=d);const w=[],E=p&&r.animationState&&r.animationState.getState()[p];for(const S in A){const N=r.getValue(S,r.latestValues[S]??null),R=A[S];if(R===void 0||E&&eC(E,S))continue;const k={delay:a,...Od(x||{},S)},L=N.get();if(L!==void 0&&!N.isAnimating&&!Array.isArray(R)&&R===L&&!k.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const U=gm(r);if(U){const H=window.MotionHandoffAnimation(U,S,nn);H!==null&&(k.startTime=H,B=!0)}}Kf(r,S),N.start(Hd(S,N,R,r.shouldReduceMotion&&Lg.has(S)?{type:!1}:k,r,B));const j=N.animation;j&&w.push(j)}return y&&Promise.all(w).then(()=>{nn.update(()=>{y&&Hv(r,y)})}),w}function xm(r,o,a,d=0,p=1){const x=Array.from(r).sort((E,S)=>E.sortNodePosition(S)).indexOf(o),y=r.size,A=(y-1)*d;return typeof a=="function"?a(x,y):p===1?x*d:A-x*d}function Zf(r,o,a={}){var w;const d=Po(r,o,a.type==="exit"?(w=r.presenceContext)==null?void 0:w.custom:void 0);let{transition:p=r.getDefaultTransition()||{}}=d||{};a.transitionOverride&&(p=a.transitionOverride);const x=d?()=>Promise.all(mm(r,d,a)):()=>Promise.resolve(),y=r.variantChildren&&r.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:N,staggerDirection:R}=p;return tC(r,o,E,S,N,R,a)}:()=>Promise.resolve(),{when:A}=p;if(A){const[E,S]=A==="beforeChildren"?[x,y]:[y,x];return E().then(()=>S())}else return Promise.all([x(),y(a.delay)])}function tC(r,o,a=0,d=0,p=0,x=1,y){const A=[];for(const w of r.variantChildren)w.notify("AnimationStart",o),A.push(Zf(w,o,{...y,delay:a+(typeof d=="function"?0:d)+xm(r.variantChildren,w,d,p,x)}).then(()=>w.notify("AnimationComplete",o)));return Promise.all(A)}function nC(r,o,a={}){r.notify("AnimationStart",o);let d;if(Array.isArray(o)){const p=o.map(x=>Zf(r,x,a));d=Promise.all(p)}else if(typeof o=="string")d=Zf(r,o,a);else{const p=typeof o=="function"?Po(r,o,a.custom):o;d=Promise.all(mm(r,p,a))}return d.then(()=>{r.notify("AnimationComplete",o)})}function ym(r,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==r.length)return!1;for(let d=0;d<a;d++)if(o[d]!==r[d])return!1;return!0}const rC=Bd.length;function wm(r){if(!r)return;if(!r.isControllingVariants){const a=r.parent?wm(r.parent)||{}:{};return r.props.initial!==void 0&&(a.initial=r.props.initial),a}const o={};for(let a=0;a<rC;a++){const d=Bd[a],p=r.props[d];(Va(p)||p===!1)&&(o[d]=p)}return o}const iC=[...Ld].reverse(),sC=Ld.length;function oC(r){return o=>Promise.all(o.map(({animation:a,options:d})=>nC(r,a,d)))}function aC(r){let o=oC(r),a=q1(),d=!0;const p=w=>(E,S)=>{var R;const N=Po(r,S,w==="exit"?(R=r.presenceContext)==null?void 0:R.custom:void 0);if(N){const{transition:k,transitionEnd:L,...B}=N;E={...E,...B,...L}}return E};function x(w){o=w(r)}function y(w){const{props:E}=r,S=wm(r.parent)||{},N=[],R=new Set;let k={},L=1/0;for(let j=0;j<sC;j++){const U=iC[j],H=a[U],z=E[U]!==void 0?E[U]:S[U],J=Va(z),le=U===w?H.isActive:null;le===!1&&(L=j);let ue=z===S[U]&&z!==E[U]&&J;if(ue&&d&&r.manuallyAnimateOnMount&&(ue=!1),H.protectedKeys={...k},!H.isActive&&le===null||!z&&!H.prevProp||Oc(z)||typeof z=="boolean")continue;const $=lC(H.prevProp,z);let ce=$||U===w&&H.isActive&&!ue&&J||j>L&&J,q=!1;const _e=Array.isArray(z)?z:[z];let Fe=_e.reduce(p(U),{});le===!1&&(Fe={});const{prevResolvedValues:Re={}}=H,Oe={...Re,...Fe},ke=he=>{ce=!0,R.has(he)&&(q=!0,R.delete(he)),H.needsAnimating[he]=!0;const de=r.getValue(he);de&&(de.liveStyle=!1)};for(const he in Oe){const de=Fe[he],Te=Re[he];if(k.hasOwnProperty(he))continue;let fe=!1;Yf(de)&&Yf(Te)?fe=!ym(de,Te):fe=de!==Te,fe?de!=null?ke(he):R.add(he):de!==void 0&&R.has(he)?ke(he):H.protectedKeys[he]=!0}H.prevProp=z,H.prevResolvedValues=Fe,H.isActive&&(k={...k,...Fe}),d&&r.blockInitialAnimation&&(ce=!1);const ee=ue&&$;ce&&(!ee||q)&&N.push(..._e.map(he=>{const de={type:U};if(typeof he=="string"&&d&&!ee&&r.manuallyAnimateOnMount&&r.parent){const{parent:Te}=r,fe=Po(Te,he);if(Te.enteringChildren&&fe){const{delayChildren:X}=fe.transition||{};de.delay=xm(Te.enteringChildren,r,X)}}return{animation:he,options:de}}))}if(R.size){const j={};if(typeof E.initial!="boolean"){const U=Po(r,Array.isArray(E.initial)?E.initial[0]:E.initial);U&&U.transition&&(j.transition=U.transition)}R.forEach(U=>{const H=r.getBaseTarget(U),z=r.getValue(U);z&&(z.liveStyle=!0),j[U]=H??null}),N.push({animation:j})}let B=!!N.length;return d&&(E.initial===!1||E.initial===E.animate)&&!r.manuallyAnimateOnMount&&(B=!1),d=!1,B?o(N):Promise.resolve()}function A(w,E){var N;if(a[w].isActive===E)return Promise.resolve();(N=r.variantChildren)==null||N.forEach(R=>{var k;return(k=R.animationState)==null?void 0:k.setActive(w,E)}),a[w].isActive=E;const S=y(w);for(const R in a)a[R].protectedKeys={};return S}return{animateChanges:y,setActive:A,setAnimateFunction:x,getState:()=>a,reset:()=>{a=q1(),d=!0}}}function lC(r,o){return typeof o=="string"?o!==r:Array.isArray(o)?!ym(o,r):!1}function Gs(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q1(){return{animate:Gs(!0),whileInView:Gs(),whileHover:Gs(),whileTap:Gs(),whileDrag:Gs(),whileFocus:Gs(),exit:Gs()}}class xs{constructor(o){this.isMounted=!1,this.node=o}update(){}}class cC extends xs{constructor(o){super(o),o.animationState||(o.animationState=aC(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();Oc(o)&&(this.unmountControls=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){var o;this.node.animationState.reset(),(o=this.unmountControls)==null||o.call(this)}}let uC=0;class fC extends xs{constructor(){super(...arguments),this.id=uC++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===d)return;const p=this.node.animationState.setActive("exit",!o);a&&!o&&p.then(()=>{a(this.id)})}mount(){const{register:o,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),o&&(this.unmount=o(this.id))}unmount(){}}const dC={animation:{Feature:cC},exit:{Feature:fC}};function za(r,o,a,d={passive:!0}){return r.addEventListener(o,a,d),()=>r.removeEventListener(o,a)}function Za(r){return{point:{x:r.pageX,y:r.pageY}}}const hC=r=>o=>Dd(o)&&r(o,Za(o));function Pa(r,o,a,d){return za(r,o,hC(a),d)}const vm=1e-4,pC=1-vm,gC=1+vm,Cm=.01,mC=0-Cm,xC=0+Cm;function ur(r){return r.max-r.min}function yC(r,o,a){return Math.abs(r-o)<=a}function Q1(r,o,a,d=.5){r.origin=d,r.originPoint=cn(o.min,o.max,r.origin),r.scale=ur(a)/ur(o),r.translate=cn(a.min,a.max,r.origin)-r.originPoint,(r.scale>=pC&&r.scale<=gC||isNaN(r.scale))&&(r.scale=1),(r.translate>=mC&&r.translate<=xC||isNaN(r.translate))&&(r.translate=0)}function Ma(r,o,a,d){Q1(r.x,o.x,a.x,d?d.originX:void 0),Q1(r.y,o.y,a.y,d?d.originY:void 0)}function J1(r,o,a){r.min=a.min+o.min,r.max=r.min+ur(o)}function wC(r,o,a){J1(r.x,o.x,a.x),J1(r.y,o.y,a.y)}function ep(r,o,a){r.min=o.min-a.min,r.max=r.min+ur(o)}function Da(r,o,a){ep(r.x,o.x,a.x),ep(r.y,o.y,a.y)}function Fr(r){return[r("x"),r("y")]}const Em=({current:r})=>r?r.ownerDocument.defaultView:null,tp=(r,o)=>Math.abs(r-o);function vC(r,o){const a=tp(r.x,o.x),d=tp(r.y,o.y);return Math.sqrt(a**2+d**2)}class Am{constructor(o,a,{transformPagePoint:d,contextWindow:p=window,dragSnapToOrigin:x=!1,distanceThreshold:y=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Cf(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,L=vC(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!L)return;const{point:B}=R,{timestamp:j}=Gn;this.history.push({...B,timestamp:j});const{onStart:U,onMove:H}=this.handlers;k||(U&&U(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,R)},this.handlePointerMove=(R,k)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=vf(k,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(R,k)=>{this.end();const{onEnd:L,onSessionEnd:B,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Cf(R.type==="pointercancel"?this.lastMoveEventInfo:vf(k,this.transformPagePoint),this.history);this.startEvent&&L&&L(R,U),B&&B(R,U)},!Dd(o))return;this.dragSnapToOrigin=x,this.handlers=a,this.transformPagePoint=d,this.distanceThreshold=y,this.contextWindow=p||window;const A=Za(o),w=vf(A,this.transformPagePoint),{point:E}=w,{timestamp:S}=Gn;this.history=[{...E,timestamp:S}];const{onSessionStart:N}=a;N&&N(o,Cf(w,this.history)),this.removeListeners=Xa(Pa(this.contextWindow,"pointermove",this.handlePointerMove),Pa(this.contextWindow,"pointerup",this.handlePointerUp),Pa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),gs(this.updatePoint)}}function vf(r,o){return o?{point:o(r.point)}:r}function np(r,o){return{x:r.x-o.x,y:r.y-o.y}}function Cf({point:r},o){return{point:r,delta:np(r,Sm(o)),offset:np(r,CC(o)),velocity:EC(o,.1)}}function CC(r){return r[0]}function Sm(r){return r[r.length-1]}function EC(r,o){if(r.length<2)return{x:0,y:0};let a=r.length-1,d=null;const p=Sm(r);for(;a>=0&&(d=r[a],!(p.timestamp-d.timestamp>di(o)));)a--;if(!d)return{x:0,y:0};const x=hi(p.timestamp-d.timestamp);if(x===0)return{x:0,y:0};const y={x:(p.x-d.x)/x,y:(p.y-d.y)/x};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function AC(r,{min:o,max:a},d){return o!==void 0&&r<o?r=d?cn(o,r,d.min):Math.max(r,o):a!==void 0&&r>a&&(r=d?cn(a,r,d.max):Math.min(r,a)),r}function rp(r,o,a){return{min:o!==void 0?r.min+o:void 0,max:a!==void 0?r.max+a-(r.max-r.min):void 0}}function SC(r,{top:o,left:a,bottom:d,right:p}){return{x:rp(r.x,a,p),y:rp(r.y,o,d)}}function ip(r,o){let a=o.min-r.min,d=o.max-r.max;return o.max-o.min<r.max-r.min&&([a,d]=[d,a]),{min:a,max:d}}function bC(r,o){return{x:ip(r.x,o.x),y:ip(r.y,o.y)}}function IC(r,o){let a=.5;const d=ur(r),p=ur(o);return p>d?a=Ba(o.min,o.max-d,r.min):d>p&&(a=Ba(r.min,r.max-p,o.min)),Li(0,1,a)}function TC(r,o){const a={};return o.min!==void 0&&(a.min=o.min-r.min),o.max!==void 0&&(a.max=o.max-r.min),a}const $f=.35;function NC(r=$f){return r===!1?r=0:r===!0&&(r=$f),{x:sp(r,"left","right"),y:sp(r,"top","bottom")}}function sp(r,o,a){return{min:op(r,o),max:op(r,a)}}function op(r,o){return typeof r=="number"?r:r[o]||0}const RC=new WeakMap;class _C{constructor(o){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=o}start(o,{snapToCursor:a=!1,distanceThreshold:d}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const x=N=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Za(N).point)},y=(N,R)=>{const{drag:k,dragPropagation:L,onDragStart:B}=this.getProps();if(k&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=F3(k),!this.openDragLock))return;this.latestPointerEvent=N,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fr(U=>{let H=this.getAxisMotionValue(U).get()||0;if(pi.test(H)){const{projection:z}=this.visualElement;if(z&&z.layout){const J=z.layout.layoutBox[U];J&&(H=ur(J)*(parseFloat(H)/100))}}this.originPoint[U]=H}),B&&nn.postRender(()=>B(N,R)),Kf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},A=(N,R)=>{this.latestPointerEvent=N,this.latestPanInfo=R;const{dragPropagation:k,dragDirectionLock:L,onDirectionLock:B,onDrag:j}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:U}=R;if(L&&this.currentDirection===null){this.currentDirection=OC(U),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis("x",R.point,U),this.updateAxis("y",R.point,U),this.visualElement.render(),j&&j(N,R)},w=(N,R)=>{this.latestPointerEvent=N,this.latestPanInfo=R,this.stop(N,R),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Fr(N=>{var R;return this.getAnimationState(N)==="paused"&&((R=this.getAxisMotionValue(N).animation)==null?void 0:R.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new Am(o,{onSessionStart:x,onStart:y,onMove:A,onSessionEnd:w,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:d,contextWindow:Em(this.visualElement)})}stop(o,a){const d=o||this.latestPointerEvent,p=a||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!p||!d)return;const{velocity:y}=p;this.startAnimation(y);const{onDragEnd:A}=this.getProps();A&&nn.postRender(()=>A(d,p))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,d){const{drag:p}=this.getProps();if(!d||!sc(o,p,this.currentDirection))return;const x=this.getAxisMotionValue(o);let y=this.originPoint[o]+d[o];this.constraints&&this.constraints[o]&&(y=AC(y,this.constraints[o],this.elastic[o])),x.set(y)}resolveConstraints(){var x;const{dragConstraints:o,dragElastic:a}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,p=this.constraints;o&&To(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&d?this.constraints=SC(d.layoutBox,o):this.constraints=!1,this.elastic=NC(a),p!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&Fr(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=TC(d.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!To(o))return!1;const d=o.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const x=Pv(d,p.root,this.visualElement.getTransformPagePoint());let y=bC(p.layout.layoutBox,x);if(a){const A=a(Rv(y));this.hasMutatedConstraints=!!A,A&&(y=am(A))}return y}startAnimation(o){const{drag:a,dragMomentum:d,dragElastic:p,dragTransition:x,dragSnapToOrigin:y,onDragTransitionEnd:A}=this.getProps(),w=this.constraints||{},E=Fr(S=>{if(!sc(S,a,this.currentDirection))return;let N=w&&w[S]||{};y&&(N={min:0,max:0});const R=p?200:1e6,k=p?40:1e7,L={type:"inertia",velocity:d?o[S]:0,bounceStiffness:R,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...x,...N};return this.startAxisValueAnimation(S,L)});return Promise.all(E).then(A)}startAxisValueAnimation(o,a){const d=this.getAxisMotionValue(o);return Kf(this.visualElement,o),d.start(Hd(o,d,0,a,this.visualElement,!1))}stopAnimation(){Fr(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){Fr(o=>{var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)==null?void 0:a.state}getAxisMotionValue(o){const a=`_drag${o.toUpperCase()}`,d=this.visualElement.getProps(),p=d[a];return p||this.visualElement.getValue(o,(d.initial?d.initial[o]:void 0)||0)}snapToCursor(o){Fr(a=>{const{drag:d}=this.getProps();if(!sc(a,d,this.currentDirection))return;const{projection:p}=this.visualElement,x=this.getAxisMotionValue(a);if(p&&p.layout){const{min:y,max:A}=p.layout.layoutBox[a];x.set(o[a]-cn(y,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:d}=this.visualElement;if(!To(a)||!d||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Fr(y=>{const A=this.getAxisMotionValue(y);if(A&&this.constraints!==!1){const w=A.get();p[y]=IC({min:w,max:w},this.constraints[y])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),Fr(y=>{if(!sc(y,o,null))return;const A=this.getAxisMotionValue(y),{min:w,max:E}=this.constraints[y];A.set(cn(w,E,p[y]))})}addListeners(){if(!this.visualElement.current)return;RC.set(this.visualElement,this);const o=this.visualElement.current,a=Pa(o,"pointerdown",w=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(w)}),d=()=>{const{dragConstraints:w}=this.getProps();To(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,x=p.addEventListener("measure",d);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),nn.read(d);const y=za(window,"resize",()=>this.scalePositionWithinConstraints()),A=p.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(Fr(S=>{const N=this.getAxisMotionValue(S);N&&(this.originPoint[S]+=w[S].translate,N.set(N.get()+w[S].translate))}),this.visualElement.render())});return()=>{y(),a(),x(),A&&A()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:d=!1,dragPropagation:p=!1,dragConstraints:x=!1,dragElastic:y=$f,dragMomentum:A=!0}=o;return{...o,drag:a,dragDirectionLock:d,dragPropagation:p,dragConstraints:x,dragElastic:y,dragMomentum:A}}}function sc(r,o,a){return(o===!0||o===r)&&(a===null||a===r)}function OC(r,o=10){let a=null;return Math.abs(r.y)>o?a="y":Math.abs(r.x)>o&&(a="x"),a}class PC extends xs{constructor(o){super(o),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new _C(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ap=r=>(o,a)=>{r&&nn.postRender(()=>r(o,a))};class MC extends xs{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(o){this.session=new Am(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Em(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:d,onPanEnd:p}=this.node.getProps();return{onSessionStart:ap(o),onStart:ap(a),onMove:d,onEnd:(x,y)=>{delete this.session,p&&nn.postRender(()=>p(x,y))}}}mount(){this.removePointerDownListener=Pa(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lp(r,o){return o.max===o.min?0:r/(o.max-o.min)*100}const Ta={correct:(r,o)=>{if(!o.target)return r;if(typeof r=="string")if(it.test(r))r=parseFloat(r);else return r;const a=lp(r,o.target.x),d=lp(r,o.target.y);return`${a}% ${d}%`}},DC={correct:(r,{treeScale:o,projectionDelta:a})=>{const d=r,p=ms.parse(r);if(p.length>5)return d;const x=ms.createTransformer(r),y=typeof p[0]!="number"?1:0,A=a.x.scale*o.x,w=a.y.scale*o.y;p[0+y]/=A,p[1+y]/=w;const E=cn(A,w,.5);return typeof p[2+y]=="number"&&(p[2+y]/=E),typeof p[3+y]=="number"&&(p[3+y]/=E),x(p)}};let Ef=!1;class kC extends P.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d,layoutId:p}=this.props,{projection:x}=o;rv(LC),x&&(a.group&&a.group.add(x),d&&d.register&&p&&d.register(x),Ef&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:d,drag:p,isPresent:x}=this.props,{projection:y}=d;return y&&(y.isPresent=x,Ef=!0,p||o.layoutDependency!==a||a===void 0||o.isPresent!==x?y.willUpdate():this.safeToRemove(),o.isPresent!==x&&(x?y.promote():y.relegate()||nn.postRender(()=>{const A=y.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),Md.postRender(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:d}=this.props,{projection:p}=o;Ef=!0,p&&(p.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(p),d&&d.deregister&&d.deregister(p))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function bm(r){const[o,a]=Yg(),d=P.useContext(fd);return I.jsx(kC,{...r,layoutGroup:d,switchLayoutGroup:P.useContext(sm),isPresent:o,safeToRemove:a})}const LC={borderRadius:{...Ta,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ta,borderTopRightRadius:Ta,borderBottomLeftRadius:Ta,borderBottomRightRadius:Ta,boxShadow:DC};function BC(r,o,a){const d=nr(r)?r:Do(r);return d.start(Hd("",d,o,a)),d.animation}const FC=(r,o)=>r.depth-o.depth;class jC{constructor(){this.children=[],this.isDirty=!1}add(o){pd(this.children,o),this.isDirty=!0}remove(o){gd(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(FC),this.isDirty=!1,this.children.forEach(o)}}function VC(r,o){const a=yr.now(),d=({timestamp:p})=>{const x=p-a;x>=o&&(gs(d),r(x-o))};return nn.setup(d,!0),()=>gs(d)}const Im=["TopLeft","TopRight","BottomLeft","BottomRight"],UC=Im.length,cp=r=>typeof r=="string"?parseFloat(r):r,up=r=>typeof r=="number"||it.test(r);function zC(r,o,a,d,p,x){p?(r.opacity=cn(0,a.opacity??1,WC(d)),r.opacityExit=cn(o.opacity??1,0,HC(d))):x&&(r.opacity=cn(o.opacity??1,a.opacity??1,d));for(let y=0;y<UC;y++){const A=`border${Im[y]}Radius`;let w=fp(o,A),E=fp(a,A);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||up(w)===up(E)?(r[A]=Math.max(cn(cp(w),cp(E),d),0),(pi.test(E)||pi.test(w))&&(r[A]+="%")):r[A]=E}(o.rotate||a.rotate)&&(r.rotate=cn(o.rotate||0,a.rotate||0,d))}function fp(r,o){return r[o]!==void 0?r[o]:r.borderRadius}const WC=Tm(0,.5,hg),HC=Tm(.5,.95,jr);function Tm(r,o,a){return d=>d<r?0:d>o?1:a(Ba(r,o,d))}function dp(r,o){r.min=o.min,r.max=o.max}function Br(r,o){dp(r.x,o.x),dp(r.y,o.y)}function hp(r,o){r.translate=o.translate,r.scale=o.scale,r.originPoint=o.originPoint,r.origin=o.origin}function pp(r,o,a,d,p){return r-=o,r=Ec(r,1/a,d),p!==void 0&&(r=Ec(r,1/p,d)),r}function GC(r,o=0,a=1,d=.5,p,x=r,y=r){if(pi.test(o)&&(o=parseFloat(o),o=cn(y.min,y.max,o/100)-y.min),typeof o!="number")return;let A=cn(x.min,x.max,d);r===x&&(A-=o),r.min=pp(r.min,o,a,A,p),r.max=pp(r.max,o,a,A,p)}function gp(r,o,[a,d,p],x,y){GC(r,o[a],o[d],o[p],o.scale,x,y)}const XC=["x","scaleX","originX"],YC=["y","scaleY","originY"];function mp(r,o,a,d){gp(r.x,o,XC,a?a.x:void 0,d?d.x:void 0),gp(r.y,o,YC,a?a.y:void 0,d?d.y:void 0)}function xp(r){return r.translate===0&&r.scale===1}function Nm(r){return xp(r.x)&&xp(r.y)}function yp(r,o){return r.min===o.min&&r.max===o.max}function KC(r,o){return yp(r.x,o.x)&&yp(r.y,o.y)}function wp(r,o){return Math.round(r.min)===Math.round(o.min)&&Math.round(r.max)===Math.round(o.max)}function Rm(r,o){return wp(r.x,o.x)&&wp(r.y,o.y)}function vp(r){return ur(r.x)/ur(r.y)}function Cp(r,o){return r.translate===o.translate&&r.scale===o.scale&&r.originPoint===o.originPoint}class ZC{constructor(){this.members=[]}add(o){pd(this.members,o),o.scheduleRender()}remove(o){if(gd(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(p=>o===p);if(a===0)return!1;let d;for(let p=a;p>=0;p--){const x=this.members[p];if(x.isPresent!==!1){d=x;break}}return d?(this.promote(d),!0):!1}promote(o,a){const d=this.lead;if(o!==d&&(this.prevLead=d,this.lead=o,o.show(),d)){d.instance&&d.scheduleRender(),o.scheduleRender(),o.resumeFrom=d,a&&(o.resumeFrom.preserveOpacity=!0),d.snapshot&&(o.snapshot=d.snapshot,o.snapshot.latestValues=d.animationValues||d.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:p}=o.options;p===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:d}=o;a.onExitComplete&&a.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $C(r,o,a){let d="";const p=r.x.translate/o.x,x=r.y.translate/o.y,y=(a==null?void 0:a.z)||0;if((p||x||y)&&(d=`translate3d(${p}px, ${x}px, ${y}px) `),(o.x!==1||o.y!==1)&&(d+=`scale(${1/o.x}, ${1/o.y}) `),a){const{transformPerspective:E,rotate:S,rotateX:N,rotateY:R,skewX:k,skewY:L}=a;E&&(d=`perspective(${E}px) ${d}`),S&&(d+=`rotate(${S}deg) `),N&&(d+=`rotateX(${N}deg) `),R&&(d+=`rotateY(${R}deg) `),k&&(d+=`skewX(${k}deg) `),L&&(d+=`skewY(${L}deg) `)}const A=r.x.scale*o.x,w=r.y.scale*o.y;return(A!==1||w!==1)&&(d+=`scale(${A}, ${w})`),d||"none"}const Af=["","X","Y","Z"],qC=1e3;let QC=0;function Sf(r,o,a,d){const{latestValues:p}=o;p[r]&&(a[r]=p[r],o.setStaticValue(r,0),d&&(d[r]=0))}function _m(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:o}=r.options;if(!o)return;const a=gm(o);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:p,layoutId:x}=r.options;window.MotionCancelOptimisedAnimation(a,"transform",nn,!(p||x))}const{parent:d}=r;d&&!d.hasCheckedOptimisedAppear&&_m(d)}function Om({attachResizeListener:r,defaultParent:o,measureScroll:a,checkIsScrollRoot:d,resetTransform:p}){return class{constructor(y={},A=o==null?void 0:o()){this.id=QC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tE),this.nodes.forEach(sE),this.nodes.forEach(oE),this.nodes.forEach(nE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new jC)}addEventListener(y,A){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new yd),this.eventHandlers.get(y).add(A)}notifyListeners(y,...A){const w=this.eventHandlers.get(y);w&&w.notify(...A)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=Xg(y)&&!H3(y),this.instance=y;const{layoutId:A,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||A)&&(this.isLayoutDirty=!0),r){let S,N=0;const R=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{N=window.innerWidth}),r(y,()=>{const k=window.innerWidth;k!==N&&(N=k,this.root.updateBlockedByResize=!0,S&&S(),S=VC(R,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(Sp)))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&E&&(A||w)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:N,hasRelativeLayoutChanged:R,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||E.getDefaultTransition()||fE,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=E.getProps(),U=!this.targetLayout||!Rm(this.targetLayout,k),H=!N&&R;if(this.options.layoutRoot||this.resumeFrom||H||N&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...Od(L,"layout"),onPlay:B,onComplete:j};(E.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(S,H)}else N||Sp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aE),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_m(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const N=this.path[S];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:A,layout:w}=this.options;if(A===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ep);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ap);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(iE),this.nodes.forEach(JC),this.nodes.forEach(eE)):this.nodes.forEach(Ap),this.clearAllSnapshots();const A=yr.now();Gn.delta=Li(0,1e3/60,A-Gn.timestamp),Gn.timestamp=A,Gn.isProcessing=!0,hf.update.process(Gn),hf.preRender.process(Gn),hf.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Md.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rE),this.sharedNodes.forEach(lE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ur(this.snapshot.measuredBox.x)&&!ur(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(A=!1),A&&this.instance){const w=d(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:w,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!p)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!Nm(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;y&&this.instance&&(A||Xs(this.latestValues)||S)&&(p(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const A=this.measurePageBox();let w=this.removeElementScroll(A);return y&&(w=this.removeTransform(w)),dE(w),{animationId:this.root.animationId,measuredBox:A,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:y}=this.options;if(!y)return Cn();const A=y.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(hE))){const{scroll:S}=this.root;S&&(No(A.x,S.offset.x),No(A.y,S.offset.y))}return A}removeElementScroll(y){var w;const A=Cn();if(Br(A,y),(w=this.scroll)!=null&&w.wasRoot)return A;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:N,options:R}=S;S!==this.root&&N&&R.layoutScroll&&(N.wasRoot&&Br(A,y),No(A.x,N.offset.x),No(A.y,N.offset.y))}return A}applyTransform(y,A=!1){const w=Cn();Br(w,y);for(let E=0;E<this.path.length;E++){const S=this.path[E];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Ro(w,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Xs(S.latestValues)&&Ro(w,S.latestValues)}return Xs(this.latestValues)&&Ro(w,this.latestValues),w}removeTransform(y){const A=Cn();Br(A,y);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!Xs(E.latestValues))continue;Hf(E.latestValues)&&E.updateSnapshot();const S=Cn(),N=E.measurePageBox();Br(S,N),mp(A,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Xs(this.latestValues)&&mp(A,this.latestValues),A}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var R;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==A;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(R=this.parent)!=null&&R.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:N}=this.options;if(!(!this.layout||!(S||N))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Da(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),cm(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Da(this.relativeTargetOrigin,this.target,k.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Hf(this.parent.latestValues)||lm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var L;const y=this.getLead(),A=!!this.resumingFrom||this!==y;let w=!0;if((this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty)&&(w=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(w=!1),w)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Br(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,R=this.treeScale.y;Ov(this.layoutCorrected,this.treeScale,this.path,A),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=Cn());const{target:k}=y;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hp(this.prevProjectionDelta.x,this.projectionDelta.x),hp(this.prevProjectionDelta.y,this.projectionDelta.y)),Ma(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==N||this.treeScale.y!==R||!Cp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),y){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_o(),this.projectionDelta=_o(),this.projectionDeltaWithTransform=_o()}setAnimationOrigin(y,A=!1){const w=this.snapshot,E=w?w.latestValues:{},S={...this.latestValues},N=_o();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const R=Cn(),k=w?w.source:void 0,L=this.layout?this.layout.source:void 0,B=k!==L,j=this.getStack(),U=!j||j.members.length<=1,H=!!(B&&!U&&this.options.crossfade===!0&&!this.path.some(uE));this.animationProgress=0;let z;this.mixTargetDelta=J=>{const le=J/1e3;bp(N.x,y.x,le),bp(N.y,y.y,le),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Da(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cE(this.relativeTarget,this.relativeTargetOrigin,R,le),z&&KC(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=Cn()),Br(z,this.relativeTarget)),B&&(this.animationValues=S,zC(S,E,this.latestValues,le,H,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=le},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){var A,w,E;this.notifyListeners("animationStart"),(A=this.currentAnimation)==null||A.stop(),(E=(w=this.resumingFrom)==null?void 0:w.currentAnimation)==null||E.stop(),this.pendingAnimation&&(gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{hc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Do(0)),this.currentAnimation=BC(this.motionValue,[0,1e3],{...y,velocity:0,isSync:!0,onUpdate:S=>{this.mixTargetDelta(S),y.onUpdate&&y.onUpdate(S)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:A,target:w,layout:E,latestValues:S}=y;if(!(!A||!w||!E)){if(this!==y&&this.layout&&E&&Pm(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||Cn();const N=ur(this.layout.layoutBox.x);w.x.min=y.target.x.min,w.x.max=w.x.min+N;const R=ur(this.layout.layoutBox.y);w.y.min=y.target.y.min,w.y.max=w.y.min+R}Br(A,w),Ro(A,S),Ma(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(y,A){this.sharedNodes.has(y)||this.sharedNodes.set(y,new ZC),this.sharedNodes.get(y).add(A);const E=A.options.initialPromotionConfig;A.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(A):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var A;const{layoutId:y}=this.options;return y?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:y}=this.options;return y?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:A,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),y&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let A=!1;const{latestValues:w}=y;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(A=!0),!A)return;const E={};w.z&&Sf("z",y,E,this.animationValues);for(let S=0;S<Af.length;S++)Sf(`rotate${Af[S]}`,y,E,this.animationValues),Sf(`skew${Af[S]}`,y,E,this.animationValues);y.render();for(const S in E)y.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);y.scheduleRender()}applyProjectionStyles(y,A){if(!this.instance||this.isSVG)return;if(!this.isVisible){y.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,y.visibility="",y.opacity="",y.pointerEvents=dc(A==null?void 0:A.pointerEvents)||"",y.transform=w?w(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=dc(A==null?void 0:A.pointerEvents)||""),this.hasProjected&&!Xs(this.latestValues)&&(y.transform=w?w({},""):"none",this.hasProjected=!1);return}y.visibility="";const S=E.animationValues||E.latestValues;this.applyTransformsToTarget();let N=$C(this.projectionDeltaWithTransform,this.treeScale,S);w&&(N=w(S,N)),y.transform=N;const{x:R,y:k}=this.projectionDelta;y.transformOrigin=`${R.origin*100}% ${k.origin*100}% 0`,E.animationValues?y.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:y.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const L in Ua){if(S[L]===void 0)continue;const{correct:B,applyTo:j,isCSSVariable:U}=Ua[L],H=N==="none"?S[L]:B(S[L],E);if(j){const z=j.length;for(let J=0;J<z;J++)y[j[J]]=H}else U?this.options.visualElement.renderState.vars[L]=H:y[L]=H}this.options.layoutId&&(y.pointerEvents=E===this?dc(A==null?void 0:A.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var A;return(A=y.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(Ep),this.root.sharedNodes.clear()}}}function JC(r){r.updateLayout()}function eE(r){var a;const o=((a=r.resumeFrom)==null?void 0:a.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&o&&r.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:p}=r.layout,{animationType:x}=r.options,y=o.source!==r.layout.source;x==="size"?Fr(N=>{const R=y?o.measuredBox[N]:o.layoutBox[N],k=ur(R);R.min=d[N].min,R.max=R.min+k}):Pm(x,o.layoutBox,d)&&Fr(N=>{const R=y?o.measuredBox[N]:o.layoutBox[N],k=ur(d[N]);R.max=R.min+k,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[N].max=r.relativeTarget[N].min+k)});const A=_o();Ma(A,d,o.layoutBox);const w=_o();y?Ma(w,r.applyTransform(p,!0),o.measuredBox):Ma(w,d,o.layoutBox);const E=!Nm(A);let S=!1;if(!r.resumeFrom){const N=r.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:R,layout:k}=N;if(R&&k){const L=Cn();Da(L,o.layoutBox,R.layoutBox);const B=Cn();Da(B,d,k.layoutBox),Rm(L,B)||(S=!0),N.options.layoutRoot&&(r.relativeTarget=B,r.relativeTargetOrigin=L,r.relativeParent=N)}}}r.notifyListeners("didUpdate",{layout:d,snapshot:o,delta:w,layoutDelta:A,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(r.isLead()){const{onExitComplete:d}=r.options;d&&d()}r.options.transition=void 0}function tE(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function nE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function rE(r){r.clearSnapshot()}function Ep(r){r.clearMeasurements()}function Ap(r){r.isLayoutDirty=!1}function iE(r){const{visualElement:o}=r.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),r.resetTransform()}function Sp(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function sE(r){r.resolveTargetDelta()}function oE(r){r.calcProjection()}function aE(r){r.resetSkewAndRotation()}function lE(r){r.removeLeadSnapshot()}function bp(r,o,a){r.translate=cn(o.translate,0,a),r.scale=cn(o.scale,1,a),r.origin=o.origin,r.originPoint=o.originPoint}function Ip(r,o,a,d){r.min=cn(o.min,a.min,d),r.max=cn(o.max,a.max,d)}function cE(r,o,a,d){Ip(r.x,o.x,a.x,d),Ip(r.y,o.y,a.y,d)}function uE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const fE={duration:.45,ease:[.4,0,.1,1]},Tp=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Np=Tp("applewebkit/")&&!Tp("chrome/")?Math.round:jr;function Rp(r){r.min=Np(r.min),r.max=Np(r.max)}function dE(r){Rp(r.x),Rp(r.y)}function Pm(r,o,a){return r==="position"||r==="preserve-aspect"&&!yC(vp(o),vp(a),.2)}function hE(r){var o;return r!==r.root&&((o=r.scroll)==null?void 0:o.wasRoot)}const pE=Om({attachResizeListener:(r,o)=>za(r,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bf={current:void 0},Mm=Om({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!bf.current){const r=new pE({});r.mount(window),r.setOptions({layoutScroll:!0}),bf.current=r}return bf.current},resetTransform:(r,o)=>{r.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),gE={pan:{Feature:MC},drag:{Feature:PC,ProjectionNode:Mm,MeasureLayout:bm}};function _p(r,o,a){const{props:d}=r;r.animationState&&d.whileHover&&r.animationState.setActive("whileHover",a==="Start");const p="onHover"+a,x=d[p];x&&nn.postRender(()=>x(o,Za(o)))}class mE extends xs{mount(){const{current:o}=this.node;o&&(this.unmount=j3(o,(a,d)=>(_p(this.node,d,"Start"),p=>_p(this.node,p,"End"))))}unmount(){}}class xE extends xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xa(za(this.node.current,"focus",()=>this.onFocus()),za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Op(r,o,a){const{props:d}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&d.whileTap&&r.animationState.setActive("whileTap",a==="Start");const p="onTap"+(a==="End"?"":a),x=d[p];x&&nn.postRender(()=>x(o,Za(o)))}class yE extends xs{mount(){const{current:o}=this.node;o&&(this.unmount=W3(o,(a,d)=>(Op(this.node,d,"Start"),(p,{success:x})=>Op(this.node,p,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qf=new WeakMap,If=new WeakMap,wE=r=>{const o=qf.get(r.target);o&&o(r)},vE=r=>{r.forEach(wE)};function CE({root:r,...o}){const a=r||document;If.has(a)||If.set(a,{});const d=If.get(a),p=JSON.stringify(o);return d[p]||(d[p]=new IntersectionObserver(vE,{root:r,...o})),d[p]}function EE(r,o,a){const d=CE(o);return qf.set(r,a),d.observe(r),()=>{qf.delete(r),d.unobserve(r)}}const AE={some:0,all:1};class SE extends xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:d,amount:p="some",once:x}=o,y={root:a?a.current:void 0,rootMargin:d,threshold:typeof p=="number"?p:AE[p]},A=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,x&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:N}=this.node.getProps(),R=E?S:N;R&&R(w)};return EE(this.node.current,y,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(bE(o,a))&&this.startObserver()}unmount(){}}function bE({viewport:r={}},{viewport:o={}}={}){return a=>r[a]!==o[a]}const IE={inView:{Feature:SE},tap:{Feature:yE},focus:{Feature:xE},hover:{Feature:mE}},TE={layout:{ProjectionNode:Mm,MeasureLayout:bm}},NE={...dC,...IE,...gE,...TE},Mi=Nv(NE,Uv),RE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=P.useContext(Vr),[x,y]=P.useState(""),[A,w]=P.useState(""),[E,S]=P.useState(""),[N,R]=P.useState(null),[k,L]=P.useState(null),[B,j]=P.useState(""),[U,H]=P.useState(0),[z,J]=P.useState({x:0,y:0}),[le,ue]=P.useState(1),[$,ce]=P.useState(null),[q,_e]=P.useState(!1),[Fe,Re]=P.useState(!1),[Oe,ke]=P.useState({}),[ee,je]=P.useState({}),[he,de]=P.useState(!1),[Te,fe]=P.useState(!1),[X,te]=P.useState(null),Ee=Ur(),Ve=yi(),st=new URLSearchParams(Ve.search),we=st.get("redirect"),$e=st.get("code"),ze=we==="lobby",mt=()=>{const ve="abcdefghijklmnopqrstuvwxyz0123456789";let Pe="";for(let Qe=0;Qe<10;Qe++)Pe+=ve.charAt(Math.floor(Math.random()*ve.length));return Pe};P.useEffect(()=>{if(ze&&!x&&!A){const ve=mt(),Pe=mt();y(ve),w(Pe),je(Qe=>({...Qe,username:!0,password:!0})),ke(Qe=>({...Qe,username:"",password:""})),H(2)}},[ze,x,A,E]),P.useEffect(()=>{localStorage.getItem("access_token")&&Ee(we==="lobby"?$e?`/lobby?code=${$e}`:"/?showLobbyModal=true":we==="product-selection"?"/product-selection":"/")},[we,$e,Ee]),P.useEffect(()=>{U===2&&E&&dt(E)&&(de(!0),je(ve=>({...ve,displayName:!0})),ke(ve=>({...ve,displayName:""})))},[U,E]);const ge=ve=>{const Pe=/^[a-z0-9]+$/;return ve.length>=2&&Pe.test(ve)},ct=ve=>ve.length>=2,dt=ve=>ve.length>=2,Me=()=>{U<wt.length-1&&(U===0&&!E&&(S(x),je(ve=>({...ve,displayName:!0})),ke(ve=>({...ve,displayName:""}))),U===1&&E&&E.length>=2?de(!0):de(!1),H(ve=>ve+1))},At=()=>{if(U>0){const ve=U-1;H(ve);const Pe=wt[ve];if(Pe.validate){const Qe=Pe.value;Pe.validate(Qe)&&de(!0)}else de(!0)}},Bt=(ve,Pe,Qe)=>{Qe(ve.target.value);const jt=ve.target.value;Pe(jt)?(je(yt=>({...yt,[wt[U].id]:!0})),ke(yt=>({...yt,[wt[U].id]:""})),de(!0)):(je(yt=>({...yt,[wt[U].id]:!1})),ke(yt=>({...yt,[wt[U].id]:"Must be at least 2 characters"})),de(!1))},Gt=ve=>{const Pe=ve.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(Pe),ge(Pe)?(je(Qe=>({...Qe,username:!0})),ke(Qe=>({...Qe,username:""})),de(!0)):(je(Qe=>({...Qe,username:!1})),ke(Qe=>({...Qe,username:"Must be at least 2 characters"})),de(!1))},Pt=ve=>{Bt(ve,ct,w)},bt=ve=>{Bt(ve,dt,S)},ht=ve=>{const Pe=ve.target.files[0];if(Pe){const Qe=new FileReader;Qe.onload=jt=>{const yt=new Image;yt.onload=()=>{let pt=yt.width,rn=yt.height;const Mt=1500;pt>rn&&pt>Mt?(rn=rn*Mt/pt,pt=Mt):rn>pt&&rn>Mt&&(pt=pt*Mt/rn,rn=Mt);const zt=document.createElement("canvas");zt.width=pt,zt.height=rn,zt.getContext("2d").drawImage(yt,0,0,pt,rn);const be=zt.toDataURL("image/jpeg",.75);R(Pe),L(be),_e(!0),je(Vt=>({...Vt,image:!0})),ke(Vt=>({...Vt,image:""})),de(!0)},yt.src=jt.target.result},Qe.readAsDataURL(Pe)}},Dn=(ve,Pe)=>{ce(Pe)},Ne=async()=>{try{const ve=await id(k,$);L(ve),_e(!1)}catch(ve){console.error("Error cropping the image:",ve),j("Failed to crop image. Please try again.")}},Xn=async ve=>{if(ve.preventDefault(),Re(!0),j(""),console.log("Signup attempt - Username:",x,"Password:",A),!x||!A||!E){j("All fields are required"),Re(!1);return}if(!N||!k){j("Your profile picture is required👆🏼"),Re(!1);return}try{const Pe="/signup",Qe=await fetch(window.server_url+Pe,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A})}),jt=await Qe.json();if(jt.error==="Username already taken")if(ze){const Mt=mt(),zt=mt();y(Mt),w(zt);const It=await fetch(window.server_url+Pe,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:Mt,password:zt})}),be=await It.json();if(!It.ok||be.error==="Username already taken"){j("Unable to create account. Please try again."),Re(!1);return}r(be)}else{j("Username is taken"),Re(!1);return}else{if(!Qe.ok){j(jt.message||"Signup failed"),Re(!1);return}r(jt)}await p();const yt=localStorage.getItem("access_token");if(!yt)throw new Error("Authentication failed");let pt=null;if(N)pt=k,pt=pt.split(",")[1];else{const It=await(await(await fetch("/assets/fakeprofile.png")).blob()).arrayBuffer();pt=btoa(new Uint8Array(It).reduce((be,Vt)=>be+String.fromCharCode(Vt),""))}if(!(await fetch(`${window.server_url}/update_profile`,{method:"POST",headers:{Authorization:`Bearer ${yt}`,"Content-Type":"application/json"},body:JSON.stringify({name:E,image_data:pt})})).ok)throw new Error("Failed to update profile");await p(),Ee(we==="lobby"?$e?`/lobby?code=${$e}`:"/?showLobbyModal=true":we==="product-selection"?"/product-selection":"/")}catch(Pe){console.error("Error:",Pe),j("An error occurred. Please try again.")}Re(!1)},wt=[{id:"username",label:"Username",value:x,onChange:Gt,type:"text",placeholder:"Enter a username",validate:ge},{id:"password",label:"Password",value:A,onChange:Pt,type:"text",placeholder:"Create a password",validate:ct},{id:"displayName",label:$e==="demolobby"?"Display Name (Type Any Name)":"Display Name (what people will see)",value:E,onChange:bt,type:"text",placeholder:"Enter your preferred name",validate:dt},{id:"image",label:$e==="demolobby"?"Profile Image (Upload Any Image)":"Upload a Selfie (so people can find you)",type:"file",onChange:ht,accept:"image/*"}];return I.jsxs("div",{className:"signup-container",children:[I.jsx("button",{onClick:()=>Ee("/"),className:"homescreen-button",children:"Home"}),I.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),I.jsx("h3",{className:"signup-header",children:$e==="demolobby"?"Join the demo":"Sign Up to Join"}),$e&&$e!=="demolobby"&&I.jsxs("h2",{className:"signup-header",children:[$e," lobby"]}),$e==="demolobby"&&I.jsx("h2",{className:"signup-header",style:{fontSize:"0.9rem"},children:"Try Reuneo for Free!"}),I.jsxs("p",{className:"login-link-text",children:["Already have an account? ",I.jsx("a",{href:"#",onClick:ve=>{ve.preventDefault(),Ee("/login")},className:"login-link",children:"Login here"})]}),I.jsxs("div",{className:"step-form-container",children:[I.jsx("div",{className:"step-progress",children:(ze?wt.slice(2):wt).map((ve,Pe)=>I.jsx("div",{className:`progress-dot ${ze?(Pe===U-2?"active":"")+(Pe<U-2?" completed":""):(Pe===U?"active":"")+(Pe<U?" completed":"")}`},Pe))}),I.jsxs("form",{onSubmit:Xn,children:[I.jsx(j1,{mode:"wait",initial:!1,children:I.jsxs(Mi.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{type:"spring",stiffness:500,damping:25,mass:.3},className:"step active",style:{willChange:"transform, opacity"},children:[I.jsx("div",{className:"step-content",children:I.jsxs(Mi.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[I.jsx("label",{className:"step-label",children:wt[U].label}),I.jsx(Mi.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,ease:"easeOut"},children:wt[U].type==="file"?I.jsx("div",{className:"image-upload-container",children:q?I.jsxs("div",{className:"cropper-container",children:[I.jsx("div",{className:"cropper-wrapper",children:I.jsx(rd,{image:k,crop:z,zoom:le,aspect:1,onCropComplete:Dn,onCropChange:J,onZoomChange:ue})}),I.jsxs("div",{className:"cropper-controls",children:[I.jsx("button",{type:"button",onClick:()=>{_e(!1),L(null),R(null)},className:"cancel-crop-button",children:"Cancel"}),I.jsx("button",{type:"button",onClick:Ne,className:"save-crop-button",children:"Good"})]})]}):I.jsxs(I.Fragment,{children:[I.jsx("input",{type:"file",onChange:wt[U].onChange,accept:wt[U].accept,className:"step-input"}),k&&I.jsx("div",{children:I.jsx("img",{src:k,alt:"Profile preview",className:"profile-preview-image"})})]})}):I.jsx("input",{type:wt[U].type,value:wt[U].value,onChange:wt[U].onChange,placeholder:wt[U].placeholder,className:"step-input",autoFocus:!0})}),I.jsxs(j1,{mode:"wait",children:[Oe[wt[U].id]&&I.jsx(Mi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"step-error",children:Oe[wt[U].id]}),ee[wt[U].id]&&I.jsx(Mi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"step-success",children:"✓ Valid"})]})]})}),!q&&I.jsxs("div",{className:"button-container",children:[U>0&&I.jsx(Mi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:At,className:"backz-button",children:"← Back"}),he&&U<wt.length-1&&I.jsx(Mi.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},type:"button",onClick:Me,className:"nextz-button",children:"Next →"})]})]},U)}),B&&I.jsx(Mi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"error-message",children:B}),U===wt.length-1&&I.jsx(Mi.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},type:"submit",className:"primary-button",disabled:Fe,children:Fe?"Loading...":"Complete Signup"})]})]})]})},_E=5e3,Dm=(r,o=null,a=null)=>{P.useEffect(()=>{const d=async()=>{try{const x=a?`${window.server_url}/display_lobby_metadata?lobby_code=${a}`:`${window.server_url}/display_lobby_metadata`,y=localStorage.getItem("access_token"),A=await fetch(x,{headers:{Authorization:`Bearer ${y}`,lobby_code:a}});if(!A.ok){console.error("Failed to fetch lobby metadata");return}const w=await A.json();r(w.player_count),o&&o(w.lobby_state)}catch(x){console.error("Error fetching lobby metadata:",x)}};d();const p=setInterval(d,_E);return()=>clearInterval(p)},[r,o,a])},Gd="currentLobbyCode",Xd="currentLobbyTimestamp",Yd="currentLobbyLastValidated",OE=30*60*1e3,PE=3*60*1e3,ME=r=>{localStorage.setItem(Gd,r),localStorage.setItem(Xd,Date.now().toString()),console.log(`Stored lobby code: ${r}`)},DE=()=>{const r=localStorage.getItem(Gd),o=localStorage.getItem(Xd);return!r||!o?null:Date.now()-parseInt(o)>OE?(Ac(),console.log("Lobby code expired, cleared from storage"),null):r},kE=()=>{const r=localStorage.getItem(Yd);return r?Date.now()-parseInt(r)>PE:!0},LE=()=>{localStorage.setItem(Yd,Date.now().toString())},Ac=()=>{localStorage.removeItem(Gd),localStorage.removeItem(Xd),localStorage.removeItem(Yd),console.log("Cleared lobby storage")},BE=()=>{const[r,o]=P.useState(!1),[a,d]=P.useState(!1),[p,x]=P.useState(""),[y,A]=P.useState(""),[w,E]=P.useState(""),[S,N]=P.useState(null);eg();const{user:R,userProfile:k,checkAuth:L,permissions:B}=P.useContext(Vr),[j,U]=P.useState(null),[H,z]=P.useState(null),[J,le]=P.useState([]),[ue,$]=P.useState(!1),[ce,q]=P.useState(null),_e=Ur();Dm(U,z);const[Fe,Re]=P.useState(!1);P.useRef(null);const Oe=P.useRef(null),ke=async(fe=!1)=>{const X=DE();if(!X||!R){q(null);return}if(q(X),fe||kE())try{const te=localStorage.getItem("access_token"),Ee=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${X}`,{headers:{Authorization:`Bearer ${te}`,lobby_code:X}});if(Ee.ok){const Ve=await Ee.json();Ve.status==="error"||Ve.lobby_state==="terminated"?(Ac(),q(null)):LE()}else Ac(),q(null)}catch(te){console.error("Error validating current lobby:",te),q(null)}},ee=async()=>{if(R){$(!0);try{const fe=localStorage.getItem("access_token"),X=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${fe}`}});if(X.ok){const te=await X.json();console.log("User's active lobbies:",te),te&&te.lobbies&&Array.isArray(te.lobbies)?le(te.lobbies):le([])}else console.error("Failed to fetch user's active lobbies"),le([])}catch(fe){console.error("Error fetching user's active lobbies:",fe),le([])}finally{$(!1)}}};P.useEffect(()=>{R?(ee(),ke(!0)):q(null)},[R]),P.useEffect(()=>{L()},[]),P.useEffect(()=>{if(new URLSearchParams(window.location.search).get("showLobbyModal")==="true"&&R){d(!0);const te=window.location.pathname;window.history.replaceState({},"",te)}},[R]);const je=fe=>{(B==="admin"||B==="organizer")&&_e(`/admin_lobby_view?code=${fe}`)},he=fe=>{fe.preventDefault();const te=new FormData(fe.target).get("name");if(!te||te.trim()===""){A("Please enter a lobby code");return}const Ee=te.toLowerCase().replace(/[^a-z0-9]/g,"");if(Ee===""){A("Lobby code must contain only letters and numbers");return}E(Ee),d(!1),console.log(Ee),x(Ee),_e(`/lobby?code=${Ee}`),x(""),A("")},de=()=>{Re(!1),Oe.current&&(Oe.current.clear(),Oe.current=null)},Te=()=>a?I.jsx("div",{className:"lobby-modal-overlay",children:I.jsxs("div",{className:"lobby-modal-container",children:[I.jsx("button",{onClick:()=>{d(!1),x(""),A(""),de()},className:"lobby-modal-close",children:"×"}),I.jsx("h2",{className:"lobby-modal-title",children:"Join Lobby"}),I.jsxs("form",{onSubmit:he,className:"lobby-form",children:[I.jsxs("div",{className:"lobby-input-container",children:[I.jsx("input",{type:"text",name:"name",placeholder:"Enter Lobby Code",className:"lobby-input",pattern:"[a-zA-Z0-9]+",title:"Only letters and numbers are allowed",required:!0}),y&&I.jsx("div",{className:"lobby-error-message",children:y})]}),I.jsx("button",{type:"submit",className:"lobby-submit-button",children:"Join"})]})]})}):null;return I.jsxs("div",{style:{position:"relative",height:"var(--viewport-height)",overflow:"hidden"},children:[I.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:"/assets/demo_app_home_video_cover.jpg",children:[I.jsx("source",{src:"/assets/demo_app_home_video_X2_small.mp4",type:"video/mp4"}),I.jsx("source",{src:"/assets/app_home_video_2.webm",type:"video/webm"}),I.jsx("img",{src:"/assets/demo_app_home_video_cover.jpg",alt:"Background fallback",style:{width:"100%",height:"100%",objectFit:"cover"}}),"Your browser does not support the video tag."]}),I.jsxs("div",{style:{position:"relative",zIndex:1,color:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[I.jsx("div",{style:{position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"},children:I.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Logo",style:{width:"110px",height:"110px",objectFit:"contain"}})}),I.jsx("div",{style:{marginTop:"10%",display:"flex",flexDirection:"column"},children:I.jsx($y,{user:R,onProfileClick:()=>o(!0)})}),r&&I.jsx(v2,{onSubmit:fe=>{o(!1)},onClose:()=>o(!1),existingProfile:k}),I.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"90%",maxWidth:"1200px",textAlign:"center",marginLeft:"auto",marginRight:"auto",zIndex:1,top:"50%"},children:I.jsx("h2",{className:"welcome-header",style:{color:"#ffffff",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"0.1em",textShadow:"4px 4px 8px rgba(0,0,0,0.9)",margin:0},children:R&&k&&(B==="admin"||B==="organizer")?(()=>{const fe="Create a Lobby",X=k?k.name.slice(0,15):"";return I.jsxs(I.Fragment,{children:[fe.split("").map((te,Ee)=>I.jsx("span",{style:{"--i":Ee+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Ee}`)),I.jsx("br",{}),X&&X.split("").map((te,Ee)=>I.jsx("span",{style:{"--i":Ee+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Ee}`))]})})():(()=>{const fe="Join the Experience",X=k?k.name.slice(0,15):"";return I.jsxs(I.Fragment,{children:[fe.split("").map((te,Ee)=>I.jsx("span",{style:{"--i":Ee+1,marginRight:te===" "?"0.5em":"1px"},children:te},`main-${Ee}`)),I.jsx("br",{}),X&&X.split("").map((te,Ee)=>I.jsx("span",{style:{"--i":Ee+1,marginRight:te===" "?"0.5em":"1px"},children:te},`name-${Ee}`))]})})()})}),I.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",width:"94%",display:"flex",flexDirection:"row",justifyContent:"center",gap:"1.5rem"},children:I.jsx("div",{className:"event-item",style:{width:"auto",maxWidth:"none",margin:"0",padding:"10px 20px",borderRadius:"16px",marginBottom:"20px",cursor:"pointer",opacity:1,display:"flex",flexDirection:"row",alignItems:"center",gap:"1.5rem",":hover":{transform:"translateY(-5px)"}},children:I.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexDirection:"row",alignItems:"center"},children:[I.jsx("button",{className:`primary-button ${B!=="admin"&&B!=="organizer"?"join-lobby-button":""}`,onClick:()=>R?d(!0):_e("/signup?redirect=lobby"),disabled:j===null||H==="terminate",style:{opacity:1,cursor:j===null||H==="terminate"?"not-allowed":"pointer",padding:"16px 20px",backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#144dff",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:B!=="admin"&&B!=="organizer"?"none":"1px solid rgba(58, 53, 53, 0.7)",":hover":{backgroundColor:B!=="admin"&&B!=="organizer"?"transparent":"#535bf2",transform:"scale(1.02)"}},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Join Lobby"})}),B!=="admin"&&B!=="organizer"&&I.jsx("button",{className:"primary-button join-lobby-button",onClick:()=>window.location.href="https://reuneo.app/",style:{padding:"16px 20px",backgroundColor:"transparent",color:"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",display:"block",position:"relative",zIndex:1,textAlign:"center",outline:"none",":hover":{transform:"scale(1.02)"}},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Get Started"})}),(B==="admin"||B==="organizer")&&I.jsx("button",{className:`primary-button ${B==="admin"||B==="organizer"?"create-lobby-button":""}`,onClick:J.length>0?void 0:()=>_e("/create_lobby"),disabled:J.length>0,title:J.length>0?"You already have an active lobby. Close it before creating a new one.":"Create a new lobby",style:{padding:"16px 20px",backgroundColor:J.length>0?"rgba(128, 128, 128, 0.3)":"transparent",color:J.length>0?"rgba(255, 255, 255, 0.5)":"white",border:"none",borderRadius:"14px",fontWeight:"900",fontSize:"1.2rem",boxShadow:J.length>0?"0 2px 3px rgba(0, 0, 0, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",width:"160px",margin:"0",position:"relative",zIndex:1,textAlign:"center",cursor:J.length>0?"not-allowed":"pointer",opacity:J.length>0?.6:1,":hover":{transform:J.length>0?"none":"scale(1.02)"}},children:I.jsx("span",{style:{textShadow:"0 0 1px rgba(58, 53, 53, 0.5)",color:"inherit"},children:"Create Lobby"})})]})})}),ce&&!((B==="admin"||B==="organizer")&&J.length>0)&&I.jsx("div",{className:"events-list",style:{position:"absolute",bottom:"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:I.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:I.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>_e(`/lobby?code=${ce}`),onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",fe.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0) rotateX(0)",fe.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",fe.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",fe.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[I.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:ce.charAt(0).toUpperCase()}),I.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Return to ",ce]})]})})}),(B==="admin"||B==="organizer")&&J.length>0&&I.jsx("div",{className:"events-list",style:{position:"absolute",bottom:ce&&!((B==="admin"||B==="organizer")&&J.length>0)?"calc(20px + 120px + 10px + 15% + 10px)":"calc(20px + 120px + 10px)",left:"50%",transform:"translateX(-50%)",width:"44%",height:"15%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.05), rgba(83, 91, 242, 0.05))",borderRadius:"30px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",justifyContent:"center",alignItems:"center"},children:ue?I.jsx("div",{style:{textAlign:"center",color:"white"},children:I.jsx("p",{children:"Loading your lobbies..."})}):J.length>0?I.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",perspective:"1000px"},children:J.map((fe,X)=>I.jsxs("div",{className:"card",style:{width:"calc(100% - 2rem)",maxWidth:"200px",minWidth:"150px",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(20, 77, 255, 0.15)",border:"1px solid rgba(20, 77, 255, 0.2)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transformStyle:"preserve-3d","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(20, 77, 255, 0.1), rgba(83, 91, 242, 0.1))",opacity:0,transition:"opacity 0.4s ease"}},onClick:()=>je(fe),onMouseEnter:te=>{te.currentTarget.style.transform="translateY(-10px) rotateX(5deg)",te.currentTarget.style.boxShadow="0 20px 40px rgba(20, 77, 255, 0.25)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.4)",te.currentTarget.style.background="rgba(255, 255, 255, 0.98)"},onMouseLeave:te=>{te.currentTarget.style.transform="translateY(0) rotateX(0)",te.currentTarget.style.boxShadow="0 10px 30px rgba(20, 77, 255, 0.15)",te.currentTarget.style.border="1px solid rgba(20, 77, 255, 0.2)",te.currentTarget.style.background="rgba(255, 255, 255, 0.95)"},children:[I.jsx("div",{className:"glow-button",style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, #144dff, #535bf2)",marginBottom:".5rem",marginTop:"-1rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:".8rem",boxShadow:"0 8px 20px rgba(20, 77, 255, 0.3)",transition:"all 0.4s ease",position:"relative","&::after":{content:'""',position:"absolute",top:"-5px",left:"-5px",right:"-5px",bottom:"-5px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(20, 77, 255, 0.2), rgba(83, 91, 242, 0.2))",zIndex:-1,animation:"pulse 2s infinite"}},children:fe&&fe.length>0?fe.charAt(0).toUpperCase():"?"}),I.jsxs("h3",{style:{marginTop:"0.5rem",color:"#144dff",fontWeight:"700",fontSize:".9em",fontFamily:"Helvetica",textAlign:"center",textShadow:"0 2px 4px rgba(20, 77, 255, 0.1)",letterSpacing:"0.5px"},children:["Lobby ",fe||"Unknown"]})]},X))}):I.jsx("div",{style:{}})})]}),I.jsx(Te,{})]})};function FE(){const{pathname:r}=yi();return P.useEffect(()=>{window.scrollTo(0,0)},[r]),null}const jE=()=>{const{login:r,signup:o,user:a,logout:d,checkAuth:p}=P.useContext(Vr),[x,y]=P.useState(""),[A,w]=P.useState(""),[E,S]=P.useState(""),[N,R]=P.useState(""),[k,L]=P.useState(!0),[B,j]=P.useState({}),[U,H]=P.useState(!1),z=Ur(),J=$=>{const ce=/^[a-z0-9]+$/;return $.length>=2&&ce.test($)},le=$=>{const ce=$.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");y(ce),ce.length>0?H(!0):H(!1),J(ce)?j(q=>({...q,username:""})):j(q=>({...q,username:" "}))},ue=async $=>{if($.preventDefault(),R(""),!J(x)){R("Please enter a valid username");return}try{const ce=k?"/login":"/signup",q=await fetch(window.server_url+ce,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:x,password:A}),mode:"cors"});if(q.ok){const _e=await q.json();r(_e),p(),z("/")}else{const _e=await q.json();R(_e.message||`${k?"Login":"Signup"} failed`)}}catch(ce){R("Network error occurred. Please try again."),console.error("Error:",ce)}};return I.jsxs("div",{className:"login-container",children:[I.jsx("button",{onClick:()=>z("/"),className:"homescreen-button",children:"Home"}),I.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",className:"logo-image"}),I.jsx("h1",{className:"login-header",children:"Login"}),I.jsxs("div",{className:"login-signup-form",children:[N&&I.jsx("div",{className:"error-message",children:N}),I.jsxs("form",{onSubmit:ue,children:[I.jsxs("div",{className:"form-group",children:[I.jsx("input",{type:"text",placeholder:"Username",className:"login-input",value:x,onChange:le,required:!0}),U&&I.jsx("div",{className:"step-success",children:"lowercase letters and numbers only"})]}),I.jsx("div",{className:"form-group",children:I.jsx("input",{type:"text",placeholder:"Password",className:"login-input",value:A,onChange:$=>w($.target.value),required:!0})}),I.jsx("button",{type:"submit",className:"login-primary-button",children:"Login"})]})]})]})},VE=()=>{const r=Ur(),{logout:o}=P.useContext(Vr);return localStorage.removeItem("access_token"),P.useEffect(()=>{console.log("LogoutPage useEffect"),setTimeout(()=>{o(),r("/")},100)},[]),I.jsx("div",{children:"Logged out redirecting to homescreen"})};var UE=Object.defineProperty,Sc=Object.getOwnPropertySymbols,km=Object.prototype.hasOwnProperty,Lm=Object.prototype.propertyIsEnumerable,Pp=(r,o,a)=>o in r?UE(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,Qf=(r,o)=>{for(var a in o||(o={}))km.call(o,a)&&Pp(r,a,o[a]);if(Sc)for(var a of Sc(o))Lm.call(o,a)&&Pp(r,a,o[a]);return r},Jf=(r,o)=>{var a={};for(var d in r)km.call(r,d)&&o.indexOf(d)<0&&(a[d]=r[d]);if(r!=null&&Sc)for(var d of Sc(r))o.indexOf(d)<0&&Lm.call(r,d)&&(a[d]=r[d]);return a};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Qs;(r=>{const o=class _t{constructor(w,E,S,N){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<_t.MIN_VERSION||w>_t.MAX_VERSION)throw new RangeError("Version value out of range");if(N<-1||N>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let R=[];for(let L=0;L<this.size;L++)R.push(!1);for(let L=0;L<this.size;L++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(S);if(this.drawCodewords(k),N==-1){let L=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const j=this.getPenaltyScore();j<L&&(N=B,L=j),this.applyMask(B)}}p(0<=N&&N<=7),this.mask=N,this.applyMask(N),this.drawFormatBits(N),this.isFunction=[]}static encodeText(w,E){const S=r.QrSegment.makeSegments(w);return _t.encodeSegments(S,E)}static encodeBinary(w,E){const S=r.QrSegment.makeBytes(w);return _t.encodeSegments([S],E)}static encodeSegments(w,E,S=1,N=40,R=-1,k=!0){if(!(_t.MIN_VERSION<=S&&S<=N&&N<=_t.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let L,B;for(L=S;;L++){const z=_t.getNumDataCodewords(L,E)*8,J=y.getTotalBits(w,L);if(J<=z){B=J;break}if(L>=N)throw new RangeError("Data too long")}for(const z of[_t.Ecc.MEDIUM,_t.Ecc.QUARTILE,_t.Ecc.HIGH])k&&B<=_t.getNumDataCodewords(L,z)*8&&(E=z);let j=[];for(const z of w){a(z.mode.modeBits,4,j),a(z.numChars,z.mode.numCharCountBits(L),j);for(const J of z.getData())j.push(J)}p(j.length==B);const U=_t.getNumDataCodewords(L,E)*8;p(j.length<=U),a(0,Math.min(4,U-j.length),j),a(0,(8-j.length%8)%8,j),p(j.length%8==0);for(let z=236;j.length<U;z^=253)a(z,8,j);let H=[];for(;H.length*8<j.length;)H.push(0);return j.forEach((z,J)=>H[J>>>3]|=z<<7-(J&7)),new _t(L,E,H,R)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let S=0;S<E;S++)for(let N=0;N<E;N++)S==0&&N==0||S==0&&N==E-1||S==E-1&&N==0||this.drawAlignmentPattern(w[S],w[N]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let S=E;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const N=(E<<10|S)^21522;p(N>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,d(N,R));this.setFunctionModule(8,7,d(N,6)),this.setFunctionModule(8,8,d(N,7)),this.setFunctionModule(7,8,d(N,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,d(N,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,d(N,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,d(N,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;p(E>>>18==0);for(let S=0;S<18;S++){const N=d(E,S),R=this.size-11+S%3,k=Math.floor(S/3);this.setFunctionModule(R,k,N),this.setFunctionModule(k,R,N)}}drawFinderPattern(w,E){for(let S=-4;S<=4;S++)for(let N=-4;N<=4;N++){const R=Math.max(Math.abs(N),Math.abs(S)),k=w+N,L=E+S;0<=k&&k<this.size&&0<=L&&L<this.size&&this.setFunctionModule(k,L,R!=2&&R!=4)}}drawAlignmentPattern(w,E){for(let S=-2;S<=2;S++)for(let N=-2;N<=2;N++)this.setFunctionModule(w+N,E+S,Math.max(Math.abs(N),Math.abs(S))!=1)}setFunctionModule(w,E,S){this.modules[E][w]=S,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,S=this.errorCorrectionLevel;if(w.length!=_t.getNumDataCodewords(E,S))throw new RangeError("Invalid argument");const N=_t.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][E],R=_t.ECC_CODEWORDS_PER_BLOCK[S.ordinal][E],k=Math.floor(_t.getNumRawDataModules(E)/8),L=N-k%N,B=Math.floor(k/N);let j=[];const U=_t.reedSolomonComputeDivisor(R);for(let z=0,J=0;z<N;z++){let le=w.slice(J,J+B-R+(z<L?0:1));J+=le.length;const ue=_t.reedSolomonComputeRemainder(le,U);z<L&&le.push(0),j.push(le.concat(ue))}let H=[];for(let z=0;z<j[0].length;z++)j.forEach((J,le)=>{(z!=B-R||le>=L)&&H.push(J[z])});return p(H.length==k),H}drawCodewords(w){if(w.length!=Math.floor(_t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let N=0;N<this.size;N++)for(let R=0;R<2;R++){const k=S-R,B=(S+1&2)==0?this.size-1-N:N;!this.isFunction[B][k]&&E<w.length*8&&(this.modules[B][k]=d(w[E>>>3],7-(E&7)),E++)}}p(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let S=0;S<this.size;S++){let N;switch(w){case 0:N=(S+E)%2==0;break;case 1:N=E%2==0;break;case 2:N=S%3==0;break;case 3:N=(S+E)%3==0;break;case 4:N=(Math.floor(S/3)+Math.floor(E/2))%2==0;break;case 5:N=S*E%2+S*E%3==0;break;case 6:N=(S*E%2+S*E%3)%2==0;break;case 7:N=((S+E)%2+S*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][S]&&N&&(this.modules[E][S]=!this.modules[E][S])}}getPenaltyScore(){let w=0;for(let R=0;R<this.size;R++){let k=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==k?(L++,L==5?w+=_t.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),k||(w+=this.finderPenaltyCountPatterns(B)*_t.PENALTY_N3),k=this.modules[R][j],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,B)*_t.PENALTY_N3}for(let R=0;R<this.size;R++){let k=!1,L=0,B=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==k?(L++,L==5?w+=_t.PENALTY_N1:L>5&&w++):(this.finderPenaltyAddHistory(L,B),k||(w+=this.finderPenaltyCountPatterns(B)*_t.PENALTY_N3),k=this.modules[j][R],L=1);w+=this.finderPenaltyTerminateAndCount(k,L,B)*_t.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let k=0;k<this.size-1;k++){const L=this.modules[R][k];L==this.modules[R][k+1]&&L==this.modules[R+1][k]&&L==this.modules[R+1][k+1]&&(w+=_t.PENALTY_N2)}let E=0;for(const R of this.modules)E=R.reduce((k,L)=>k+(L?1:0),E);const S=this.size*this.size,N=Math.ceil(Math.abs(E*20-S*10)/S)-1;return p(0<=N&&N<=9),w+=N*_t.PENALTY_N4,p(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let N=this.size-7;S.length<w;N-=E)S.splice(1,0,N);return S}}static getNumRawDataModules(w){if(w<_t.MIN_VERSION||w>_t.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;E-=(25*S-10)*S-55,w>=7&&(E-=36)}return p(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(_t.getNumRawDataModules(w)/8)-_t.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*_t.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let N=0;N<w-1;N++)E.push(0);E.push(1);let S=1;for(let N=0;N<w;N++){for(let R=0;R<E.length;R++)E[R]=_t.reedSolomonMultiply(E[R],S),R+1<E.length&&(E[R]^=E[R+1]);S=_t.reedSolomonMultiply(S,2)}return E}static reedSolomonComputeRemainder(w,E){let S=E.map(N=>0);for(const N of w){const R=N^S.shift();S.push(0),E.forEach((k,L)=>S[L]^=_t.reedSolomonMultiply(k,R))}return S}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let S=0;for(let N=7;N>=0;N--)S=S<<1^(S>>>7)*285,S^=(E>>>N&1)*w;return p(S>>>8==0),S}finderPenaltyCountPatterns(w){const E=w[1];p(E<=this.size*3);const S=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(S&&w[0]>=E*4&&w[6]>=E?1:0)+(S&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,S){return w&&(this.finderPenaltyAddHistory(E,S),E=0),E+=this.size,this.finderPenaltyAddHistory(E,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=o;function a(A,w,E){if(w<0||w>31||A>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)E.push(A>>>S&1)}function d(A,w){return(A>>>w&1)!=0}function p(A){if(!A)throw new Error("Assertion error")}const x=class gn{constructor(w,E,S){if(this.mode=w,this.numChars=E,this.bitData=S,E<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let E=[];for(const S of w)a(S,8,E);return new gn(gn.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!gn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let S=0;S<w.length;){const N=Math.min(w.length-S,3);a(parseInt(w.substring(S,S+N),10),N*3+1,E),S+=N}return new gn(gn.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!gn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],S;for(S=0;S+2<=w.length;S+=2){let N=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;N+=gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),a(N,11,E)}return S<w.length&&a(gn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,E),new gn(gn.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:gn.isNumeric(w)?[gn.makeNumeric(w)]:gn.isAlphanumeric(w)?[gn.makeAlphanumeric(w)]:[gn.makeBytes(gn.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)a(w,8,E);else if(w<16384)a(2,2,E),a(w,14,E);else if(w<1e6)a(6,3,E),a(w,21,E);else throw new RangeError("ECI assignment value out of range");return new gn(gn.Mode.ECI,0,E)}static isNumeric(w){return gn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return gn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let S=0;for(const N of w){const R=N.mode.numCharCountBits(E);if(N.numChars>=1<<R)return 1/0;S+=4+R+N.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?E.push(w.charCodeAt(S)):(E.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return E}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=x;r.QrSegment=x})(Qs||(Qs={}));(r=>{(o=>{const a=class{constructor(p,x){this.ordinal=p,this.formatBits=x}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(r.QrCode||(r.QrCode={}))})(Qs||(Qs={}));(r=>{(o=>{const a=class{constructor(p,x){this.modeBits=p,this.numBitsCharCount=x}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(r.QrSegment||(r.QrSegment={}))})(Qs||(Qs={}));var Oo=Qs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var zE={L:Oo.QrCode.Ecc.LOW,M:Oo.QrCode.Ecc.MEDIUM,Q:Oo.QrCode.Ecc.QUARTILE,H:Oo.QrCode.Ecc.HIGH},Bm=128,Fm="L",jm="#FFFFFF",Vm="#000000",Um=!1,zm=1,WE=4,HE=0,GE=.1;function Wm(r,o=0){const a=[];return r.forEach(function(d,p){let x=null;d.forEach(function(y,A){if(!y&&x!==null){a.push(`M${x+o} ${p+o}h${A-x}v1H${x+o}z`),x=null;return}if(A===d.length-1){if(!y)return;x===null?a.push(`M${A+o},${p+o} h1v1H${A+o}z`):a.push(`M${x+o},${p+o} h${A+1-x}v1H${x+o}z`);return}y&&x===null&&(x=A)})}),a.join("")}function Hm(r,o){return r.slice().map((a,d)=>d<o.y||d>=o.y+o.h?a:a.map((p,x)=>x<o.x||x>=o.x+o.w?p:!1))}function XE(r,o,a,d){if(d==null)return null;const p=r.length+a*2,x=Math.floor(o*GE),y=p/o,A=(d.width||x)*y,w=(d.height||x)*y,E=d.x==null?r.length/2-A/2:d.x*y,S=d.y==null?r.length/2-w/2:d.y*y,N=d.opacity==null?1:d.opacity;let R=null;if(d.excavate){let L=Math.floor(E),B=Math.floor(S),j=Math.ceil(A+E-L),U=Math.ceil(w+S-B);R={x:L,y:B,w:j,h:U}}const k=d.crossOrigin;return{x:E,y:S,h:w,w:A,excavation:R,opacity:N,crossOrigin:k}}function YE(r,o){return o!=null?Math.max(Math.floor(o),0):r?WE:HE}function Gm({value:r,level:o,minVersion:a,includeMargin:d,marginSize:p,imageSettings:x,size:y,boostLevel:A}){let w=tn.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((B,j)=>(B.push(...Oo.QrSegment.makeSegments(j)),B),[]);return Oo.QrCode.encodeSegments(L,zE[o],a,void 0,void 0,A)},[r,o,a,A]);const{cells:E,margin:S,numCells:N,calculatedImageSettings:R}=tn.useMemo(()=>{let k=w.getModules();const L=YE(d,p),B=k.length+L*2,j=XE(k,y,L,x);return{cells:k,margin:L,numCells:B,calculatedImageSettings:j}},[w,y,x,d,p]);return{qrcode:w,margin:S,cells:E,numCells:N,calculatedImageSettings:R}}var KE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ZE=tn.forwardRef(function(o,a){const d=o,{value:p,size:x=Bm,level:y=Fm,bgColor:A=jm,fgColor:w=Vm,includeMargin:E=Um,minVersion:S=zm,boostLevel:N,marginSize:R,imageSettings:k}=d,B=Jf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=B,U=Jf(B,["style"]),H=k==null?void 0:k.src,z=tn.useRef(null),J=tn.useRef(null),le=tn.useCallback(ke=>{z.current=ke,typeof a=="function"?a(ke):a&&(a.current=ke)},[a]),[ue,$]=tn.useState(!1),{margin:ce,cells:q,numCells:_e,calculatedImageSettings:Fe}=Gm({value:p,level:y,minVersion:S,boostLevel:N,includeMargin:E,marginSize:R,imageSettings:k,size:x});tn.useEffect(()=>{if(z.current!=null){const ke=z.current,ee=ke.getContext("2d");if(!ee)return;let je=q;const he=J.current,de=Fe!=null&&he!==null&&he.complete&&he.naturalHeight!==0&&he.naturalWidth!==0;de&&Fe.excavation!=null&&(je=Hm(q,Fe.excavation));const Te=window.devicePixelRatio||1;ke.height=ke.width=x*Te;const fe=x/_e*Te;ee.scale(fe,fe),ee.fillStyle=A,ee.fillRect(0,0,_e,_e),ee.fillStyle=w,KE?ee.fill(new Path2D(Wm(je,ce))):q.forEach(function(X,te){X.forEach(function(Ee,Ve){Ee&&ee.fillRect(Ve+ce,te+ce,1,1)})}),Fe&&(ee.globalAlpha=Fe.opacity),de&&ee.drawImage(he,Fe.x+ce,Fe.y+ce,Fe.w,Fe.h)}}),tn.useEffect(()=>{$(!1)},[H]);const Re=Qf({height:x,width:x},j);let Oe=null;return H!=null&&(Oe=tn.createElement("img",{src:H,key:H,style:{display:"none"},onLoad:()=>{$(!0)},ref:J,crossOrigin:Fe==null?void 0:Fe.crossOrigin})),tn.createElement(tn.Fragment,null,tn.createElement("canvas",Qf({style:Re,height:x,width:x,ref:le,role:"img"},U)),Oe)});ZE.displayName="QRCodeCanvas";var Kd=tn.forwardRef(function(o,a){const d=o,{value:p,size:x=Bm,level:y=Fm,bgColor:A=jm,fgColor:w=Vm,includeMargin:E=Um,minVersion:S=zm,boostLevel:N,title:R,marginSize:k,imageSettings:L}=d,B=Jf(d,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:U,numCells:H,calculatedImageSettings:z}=Gm({value:p,level:y,minVersion:S,boostLevel:N,includeMargin:E,marginSize:k,imageSettings:L,size:x});let J=U,le=null;L!=null&&z!=null&&(z.excavation!=null&&(J=Hm(U,z.excavation)),le=tn.createElement("image",{href:L.src,height:z.h,width:z.w,x:z.x+j,y:z.y+j,preserveAspectRatio:"none",opacity:z.opacity,crossOrigin:z.crossOrigin}));const ue=Wm(J,j);return tn.createElement("svg",Qf({height:x,width:x,viewBox:`0 0 ${H} ${H}`,ref:a,role:"img"},B),!!R&&tn.createElement("title",null,R),tn.createElement("path",{fill:A,d:`M0,0 h${H}v${H}H0z`,shapeRendering:"crispEdges"}),tn.createElement("path",{fill:w,d:ue,shapeRendering:"crispEdges"}),le)});Kd.displayName="QRCodeSVG";const $E=({player:r})=>I.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"350px",height:"500px",margin:"0 auto",position:"relative"},children:r!=null&&r.image_data?I.jsxs("div",{style:{position:"relative",width:"350px",height:"450px"},children:[I.jsx("img",{src:`data:image/jpeg;base64,${r.image_data}`,alt:r.name,style:{width:"350px",height:"450px",objectFit:"cover",borderRadius:"50px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)",margin:"auto",display:"block"},onError:o=>{console.error("Image failed to load:",o),o.target.style.display="none"}}),I.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]}):I.jsxs("div",{style:{width:"350px",height:"450px",backgroundColor:"#f0f0f0",borderRadius:"50px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[I.jsx("p",{style:{marginBottom:"60px"},children:"No image available"}),I.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#144dff",color:"white",padding:"12px 0",borderBottomLeftRadius:"50px",borderBottomRightRadius:"50px",textAlign:"center",fontWeight:"600",fontSize:"1.2rem",fontFamily:"Helvetica, Arial, sans-serif",boxShadow:"0 -4px 10px rgba(0, 0, 0, 0.1)",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:r.name})]})});var Mp=typeof window>"u"?P.useEffect:P.useLayoutEffect,qE=({isPlaying:r,duration:o,startAt:a=0,updateInterval:d=0,onComplete:p,onUpdate:x})=>{let[y,A]=P.useState(a),w=P.useRef(0),E=P.useRef(a),S=P.useRef(a*-1e3),N=P.useRef(null),R=P.useRef(null),k=P.useRef(null),L=U=>{let H=U/1e3;if(R.current===null){R.current=H,N.current=requestAnimationFrame(L);return}let z=H-R.current,J=w.current+z;R.current=H,w.current=J;let le=E.current+(d===0?J:(J/d|0)*d),ue=E.current+J,$=typeof o=="number"&&ue>=o;A($?o:le),$||(N.current=requestAnimationFrame(L))},B=()=>{N.current&&cancelAnimationFrame(N.current),k.current&&clearTimeout(k.current),R.current=null},j=P.useCallback(U=>{B(),w.current=0;let H=typeof U=="number"?U:a;E.current=H,A(H),r&&(N.current=requestAnimationFrame(L))},[r,a]);return Mp(()=>{if(x==null||x(y),o&&y>=o){S.current+=o*1e3;let{shouldRepeat:U=!1,delay:H=0,newStartAt:z}=(p==null?void 0:p(S.current/1e3))||{};U&&(k.current=setTimeout(()=>j(z),H*1e3))}},[y,o]),Mp(()=>(r&&(N.current=requestAnimationFrame(L)),B),[r,o,d]),{elapsedTime:y,reset:j}},QE=(r,o,a)=>{let d=r/2,p=o/2,x=d-p,y=2*x,A=a==="clockwise"?"1,0":"0,1",w=2*Math.PI*x;return{path:`m ${d},${p} a ${x},${x} 0 ${A} 0,${y} a ${x},${x} 0 ${A} 0,-${y}`,pathLength:w}},Dp=(r,o)=>r===0||r===o?0:typeof o=="number"?r-o:0,JE=r=>({position:"relative",width:r,height:r}),eA={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},Xm=(r,o,a,d,p)=>{if(d===0)return o;let x=(p?d-r:r)/d;return o+a*x},kp=r=>{var o,a;return(a=(o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(d,p,x,y)=>`#${p}${p}${x}${x}${y}${y}`).substring(1).match(/.{2}/g))==null?void 0:o.map(d=>parseInt(d,16)))!=null?a:[]},tA=(r,o)=>{var a;let{colors:d,colorsTime:p,isSmoothColorTransition:x=!0}=r;if(typeof d=="string")return d;let y=(a=p==null?void 0:p.findIndex((R,k)=>R>=o&&o>=p[k+1]))!=null?a:-1;if(!p||y===-1)return d[0];if(!x)return d[y];let A=p[y]-o,w=p[y]-p[y+1],E=kp(d[y]),S=kp(d[y+1]),N=!!r.isGrowing;return`rgb(${E.map((R,k)=>Xm(A,R,S[k]-R,w,N)|0).join(",")})`},nA=r=>{let{duration:o,initialRemainingTime:a,updateInterval:d,size:p=180,strokeWidth:x=12,trailStrokeWidth:y,isPlaying:A=!1,isGrowing:w=!1,rotation:E="clockwise",onComplete:S,onUpdate:N}=r,R=P.useRef(),k=Math.max(x,y??0),{path:L,pathLength:B}=QE(p,k,E),{elapsedTime:j}=qE({isPlaying:A,duration:o,startAt:Dp(o,a),updateInterval:d,onUpdate:typeof N=="function"?H=>{let z=Math.ceil(o-H);z!==R.current&&(R.current=z,N(z))}:void 0,onComplete:typeof S=="function"?H=>{var z;let{shouldRepeat:J,delay:le,newInitialRemainingTime:ue}=(z=S(H))!=null?z:{};if(J)return{shouldRepeat:J,delay:le,newStartAt:Dp(o,ue)}}:void 0}),U=o-j;return{elapsedTime:j,path:L,pathLength:B,remainingTime:Math.ceil(U),rotation:E,size:p,stroke:tA(r,U),strokeDashoffset:Xm(j,0,B,o,w),strokeWidth:x}},Zd=r=>{let{children:o,strokeLinecap:a,trailColor:d,trailStrokeWidth:p}=r,{path:x,pathLength:y,stroke:A,strokeDashoffset:w,remainingTime:E,elapsedTime:S,size:N,strokeWidth:R}=nA(r);return tn.createElement("div",{style:JE(N)},tn.createElement("svg",{viewBox:`0 0 ${N} ${N}`,width:N,height:N,xmlns:"http://www.w3.org/2000/svg"},tn.createElement("path",{d:x,fill:"none",stroke:d??"#d9d9d9",strokeWidth:p??R}),tn.createElement("path",{d:x,fill:"none",stroke:A,strokeLinecap:a??"round",strokeWidth:R,strokeDasharray:y,strokeDashoffset:w})),typeof o=="function"&&tn.createElement("div",{style:eA},o({remainingTime:E,elapsedTime:S,color:A})))};Zd.displayName="CountdownCircleTimer";const rA=({onComplete:r})=>{const[o,a]=P.useState(5),[d,p]=P.useState(!1),x=P.useRef(null),y=P.useRef(null);P.useEffect(()=>(x.current&&clearTimeout(x.current),y.current&&clearInterval(y.current),y.current=setInterval(()=>{p(!0),x.current=setTimeout(()=>{a(w=>w<=1?(y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current),r&&r(),0):w-1),p(!1)},500)},1500),()=>{y.current&&clearInterval(y.current),x.current&&clearTimeout(x.current)}),[r]);const A=d?"pop-burst":"";return I.jsx("div",{className:"lobby-countdown-overlay",children:I.jsxs("div",{className:`lobby-countdown-container ${A}`,children:[I.jsx("div",{className:"lobby-countdown-number",children:o}),I.jsx("div",{className:"lobby-countdown-text",children:o>0?"Get ready!":"Starting..."})]})})},iA=({onComplete:r,lobbyCode:o="this"})=>{const{userProfile:a}=P.useContext(Vr),[d,p]=P.useState(0),[x,y]=P.useState(!1),[A,w]=P.useState(!1),[E,S]=P.useState([0]),[N,R]=P.useState(!1),k=P.useRef(null),L=P.useRef(null),B=[{image:"/assets/how_to_tutorial_updated_slide1.svg",duration:2e3,animatedText:"Find your match using their profile picture!"},{image:"/assets/how_to_pt2_2.svg",duration:4e3,animatedText:"Raise volume to the max, to know when you have a match!"},{image:"/assets/how_to_tutorial_updated_slide3.svg",duration:4e3,animatedText:"Tap leave to stop being paired/take a break"}];return P.useEffect(()=>{const j=()=>{if(d>=B.length-1){clearInterval(k.current),r&&r();return}y(!0);const U=d+1;S([d,U]),L.current=setTimeout(()=>{R(!1),p(U),y(!1),setTimeout(()=>{S([U]),w(!0),B[U].animatedText&&R(!0)},500)},500)};return k.current=setInterval(j,B[d].duration),w(!0),d===0&&B[0].animatedText&&R(!0),()=>{k.current&&clearInterval(k.current),L.current&&clearTimeout(L.current)}},[d,B.length,r]),I.jsx("div",{className:"tutorial-overlay",children:I.jsxs("div",{className:"tutorial-container",children:[E.map(j=>I.jsxs("div",{className:`tutorial-slide ${j===d?"current":j<d?"previous":"next"}`,children:[j===d&&B[j].animatedText&&N&&I.jsx("div",{className:"animated-text pop-burst",children:B[j].animatedText}),j===1&&I.jsx("div",{className:"volume-arrow-container",children:I.jsx("svg",{className:"volume-arrow",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M19 12H5M5 12L12 5M5 12L12 19",stroke:"#144dff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),I.jsx("div",{className:`tutorial-image-container ${j===0?"first-slide":""}`,children:I.jsx("img",{src:B[j].image,alt:`Tutorial step ${j+1}`,className:"tutorial-image"})}),I.jsx("div",{className:`tutorial-text ${A&&j===d?"text-animate":""}`,children:B[j].text})]},j)),I.jsx("div",{className:"tutorial-progress-bar-container",children:I.jsx("div",{className:"tutorial-progress-bar",children:I.jsx("div",{className:"tutorial-progress-bar-fill"})})})]})})},sA=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=P.useState(!1),p=P.useRef(null);return P.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},3e3)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?I.jsxs("div",{className:"match-overlay",children:[I.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>I.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>I.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),I.jsx("div",{className:"match-text",children:"It's a Match!"})]}):null},oA=({isVisible:r,onAnimationEnd:o})=>{const[a,d]=P.useState(!1),p=P.useRef(null);return P.useEffect(()=>(p.current&&clearTimeout(p.current),r?(d(!0),p.current=setTimeout(()=>{d(!1),o&&o()},1800)):d(!1),()=>{p.current&&(clearTimeout(p.current),p.current=null)}),[r,o]),a?I.jsxs("div",{className:"ready-overlay",children:[I.jsxs("div",{className:"confetti-container",children:[[...Array(50)].map((x,y)=>I.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":Math.random()*.2}},`first-${y}`)),[...Array(50)].map((x,y)=>I.jsx("div",{className:`confetti confetti-${y%5}`,style:{"--rand-x":Math.random(),"--rand-y":Math.random(),"--rand-rotation":Math.random()*720,"--rand-delay":`${.6+Math.random()*.2}s`}},`second-${y}`))]}),I.jsx("div",{className:"ready-text",children:"You're ready!"})]}):null},oc=9,aA=5,lA=5e3,cA=!1,uA=()=>{const r=Math.floor(540),[o,a]=P.useState([]),[d,p]=P.useState("self"),[x,y]=P.useState(!1),[A,w]=P.useState(""),E=P.useRef(null),S=P.useRef(null),[N,R]=P.useState(!1),k=P.useRef(!1),[L,B]=P.useState(!1),{loadSound:j,seekTo:U,cancelSound:H,checkSound:z,soundEnabled:J,setSoundEnabled:le,isPlaying:ue}=eg(),[$,ce]=P.useState("yonder"),q=Ur(),{code:_e}=$2(),[Fe,Re]=P.useState(null);Dm(Re,null,$);const{user:Oe,userProfile:ke,checkAuth:ee,permissions:je}=P.useContext(Vr);P.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{Oe||await ee()}catch(Ge){console.error("Authentication error:",Ge);const Ke=new URLSearchParams(window.location.search).get("code")||_e;q(Ke?`/signup?redirect=lobby&code=${Ke}`:"/signup?redirect=lobby")}else{await fetch(window.server_url+"/debug?username="+Oe+"&message=no token on the lobby page",{method:"GET"});const rt=new URLSearchParams(window.location.search).get("code")||_e;q(rt?`/signup?redirect=lobby&code=${rt}`:"/signup?redirect=lobby")}})()},[q,_e,ee,Oe]),P.useEffect(()=>{(()=>{const Ge=new URLSearchParams(window.location.search).get("code")||_e;if(Ge){ce(Ge),ME(Ge),vt(Ge);const rt=`hasSeenTutorial_${Ge}`,Ke=localStorage.getItem(rt),gt=!!localStorage.getItem("access_token");console.log("Tutorial check:",{codeParam:Ge,lobbyTutorialKey:rt,hasSeenLobbyTutorial:Ke,isAuthenticated:gt}),!Ke&&gt&&(Wr(!0),localStorage.setItem(rt,"true"))}})()},[_e]);const[he,de]=P.useState(null),[Te,fe]=P.useState(null),[X,te]=P.useState(null),[Ee,Ve]=P.useState(null),[st,we]=P.useState(null),$e=P.useRef(!1),ze=P.useRef(null),mt=P.useRef(null),[ge,ct]=P.useState(null),[dt,Me]=P.useState(null),[At,Bt]=P.useState(null),[Gt,Pt]=P.useState(null),[bt,ht]=P.useState(!0),Dn=P.useRef(0),[Ne,Xn]=P.useState(null),[wt,ve]=P.useState(null),[Pe,Qe]=P.useState([]),[jt,yt]=P.useState([]),[pt,rn]=P.useState(!document.hidden),Mt=P.useRef("yonder"),zt=P.useRef({}),It=P.useRef([]),[be,Vt]=P.useState(!1),Tt=P.useRef(null),[Xt,zr]=P.useState(!1);P.useEffect(()=>{Mt.current=$},[$]);async function ei(Le,qe){const Ge=localStorage.getItem("access_token"),Ke=await(await fetch(window.server_url+"/set_profile_info",{method:"POST",headers:{Authorization:`Bearer ${Ge}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},mode:"cors",body:JSON.stringify({tags_work:Le,tags_desiring_work:qe})})).json();console.log("SET PROFILE INFO:",Ke)}const ji=async Le=>{if(Le.length!==0){Vt(!0);try{const qe=localStorage.getItem("access_token"),Ge=await fetch(`${window.server_url}/load_batch_pfp_small_icons`,{method:"POST",headers:{Authorization:`Bearer ${qe}`,"Content-Type":"application/json",lobby_code:Mt.current},body:JSON.stringify({usernames:Le})});if(Ge.ok){const rt=await Ge.json();zt.current={...zt.current,...rt},console.log("Profile images fetched:",Object.keys(rt))}else console.error("Failed to fetch profile images:",Ge.status)}catch(qe){console.error("Error fetching profile images:",qe)}finally{Vt(!1)}}},vt=async Le=>{try{const qe=await fetch(`${window.server_url}/lobby_setup_data`,{headers:{lobby_code:Le}});if(qe.ok){const Ge=await qe.json();Ge.logo_icon?(Tt.current=Ge.logo_icon,zr(!0),console.log("Sponsor logo loaded successfully")):console.log("No sponsor logo available for this lobby")}else console.error("Failed to fetch lobby setup data:",qe.status)}catch(qe){console.error("Error fetching lobby setup data:",qe)}};async function Yn(){try{const Le=localStorage.getItem("access_token");H(),zt.current={},It.current=[],(await fetch(window.server_url+"/disconnect_lobby",{headers:{Authorization:`Bearer ${Le}`,lobby_code:$}})).ok&&q("/")}catch(Le){console.error("Error disconnecting from lobby:",Le),q("/")}finally{H(),q("/"),console.log("finally")}}const[ws,Vi]=P.useState(!1),[Kn,Ui]=P.useState(null),sn=P.useRef(!1),[Tr,ti]=P.useState(!1),[En,zi]=P.useState(null),rr=(Le,qe)=>{if(!Le||!qe)return null;for(const Ge of Le.tags_work)if(qe.desiring_tags_work.includes(Ge)){for(const rt of qe.tags_work)if(Le.desiring_tags_work.includes(rt))return{playerTag:Ge,opponentTag:rt}}return null};async function ni(){try{Dn.current+=1,Dn.current>5&&(Dn.current=0,$e.current=!1);const Le=localStorage.getItem("access_token"),qe=!document.hidden,Ge=Mt.current;if(console.log("lobby code fr:",Ge),Ge=="yonder"){console.log("lobby code is not set");return}const rt=await fetch(`${window.server_url}/lobby?is_visible=${qe}`,{headers:{Authorization:`Bearer ${Le}`,is_visible_t_f:qe?"t":"f",lobby_code:Ge}});if(rt.ok){const Ke=await rt.json();console.log("LOBBY PAIR DATA:",Ge,Ke),Ke.status=="inactive"&&(H(),q("/")),te(Ke.opponent_name),Ke.opponent_name==null&&de(null),a(Ke.custom_tags),ct(Ke.lobby_state),Pt(Ke.lobby_duration);const gt=typeof Ke.round_time_left=="number"&&!isNaN(Ke.round_time_left)?Ke.round_time_left:0;console.log("Timer Debug:",{roundDuration:Ke.lobby_duration,timeLeft:gt,lobbyState:Ke.lobby_state,usingDefaultDuration:!Ke.lobby_duration}),ze.current=gt,mt.current=Ke.beat_go_off,Me(Math.floor(gt));const Es=Math.floor(gt/60),pe=Math.floor(gt%60);Bt(`${Es}:${pe.toString().padStart(2,"0")}`),we(Ke.table_number),Ke.player_tags!=null&&Ke.player_tags.tags_work!=null&&Qe(Ke.player_tags.tags_work),Ke.player_tags!=null&&Ke.player_tags.desiring_tags_work!=null&&yt(Ke.player_tags.desiring_tags_work),ze.current!=null&&Ke.lobby_state=="active"&&ze.current!=0&&(U(r-ze.current),console.log("seeking to",r-ze.current));const As=await fetch(`${window.server_url}/display_lobby_metadata?lobby_code=${Ge}`,{headers:{Authorization:`Bearer ${Le}`,lobby_code:Ge}});if(As.ok){const Nt=await As.json();Re(Nt.player_count);const sr=Nt.usernames||[];if(JSON.stringify(It.current)!==JSON.stringify(sr)){It.current=sr;const Ct=sr.filter(ut=>!zt.current[ut]&&ut!==(Oe==null?void 0:Oe.username));Ct.length>0&&(cA||(console.log("Fetching images for new users:",Ct),ji(Ct)))}}if((X!=Ke.opponent_name||he==null)&&!$e.current&&Ke.opponent_name!=null){$e.current=!0,console.log("fetching profile");const Nt=await fetch(window.server_url+"/paired_player_profile",{headers:{Authorization:`Bearer ${Le}`}});if(Nt.ok){const sr=await Nt.json();de(sr),console.log("profile fetched:",sr.name)}else console.log("profile fetch failed");$e.current=!1}if(Kn==="interrim"&&Ke.lobby_state==="active"&&Ke.opponent_name&&!sn.current){console.log("Checking for matches...");const Nt=rr(Ke.player_tags,Ke.opponent_tags);Nt&&(console.log("Match found! Setting animation and banner...",Nt),zi(Nt),ti(!0),sn.current=!0,Vi(!0))}Ui(Ke.lobby_state)}}catch(Le){console.error("Error fetching lobby data:",Le)}}P.useEffect(()=>{z()?le(!0):le(!1);const Le=setInterval(async()=>{ni()},lA);return()=>clearInterval(Le)},[]),P.useEffect(()=>{const Le=setTimeout(ni,1e3);return()=>clearTimeout(Le)},[ge,$]),P.useEffect(()=>{const Le=()=>{const qe=!document.hidden;qe&&!pt&&(console.log("Page became visible - fetching latest data"),ni()),rn(qe)};return document.addEventListener("visibilitychange",Le),()=>{document.removeEventListener("visibilitychange",Le)}},[pt]);const fn=()=>I.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.125)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},children:I.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",position:"relative",minWidth:"300px"},children:[I.jsx("button",{onClick:()=>ht(!1),style:{color:"#144fff",position:"absolute",right:"10px",top:"10px",border:"none",background:"none",fontSize:"2px",cursor:"pointer"},children:"X"}),I.jsx("h2",{style:{marginTop:"5px"},children:"The Sound is Important"}),I.jsx("h3",{style:{marginTop:"5px"},children:"Raise your volume also"}),I.jsx("p",{style:{color:"#144dff"},children:"You'll need this for the best experience."}),I.jsx("button",{onClick:()=>{j(),ht(!1)},style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#144dff",color:"#ffffff",border:"none",borderRadius:"14px",fontWeight:"bold",cursor:"pointer"},children:"Enable Sound"})]})}),ir=(Le,qe)=>{Ne==null&&Xn(Pe),wt==null&&ve(jt);const Ge=Le==="self"?Ne:wt;if(!(Ge!=null&&Ge.includes(qe))&&(Ge==null?void 0:Ge.length)>=aA){w("Reached tag limit for this section"),setTimeout(()=>{var Ke;(Ke=S.current)==null||Ke.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{w("")},3e3);return}Le==="self"?Xn(Ke=>Ke.includes(qe)?Ke.filter(gt=>gt!==qe):[...Ke,qe]):ve(Ke=>Ke.includes(qe)?Ke.filter(gt=>gt!==qe):[...Ke,qe])},bn=()=>{Ne!=null&&ei(Ne,wt||[]),p("desiring"),setTimeout(()=>{var Le;(Le=E.current)==null||Le.scrollIntoView({behavior:"smooth",block:"start"})},100)},De=()=>{wt!=null&&(ei(Ne||[],wt),setTimeout(()=>{k.current||(k.current=!0,R(!0),B(!0))},500)),window.scrollTo({top:0,behavior:"smooth"})},ri=()=>{p("self")},[vs,In]=P.useState(!1);P.useEffect(()=>{if(ge==="interrim")In(!0);else if(ge==="active"){const Le=setTimeout(()=>{In(!1)},1e3);return()=>clearTimeout(Le)}},[ge]);const Zn=()=>{console.log("Lobby countdown animation completed")},[wi,Wr]=P.useState(!1),fr=()=>{Wr(!1)};P.useEffect(()=>{(ge!=="active"||!he)&&(ti(!1),zi(null))},[ge,he]),P.useEffect(()=>{ge==="terminated"&&(zt.current={},It.current=[],Ac())},[ge]);const Cs=P.useRef(null);return P.useEffect(()=>{var Le;!x&&!(Pe!=null&&Pe.length)&&!(jt!=null&&jt.length)&&(o==null?void 0:o.length)>0&&((Le=Cs.current)==null||Le.scrollIntoView({behavior:"smooth"}),y(!0))},[Pe,jt,o,x]),I.jsxs("div",{className:"lobby-container",children:[I.jsxs("div",{className:"lobby-content",children:[I.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0",marginTop:"-1.5rem"},children:I.jsx("img",{src:"/assets/reuneo_test_8.png",alt:"Reunio Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain"}})}),(ge==="checkin"||ge==="active"&&!he||ge==="interrim")&&I.jsx("div",{className:"user-profile-container",children:I.jsxs("div",{className:"user-profile",children:[I.jsx("img",{src:ke!=null&&ke.image_data?`data:image/jpeg;base64,${ke.image_data}`:"/assets/avatar_3.png",alt:"Your Profile",className:"user-profile-picture"}),I.jsx("div",{className:"user-profile-glow"})]})}),I.jsx("div",{className:"lobby-header",style:{marginTop:"-50px"},children:I.jsx("h2",{children:ge==="active"&&he?I.jsxs("span",{className:"lobby-pop-burst",children:["Go find ",he.name,"!"]}):ge==="checkin"?I.jsxs(I.Fragment,{children:["Wait here ",ke.name.slice(0,15),".",I.jsx("br",{}),"Your host will start the experience."]}):ge==="active"&&!he?"You will be paired with someone in the next round.":ge==="interrim"?"Get ready for the next round!":ge==="terminated"?"This session has ended. Thank you for participating!":""})},ge),ge==="active"&&he&&st&&I.jsx("div",{className:"table-number",children:I.jsxs("h3",{children:["at table: ",st]})}),(Tt.current||ge!=="checkin")&&I.jsxs("div",{className:`timer-sponsor-container ${Tt.current&&ge!=="checkin"?"has-timer":""}`,children:[Tt.current&&I.jsx("div",{className:"sponsor-logo",children:I.jsx("img",{src:`data:image/jpeg;base64,${Tt.current}`,alt:"Sponsor Logo",style:{width:"100px",height:"100px",objectFit:"contain"}})}),ge!=="checkin"&&I.jsx("div",{className:"time-left",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"white"},children:(ge==="active"||ge==="interrim")&&dt?I.jsxs(I.Fragment,{children:[I.jsx(Zd,{isPlaying:ge==="active",duration:Gt||300,initialRemainingTime:dt||0,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"#f5f7ff",onComplete:()=>(ni(),{shouldRepeat:!1}),children:({remainingTime:Le})=>{const qe=typeof Le=="number"&&!isNaN(Le)?Le:0,Ge=Math.floor(qe/60),rt=Math.floor(qe%60);return I.jsxs("span",{style:{fontSize:".95rem",color:"#144dff",fontWeight:600},children:[Ge,":",String(rt).padStart(2,"0")]})}},`${ge}-${dt}`),I.jsx("span",{style:{fontWeight:700,fontSize:"0.7em",marginTop:"4px",opacity:"1",color:"#144dff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:"round time left"})]}):I.jsx("span",{className:"time-left-text"})})]}),Tr&&En&&ge==="active"&&he&&I.jsxs("div",{className:"match-banner",children:[I.jsx("span",{className:"match-tag",children:En.playerTag}),I.jsx("div",{className:"match-arrow"}),I.jsx("span",{className:"match-tag",children:En.opponentTag})]}),I.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",margin:"0 auto"},children:ge==="active"||ge==="interrim"?he?I.jsx("div",{style:{marginTop:"-3rem",width:"100%",display:"flex",justifyContent:"center"},children:I.jsx($E,{player:he})}):I.jsx(I.Fragment,{}):ge==="terminated"?I.jsx("div",{className:"status-message",children:I.jsxs("h2",{children:["This session has ended.",I.jsx("br",{}),"Thank you for participating!"]})}):null}),(ge==="checkin"||ge==="active"&&!he)&&Fe!==null&&I.jsx("div",{className:"player-count-container",children:I.jsxs("div",{className:"player-count-bubble",children:[I.jsx("div",{className:"player-count-icon",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:I.jsx("img",{src:"/assets/players_display_icon.png",alt:"Players in lobby",className:"player-count-img",style:{width:"40px",height:"40px",objectFit:"contain"}})}),I.jsxs("div",{className:"player-count-text",children:[I.jsx("span",{className:"player-count-number",children:Fe}),I.jsxs("span",{className:"player-count-label",children:[""," in ",$," lobby"]})]})]})}),(ge==="checkin"||ge==="active"&&!he)&&I.jsx("div",{className:"lobby-profiles-container",children:I.jsx("div",{className:"lobby-profiles-grid",children:Fe>0?I.jsxs(I.Fragment,{children:[Array.from({length:Math.min(Fe,oc)}).map((Le,qe)=>{let Ge;{const Ke=It.current[qe];Ke&&zt.current[Ke]?Ge=`data:image/jpeg;base64,${zt.current[Ke]}`:Ge="/assets/avatar_8.png"}return I.jsxs("div",{className:`profile-icon-wrapper ${qe===Math.min(Fe,oc)-1?"pop-in":""}`,children:[I.jsx("img",{src:Ge,alt:`Profile ${qe+1}`,className:"profile-icon",loading:"lazy"}),I.jsx("div",{className:"profile-icon-glow"})]},`profile-${qe}`)}),Fe>oc&&I.jsx("div",{className:"profile-icon-wrapper more-profiles",children:I.jsxs("div",{className:"more-profiles-bubble",children:["+",Fe-oc]})})]}):I.jsx("div",{children:"No profiles to display"})})}),(ge==="checkin"||ge==="active")&&I.jsxs("div",{className:"selected-tags-container",children:[Ne&&Ne.length>0&&I.jsxs("div",{className:"tag-category",children:[I.jsx("h4",{children:"I am:"}),I.jsx("div",{className:"tag-list",children:Ne.map(Le=>I.jsx("span",{className:"tag-item",children:Le},`self-${Le}`))})]}),wt&&wt.length>0&&I.jsxs("div",{className:"tag-category",children:[I.jsx("h4",{children:"Looking for:"}),I.jsx("div",{className:"tag-list",children:wt.map(Le=>I.jsx("span",{className:"tag-item",children:Le},`desiring-${Le}`))})]})]}),I.jsx("button",{className:"leave-lobby-button",onClick:Yn,children:"Leave"}),I.jsx("button",{className:"how-to-tutorial-button",onClick:()=>Wr(!0),children:"Tutorial"}),je==="admin"&&I.jsx("button",{className:"admin-view-button",onClick:()=>q(`/admin_lobby_view?code=${$}`),children:"Manage"}),Array.isArray(o)&&o.length>0&&I.jsx("form",{onSubmit:Le=>{Le.preventDefault(),d==="self"?bn():De()},children:I.jsxs("div",{className:"tags-section",ref:Cs,children:[I.jsx("div",{className:"progress-bar-container",children:I.jsx("div",{className:`progress-bar ${d==="desiring"?"progress-complete":""}`,onClick:ri})}),I.jsxs("div",{className:`tag-group ${d==="self"?"active":"hidden"}`,children:[I.jsx("div",{className:"bounce-wrapper",children:I.jsx("h2",{children:"Who are you?"})}),I.jsx("div",{className:"tag-labels-container",children:o.map(Le=>I.jsxs("label",{className:"tag-label",children:[I.jsx("input",{type:"checkbox",checked:Ne!=null?Ne.includes(Le):Pe.includes(Le),onChange:()=>ir("self",Le)}),Le]},`self-${Le}`))})]}),I.jsxs("div",{className:`tag-group ${d==="desiring"?"active":"hidden"}`,ref:E,children:[I.jsx("div",{className:"bounce-wrapper",children:I.jsx("h2",{children:"Who do you want to meet?"})}),I.jsx("div",{className:"tag-labels-container",children:o.map(Le=>I.jsxs("label",{className:"tag-label",children:[I.jsx("input",{type:"checkbox",checked:wt!=null?wt.includes(Le):jt.includes(Le),onChange:()=>ir("desiring",Le)}),Le]},`desiring-${Le}`))})]}),I.jsx("button",{type:"submit",className:"tag-selection-button",ref:S,children:d==="self"?"Continue":"Save"}),A&&I.jsx("div",{style:{color:"#144dff",textAlign:"center",marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600"},children:A})]})})]}),J||!bt||ge=="checkin"||ge==null||ue?null:I.jsx(fn,{}),vs&&I.jsx(rA,{onComplete:Zn}),wi&&I.jsx(iA,{onComplete:fr,lobbyCode:$}),I.jsx(sA,{isVisible:ws,onAnimationEnd:()=>{Vi(!1),sn.current=!1}}),I.jsx(oA,{isVisible:N,onAnimationEnd:()=>{R(!1),k.current=!1}})]})};let fA={data:""},dA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||fA,hA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pA=/\/\*[^]*?\*\/|  +/g,Lp=/\n+/g,hs=(r,o)=>{let a="",d="",p="";for(let x in r){let y=r[x];x[0]=="@"?x[1]=="i"?a=x+" "+y+";":d+=x[1]=="f"?hs(y,x):x+"{"+hs(y,x[1]=="k"?"":o)+"}":typeof y=="object"?d+=hs(y,o?o.replace(/([^,])+/g,A=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,w=>/&/.test(w)?w.replace(/&/g,A):A?A+" "+w:w)):x):y!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=hs.p?hs.p(x,y):x+":"+y+";")}return a+(o&&p?o+"{"+p+"}":p)+d},Di={},Ym=r=>{if(typeof r=="object"){let o="";for(let a in r)o+=a+Ym(r[a]);return o}return r},gA=(r,o,a,d,p)=>{let x=Ym(r),y=Di[x]||(Di[x]=(w=>{let E=0,S=11;for(;E<w.length;)S=101*S+w.charCodeAt(E++)>>>0;return"go"+S})(x));if(!Di[y]){let w=x!==r?r:(E=>{let S,N,R=[{}];for(;S=hA.exec(E.replace(pA,""));)S[4]?R.shift():S[3]?(N=S[3].replace(Lp," ").trim(),R.unshift(R[0][N]=R[0][N]||{})):R[0][S[1]]=S[2].replace(Lp," ").trim();return R[0]})(r);Di[y]=hs(p?{["@keyframes "+y]:w}:w,a?"":"."+y)}let A=a&&Di.g?Di.g:null;return a&&(Di.g=Di[y]),((w,E,S,N)=>{N?E.data=E.data.replace(N,w):E.data.indexOf(w)===-1&&(E.data=S?w+E.data:E.data+w)})(Di[y],o,d,A),y},mA=(r,o,a)=>r.reduce((d,p,x)=>{let y=o[x];if(y&&y.call){let A=y(a),w=A&&A.props&&A.props.className||/^go/.test(A)&&A;y=w?"."+w:A&&typeof A=="object"?A.props?"":hs(A,""):A===!1?"":A}return d+p+(y??"")},"");function Mc(r){let o=this||{},a=r.call?r(o.p):r;return gA(a.unshift?a.raw?mA(a,[].slice.call(arguments,1),o.p):a.reduce((d,p)=>Object.assign(d,p&&p.call?p(o.p):p),{}):a,dA(o.target),o.g,o.o,o.k)}let Km,ed,td;Mc.bind({g:1});let Fi=Mc.bind({k:1});function xA(r,o,a,d){hs.p=o,Km=r,ed=a,td=d}function ys(r,o){let a=this||{};return function(){let d=arguments;function p(x,y){let A=Object.assign({},x),w=A.className||p.className;a.p=Object.assign({theme:ed&&ed()},A),a.o=/ *go\d+/.test(w),A.className=Mc.apply(a,d)+(w?" "+w:"");let E=r;return r[0]&&(E=A.as||r,delete A.as),td&&E[0]&&td(A),Km(E,A)}return p}}var yA=r=>typeof r=="function",bc=(r,o)=>yA(r)?r(o):r,wA=(()=>{let r=0;return()=>(++r).toString()})(),Zm=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");r=!o||o.matches}return r}})(),vA=20,$m=(r,o)=>{switch(o.type){case 0:return{...r,toasts:[o.toast,...r.toasts].slice(0,vA)};case 1:return{...r,toasts:r.toasts.map(x=>x.id===o.toast.id?{...x,...o.toast}:x)};case 2:let{toast:a}=o;return $m(r,{type:r.toasts.find(x=>x.id===a.id)?1:0,toast:a});case 3:let{toastId:d}=o;return{...r,toasts:r.toasts.map(x=>x.id===d||d===void 0?{...x,dismissed:!0,visible:!1}:x)};case 4:return o.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(x=>x.id!==o.toastId)};case 5:return{...r,pausedAt:o.time};case 6:let p=o.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(x=>({...x,pauseDuration:x.pauseDuration+p}))}}},pc=[],Zs={toasts:[],pausedAt:void 0},Js=r=>{Zs=$m(Zs,r),pc.forEach(o=>{o(Zs)})},CA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EA=(r={})=>{let[o,a]=P.useState(Zs),d=P.useRef(Zs);P.useEffect(()=>(d.current!==Zs&&a(Zs),pc.push(a),()=>{let x=pc.indexOf(a);x>-1&&pc.splice(x,1)}),[]);let p=o.toasts.map(x=>{var y,A,w;return{...r,...r[x.type],...x,removeDelay:x.removeDelay||((y=r[x.type])==null?void 0:y.removeDelay)||(r==null?void 0:r.removeDelay),duration:x.duration||((A=r[x.type])==null?void 0:A.duration)||(r==null?void 0:r.duration)||CA[x.type],style:{...r.style,...(w=r[x.type])==null?void 0:w.style,...x.style}}});return{...o,toasts:p}},AA=(r,o="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...a,id:(a==null?void 0:a.id)||wA()}),$a=r=>(o,a)=>{let d=AA(o,r,a);return Js({type:2,toast:d}),d.id},cr=(r,o)=>$a("blank")(r,o);cr.error=$a("error");cr.success=$a("success");cr.loading=$a("loading");cr.custom=$a("custom");cr.dismiss=r=>{Js({type:3,toastId:r})};cr.remove=r=>Js({type:4,toastId:r});cr.promise=(r,o,a)=>{let d=cr.loading(o.loading,{...a,...a==null?void 0:a.loading});return typeof r=="function"&&(r=r()),r.then(p=>{let x=o.success?bc(o.success,p):void 0;return x?cr.success(x,{id:d,...a,...a==null?void 0:a.success}):cr.dismiss(d),p}).catch(p=>{let x=o.error?bc(o.error,p):void 0;x?cr.error(x,{id:d,...a,...a==null?void 0:a.error}):cr.dismiss(d)}),r};var SA=(r,o)=>{Js({type:1,toast:{id:r,height:o}})},bA=()=>{Js({type:5,time:Date.now()})},ka=new Map,IA=1e3,TA=(r,o=IA)=>{if(ka.has(r))return;let a=setTimeout(()=>{ka.delete(r),Js({type:4,toastId:r})},o);ka.set(r,a)},NA=r=>{let{toasts:o,pausedAt:a}=EA(r);P.useEffect(()=>{if(a)return;let x=Date.now(),y=o.map(A=>{if(A.duration===1/0)return;let w=(A.duration||0)+A.pauseDuration-(x-A.createdAt);if(w<0){A.visible&&cr.dismiss(A.id);return}return setTimeout(()=>cr.dismiss(A.id),w)});return()=>{y.forEach(A=>A&&clearTimeout(A))}},[o,a]);let d=P.useCallback(()=>{a&&Js({type:6,time:Date.now()})},[a]),p=P.useCallback((x,y)=>{let{reverseOrder:A=!1,gutter:w=8,defaultPosition:E}=y||{},S=o.filter(k=>(k.position||E)===(x.position||E)&&k.height),N=S.findIndex(k=>k.id===x.id),R=S.filter((k,L)=>L<N&&k.visible).length;return S.filter(k=>k.visible).slice(...A?[R+1]:[0,R]).reduce((k,L)=>k+(L.height||0)+w,0)},[o]);return P.useEffect(()=>{o.forEach(x=>{if(x.dismissed)TA(x.id,x.removeDelay);else{let y=ka.get(x.id);y&&(clearTimeout(y),ka.delete(x.id))}})},[o]),{toasts:o,handlers:{updateHeight:SA,startPause:bA,endPause:d,calculateOffset:p}}},RA=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_A=Fi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OA=Fi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,PA=ys("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_A} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,MA=Fi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,DA=ys("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${MA} 1s linear infinite;
`,kA=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LA=Fi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BA=ys("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,FA=ys("div")`
  position: absolute;
`,jA=ys("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VA=Fi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UA=ys("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zA=({toast:r})=>{let{icon:o,type:a,iconTheme:d}=r;return o!==void 0?typeof o=="string"?P.createElement(UA,null,o):o:a==="blank"?null:P.createElement(jA,null,P.createElement(DA,{...d}),a!=="loading"&&P.createElement(FA,null,a==="error"?P.createElement(PA,{...d}):P.createElement(BA,{...d})))},WA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,GA="0%{opacity:0;} 100%{opacity:1;}",XA="0%{opacity:1;} 100%{opacity:0;}",YA=ys("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KA=ys("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ZA=(r,o)=>{let a=r.includes("top")?1:-1,[d,p]=Zm()?[GA,XA]:[WA(a),HA(a)];return{animation:o?`${Fi(d)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fi(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$A=P.memo(({toast:r,position:o,style:a,children:d})=>{let p=r.height?ZA(r.position||o||"top-center",r.visible):{opacity:0},x=P.createElement(zA,{toast:r}),y=P.createElement(KA,{...r.ariaProps},bc(r.message,r));return P.createElement(YA,{className:r.className,style:{...p,...a,...r.style}},typeof d=="function"?d({icon:x,message:y}):P.createElement(P.Fragment,null,x,y))});xA(P.createElement);var qA=({id:r,className:o,style:a,onHeightUpdate:d,children:p})=>{let x=P.useCallback(y=>{if(y){let A=()=>{let w=y.getBoundingClientRect().height;d(r,w)};A(),new MutationObserver(A).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[r,d]);return P.createElement("div",{ref:x,className:o,style:a},p)},QA=(r,o)=>{let a=r.includes("top"),d=a?{top:0}:{bottom:0},p=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Zm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(a?1:-1)}px)`,...d,...p}},JA=Mc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ac=16,eS=({reverseOrder:r,position:o="top-center",toastOptions:a,gutter:d,children:p,containerStyle:x,containerClassName:y})=>{let{toasts:A,handlers:w}=NA(a);return P.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ac,left:ac,right:ac,bottom:ac,pointerEvents:"none",...x},className:y,onMouseEnter:w.startPause,onMouseLeave:w.endPause},A.map(E=>{let S=E.position||o,N=w.calculateOffset(E,{reverseOrder:r,gutter:d,defaultPosition:o}),R=QA(S,N);return P.createElement(qA,{id:E.id,key:E.id,onHeightUpdate:w.updateHeight,className:E.visible?JA:"",style:R},E.type==="custom"?bc(E.message,E):p?p(E):P.createElement($A,{toast:E,position:S}))}))},gc=cr;const Tf=({direction:r="down",show:o=!0,className:a="",style:d={}})=>{if(!o)return null;const p=r==="down"?"rotate(180 16 16)":"";return I.jsxs("div",{className:`arrow-hint-container ${r} ${a}`,style:d,children:[I.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"arrow-hint-svg",children:I.jsxs("g",{transform:p,children:[I.jsx("path",{d:"M16 6v16M16 22l-7-7M16 22l7-7",stroke:"url(#arrow-gradient)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#arrow-glow)"}),I.jsxs("defs",{children:[I.jsxs("linearGradient",{id:"arrow-gradient",x1:"16",y1:"6",x2:"16",y2:"22",gradientUnits:"userSpaceOnUse",children:[I.jsx("stop",{stopColor:"#7f5fff"}),I.jsx("stop",{offset:"0.5",stopColor:"#2e8bff"}),I.jsx("stop",{offset:"1",stopColor:"#00e0ff"})]}),I.jsx("filter",{id:"arrow-glow",x:"-10",y:"-10",width:"52",height:"52",filterUnits:"userSpaceOnUse",children:I.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5",floodColor:"#7f5fff",floodOpacity:"0.5"})})]})]})}),I.jsx("div",{className:"arrow-hint-text",children:"Tap Here"})]})},tS=({isOpen:r,onClose:o,onConfirm:a,userName:d})=>r?I.jsx("div",{className:"kick-modal",children:I.jsxs("div",{className:"kick-modal-content",children:[I.jsx("h2",{className:"kick-modal-title",children:"Kick User"}),I.jsxs("p",{className:"kick-modal-message",children:["Are you sure you want to kick ",d," from the lobby?"]}),I.jsxs("div",{className:"kick-modal-actions",children:[I.jsx("button",{onClick:a,className:"admin-button admin-button-danger",children:"Yes, Kick User"}),I.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,nS=({isOpen:r,onClose:o,onConfirm:a})=>r?I.jsx("div",{className:"join-modal",children:I.jsxs("div",{className:"join-modal-content",children:[I.jsx("h2",{className:"join-modal-title",children:"Join Lobby"}),I.jsx("p",{className:"join-modal-message",children:"Are you sure you want to join? You will be paired up with your attendees."}),I.jsxs("div",{className:"join-modal-actions",children:[I.jsx("button",{onClick:a,className:"admin-button admin-button-join",children:"Yes, Join Lobby"}),I.jsx("button",{onClick:o,className:"admin-button admin-button-primary",children:"Cancel"})]})]})}):null,rS=({lobbyState:r,playerCount:o,onStart:a,onEnd:d,lobbyCode:p,currentRound:x})=>{const y=r==="checkin",A=o>=2&&r==="checkin",w=r==="active",E=r==="active",S=r==="terminated",[N,R]=P.useState(null),[k,L]=P.useState({code:!1,qr:!1}),[B,j]=P.useState(!1),U=()=>{R("start")},H=()=>{R("end")},z=()=>{j(!0),R("checkin")},J=()=>{N==="start"?(a(),gc.success("Rounds started!",{position:"top-center"})):N==="end"&&d(),R(null)},le=()=>R(null),ue=(Oe,ke)=>Oe?"progress-arrow active-shimmer":ke?"progress-arrow available-shimmer":"progress-arrow inactive",$=y&&!B&&o<6,ce=r==="checkin"&&o>=6,q=r==="active"&&x+1>=12,_e=()=>{const Oe=document.getElementById("modal-qr-svg");if(!Oe)return;const ee=new XMLSerializer().serializeToString(Oe),je=new window.Image,he=512,de=document.createElement("canvas");de.width=he,de.height=he;const Te=de.getContext("2d");je.onload=()=>{Te.clearRect(0,0,he,he),Te.drawImage(je,0,0,he,he),de.toBlob(fe=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":fe})]).then(()=>{L(X=>({...X,qr:!0})),setTimeout(()=>L(X=>({...X,qr:!1})),800)}).catch(()=>{Fe(fe)}):Fe(fe)},"image/png")},je.onerror=()=>alert("Failed to render QR code image."),je.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(ee)))};function Fe(Oe){const ke=URL.createObjectURL(Oe),ee=document.createElement("a");ee.href=ke,ee.download=`reuneo-lobby-${p}.png`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(ke),L(je=>({...je,qr:!0})),setTimeout(()=>L(je=>({...je,qr:!1})),800)}const Re=()=>{navigator.clipboard.writeText(p),L(Oe=>({...Oe,code:!0})),setTimeout(()=>L(Oe=>({...Oe,code:!1})),800)};return I.jsxs("div",{className:"lobby-progress-bar",style:{marginTop:"-1rem",height:"40px"},children:[I.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[I.jsx("div",{className:ue(y,!1),tabIndex:0,title:"Check-in phase",onClick:z,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Checkin"}),I.jsx(Tf,{direction:"down",show:$})]}),I.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[I.jsx("div",{className:ue(w,A&&!w),tabIndex:0,title:A?"Start rounds":"At least 2 players required",onClick:U,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"Start Rounds"}),I.jsx(Tf,{direction:"down",show:ce})]}),I.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[I.jsx("div",{className:ue(S,E&&!S),tabIndex:0,title:E?"End rounds":"Cannot end yet",onClick:H,style:{cursor:"pointer",width:"100%",color:"#f5f7ff",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",boxShadow:"0 7px 4px rgba(0, 0, 0, 0.1)"},children:"End Rounds"}),I.jsx(Tf,{direction:"down",show:q})]}),N&&I.jsx("div",{className:"progress-modal-overlay",children:I.jsx("div",{className:"progress-modal",children:N==="checkin"?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"progress-modal-title",children:"Have your attendees scan the QR code to join your lobby"}),I.jsx("div",{className:"progress-modal-message",children:"You can start when you have 6-10 people, don't worry new people can join in the next rounds."}),I.jsxs("div",{className:"progress-modal-qr",onClick:_e,style:{cursor:"pointer",position:"relative"},children:[I.jsx(Kd,{value:`${window.location.origin}/lobby?code=${p}`,size:200,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"modal-qr-svg"}),I.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",style:{position:"absolute",right:8,bottom:8,background:"#fff",borderRadius:"50%",padding:"2px"},children:I.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[I.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),I.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.qr&&I.jsx("span",{className:"modal-copied-feedback",style:{position:"absolute",left:"50%",bottom:"-1.5rem",transform:"translateX(-50%)",color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),I.jsxs("div",{className:`progress-modal-lobbycode${k.code?" copied":""}`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[I.jsxs("b",{children:["lobby code: ",p]}),I.jsx("span",{className:"copy-icon modal-copy-icon","aria-label":"Copy",onClick:Re,style:{cursor:"pointer"},children:I.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[I.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),I.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})}),k.code&&I.jsx("span",{className:"modal-copied-feedback",style:{color:"#28a745",fontWeight:600,fontSize:"0.95rem"},children:"Copied!"})]}),I.jsx("div",{className:"progress-modal-actions",children:I.jsx("button",{className:"progress-modal-btn confirm",onClick:le,children:"Got it"})})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"progress-modal-title",children:N==="start"?"Are you sure you want to start rounds?":"Are you sure you want to end the rounds?"}),I.jsx("div",{className:"progress-modal-actions",children:N==="start"?I.jsxs(I.Fragment,{children:[I.jsx("button",{className:"progress-modal-btn cancel",onClick:le,children:"Not Yet"}),I.jsx("button",{className:"progress-modal-btn confirm",onClick:J,children:"Start"})]}):I.jsxs(I.Fragment,{children:[I.jsx("button",{className:"progress-modal-btn cancel",onClick:le,children:"Keep Going"}),I.jsx("button",{className:"progress-modal-btn confirm danger",onClick:J,children:"End"})]})})]})})})]})},iS=({players:r})=>{const o=[...r.pairedPlayers?r.pairedPlayers.flat():[],...r.lobbyData?r.lobbyData:[]],a=10,d=o.slice(0,a),p=o.length-a,x=o.length;return I.jsxs("div",{className:"overlapping-profile-list-wrapper",style:{marginTop:"3rem"},children:[I.jsxs("div",{className:"overlapping-profile-list",children:[d.map((y,A)=>I.jsx("img",{src:y.pfp_data||"/assets/player_icon_trans.png",alt:y.name||"Player",className:"overlapping-profile-img",style:{zIndex:A+1}},y.username||y.name||A)),p>0&&I.jsxs("span",{className:"overlapping-profile-overflow",children:["+ ",p]})]}),I.jsxs("div",{className:"overlapping-profile-list-label",style:{marginTop:"0.5rem",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:["People joined: ",x]})]})},sS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=P.useContext(Vr),p=Ur(),x=yi(),y=!1,w=new URLSearchParams(x.search).get("code"),[E,S]=P.useState(w||"test");P.useEffect(()=>{w||(console.log("No lobby code found in URL, using default 'test' value"),(async()=>{try{const ct=localStorage.getItem("access_token"),dt=await fetch(window.server_url+"/view_my_active_lobbies",{headers:{Authorization:`Bearer ${ct}`}});if(dt.ok){const Me=await dt.json();if(console.log("Active lobbies response:",Me),Me&&Me.lobbies&&Me.lobbies.length>0){const At=Me.lobbies[0];S(At),window.history.replaceState({},"",`/admin_lobby_view?code=${At}`)}}}catch(ct){console.error("Error fetching active lobby:",ct)}})())},[w]);const[N,R]=P.useState(!1),[k,L]=P.useState(null),[B,j]=P.useState(!1),[U,H]=P.useState(null),[z,J]=P.useState(null),[le,ue]=P.useState(null),[$,ce]=P.useState(null),[q,_e]=P.useState(null),[Fe,Re]=P.useState({}),[Oe,ke]=P.useState([]),[ee,je]=P.useState(0),he=((z==null?void 0:z.length)||0)+((U==null?void 0:U.length)*2||0),[de,Te]=P.useState(!1);P.useEffect(()=>{if(a(),d!=="admin"&&d!=="organizer"){p("/");return}const ge=async dt=>{if(Fe[dt])return Fe[dt];try{const Me=await fetch(`${window.server_url}/pfp_small_icon?username=${encodeURIComponent(dt)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(Me.ok){let At=await Me.text();At.startsWith('"')&&At.endsWith('"')&&(At=At.slice(1,-1));const Bt=At.startsWith("data:image")?At:`data:image/jpeg;base64,${At}`;return Re(Gt=>({...Gt,[dt]:Bt})),Bt}return null}catch(Me){return console.error(`Error fetching profile picture for ${dt}:`,Me),null}},ct=setInterval(async()=>{try{const dt=await fetch(window.server_url+"/admin_lobby_data",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}});if(dt.ok){const Me=await dt.json();if(console.log("Admin lobby data:",E,Me),Me.lobby_state==="active"&&je(At=>Me.current_round>At?Me.current_round:At),Me.lobby_state==="terminated"&&je(0),Me&&Me.unpaired_players){const At=await Promise.all(Me.unpaired_players.map(async Gt=>{const Pt=await ge(Gt.username);return{...Gt,pfp_data:Pt}})),Bt=await Promise.all((Me.pairs_data||[]).map(async Gt=>{const Pt=await ge(Gt[0].username),bt=await ge(Gt[1].username);return[{...Gt[0],pfp_data:Pt},{...Gt[1],pfp_data:bt}]}));J(At),H(Bt),ue(Me.round_time_left),ce(Me.lobby_state),_e(Me.lobby_duration||300),ke(Me.custom_tags||[])}else console.error("Invalid lobby data structure:",Me),J([]),H([])}else console.error("Failed to fetch admin lobby data:",dt.status)}catch(dt){console.error("Error fetching admin lobby data:",dt)}},1e3);return()=>clearInterval(ct)},[Fe]);const fe=ge=>{L(ge),R(!0)},X=()=>{R(!1),L(null)},te=()=>{k&&fetch(window.server_url+"/kick_user",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({username:k.username,lobby_code:E})}).then(ge=>{ge.ok?console.log(`User ${k.name} kicked successfully`):console.error(`Failed to kick user ${k.name}`)}).catch(ge=>{console.error("Error kicking user:",ge)}).finally(()=>{X()})},Ee=()=>{j(!0)},Ve=()=>{j(!1)},st=()=>{p(`/lobby?code=${E}`),Ve()};async function we(){const ge=document.getElementById("admin-qr-svg");if(!ge)return;const dt=new XMLSerializer().serializeToString(ge),Me=new window.Image,At=512,Bt=document.createElement("canvas");Bt.width=At,Bt.height=At;const Gt=Bt.getContext("2d");Me.onload=()=>{Gt.clearRect(0,0,At,At),Gt.drawImage(Me,0,0,At,At),Bt.toBlob(Pt=>{navigator.clipboard&&navigator.clipboard.write?navigator.clipboard.write([new window.ClipboardItem({"image/png":Pt})]).then(()=>{gc.success("QR code copied to clipboard!")}).catch(()=>{$e(Pt)}):$e(Pt)},"image/png")},Me.onerror=()=>gc.error("Failed to generate QR code image."),Me.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(dt)))}function $e(ge){const ct=URL.createObjectURL(ge),dt=document.createElement("a");dt.href=ct,dt.download=`reuneo-lobby-${E}.png`,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),URL.revokeObjectURL(ct),gc.success("QR code downloaded!")}const ze=async()=>{await fetch(window.server_url+"/start_rounds",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})},mt=async()=>{(await fetch(window.server_url+"/terminate_lobby",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,lobby_code:E}})).ok&&p("/")};return I.jsxs(I.Fragment,{children:[I.jsx(eS,{position:"top-center"}),I.jsxs("div",{className:"admin-lobby-container",children:[y,I.jsx("div",{className:"admin-view-logo",style:{cursor:"pointer"},children:I.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reuneo Logo",style:{maxWidth:"85px",height:"auto",objectFit:"contain",transition:"transform 0.3s ease"},onClick:()=>p("/")})}),I.jsx(rS,{lobbyState:$,playerCount:he,onStart:ze,onEnd:mt,lobbyCode:E,currentRound:ee}),I.jsx(iS,{players:{pairedPlayers:U,lobbyData:z}}),I.jsxs("div",{className:"admin-lobby-dropdown-toggle",onClick:()=>Te(ge=>!ge),style:{cursor:"pointer",background:"var(--primary-color)",color:"#f5f7ff",fontWeight:700,textShadow:"1px 1px 2px rgba(0, 0, 0, 0.8)",fontSize:".75rem",borderRadius:de?"14px 14px 0 0":"14px",padding:"0.5rem 1rem",margin:"0 auto",maxWidth:420,boxShadow:"0 2px 8px rgba(20,77,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",letterSpacing:"0.5px"},children:[de?"Hide Controls":"More Controls",I.jsx("span",{style:{marginLeft:12,fontSize:"1.2em",transition:"transform 0.3s",display:"inline-block",transform:de?"rotate(180deg)":"rotate(0deg)"},children:"▼"})]}),I.jsxs("div",{className:"admin-lobby-body",style:{maxHeight:de?1e3:0,overflow:"hidden",transition:"max-height 0.5s cubic-bezier(0.4,0,0.2,1)",opacity:de?1:0,pointerEvents:de?"auto":"none",marginBottom:de?"2rem":0},children:[I.jsxs("div",{className:"admin-lobby-qr",onClick:we,style:{cursor:"pointer"},children:[I.jsxs("span",{className:"qr-label",style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:["People scan to join",I.jsx("span",{className:"copy-icon","aria-label":"Copy",children:I.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[I.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),I.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]}),I.jsx("div",{style:{position:"relative",display:"inline-block"},children:I.jsx(Kd,{value:`${window.location.origin}/lobby?code=${E}`,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#144dff",id:"admin-qr-svg"})}),I.jsxs("div",{className:"lobby-code-display",onClick:()=>{navigator.clipboard.writeText(E);const ge=document.querySelector(".lobby-code-display");ge.classList.add("copied"),setTimeout(()=>ge.classList.remove("copied"),250)},children:[I.jsx("span",{className:"lobby-code-label",children:"lobby code:"}),I.jsx("span",{className:"lobby-code-value",children:E}),I.jsx("span",{className:"copy-icon","aria-label":"Copy",children:I.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[I.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2.5"}),I.jsx("rect",{x:"2",y:"2",width:"13",height:"13",rx:"2.5"})]})})]})]}),I.jsxs("div",{className:"admin-lobby-event-settings",children:[I.jsxs("div",{className:"admin-profile",children:[I.jsx("img",{src:o!=null&&o.image_data?`data:image/jpeg;base64,${o.image_data}`:"/assets/player_icon_trans.png",alt:"Your Profile",className:"admin-profile-picture"}),I.jsx("span",{className:"admin-profile-name",children:o!=null&&o.name?o.name.slice(0,20):r==null?void 0:r.slice(0,20)})]}),I.jsx("button",{onClick:Ee,className:"page-control-button page-control-join",style:{marginTop:".5rem"},children:"Join Rounds"}),I.jsxs("div",{className:"setting-item",style:{padding:"1rem"},children:[I.jsxs("span",{className:"setting-label",children:["Round Duration: ",I.jsxs("span",{className:"setting-value",children:[Math.floor(q/60)," min"]})]}),I.jsx("span",{className:"setting-label",style:{},children:"Tags:"}),Oe&&Oe.length>0&&I.jsx("div",{className:"setting-item",children:I.jsxs("div",{className:"tags-container",children:[Oe.slice(0,3).map((ge,ct)=>I.jsx("span",{className:"tag-pill",children:ge},ct)),Oe.length>3&&I.jsxs("span",{className:"tag-pill more-tags",children:["+",Oe.length-3," more"]})]})})]})]}),I.jsx("div",{className:"admin-lobby-actions"})]}),($==="active"||$==="interrim")&&le&&I.jsx("div",{className:"admin-lobby-timer-container",children:I.jsxs("div",{className:"admin-lobby-timer-glass",children:[I.jsx(Zd,{isPlaying:$==="active",duration:q,initialRemainingTime:le,colors:["#144dff"],size:90,strokeWidth:12,trailColor:"url(#trailGradient)",onComplete:()=>({shouldRepeat:!1}),strokeLinecap:"round",children:({remainingTime:ge})=>{const ct=Math.floor(ge/60),dt=Math.floor(ge%60);return I.jsxs("span",{className:`timer-text ${ge<=10?"timer-text-fadescale":""}`,children:[ct,":",String(dt).padStart(2,"0")]})}},`${$}-${Math.floor(le)}`),I.jsx("span",{className:"timer-subtext",children:"round time left"}),I.jsx("svg",{width:"0",height:"0",children:I.jsx("defs",{children:I.jsxs("linearGradient",{id:"trailGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[I.jsx("stop",{offset:"0%",stopColor:"#e0e7ff"}),I.jsx("stop",{offset:"100%",stopColor:"#f5f7ff"})]})})})]})}),$!=="checkin"&&I.jsxs("div",{className:"admin-lobby-stats",children:[I.jsxs("div",{className:"stat-card",children:[I.jsx("div",{className:"stat-title",children:"Total Players"}),I.jsx("div",{className:"stat-value",children:((z==null?void 0:z.length)||0)+((U==null?void 0:U.length)*2||0)})]}),I.jsxs("div",{className:"stat-card",children:[I.jsx("div",{className:"stat-title",children:"Paired Players"}),I.jsx("div",{className:"stat-value",children:(U==null?void 0:U.length)*2||0})]}),I.jsxs("div",{className:"stat-card",children:[I.jsx("div",{className:"stat-title",children:"Unpaired Players"}),I.jsx("div",{className:"stat-value",children:(z==null?void 0:z.length)||0})]})]}),U&&$!=="checkin"&&I.jsx("div",{className:"admin-lobby-players",children:I.jsxs("div",{className:"player-section",children:[I.jsxs("div",{className:"section-header",children:["Paired Players: ",I.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(U==null?void 0:U.length)*2||0})]}),I.jsx("div",{className:"player-grid",children:U.map((ge,ct)=>I.jsxs("div",{className:"paired-player-card",children:[I.jsxs("div",{className:"paired-player",onClick:()=>fe(ge[0]),children:[I.jsx("img",{src:ge[0].pfp_data,alt:ge[0].name,className:"paired-player-avatar"}),I.jsx("h3",{className:"paired-player-name",children:ge[0].name})]}),I.jsxs("div",{className:"paired-player",onClick:()=>fe(ge[1]),children:[I.jsx("img",{src:ge[1].pfp_data,alt:ge[1].name,className:"paired-player-avatar"}),I.jsx("h3",{className:"paired-player-name",children:ge[1].name})]})]},ct))})]})}),z&&I.jsx("div",{className:"admin-lobby-players",children:I.jsxs("div",{className:"player-section",children:[I.jsxs("div",{className:"section-header",children:[$==="checkin"?"People Joined":"Unpaired Players",": ",I.jsx("span",{className:"stat-value",style:{fontSize:"1.3rem"},children:(z==null?void 0:z.length)||0})]}),I.jsx("div",{className:"player-grid",children:z.map((ge,ct)=>I.jsxs("div",{className:"player-card",onClick:()=>fe(ge),children:[I.jsx("img",{src:ge.pfp_data,alt:ge.name,className:"player-avatar"}),I.jsx("h3",{className:"player-name",children:ge.name})]},ct))})]})}),I.jsx(nS,{isOpen:B,onClose:Ve,onConfirm:st}),I.jsx(tS,{isOpen:N,onClose:X,onConfirm:te,userName:(k==null?void 0:k.name)||"this user"})]})]})},oS=()=>{const r=Ur(),{user:o}=P.useContext(Vr),a=()=>{window.location.href="https://reunio.app/become-an-organizer"};return I.jsxs("div",{className:"product-selection-container",children:[I.jsxs("video",{className:"background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[I.jsx("source",{src:"/assets/purchase_plan_video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),I.jsxs("div",{className:"product-selection-content",children:[I.jsx("div",{className:"product-selection-header",children:I.jsx("h1",{children:"Product Selection"})}),I.jsxs("div",{className:"plans-section",children:[I.jsx("h2",{children:"Available Plans"}),I.jsxs("div",{className:"plan-card",children:[I.jsx("h3",{children:"Organizer Plan"}),I.jsxs("div",{className:"plan-description",children:[I.jsx("p",{children:"Create experiences for your community with our beta plan."}),I.jsxs("ul",{children:[I.jsx("li",{children:"Create unlimited experiences"}),I.jsx("li",{children:"Access to organizer dashboard"}),I.jsx("li",{children:"Priority customer support"})]})]}),I.jsx("button",{className:"purchase-button",onClick:a,children:"Contact Us"})]})]}),I.jsx("button",{className:"back-button",onClick:()=>r("/"),children:"Home"})]})]})},aS=()=>{const{user:r,userProfile:o,checkAuth:a,permissions:d}=P.useContext(Vr),[p,x]=P.useState(""),[y,A]=P.useState(""),[w,E]=P.useState(!1),[S,N]=P.useState(""),[R,k]=P.useState(!1),[L,B]=P.useState([]),[j,U]=P.useState(""),[H,z]=P.useState("5"),[J,le]=P.useState("0"),[ue,$]=P.useState(!1),[ce,q]=P.useState(null),[_e,Fe]=P.useState(""),[Re,Oe]=P.useState(""),[ke,ee]=P.useState(null),[je,he]=P.useState(null),[de,Te]=P.useState(""),[fe,X]=P.useState(!1),[te,Ee]=P.useState(!1),[Ve,st]=P.useState({x:0,y:0}),[we,$e]=P.useState(1),[ze,mt]=P.useState(null),ge=8,ct=Ur(),dt=P.useRef(null);P.useEffect(()=>{window.scrollTo(0,0),r&&(x(r),A(r)),dt.current&&dt.current.focus()},[r]);const Me=ve=>{const Pe=/^[a-z0-9]+$/;return ve.length>=2&&Pe.test(ve)},At=ve=>{const Pe=ve.target.value.toLowerCase().replace(/[^a-z0-9]/g,"");A(Pe),k(!0),setTimeout(()=>{k(!1)},500)},Bt=()=>{j.trim()&&!L.includes(j.trim())&&(B([...L,j.trim()]),U(""))},Gt=ve=>{B(L.filter(Pe=>Pe!==ve))},Pt=ve=>{ve.key==="Enter"&&j.trim()&&(ve.preventDefault(),Bt())},bt=(ve,Pe,Qe)=>new Promise(jt=>{const yt=new Image;yt.onload=()=>{const pt=document.createElement("canvas"),rn=pt.getContext("2d");let{width:Mt,height:zt}=yt;Mt>zt?Mt>Pe&&(zt=zt*Pe/Mt,Mt=Pe):zt>Qe&&(Mt=Mt*Qe/zt,zt=Qe),pt.width=Mt,pt.height=zt,rn.drawImage(yt,0,0,Mt,zt);const It=pt.toDataURL("image/jpeg",.7);jt(It)},yt.src=URL.createObjectURL(ve)}),ht=async ve=>{const Pe=ve.target.files[0];if(Pe){if(Te(""),Ee(!0),!["image/jpeg","image/jpg","image/png"].includes(Pe.type)){Te("Invalid format. Please upload a JPG or PNG image."),Ee(!1);return}if(Pe.size>2*1024*1024){Te("File too large. Please choose an image under 2MB."),Ee(!1);return}try{const Qe=await bt(Pe,400,400);q(Pe),ee(Qe),X(!0),Ee(!1)}catch(Qe){console.error("Error processing image:",Qe),Te("Error processing image. Please try again."),Ee(!1)}}},Dn=(ve,Pe)=>{mt(Pe)},Ne=async()=>{try{Ee(!0);const ve=await id(ke,ze);he(ve),X(!1),Ee(!1)}catch(ve){console.error("Error cropping logo:",ve),Te("Error processing image. Please try again."),X(!1),Ee(!1)}},Xn=()=>{q(null),ee(null),he(null),X(!1),Ee(!1),st({x:0,y:0}),$e(1),mt(null),Te("");const ve=document.getElementById("logoUpload");ve&&(ve.value="")},wt=async ve=>{if(ve.preventDefault(),!Me(y)){N("Lobby code must be at least 2 characters long and contain only lowercase letters and numbers");return}E(!0),N("");const Pe=parseInt(H)*60+parseInt(J);let Qe=null;je&&(Qe=je.split(",")[1]);try{const jt={lobby_code:y,custom_tags:L,lobby_duration:Pe,show_table_numbers:ue};Qe&&(jt.logo_icon=Qe),_e.trim()&&(jt.logo_name=_e.trim()),Re.trim()&&(jt.logo_hyperlink=Re.trim());const yt=await fetch(window.server_url+"/create_lobby",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(jt)});if(yt.ok)console.log("Lobby created successfully"),console.log(await yt.json()),ct(`/admin_lobby_view?code=${y}`);else{const pt=await yt.json();N(pt.message||"Failed to create lobby"),console.error("Failed to create lobby")}}catch(jt){N("An error occurred while creating the lobby"),console.error("Error creating lobby:",jt)}finally{E(!1)}};return I.jsxs("div",{className:"create-lobby-background",children:[I.jsx("img",{src:"/assets/reuneo_test_9.png",alt:"Reunio Logo",className:"logo-image",onClick:()=>ct(-1)}),I.jsxs("div",{className:"create-lobby-container",children:[I.jsx("h1",{className:"create-lobby-title",children:"Create a New Lobby"}),I.jsxs("form",{onSubmit:wt,className:"create-lobby-form",children:[I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"lobbyCode",children:"Lobby Code"}),I.jsx("input",{ref:dt,type:"text",id:"lobbyCode",value:y,onChange:At,placeholder:"Enter lobby code (lowercase letters and numbers only)",required:!0,className:`form-input ${R?"typing":""}`,autoComplete:"off"}),I.jsx("div",{className:"input-hint",children:"lowercase letters and numbers only"})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{children:"Round Duration"}),I.jsxs("div",{className:"duration-input-container",children:[I.jsxs("div",{className:"duration-input-group",children:[I.jsx("input",{type:"number",id:"minutes",value:H,onChange:ve=>{const Pe=ve.target.value;(Pe===""||parseInt(Pe)>0&&parseInt(Pe)<=ge)&&(z(Pe),parseInt(Pe)===ge&&le("0"))},min:"1",max:ge,placeholder:`1-${ge}`,className:"form-input duration-input",autoComplete:"off"}),I.jsx("label",{htmlFor:"minutes",className:"duration-label",children:"Minutes"})]}),I.jsxs("div",{className:"duration-input-group",children:[I.jsx("input",{type:"number",id:"seconds",value:J,onChange:ve=>{const Pe=ve.target.value;(Pe===""||parseInt(Pe)>=0&&parseInt(Pe)<=59)&&le(Pe)},min:"0",max:"59",placeholder:"0-59",className:"form-input duration-input",autoComplete:"off",disabled:parseInt(H)===ge}),I.jsx("label",{htmlFor:"seconds",className:"duration-label",children:"Seconds"})]})]}),I.jsxs("div",{className:"input-hint",children:["Maximum total duration is ",ge," minutes"]})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"showTableNumbers",children:"Table Numbers"}),I.jsx("input",{type:"checkbox",id:"showTableNumbers",checked:ue,onChange:ve=>$(ve.target.checked),className:"form-input checkbox-input"}),I.jsx("div",{className:"input-hint",children:"Recommended for events with 50+ people"}),I.jsx("div",{className:"input-hint",children:"Make sure to provide table numbers"})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"tagInput",children:"Matchmaking Categories"}),I.jsxs("div",{className:"tag-input-container",children:[I.jsx("input",{type:"text",id:"tagInput",value:j,onChange:ve=>U(ve.target.value),onKeyDown:Pt,placeholder:"Add categories (press + to add)",className:"form-input",autoComplete:"off"}),I.jsx("button",{type:"button",onClick:Bt,className:"tag-add-button",children:"+"})]}),L.length>0&&I.jsx("div",{className:"tag-list",children:L.map((ve,Pe)=>I.jsxs("div",{className:"tag-item",children:[ve,I.jsx("button",{type:"button",onClick:()=>Gt(ve),className:"tag-remove-button",children:"×"})]},Pe))}),I.jsx("div",{className:"input-hint",children:"If you want to match people based on categories"})]}),I.jsxs("div",{className:"form-group logo-upload-section",children:[I.jsx("label",{children:"Sponsor Logo"}),!je&&!fe&&I.jsxs(I.Fragment,{children:[te?I.jsx("div",{className:"logo-processing",children:"Processing..."}):I.jsxs(I.Fragment,{children:[I.jsx("input",{type:"file",id:"logoUpload",accept:"image/jpeg,image/jpg,image/png",onChange:ht,style:{display:"none"}}),I.jsx("button",{type:"button",onClick:()=>document.getElementById("logoUpload").click(),className:"logo-upload-button",children:"Upload Logo"})]}),de&&I.jsx("div",{className:"logo-error-message",children:de})]}),fe&&ke&&I.jsxs("div",{className:"logo-crop-container",children:[I.jsx("div",{className:"logo-crop-area",children:I.jsx(rd,{image:ke,crop:Ve,zoom:we,aspect:1,onCropChange:st,onZoomChange:$e,onCropComplete:Dn})}),I.jsxs("div",{className:"logo-crop-controls",children:[I.jsx("button",{type:"button",onClick:Ne,className:"logo-save-button",disabled:te,children:te?"Processing...":"Save Crop"}),I.jsx("button",{type:"button",onClick:Xn,className:"logo-cancel-button",children:"Cancel"})]})]}),je&&!fe&&I.jsx("div",{className:"logo-preview-container",children:I.jsxs("div",{className:"logo-preview",children:[I.jsx("img",{src:je,alt:"Logo preview",className:"logo-preview-image"}),I.jsx("button",{type:"button",onClick:Xn,className:"logo-remove-button",children:"×"})]})}),!1]}),S&&I.jsx("div",{className:"error-message",children:S}),I.jsx("button",{type:"submit",className:"submit-button",disabled:w,children:w?"Creating...":"Create Lobby"})]})]})]})},lS=5e3,cS=()=>{const{checkAuth:r,permissions:o,user:a}=P.useContext(Vr),d=Ur(),[p,x]=P.useState([]),[y,A]=P.useState(!0),[w,E]=P.useState(null),[S,N]=P.useState(!1);return P.useEffect(()=>{r()},[r]),P.useEffect(()=>{a==="topaz"&&o==="admin"?N(!0):o!==null&&a!==null&&d("/")},[o,a,d]),P.useEffect(()=>{if(!S)return;let R=!0,k,L=!0;const B=async()=>{L&&A(!0),E(null);try{const j=localStorage.getItem("access_token");if(!j)return;const U=await fetch(window.server_url+"/admin_all_lobbies",{headers:{Authorization:`Bearer ${j}`}});if(!U.ok)throw new Error("Failed to fetch lobbies");const H=await U.json();if(H.status!=="success"||!Array.isArray(H.lobbies))throw new Error("Invalid response format");if(!R)return;x(H.lobbies),console.log("Received lobbies data:",H.lobbies)}catch(j){R&&E(j.message||"Error fetching lobbies")}finally{R&&L&&A(!1),L=!1,k=setTimeout(B,lS)}};return B(),()=>{R=!1,k&&clearTimeout(k)}},[S]),y?I.jsx("div",{className:"master-lobby-container",children:I.jsxs("div",{className:"loading-state",children:[I.jsx("div",{className:"loading-spinner"}),I.jsx("p",{children:"Loading lobbies..."})]})}):w&&p.length===0?I.jsx("div",{className:"master-lobby-container",children:I.jsx("div",{className:"error-state",children:I.jsx("p",{children:w})})}):p.length===0?I.jsx("div",{className:"master-lobby-container",children:I.jsx("div",{className:"empty-state",children:I.jsx("p",{children:"No active lobbies found"})})}):I.jsxs("div",{className:"master-lobby-container",children:[w&&I.jsxs("div",{className:"error-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.25rem",border:"1px solid #f5c6cb"},children:[w," (showing last known data)"]}),I.jsx("div",{className:"master-lobby-grid",children:p.map(R=>I.jsx("div",{className:"lobby-tile",children:I.jsxs("div",{className:"lobby-tile-content",children:[I.jsx("h3",{className:"lobby-code",children:R.code}),I.jsxs("div",{className:"lobby-stats",children:[I.jsxs("span",{className:"player-count",children:[R.player_count," players"]}),I.jsx("span",{className:"lobby-state",children:R.lobby_state})]}),I.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.5rem"},children:["Debug: player_count=",R.player_count,", lobby_state=",R.lobby_state]})]})},R.code))})]})};$x.createRoot(document.getElementById("root")).render(I.jsx(P.StrictMode,{children:I.jsx(qx,{children:I.jsxs(ky,{basename:"/",children:[I.jsx(FE,{}),I.jsxs(fy,{children:[I.jsx(fi,{path:"/",element:I.jsx(BE,{})}),I.jsx(fi,{path:"/login",element:I.jsx(jE,{})}),I.jsx(fi,{path:"/signup",element:I.jsx(RE,{})}),I.jsx(fi,{path:"/logout",element:I.jsx(VE,{})}),I.jsx(fi,{path:"/lobby",element:I.jsx(uA,{})}),I.jsx(fi,{path:"/admin_lobby_view",element:I.jsx(sS,{})}),I.jsx(fi,{path:"/create_lobby",element:I.jsx(aS,{})}),I.jsx(fi,{path:"/product-selection",element:I.jsx(oS,{})}),I.jsx(fi,{path:"/master_lobby_view",element:I.jsx(cS,{})})]})]})})}));
